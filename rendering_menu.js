const _0x16aed7=_0x359d;(function(_0x1ecd7b,_0x307ca1){const _0x2cb81f=_0x359d,_0x18dfe3=_0x1ecd7b();while(!![]){try{const _0x873ace=-parseInt(_0x2cb81f(0x1ee))/0x1*(-parseInt(_0x2cb81f(0x256))/0x2)+parseInt(_0x2cb81f(0x1f4))/0x3*(-parseInt(_0x2cb81f(0x1cf))/0x4)+-parseInt(_0x2cb81f(0x1ce))/0x5*(-parseInt(_0x2cb81f(0x205))/0x6)+parseInt(_0x2cb81f(0x22d))/0x7+parseInt(_0x2cb81f(0x258))/0x8+-parseInt(_0x2cb81f(0x276))/0x9+-parseInt(_0x2cb81f(0x287))/0xa*(parseInt(_0x2cb81f(0x1cd))/0xb);if(_0x873ace===_0x307ca1)break;else _0x18dfe3['push'](_0x18dfe3['shift']());}catch(_0x46ce77){_0x18dfe3['push'](_0x18dfe3['shift']());}}}(_0x14eb,0xe6754));const MENU_LOGO_APPROX_HEIGHT=0x55,MENU_SUBTITLE_TEXT=_0x16aed7(0x227),MENU_SUBTITLE_FONT=_0x16aed7(0x1e6),MENU_SUBTITLE_COLOR='darkred',MENU_BUTTON_FONT=_0x16aed7(0x1dc),MENU_BUTTON_COLOR=_0x16aed7(0x237),MENU_BUTTON_COLOR_HOVER=_0x16aed7(0x223),MENU_BUTTON_WIDTH=0x12c,MENU_BUTTON_HEIGHT=0x37,MENU_LOGO_BOTTOM_TO_START_GAP=0x5,MENU_BUTTON_V_GAP=-0xf,MENU_BUTTON_SUBTITLE_V_GAP=-0x0,MENU_SCORE_FONT=_0x16aed7(0x277),MENU_SCORE_COLOR=_0x16aed7(0x237),MENU_SCORE_LABEL_COLOR=_0x16aed7(0x226),GAME_OVER_FONT=_0x16aed7(0x1bd),GAME_OVER_COLOR='rgba(0,\x20191,\x20255,\x200.9)',GAME_OVER_SHADOW=!![],DEMO_TEXT_LINE1_FONT='bold\x2018px\x20\x27Press\x20Start\x202P\x27',DEMO_TEXT_COLOR=_0x16aed7(0x223),DEMO_TEXT_BLINK_ON_MS=0x3e8,DEMO_TEXT_BLINK_OFF_MS=0x3e8,DEMO_TEXT_BLINK_CYCLE_MS=DEMO_TEXT_BLINK_ON_MS+DEMO_TEXT_BLINK_OFF_MS,LOGO_SCALE_FACTOR=0.45,MENU_LOGO_EXTRA_Y_OFFSET=0x0,MENU_GENERAL_Y_OFFSET=0x32,INTRO_TEXT_FONT=_0x16aed7(0x1bd),INTRO_TEXT_COLOR_NORMAL=_0x16aed7(0x223),INTRO_TEXT_COLOR_DARK_YELLOW=_0x16aed7(0x22c),INTRO_TEXT_COLOR_CS_TEXT=INTRO_TEXT_COLOR_NORMAL,PERFECT_TEXT_COLOR=_0x16aed7(0x226),EXTRA_LIFE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,READY_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_BONUS_SCORE_TEXT_COLOR=INTRO_TEXT_COLOR_DARK_YELLOW,CS_CLEAR_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_HITS_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_CLEAR_SCORE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,PAUSE_TEXT_FONT=INTRO_TEXT_FONT,PAUSE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,PAUSE_TEXT_SHADOW=!![],RESULTS_SCREEN_DURATION=0x4e20,PLAYER_GAME_OVER_MESSAGE_DURATION=0x1388,SCORE_SCREEN_TEXT_FONT=INTRO_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_TOP=INTRO_TEXT_COLOR_NORMAL,SCORE_SCREEN_TEXT_COLOR_BONUS=INTRO_TEXT_COLOR_DARK_YELLOW,SCORE_SCREEN_LINE_V_SPACING=0x28,SCORE_SCREEN_ICON_TEXT_H_SPACING=0xf,SCORE_SCREEN_VERTICAL_OFFSET=0x4b,RESULTS_HEADER_COLOR=_0x16aed7(0x24b),RESULTS_VALUE_COLOR_YELLOW=INTRO_TEXT_COLOR_DARK_YELLOW,RESULTS_LABEL_COLOR=_0x16aed7(0x237),RESULTS_VALUE_COLOR_CYAN=INTRO_TEXT_COLOR_NORMAL,RESULTS_LINE_V_SPACING_SINGLE=0x23,RESULTS_LINE_V_SPACING_DOUBLE=0x5a,RESULTS_START_Y=0x9b,RESULTS_FOOTER_FONT=MENU_SUBTITLE_FONT,RESULTS_FOOTER_COLOR=RESULTS_HEADER_COLOR,CS_MESSAGE_VERTICAL_OFFSET=0x1e;function getSubtitleApproxHeight(_0x5d21e9){const _0x5602d6=_0x16aed7,_0x5f078b=_0x5d21e9[_0x5602d6(0x26d)](/(\d+)px/);return _0x5f078b?.[0x1]?parseInt(_0x5f078b[0x1],0xa):0x19;}function formatMillisecondsToMMSS(_0x270e0d){const _0x588418=_0x16aed7;if(_0x270e0d<=0x0||typeof _0x270e0d!=='number'||!isFinite(_0x270e0d))return _0x588418(0x233);const _0x6d014e=Math[_0x588418(0x1d1)](_0x270e0d/0x3e8),_0x4200f2=Math[_0x588418(0x1d1)](_0x6d014e/0x3c),_0xe04b57=_0x6d014e%0x3c,_0x5d718b=String(_0x4200f2)[_0x588418(0x24f)](0x2,'0'),_0x2c8ea6=String(_0xe04b57)[_0x588418(0x24f)](0x2,'0');return _0x5d718b+':'+_0x2c8ea6;}function getMenuButtonRect(_0x1da754){const _0x1c594d=_0x16aed7;if(!gameCtx||!gameCanvas||gameCanvas[_0x1c594d(0x1df)]===0x0||gameCanvas[_0x1c594d(0x248)]===0x0)return null;const _0x1bd793=gameCanvas[_0x1c594d(0x1df)],_0x21d339=gameCanvas[_0x1c594d(0x248)],_0x3d0ada=_0x1bd793/0x2-MENU_BUTTON_WIDTH/0x2-0x1;let _0xd1cff5=MENU_LOGO_APPROX_HEIGHT;typeof logoImage!==_0x1c594d(0x1ea)&&logoImage[_0x1c594d(0x20e)]&&logoImage[_0x1c594d(0x26e)]!==0x0&&(_0xd1cff5=logoImage['naturalHeight']*LOGO_SCALE_FACTOR);const _0x1a13c6=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x1cbdc6=_0xd1cff5+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x1a13c6;let _0x126268=(_0x21d339-_0x1cbdc6)/0x2-0x46;_0x126268+=MENU_GENERAL_Y_OFFSET;const _0x534007=_0x126268+_0xd1cff5+MENU_LOGO_BOTTOM_TO_START_GAP,_0xe51606=_0x534007+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP;if(_0x1da754===0x0)return{'x':_0x3d0ada,'y':Math[_0x1c594d(0x21b)](_0x534007),'width':MENU_BUTTON_WIDTH,'height':MENU_BUTTON_HEIGHT};else{if(_0x1da754===0x1)return{'x':_0x3d0ada,'y':Math[_0x1c594d(0x21b)](_0xe51606),'width':MENU_BUTTON_WIDTH,'height':MENU_BUTTON_HEIGHT};}return null;}function pollControllerForMenu(){const _0x2e5563=_0x16aed7;try{if(connectedGamepadIndex===null&&connectedGamepadIndexP2===null){joystickMovedVerticallyLastFrame=![];if(previousButtonStates[_0x2e5563(0x22e)]>0x0)previousButtonStates=[];if(previousGameButtonStates[_0x2e5563(0x22e)]>0x0)previousGameButtonStates=[];if(previousGameButtonStatesP2[_0x2e5563(0x22e)]>0x0)previousGameButtonStatesP2=[];return;}let _0x154d73=connectedGamepadIndex!==null?connectedGamepadIndex:connectedGamepadIndexP2;if(_0x154d73===null)return;const _0xca321f=navigator[_0x2e5563(0x1f8)]();if(!_0xca321f?.[_0x154d73])return;const _0x456979=_0xca321f[_0x154d73],_0x17ebf8=_0x456979['buttons'][_0x2e5563(0x1e2)](_0x3996fc=>_0x3996fc[_0x2e5563(0x244)]),_0x21bcf1=_0x17ebf8,_0x1e0f05=_0x17ebf8;let _0x2940e6=![];const _0x96882d=Date[_0x2e5563(0x252)]();let _0x20e685=![];(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0)&&(_0x20e685=!![]);if(_0x20e685){connectedGamepadIndex!==null&&(previousButtonStates=_0x21bcf1['slice'](),previousGameButtonStates=_0x1e0f05[_0x2e5563(0x23a)]());if(connectedGamepadIndexP2!==null){const _0x2e36fc=navigator[_0x2e5563(0x1f8)]();_0x2e36fc?.[connectedGamepadIndexP2]&&(previousGameButtonStatesP2=_0x2e36fc[connectedGamepadIndexP2][_0x2e5563(0x216)][_0x2e5563(0x1e2)](_0x11d437=>_0x11d437['pressed']));}return;}if(isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){const _0x9fb577=_0x1e0f05[PS5_BUTTON_TRIANGLE],_0x263319=previousGameButtonStates[PS5_BUTTON_TRIANGLE]??![];_0x9fb577&&!_0x263319&&(stopGameAndShowMenu(),_0x2940e6=!![]);}if(!_0x2940e6&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){const _0x5477c5=_0x1e0f05[PS5_BUTTON_R1],_0x513d84=previousGameButtonStates[PS5_BUTTON_R1]??![];if(_0x5477c5&&!_0x513d84){if(typeof togglePause===_0x2e5563(0x1e8))togglePause();_0x2940e6=!![];}}if(!_0x2940e6){const _0x42904d=isShowingScoreScreen||isShowingResultsScreen;if(_0x42904d){let _0x16a086=![];for(let _0x34ea36=0x0;_0x34ea36<_0x21bcf1['length'];_0x34ea36++){if(_0x34ea36===PS5_BUTTON_R1||_0x34ea36===PS5_BUTTON_TRIANGLE)continue;const _0x1f1260=previousButtonStates[_0x34ea36]??![];if(_0x21bcf1[_0x34ea36]&&!_0x1f1260){_0x16a086=!![];break;}}if(_0x16a086){if(typeof showMenuState===_0x2e5563(0x1e8))showMenuState();_0x2940e6=!![];}}else{if(!isInGameState&&!_0x2940e6){const _0x3b764f=_0x21bcf1[PS5_BUTTON_CROSS],_0xd46d0=previousButtonStates[PS5_BUTTON_CROSS]??![],_0x221f7e=_0x21bcf1[PS5_BUTTON_CIRCLE],_0x3df52f=previousButtonStates[PS5_BUTTON_CIRCLE]??![],_0x4ecfed=_0x456979[_0x2e5563(0x259)][PS5_LEFT_STICK_Y]??0x0,_0xfd87b5=_0x21bcf1[PS5_DPAD_UP],_0x4b95d7=_0x21bcf1[PS5_DPAD_DOWN];let _0x1e5116=0x0;if(_0x4ecfed<-AXIS_DEAD_ZONE_MENU||_0xfd87b5)_0x1e5116=-0x1;else{if(_0x4ecfed>AXIS_DEAD_ZONE_MENU||_0x4b95d7)_0x1e5116=0x1;}let _0x37cc33=_0x1e5116!==0x0;if(_0x37cc33&&!joystickMovedVerticallyLastFrame){let _0x3e54bf=selectedButtonIndex;const _0x5ab780=0x2;_0x3e54bf===-0x1?_0x3e54bf=_0x1e5116===0x1?0x0:_0x5ab780-0x1:_0x3e54bf+=_0x1e5116;if(_0x3e54bf<0x0)_0x3e54bf=_0x5ab780-0x1;if(_0x3e54bf>=_0x5ab780)_0x3e54bf=0x0;_0x3e54bf!==selectedButtonIndex&&(selectedButtonIndex=_0x3e54bf,startAutoDemoTimer());}joystickMovedVerticallyLastFrame=_0x37cc33;if(_0x3b764f&&!_0xd46d0){stopAutoDemoTimer();if(isFiringModeSelectMode)selectedButtonIndex===0x0?selectedFiringMode=_0x2e5563(0x239):selectedFiringMode=_0x2e5563(0x250),baseStartGame(!![]),_0x2940e6=!![];else{if(isPlayerSelectMode)selectedButtonIndex===0x0?startGame1P():startGame2P(),_0x2940e6=!![];else{if(selectedButtonIndex===0x0)isPlayerSelectMode=!![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x2940e6=!![];else selectedButtonIndex===0x1&&(exitGame(),_0x2940e6=!![]);}}}if(!_0x2940e6&&_0x221f7e&&!_0x3df52f){stopAutoDemoTimer();if(isFiringModeSelectMode)isFiringModeSelectMode=![],isPlayerSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x2940e6=!![];else isPlayerSelectMode?(isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x2940e6=!![]):(triggerFullscreen(),playSound(menuMusicSound,!![]),_0x2940e6=!![]);}}}}connectedGamepadIndex!==null&&(previousButtonStates=_0x21bcf1[_0x2e5563(0x23a)](),previousGameButtonStates=_0x1e0f05[_0x2e5563(0x23a)]());if(connectedGamepadIndexP2!==null){const _0x5c5bd9=navigator['getGamepads']();_0x5c5bd9?.[connectedGamepadIndexP2]&&(previousGameButtonStatesP2=_0x5c5bd9[connectedGamepadIndexP2][_0x2e5563(0x216)][_0x2e5563(0x1e2)](_0x5b76fa=>_0x5b76fa[_0x2e5563(0x244)]));}}catch(_0x18df3c){console[_0x2e5563(0x1c8)](_0x2e5563(0x1f6),_0x18df3c),previousButtonStates=[],previousGameButtonStates=[],previousGameButtonStatesP2=[],selectedButtonIndex=-0x1,joystickMovedVerticallyLastFrame=![];}}function startAutoDemoTimer(){const _0x1341f8=_0x16aed7;try{stopAutoDemoTimer(),autoStartTimerId=setTimeout(()=>{!isInGameState&&!isShowingScoreScreen?(isPlayerSelectMode=![],isFiringModeSelectMode=![],showScoreScreen()):autoStartTimerId=null;},MENU_INACTIVITY_TIMEOUT);}catch(_0x52c200){console[_0x1341f8(0x1c8)]('Error\x20starting\x20auto\x20demo\x20timer:',_0x52c200);}}function stopAutoDemoTimer(){const _0x22532d=_0x16aed7;try{autoStartTimerId&&(clearTimeout(autoStartTimerId),autoStartTimerId=null);}catch(_0x365e3e){console[_0x22532d(0x1c8)](_0x22532d(0x234),_0x365e3e);}}function showScoreScreen(){if(isInGameState||isShowingScoreScreen)return;stopAutoDemoTimer(),isShowingScoreScreen=!![],isPlayerSelectMode=![],isFiringModeSelectMode=![],scoreScreenStartTime=Date['now'](),selectedButtonIndex=-0x1;}function showMenuState(){const _0x5832e7=_0x16aed7;try{wasLastGameAIDemo&&(highScore=0x4e20),wasLastGameAIDemo=![],isInGameState=![],isShowingScoreScreen=![],scoreScreenStartTime=0x0,isManualControl=![],isShowingDemoText=![],isPaused=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedFiringMode=_0x5832e7(0x239),isTwoPlayerMode=![],currentPlayer=0x1,showCsHitsMessage=![],csHitsMessageStartTime=0x0,showPerfectMessage=![],perfectMessageStartTime=0x0,showCsBonusScoreMessage=![],csBonusScoreMessageStartTime=0x0,showCSClearMessage=![],csClearMessageStartTime=0x0,showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,showReadyMessage=![],readyMessageStartTime=0x0,readyForNextWave=![],readyForNextWaveReset=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],stopAllGameSounds(),stopSound(resultsMusicSound),stopSound(startSound),stopSound(levelUpSound),stopSound(entranceSound),isGridSoundPlaying=![],playerLives=0x3,score=0x0,level=0x1,player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,scoreEarnedThisCS=0x0,enemies=[],bullets=[],enemyBullets=[],explosions=[],isShowingIntro=![],introStep=0x0,isChallengingStage=![],challengingStageEnemiesHit=0x0,currentGridOffsetX=0x0,gridMoveDirection=0x1,currentWaveDefinition=null,isEntrancePhaseActive=![],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,typeof enemySpawnTimeouts!==_0x5832e7(0x1ea)&&Array[_0x5832e7(0x208)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x5832e7(0x235)](clearTimeout),enemySpawnTimeouts=[],lastEnemyDetachTime=0x0,selectedButtonIndex=-0x1,joystickMovedVerticallyLastFrame=![],previousButtonStates=[],previousGameButtonStates=[],previousDemoButtonStates=[],previousGameButtonStatesP2=[],isShowingResultsScreen=![],gameOverSequenceStartTime=0x0,gameStartTime=0x0,forceCenterShipNextReset=![],player1CompletedLevel=-0x1,p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isTouching=![],touchCurrentX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas[_0x5832e7(0x248)]>0x0&&(ship['x']=Math['round'](gameCanvas[_0x5832e7(0x1df)]/0x2-SHIP_WIDTH/0x2),ship[_0x5832e7(0x23b)]=ship['x'],ship['y']=gameCanvas[_0x5832e7(0x248)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN),clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0),playSound(menuMusicSound,!![]),startAutoDemoTimer();}catch(_0x283d8f){console[_0x5832e7(0x1c8)]('Error\x20in\x20showMenuState:',_0x283d8f),wasLastGameAIDemo=![],isInGameState=![],isShowingScoreScreen=![],isPaused=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],isTwoPlayerMode=![],currentPlayer=0x1,isShowingPlayerGameOverMessage=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isTouching=![],touchCurrentX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],clearTimeout(mouseIdleTimerId),mouseIdleTimerId=null;if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x5832e7(0x21c)),document['body'][_0x5832e7(0x260)]=_0x5832e7(0x23f);}}function startAIDemo(){const _0x54f581=_0x16aed7;if(isInGameState)return;stopSound(menuMusicSound),isShowingScoreScreen=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedFiringMode=_0x54f581(0x239),isTwoPlayerMode=![],isManualControl=![],isShowingDemoText=!![],wasLastGameAIDemo=!![],baseStartGame(![]),gameJustStarted=!![];}function startGame1P(){if(isInGameState)return;isTwoPlayerMode=![],isPlayerSelectMode=![],isFiringModeSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer();}function startGame2P(){if(isInGameState)return;isTwoPlayerMode=!![],isPlayerSelectMode=![],isFiringModeSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer();}function baseStartGame(_0x56ab37){const _0x570725=_0x16aed7;try{if(!gameCanvas||!gameCtx){console['error'](_0x570725(0x1c1)),showMenuState();return;}stopSound(menuMusicSound),stopAutoDemoTimer(),isInGameState=!![],isShowingScoreScreen=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],isManualControl=_0x56ab37,isShowingDemoText=!_0x56ab37,isPaused=![],previousButtonStates=[],previousGameButtonStates=[],previousDemoButtonStates=[],previousGameButtonStatesP2=[],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];_0x56ab37&&(wasLastGameAIDemo=![]);clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);if(typeof resetGame===_0x570725(0x1e8))resetGame();else{console[_0x570725(0x1c8)](_0x570725(0x271)),alert('Critical\x20error:\x20Game\x20logic\x20not\x20loaded\x20correctly!'),showMenuState();return;}_0x56ab37&&playSound(coinSound),gameStartTime=Date[_0x570725(0x252)](),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],selectedButtonIndex=-0x1,ship&&gameCanvas&&gameCanvas[_0x570725(0x1df)]>0x0&&gameCanvas[_0x570725(0x248)]>0x0&&(ship['x']=Math[_0x570725(0x21b)](gameCanvas[_0x570725(0x1df)]/0x2-SHIP_WIDTH/0x2),ship['targetX']=ship['x'],ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN),mainLoopId===null&&startMainLoop();}catch(_0x1c5da3){console[_0x570725(0x1c8)]('Error\x20in\x20baseStartGame:',_0x1c5da3),wasLastGameAIDemo=![],clearTimeout(mouseIdleTimerId),mouseIdleTimerId=null,alert(_0x570725(0x200)),showMenuState();}}function stopGameAndShowMenu(){isPaused=![];if(isManualControl)saveHighScore();showMenuState();}function exitGame(){const _0x521eb7=_0x16aed7;isPaused=![],stopAutoDemoTimer(),saveHighScore(),isInGameState=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],showMenuState();try{window[_0x521eb7(0x207)](),setTimeout(()=>{if(!isInGameState)showMenuState();},0xc8);}catch(_0x4fa542){console[_0x521eb7(0x1c8)](_0x521eb7(0x242),_0x4fa542),showMenuState();}}function triggerGameOver(){triggerFinalGameOverSequence();}function startAutoDemoTimer(){try{stopAutoDemoTimer(),autoStartTimerId=setTimeout(()=>{!isInGameState&&!isShowingScoreScreen?(isPlayerSelectMode=![],isFiringModeSelectMode=![],showScoreScreen()):autoStartTimerId=null;},MENU_INACTIVITY_TIMEOUT);}catch(_0x152c31){console['error']('Error\x20starting\x20auto\x20demo\x20timer:',_0x152c31);}}function stopAutoDemoTimer(){const _0x22ecc1=_0x16aed7;try{autoStartTimerId&&(clearTimeout(autoStartTimerId),autoStartTimerId=null);}catch(_0x4fead4){console['error'](_0x22ecc1(0x234),_0x4fead4);}}function showScoreScreen(){if(isInGameState||isShowingScoreScreen)return;stopAutoDemoTimer(),isShowingScoreScreen=!![],isPlayerSelectMode=![],isFiringModeSelectMode=![],scoreScreenStartTime=Date['now'](),selectedButtonIndex=-0x1,clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);}function processMenuInteraction(_0x3a78a0,_0x12dcf5){const _0x284a19=_0x16aed7;if(isShowingScoreScreen){if(typeof showMenuState===_0x284a19(0x1e8))showMenuState();}else{const _0x264971=getMenuButtonRect(0x0),_0x577a61=getMenuButtonRect(0x1);let _0x51df83=_0x264971&&checkCollision({'x':_0x3a78a0,'y':_0x12dcf5,'width':0x1,'height':0x1},_0x264971),_0x2d7c25=_0x577a61&&checkCollision({'x':_0x3a78a0,'y':_0x12dcf5,'width':0x1,'height':0x1},_0x577a61);if(isFiringModeSelectMode){if(_0x51df83)selectedFiringMode=_0x284a19(0x239),baseStartGame(!![]),stopAutoDemoTimer();else _0x2d7c25?(selectedFiringMode=_0x284a19(0x250),baseStartGame(!![]),stopAutoDemoTimer()):(isFiringModeSelectMode=![],isPlayerSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer());}else{if(isPlayerSelectMode){if(_0x51df83)startGame1P(),stopAutoDemoTimer();else _0x2d7c25?(startGame2P(),stopAutoDemoTimer()):(isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer());}else{if(_0x51df83)isPlayerSelectMode=!![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer();else{if(_0x2d7c25){if(typeof exitGame===_0x284a19(0x1e8))exitGame();stopAutoDemoTimer();}else triggerFullscreen(),playSound(menuMusicSound,!![]),stopAutoDemoTimer();}}}}}function handleCanvasClick(_0x506511){const _0x37dd15=_0x16aed7;if(!gameCanvas)return;const _0x5747c2=gameCanvas[_0x37dd15(0x1be)](),_0x239ce3=gameCanvas[_0x37dd15(0x1df)]/_0x5747c2[_0x37dd15(0x1df)],_0x1d6637=gameCanvas['height']/_0x5747c2['height'],_0x2a0ff2=(_0x506511[_0x37dd15(0x1eb)]-_0x5747c2['left'])*_0x239ce3,_0x110c8e=(_0x506511[_0x37dd15(0x21e)]-_0x5747c2[_0x37dd15(0x278)])*_0x1d6637;let _0x381b07=![];(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0)&&(_0x381b07=!![]);if(_0x381b07)return;if(isInGameState){if(isPaused){if(typeof togglePause===_0x37dd15(0x1e8))togglePause();return;}if(!isManualControl){if(typeof stopGameAndShowMenu==='function')stopGameAndShowMenu();}}else processMenuInteraction(_0x2a0ff2,_0x110c8e);}function createExplosion(_0xb2f818,_0x42078f){const _0x4097e3=_0x16aed7;try{playSound(explosionSound);let _0x19a076=[];for(let _0x3938bd=0x0;_0x3938bd<EXPLOSION_PARTICLE_COUNT;_0x3938bd++){const _0x32ccc0=Math[_0x4097e3(0x1c6)]()*Math['PI']*0x2,_0x566e8e=Math[_0x4097e3(0x1c6)]()*(EXPLOSION_MAX_SPEED-EXPLOSION_MIN_SPEED)+EXPLOSION_MIN_SPEED;_0x19a076['push']({'x':_0xb2f818,'y':_0x42078f,'vx':Math[_0x4097e3(0x27e)](_0x32ccc0)*_0x566e8e,'vy':Math['sin'](_0x32ccc0)*_0x566e8e,'radius':EXPLOSION_PARTICLE_RADIUS,'alpha':0x1});}explosions[_0x4097e3(0x222)]({'creationTime':Date['now'](),'duration':EXPLOSION_DURATION,'particles':_0x19a076});}catch(_0x2be78f){console['error'](_0x4097e3(0x273),_0x2be78f);}}function renderExplosions(){const _0x3eab46=_0x16aed7;try{if(!gameCtx)return;gameCtx[_0x3eab46(0x201)](),gameCtx[_0x3eab46(0x1e3)]=_0x3eab46(0x1ca),explosions[_0x3eab46(0x235)](_0x713e4c=>{const _0xa5a621=_0x3eab46;_0x713e4c['particles'][_0xa5a621(0x235)](_0x3036ea=>{const _0x452866=_0xa5a621,_0x54251b=_0x3036ea[_0x452866(0x1d6)]*EXPLOSION_MAX_OPACITY;_0x54251b>0.01&&(gameCtx[_0x452866(0x26a)](),gameCtx[_0x452866(0x285)](Math['round'](_0x3036ea['x']),Math['round'](_0x3036ea['y']),_0x3036ea['radius'],0x0,Math['PI']*0x2),gameCtx[_0x452866(0x1f1)]=_0x452866(0x283)+_0x54251b[_0x452866(0x279)](0x3)+')',gameCtx[_0x452866(0x225)]());});}),gameCtx['restore']();}catch(_0x2d4a6e){console[_0x3eab46(0x1c8)](_0x3eab46(0x1c0),_0x2d4a6e);}}function drawCanvasText(_0x1f6574,_0xb76dd5,_0x515103,_0x88b2ac,_0x53e832,_0x2714a6=_0x16aed7(0x1d9),_0x5660a3='middle',_0x525099=![]){const _0x1e8545=_0x16aed7;if(!gameCtx)return;gameCtx[_0x1e8545(0x201)](),gameCtx[_0x1e8545(0x255)]=_0x88b2ac,gameCtx[_0x1e8545(0x1f1)]=_0x53e832,gameCtx['textAlign']=_0x2714a6,gameCtx['textBaseline']=_0x5660a3,_0x525099&&(gameCtx[_0x1e8545(0x1e9)]=_0x1e8545(0x27d),gameCtx['shadowBlur']=0x8,gameCtx[_0x1e8545(0x1bf)]=0x3,gameCtx[_0x1e8545(0x269)]=0x3),gameCtx[_0x1e8545(0x247)](_0x1f6574,_0xb76dd5,_0x515103),gameCtx[_0x1e8545(0x24d)]();}function drawCanvasButton(_0x451c3b,_0x45af6b,_0x3a8c0e){const _0x5e7058=_0x16aed7;if(!gameCtx)return;const _0x28d440=getMenuButtonRect(_0x45af6b);if(!_0x28d440)return;gameCtx['save'](),drawCanvasText(_0x451c3b,_0x28d440['x']+_0x28d440['width']/0x2,_0x28d440['y']+_0x28d440[_0x5e7058(0x248)]/0x2,MENU_BUTTON_FONT,_0x3a8c0e?MENU_BUTTON_COLOR_HOVER:MENU_BUTTON_COLOR,_0x5e7058(0x1d9),'middle'),gameCtx[_0x5e7058(0x24d)]();}function renderFloatingScores(){const _0xb6d8e1=_0x16aed7;try{if(!gameCtx||!floatingScores||floatingScores[_0xb6d8e1(0x22e)]===0x0)return;const _0x21bc49=Date[_0xb6d8e1(0x252)]();gameCtx[_0xb6d8e1(0x201)](),gameCtx[_0xb6d8e1(0x1ef)]=FLOATING_SCORE_OPACITY,floatingScores[_0xb6d8e1(0x235)](_0x502fde=>{const _0x1ba1a5=_0xb6d8e1;_0x21bc49>=_0x502fde[_0x1ba1a5(0x26c)]&&drawCanvasText(_0x502fde[_0x1ba1a5(0x229)],_0x502fde['x'],_0x502fde['y'],FLOATING_SCORE_FONT,_0x502fde[_0x1ba1a5(0x1f5)],_0x1ba1a5(0x1d9),_0x1ba1a5(0x253),![]);}),gameCtx['globalAlpha']=0x1,gameCtx['restore']();}catch(_0x388038){console['error'](_0xb6d8e1(0x25e),_0x388038);}}function _0x14eb(){const _0x53610e=['orange','floor','EASY','SHOTS\x20FIRED','left','PLAYER\x201','alpha','val','min','center','FIGHTER\x20CAPTURED','mousemove','22px\x20\x27Arial\x20Black\x27,\x20Gadget,\x20sans-serif','moveTo','Cannot\x20set\x20fallback\x20canvas\x20sizes.','width','changedTouches','addEventListener','map','globalCompositeOperation','createLinearGradient','touchmove','15px\x20\x27Arial\x20Black\x27,\x20Gadget,\x20sans-serif','CHALLENGING\x20STAGE','function','shadowColor','undefined','clientX','max','rotation','664834XlUUTC','globalAlpha','30px\x20Arial','fillStyle','NORMAL','default','1173shrPMn','color','Error\x20in\x20pollControllerForMenu:','number','getGamepads','HIGH\x20SCORE','NUMBER\x20OF\x20HITS','measureText','Failed\x20to\x20return\x20to\x20menu\x20after\x20loop\x20error:','FATAL\x20RENDER\x20ERROR.','SCORE','size','Critical\x20error\x20starting\x20game!','save','captureAnimationRotation','HIT-MISS-RATIO','showing_capture_message','591978MXVLQk','Error\x20drawing\x20enemy:','close','isArray','translate','gamepaddisconnected','none','sin','right','complete','fillRect','PUSH\x20START\x20BUTTON','has','Cannot\x20add\x20canvas\x20listeners:\x20gameCanvas\x20not\x20found\x20during\x20init.','state','naturalWidth','textBaseline','buttons','2\x20PLAYER','initializeDOMElements\x20function\x20not\x20found!','abs','\x20PTS','round','Error\x20returning\x20to\x20menu.\x20Please\x20refresh\x20the\x20page.','hasCapturedShip','clientY','drawImage','lineTo','resizeCanvases\x20not\x20found!','push','rgba(0,\x20191,\x20255,\x200.9)','STAGE','fill','red','Written\x20By\x20Platini2000(c)','atan2','text','body','capturedShipY','yellow','7165620KqDaSI','length','!!!\x20CRITICAL\x20ERROR\x20IN\x20mainLoop:','defineChallengingStagePaths\x20not\x20found!','clearRect','touches','00:00','Error\x20stopping\x20auto\x20demo\x20timer:','forEach','DOM\x20element\x20initialization\x20failed.','white','<div\x20style=\x22color:white;\x20padding:\x2020px;\x20font-family:\x20sans-serif;\x22><h1>Fatal\x20Initialization\x20Error</h1><p>The\x20game\x20could\x20not\x20be\x20started.\x20Please\x20check\x20the\x20browser\x20console\x20(F12)\x20for\x20details.</p><p>Error:\x20','rapid','slice','targetX','gamepadconnected','capturedShipX','rotate','<p\x20style=\x22color:white;\x22>Error\x20returning\x20to\x20menu.\x20Please\x20refresh.</p>','Platini2000(c)\x20LTD','textAlign','window.close()\x20failed:','2UP','pressed','</p></div>','PERFECT\x20!','fillText','height','source-atop','innerHeight','darkred','keydown','restore','velocityX','padStart','single','LOGO','now','middle','tintProgress','font','4OgJvcP','FATAL\x20INITIALIZATION\x20ERROR:','13990896qtcRSM','axes','WINS','Could\x20not\x20add\x20','sqrt','grey','Error\x20rendering\x20floating\x20scores:','add','innerHTML','addColorStop','STAGE\x20','find','isDamaged','-\x20RESULTS\x20-','START\x20GAME','closePath','PLAYER\x20','shadowOffsetY','beginPath','GAME\x20OVER','displayStartTime','match','naturalHeight','message','rgba(0,\x200,\x20139,\x200.5)','FATAL:\x20resetGame\x20function\x20is\x20not\x20defined!\x20Cannot\x20start\x20game\x20properly.','following_bezier_path','Error\x20creating\x20explosion:','preventDefault','attacking','7547031QMeqvJ','20px\x20\x27Press\x20Start\x202P\x27','top','toFixed','warn','touchend','\x20level\x201\x20icons\x20due\x20to\x203-type\x20limit.\x20Used\x20types:','rgba(0,\x200,\x200,\x200.8)','cos','Error\x20in\x20renderGame:','cursor','EXTRA\x20LIFE','style','rgba(255,\x20200,\x2080,\x20','stack','arc','1\x20PLAYER','4760930uRERDR','capturedShipDimensions','toString','bold\x2018px\x20\x27Press\x20Start\x202P\x27','getBoundingClientRect','shadowOffsetX','Error\x20rendering\x20explosions:','Cannot\x20start\x20game\x20-\x20canvas\x20not\x20ready.','touchcancel','loadHighScore\x20function\x20not\x20found.','1UP','img','random','innerWidth','error','DEMO','lighter','velocityY','type','88ZoswNv','80JUgRPu','916tmYFWC'];_0x14eb=function(){return _0x53610e;};return _0x14eb();}function renderHitSparks(){const _0x3fc6c7=_0x16aed7;if(!gameCtx||!hitSparks||hitSparks[_0x3fc6c7(0x22e)]===0x0)return;gameCtx[_0x3fc6c7(0x201)](),gameCtx[_0x3fc6c7(0x1e3)]=_0x3fc6c7(0x1ca),hitSparks[_0x3fc6c7(0x235)](_0x3a5bf4=>{const _0x125e8e=_0x3fc6c7;if(_0x3a5bf4&&_0x3a5bf4[_0x125e8e(0x1d6)]>0.01){gameCtx[_0x125e8e(0x1f1)]=_0x3a5bf4[_0x125e8e(0x1f5)],gameCtx[_0x125e8e(0x1ef)]=_0x3a5bf4['alpha'],gameCtx[_0x125e8e(0x26a)]();const _0x150260=_0x3a5bf4[_0x125e8e(0x1ff)]*Math[_0x125e8e(0x25c)](_0x3a5bf4['alpha']);gameCtx[_0x125e8e(0x285)](Math[_0x125e8e(0x21b)](_0x3a5bf4['x']),Math[_0x125e8e(0x21b)](_0x3a5bf4['y']),Math['max'](0.5,_0x150260/0x2),0x0,Math['PI']*0x2),gameCtx[_0x125e8e(0x225)]();}}),gameCtx['globalAlpha']=0x1,gameCtx['restore']();}function renderGame(){const _0x315ad3=_0x16aed7;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x315ad3(0x231)](0x0,0x0,gameCanvas['width'],gameCanvas['height']);const _0x94af44=Date[_0x315ad3(0x252)]();gameCtx['save']();const _0x13d4b2='20px\x20\x27Press\x20Start\x202P\x27',_0x3b04f2=_0x315ad3(0x226),_0x592b1a=_0x315ad3(0x237);gameCtx['font']=_0x13d4b2,gameCtx[_0x315ad3(0x215)]='top';const _0x2f795b=(_0x31bfe4,_0x3b9e62,_0x48dbf7,_0x409f80,_0x5bcffe=![])=>{const _0x2b1c2d=_0x315ad3;let _0x51bba2=!![],_0x381473=UI_1UP_BLINK_ON_MS*1.5,_0x2c47d3=UI_1UP_BLINK_CYCLE_MS*1.5;if(_0x31bfe4===_0x2b1c2d(0x1c9))_0x381473=DEMO_TEXT_BLINK_ON_MS*0.7,_0x2c47d3=DEMO_TEXT_BLINK_CYCLE_MS;else{if(_0x31bfe4===_0x2b1c2d(0x1f9)){_0x381473=UI_1UP_BLINK_ON_MS*1.5,_0x2c47d3=UI_1UP_BLINK_CYCLE_MS*1.5;if(isInGameState&&!isManualControl)_0x381473=DEMO_TEXT_BLINK_ON_MS*0.7,_0x2c47d3=DEMO_TEXT_BLINK_CYCLE_MS;else isInGameState&&isTwoPlayerMode&&currentPlayer===0x2&&(_0x381473=UI_1UP_BLINK_ON_MS*1.5,_0x2c47d3=UI_1UP_BLINK_CYCLE_MS*1.5);}}_0x5bcffe&&((isPaused||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||!(_0x94af44%_0x2c47d3<_0x381473))&&(_0x51bba2=![]));_0x51bba2&&(gameCtx[_0x2b1c2d(0x1f1)]=_0x3b04f2,gameCtx[_0x2b1c2d(0x241)]=_0x48dbf7,gameCtx[_0x2b1c2d(0x247)](_0x31bfe4,_0x409f80,MARGIN_TOP));const _0x137c5c=gameCtx[_0x2b1c2d(0x1fb)](_0x31bfe4)[_0x2b1c2d(0x1df)];let _0x503897;if(_0x48dbf7==='left')_0x503897=_0x409f80+_0x137c5c/0x2;else{if(_0x48dbf7===_0x2b1c2d(0x20d))_0x503897=_0x409f80-_0x137c5c/0x2;else _0x503897=_0x409f80;}gameCtx[_0x2b1c2d(0x1f1)]=_0x592b1a,gameCtx[_0x2b1c2d(0x241)]=_0x2b1c2d(0x1d9);let _0x355944=MARGIN_TOP+SCORE_OFFSET_Y+0x5;_0x31bfe4===_0x2b1c2d(0x1f9)&&(_0x503897=_0x409f80),gameCtx[_0x2b1c2d(0x247)](_0x3b9e62[_0x2b1c2d(0x1bc)](),_0x503897,_0x355944);};let _0x4db84e,_0x388fc2,_0x499914,_0x518496,_0x1c673=![],_0x9ab852=![],_0x563a25=![];if(isShowingResultsScreen)_0x4db84e=player1Score||0x0,_0x388fc2=player2Score||0x0,_0x499914=highScore||0x4e20,_0x499914=Math[_0x315ad3(0x1ec)](_0x499914,_0x4db84e,_0x388fc2),_0x518496=wasLastGameAIDemo?'DEMO':_0x315ad3(0x1c4),_0x563a25=![],_0x1c673=![],_0x9ab852=![];else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage)_0x4db84e=player1Score||0x0,_0x388fc2=player2Score||0x0,_0x499914=highScore||0x4e20,_0x499914=Math[_0x315ad3(0x1ec)](_0x499914,_0x4db84e,_0x388fc2),_0x518496=wasLastGameAIDemo?'DEMO':_0x315ad3(0x1c4),_0x563a25=![],_0x1c673=![],_0x9ab852=![];else{if(isShowingPlayerGameOverMessage)_0x4db84e=player1Score||0x0,_0x388fc2=player2Score||0x0,_0x499914=highScore||0x4e20,_0x499914=Math[_0x315ad3(0x1ec)](_0x499914,_0x4db84e,_0x388fc2),_0x518496=_0x315ad3(0x1c4),_0x563a25=![],_0x1c673=![],_0x9ab852=![];else{if(!isInGameState)_0x4db84e=player1Score||0x0,_0x388fc2=player2Score||0x0,_0x499914=highScore||0x4e20,_0x499914=Math[_0x315ad3(0x1ec)](_0x499914,_0x4db84e,_0x388fc2),_0x518496=_0x315ad3(0x1c4),_0x563a25=![],_0x1c673=![],_0x9ab852=![];else{_0x499914=highScore||0x0;if(!isManualControl)_0x4db84e=score,_0x388fc2=0x0,_0x499914=Math[_0x315ad3(0x1ec)](_0x499914,score),_0x518496=_0x315ad3(0x1c9),_0x1c673=!isShowingIntro&&!isPaused&&!isShipCaptured,_0x563a25=!isPaused&&!isShowingIntro&&score>0x0&&_0x499914>0x0&&score>=_0x499914;else isTwoPlayerMode?(_0x4db84e=currentPlayer===0x1?score:player1Score,_0x388fc2=currentPlayer===0x2?score:player2Score,_0x499914=Math[_0x315ad3(0x1ec)](_0x499914,player1Score,player2Score,score),_0x518496=_0x315ad3(0x1c4),_0x1c673=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured,_0x9ab852=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured,_0x563a25=!isPaused&&!isShowingIntro&&score>0x0&&_0x499914>0x0&&score>=_0x499914):(_0x4db84e=score,_0x388fc2=player2Score||0x0,_0x499914=Math[_0x315ad3(0x1ec)](_0x499914,score),_0x518496='1UP',_0x1c673=!isShowingIntro&&!isPaused&&playerLives>0x0&&!isShipCaptured,_0x563a25=!isPaused&&!isShowingIntro&&score>0x0&&_0x499914>0x0&&score>=_0x499914);}}}}let _0x462500=![];if(_0x563a25){if(!isManualControl)_0x462500=_0x1c673&&player1TriggeredHighScoreSound;else isTwoPlayerMode?currentPlayer===0x1?_0x462500=_0x1c673&&player1TriggeredHighScoreSound:_0x462500=_0x9ab852&&player2TriggeredHighScoreSound:_0x462500=_0x1c673&&player1TriggeredHighScoreSound;}typeof MARGIN_SIDE!=='undefined'&&typeof MARGIN_TOP!==_0x315ad3(0x1ea)&&typeof SCORE_OFFSET_Y!==_0x315ad3(0x1ea)&&(_0x2f795b(_0x518496,_0x4db84e,'left',MARGIN_SIDE,_0x1c673),_0x2f795b('HIGH\x20SCORE',_0x499914,'center',gameCanvas[_0x315ad3(0x1df)]/0x2,_0x462500),_0x2f795b(_0x315ad3(0x243),_0x388fc2,_0x315ad3(0x20d),gameCanvas[_0x315ad3(0x1df)]-MARGIN_SIDE,_0x9ab852));if(typeof shipImage!==_0x315ad3(0x1ea)&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x315ad3(0x1ea)&&typeof LIFE_ICON_SIZE!=='undefined'&&typeof LIFE_ICON_MARGIN_LEFT!=='undefined'&&typeof LIFE_ICON_SPACING!==_0x315ad3(0x1ea)){if(shipImage[_0x315ad3(0x20e)]&&shipImage[_0x315ad3(0x26e)]!==0x0){const _0x42c048=gameCanvas[_0x315ad3(0x248)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x47ff3b=0x0;if(isShowingResultsScreen||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage)_0x47ff3b=0x2;else{if(!isInGameState||isShowingScoreScreen)_0x47ff3b=0x2;else isInGameState&&playerLives>0x0?_0x47ff3b=Math[_0x315ad3(0x1ec)](0x0,playerLives-0x1):_0x47ff3b=0x0;}const _0x150bb5=0x5;for(let _0x4ba13a=0x0;_0x4ba13a<Math[_0x315ad3(0x1d8)](_0x47ff3b,_0x150bb5);_0x4ba13a++){const _0x4955f0=LIFE_ICON_MARGIN_LEFT+_0x4ba13a*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x315ad3(0x21f)](shipImage,Math['round'](_0x4955f0),Math[_0x315ad3(0x21b)](_0x42c048),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}let _0xab074e=0x1;if(gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage)_0xab074e=Math[_0x315ad3(0x1ec)](0x1,player1MaxLevelReached,player2MaxLevelReached);else{if(!isInGameState||isShowingScoreScreen)_0xab074e=0x1;else isInGameState&&(_0xab074e=level);}if(_0xab074e>0x0&&typeof LEVEL_ICON_MARGIN_BOTTOM!=='undefined'&&typeof LEVEL_ICON_SIZE!==_0x315ad3(0x1ea)&&typeof LEVEL_ICON_MARGIN_RIGHT!==_0x315ad3(0x1ea)&&typeof LEVEL_ICON_SPACING!==_0x315ad3(0x1ea)){const _0x2c4b80=[{'val':0x32,'img':level50Image},{'val':0x1e,'img':level30Image},{'val':0x14,'img':level20Image},{'val':0xa,'img':level10Image},{'val':0x5,'img':level5Image},{'val':0x1,'img':level1Image}];let _0x1c195e=_0xab074e,_0x59594c=[],_0x24bbd3=new Set();const _0x8bfd93=(_0x290f11,_0x3dfd9e,_0x7b3bc6)=>{const _0x1f0769=_0x315ad3;let _0xdda871=_0x290f11,_0x25f168=new Set(_0x7b3bc6);for(let _0x16a025=_0x3dfd9e;_0x16a025<_0x2c4b80['length'];_0x16a025++){const _0x21f004=_0x2c4b80[_0x16a025][_0x1f0769(0x1d7)];if(_0xdda871>=_0x21f004){const _0x3c59f0=_0x25f168[_0x1f0769(0x1ff)]<0x3||_0x25f168[_0x1f0769(0x211)](_0x21f004);if(!_0x3c59f0)continue;const _0xd919ee=Math[_0x1f0769(0x1d1)](_0xdda871/_0x21f004);_0xdda871-=_0xd919ee*_0x21f004,_0x25f168[_0x1f0769(0x25f)](_0x21f004);if(_0xdda871===0x0)return!![];}}return _0xdda871===0x0;};for(let _0x4685a3=0x0;_0x4685a3<_0x2c4b80[_0x315ad3(0x22e)]-0x1;_0x4685a3++){const _0x179234=_0x2c4b80[_0x4685a3],_0x38047a=_0x179234[_0x315ad3(0x1d7)],_0x4fa084=_0x179234[_0x315ad3(0x1c5)];if(_0x1c195e>=_0x38047a){const _0x3e71cf=Math[_0x315ad3(0x1d1)](_0x1c195e/_0x38047a),_0x44dd88=_0x1c195e-_0x3e71cf*_0x38047a;let _0x183e03=new Set(_0x24bbd3);_0x183e03[_0x315ad3(0x25f)](_0x38047a);if(_0x8bfd93(_0x44dd88,_0x4685a3+0x1,_0x183e03)){for(let _0x455540=0x0;_0x455540<_0x3e71cf;_0x455540++){_0x59594c[_0x315ad3(0x222)](_0x4fa084);}_0x1c195e=_0x44dd88,_0x24bbd3['add'](_0x38047a);if(_0x1c195e===0x0)break;}}}if(_0x1c195e>0x0){const _0x55d3f4=_0x24bbd3[_0x315ad3(0x1ff)]<0x3||_0x24bbd3[_0x315ad3(0x211)](0x1);if(_0x55d3f4){for(let _0x3e1601=0x0;_0x3e1601<_0x1c195e;_0x3e1601++){_0x59594c['push'](level1Image);}_0x24bbd3[_0x315ad3(0x25f)](0x1),_0x1c195e=0x0;}else console[_0x315ad3(0x27a)](_0x315ad3(0x25b)+_0x1c195e+_0x315ad3(0x27c),_0x24bbd3);}_0x59594c[_0x315ad3(0x22e)]===0x0&&_0x59594c['push'](level1Image);const _0x13a85f=_0x59594c[_0x315ad3(0x22e)],_0x355b9c=_0x13a85f*LEVEL_ICON_SIZE+Math['max'](0x0,_0x13a85f-0x1)*LEVEL_ICON_SPACING,_0x3e8eed=gameCanvas[_0x315ad3(0x1df)]-LEVEL_ICON_MARGIN_RIGHT,_0x30e389=_0x3e8eed-_0x355b9c,_0x2ac927=gameCanvas['height']-LEVEL_ICON_MARGIN_BOTTOM-LEVEL_ICON_SIZE;let _0x538e2b=_0x30e389;for(const _0x15e026 of _0x59594c){_0x15e026&&_0x15e026['complete']&&_0x15e026[_0x315ad3(0x26e)]!==0x0&&gameCtx[_0x315ad3(0x21f)](_0x15e026,Math['round'](_0x538e2b),Math[_0x315ad3(0x21b)](_0x2ac927),LEVEL_ICON_SIZE,LEVEL_ICON_SIZE),_0x538e2b+=LEVEL_ICON_SIZE+LEVEL_ICON_SPACING;}}gameCtx[_0x315ad3(0x24d)](),gameCtx[_0x315ad3(0x201)]();if(ship&&!isShowingCaptureMessage){let _0x301ddc=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x331681=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS,_0x326646=_0x94af44%_0x331681;_0x326646>=INVINCIBILITY_BLINK_ON_MS&&(_0x301ddc=![]);}if(_0x301ddc){let _0x140ad1=ship['x'],_0x4c8c84=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x4c8c84&&(_0x140ad1=Math[_0x315ad3(0x21b)](gameCanvas['width']/0x2-ship['width']/0x2));const _0x3941c1=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;typeof shipImage!==_0x315ad3(0x1ea)&&shipImage[_0x315ad3(0x20e)]&&shipImage[_0x315ad3(0x26e)]!==0x0?gameCtx[_0x315ad3(0x21f)](shipImage,Math[_0x315ad3(0x21b)](_0x140ad1),Math[_0x315ad3(0x21b)](_0x3941c1),ship[_0x315ad3(0x1df)],ship['height']):(gameCtx[_0x315ad3(0x1f1)]='blue',gameCtx[_0x315ad3(0x20f)](Math[_0x315ad3(0x21b)](_0x140ad1),Math[_0x315ad3(0x21b)](_0x3941c1),ship[_0x315ad3(0x1df)],ship[_0x315ad3(0x248)]));if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&typeof shipImage!==_0x315ad3(0x1ea)&&shipImage[_0x315ad3(0x20e)]&&shipImage['naturalHeight']!==0x0){const _0x5454bd=_0x140ad1+DUAL_SHIP_OFFSET_X;gameCtx[_0x315ad3(0x21f)](shipImage,Math[_0x315ad3(0x21b)](_0x5454bd),Math[_0x315ad3(0x21b)](_0x3941c1),ship['width'],ship[_0x315ad3(0x248)]);}}}fallingShips[_0x315ad3(0x22e)]>0x0&&typeof shipImage!==_0x315ad3(0x1ea)&&shipImage[_0x315ad3(0x20e)]&&fallingShips['forEach'](_0x424317=>{const _0x25cf7a=_0x315ad3;if(_0x424317){gameCtx[_0x25cf7a(0x201)]();const _0x44ee99=_0x424317['x']+_0x424317[_0x25cf7a(0x1df)]/0x2,_0x117dec=_0x424317['y']+_0x424317[_0x25cf7a(0x248)]/0x2;gameCtx[_0x25cf7a(0x209)](_0x44ee99,_0x117dec),gameCtx[_0x25cf7a(0x23e)](_0x424317[_0x25cf7a(0x1ed)]||0x0);const _0x168652=-_0x424317[_0x25cf7a(0x1df)]/0x2,_0x2dd2d6=-_0x424317[_0x25cf7a(0x248)]/0x2,_0x198b48=_0x424317[_0x25cf7a(0x1df)],_0xc00c93=_0x424317['height'];gameCtx[_0x25cf7a(0x21f)](shipImage,_0x168652,_0x2dd2d6,_0x198b48,_0xc00c93),typeof _0x424317['tintProgress']===_0x25cf7a(0x1f7)&&_0x424317[_0x25cf7a(0x254)]>0.01&&(gameCtx['save'](),gameCtx[_0x25cf7a(0x1ef)]=_0x424317[_0x25cf7a(0x254)],gameCtx[_0x25cf7a(0x1f1)]=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x25cf7a(0x1e3)]='source-atop',gameCtx['fillRect'](_0x168652,_0x2dd2d6,_0x198b48,_0xc00c93),gameCtx[_0x25cf7a(0x24d)]()),gameCtx['restore']();}});gameCtx[_0x315ad3(0x24d)]();if(!isInGameState){if(isShowingScoreScreen){if(typeof LIFE_ICON_SIZE!==_0x315ad3(0x1ea)){gameCtx['save']();const _0x134ad1=gameCanvas[_0x315ad3(0x1df)]/0x2;let _0x525e91=gameCanvas[_0x315ad3(0x248)]*0.25+SCORE_SCREEN_VERTICAL_OFFSET,_0x1f14e0=0x0,_0x581120=_0x525e91+0x0;drawCanvasText('PUSH\x20START\x20BUTTON',_0x134ad1,_0x581120-0x1e,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_TOP,_0x315ad3(0x1d9),_0x315ad3(0x253),!![]);let _0x1866f0=_0x581120+SCORE_SCREEN_LINE_V_SPACING*1.8;const _0x4de5ab='\x201ST\x20LIFE\x20BONUS\x20FOR\x2020000\x20PTS';gameCtx[_0x315ad3(0x255)]=SCORE_SCREEN_TEXT_FONT;const _0x482688=gameCtx[_0x315ad3(0x1fb)](_0x4de5ab)[_0x315ad3(0x1df)],_0x39f89b=LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING+_0x482688;_0x1f14e0=_0x134ad1-_0x39f89b/0x2-0x1e;typeof shipImage!==_0x315ad3(0x1ea)&&shipImage[_0x315ad3(0x20e)]&&shipImage[_0x315ad3(0x26e)]!==0x0&&gameCtx[_0x315ad3(0x21f)](shipImage,Math[_0x315ad3(0x21b)](_0x1f14e0),Math[_0x315ad3(0x21b)](_0x1866f0-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x4de5ab,_0x1f14e0+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x1866f0,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0x315ad3(0x1d4),_0x315ad3(0x253),![]);let _0x1c1a9f=_0x1866f0+SCORE_SCREEN_LINE_V_SPACING*0x1;const _0x1d9210='\x202ND\x20LIFE\x20BONUS\x20FOR\x20'+RECURRING_EXTRA_LIFE_INTERVAL+_0x315ad3(0x21a);typeof shipImage!==_0x315ad3(0x1ea)&&shipImage[_0x315ad3(0x20e)]&&shipImage[_0x315ad3(0x26e)]!==0x0&&gameCtx[_0x315ad3(0x21f)](shipImage,Math[_0x315ad3(0x21b)](_0x1f14e0),Math['round'](_0x1c1a9f-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x1d9210,_0x1f14e0+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x1c1a9f,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0x315ad3(0x1d4),_0x315ad3(0x253),![]);let _0x1fb19a=_0x1c1a9f+SCORE_SCREEN_LINE_V_SPACING*0x1;const _0x4ffad1='\x20EXT\x20LIFE\x20FOR\x20EVERY\x20'+RECURRING_EXTRA_LIFE_INTERVAL+_0x315ad3(0x21a);typeof shipImage!==_0x315ad3(0x1ea)&&shipImage['complete']&&shipImage[_0x315ad3(0x26e)]!==0x0&&gameCtx['drawImage'](shipImage,Math['round'](_0x1f14e0),Math[_0x315ad3(0x21b)](_0x1fb19a-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x4ffad1,_0x1f14e0+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x1fb19a,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0x315ad3(0x1d4),_0x315ad3(0x253),![]);let _0x4ed119=_0x1fb19a+SCORE_SCREEN_LINE_V_SPACING*1.8;drawCanvasText('2025\x20\x20\x20PLATINI2000(c)\x20\x20\x20LTD',_0x134ad1-0xa,_0x4ed119+0x1e,MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x315ad3(0x1d9),'middle',![]),gameCtx[_0x315ad3(0x24d)]();}}else{gameCtx[_0x315ad3(0x201)]();const _0x5933a3=gameCanvas['width'],_0x43d3e1=gameCanvas['height'],_0x44890a=_0x5933a3/0x2;selectedButtonIndex===-0x1&&(selectedButtonIndex=0x0);let _0x33dac1=MENU_LOGO_APPROX_HEIGHT,_0x65fc52=_0x33dac1*(logoImage[_0x315ad3(0x214)]/logoImage[_0x315ad3(0x26e)]||0x1);typeof logoImage!==_0x315ad3(0x1ea)&&logoImage['complete']&&logoImage['naturalHeight']!==0x0&&(_0x33dac1=logoImage[_0x315ad3(0x26e)]*LOGO_SCALE_FACTOR,_0x65fc52=logoImage[_0x315ad3(0x214)]*LOGO_SCALE_FACTOR);const _0x5b9605=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x12a093=_0x33dac1+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x5b9605;let _0x4822e1=(_0x43d3e1-_0x12a093)/0x2-0x46;_0x4822e1+=MENU_GENERAL_Y_OFFSET;const _0x507d9a=_0x44890a-_0x65fc52/0x2,_0x3d2e7f=_0x4822e1+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!=='undefined'&&logoImage[_0x315ad3(0x20e)]&&logoImage[_0x315ad3(0x26e)]!==0x0?gameCtx['drawImage'](logoImage,Math[_0x315ad3(0x21b)](_0x507d9a),Math[_0x315ad3(0x21b)](_0x3d2e7f),_0x65fc52,_0x33dac1):drawCanvasText(_0x315ad3(0x251),_0x44890a,_0x3d2e7f+_0x33dac1/0x2,_0x315ad3(0x1f0),_0x315ad3(0x25d));if(isFiringModeSelectMode)drawCanvasButton(_0x315ad3(0x1d2),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x315ad3(0x1f2),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x315ad3(0x286),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x315ad3(0x217),0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x315ad3(0x266),0x0,selectedButtonIndex===0x0),drawCanvasButton('GAME\x20EXIT',0x1,selectedButtonIndex===0x1));const _0x15992e=getMenuButtonRect(0x1);let _0x333e6a;_0x15992e?_0x333e6a=_0x15992e['y']+_0x15992e[_0x315ad3(0x248)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x5b9605/0x2:_0x333e6a=_0x4822e1+_0x33dac1+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x5b9605/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x44890a-0x1,Math[_0x315ad3(0x21b)](_0x333e6a),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,'center',_0x315ad3(0x253),!![]),gameCtx[_0x315ad3(0x24d)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x315ad3(0x201)]();let _0x6c162b=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x6c162b&&(bullets[_0x315ad3(0x235)](_0x713bc5=>{const _0x1df276=_0x315ad3;_0x713bc5&&(typeof bulletImage!==_0x1df276(0x1ea)&&bulletImage['complete']?gameCtx[_0x1df276(0x21f)](bulletImage,Math[_0x1df276(0x21b)](_0x713bc5['x']),Math['round'](_0x713bc5['y']),_0x713bc5['width'],_0x713bc5[_0x1df276(0x248)]):(gameCtx[_0x1df276(0x1f1)]=_0x1df276(0x22c),gameCtx[_0x1df276(0x20f)](Math['round'](_0x713bc5['x']),Math[_0x1df276(0x21b)](_0x713bc5['y']),_0x713bc5[_0x1df276(0x1df)],_0x713bc5[_0x1df276(0x248)])));}),enemyBullets['forEach'](_0x22fd84=>{const _0x33c00f=_0x315ad3;_0x22fd84&&(typeof enemyBulletImage!==_0x33c00f(0x1ea)&&enemyBulletImage[_0x33c00f(0x20e)]&&enemyBulletImage[_0x33c00f(0x214)]>0x0?gameCtx[_0x33c00f(0x21f)](enemyBulletImage,Math[_0x33c00f(0x21b)](_0x22fd84['x']),Math[_0x33c00f(0x21b)](_0x22fd84['y']),_0x22fd84[_0x33c00f(0x1df)],_0x22fd84['height']):(gameCtx[_0x33c00f(0x1f1)]='white',gameCtx[_0x33c00f(0x20f)](Math[_0x33c00f(0x21b)](_0x22fd84['x']),Math['round'](_0x22fd84['y']),_0x22fd84[_0x33c00f(0x1df)],_0x22fd84['height'])));}));enemies[_0x315ad3(0x235)](_0x5ad2db=>{const _0x50c1f9=_0x315ad3;if(_0x5ad2db&&_0x5ad2db['y']<gameCanvas[_0x50c1f9(0x248)]+_0x5ad2db[_0x50c1f9(0x248)]*0x2&&_0x5ad2db['y']>-_0x5ad2db[_0x50c1f9(0x248)]*0x2){gameCtx[_0x50c1f9(0x201)]();try{let _0x51f257=null,_0x356dc0=_0x50c1f9(0x25d);const _0x51de61=!isPaused&&_0x94af44%(ENEMY_ANIMATION_INTERVAL_MS*0x2)>=ENEMY_ANIMATION_INTERVAL_MS;if(_0x5ad2db[_0x50c1f9(0x1cc)]===ENEMY3_TYPE)_0x51f257=_0x51de61?bossGalagaImage2:bossGalagaImage,_0x356dc0='purple';else _0x5ad2db['type']===ENEMY2_TYPE?(_0x51f257=_0x51de61?butterflyImage2:butterflyImage,_0x356dc0='cyan'):(_0x51f257=_0x51de61?beeImage2:beeImage,_0x356dc0=_0x50c1f9(0x226));const _0x2117b7=Math[_0x50c1f9(0x21b)](_0x5ad2db['x']),_0x3618c1=Math[_0x50c1f9(0x21b)](_0x5ad2db['y']),_0x5b31d5=_0x5ad2db[_0x50c1f9(0x1df)],_0x1fb24a=_0x5ad2db[_0x50c1f9(0x248)],_0x2d84b1=_0x5ad2db[_0x50c1f9(0x1cc)]===ENEMY3_TYPE&&_0x5ad2db[_0x50c1f9(0x264)],_0xf6f38e=!isPaused&&(_0x5ad2db[_0x50c1f9(0x213)]===_0x50c1f9(0x275)||_0x5ad2db[_0x50c1f9(0x213)]===_0x50c1f9(0x272)||_0x5ad2db['state']==='following_entrance_path')&&_0x5ad2db['y']>-_0x5ad2db[_0x50c1f9(0x248)]*0.5&&(Math[_0x50c1f9(0x219)](_0x5ad2db[_0x50c1f9(0x24e)])>0.1||Math['abs'](_0x5ad2db[_0x50c1f9(0x1cb)])>0.1),_0x45ab48=_0x5ad2db[_0x50c1f9(0x213)]===_0x50c1f9(0x204)&&_0x5ad2db['type']===ENEMY3_TYPE&&_0x5ad2db[_0x50c1f9(0x21d)]&&_0x5ad2db[_0x50c1f9(0x288)]&&typeof _0x5ad2db[_0x50c1f9(0x23d)]===_0x50c1f9(0x1f7)&&typeof _0x5ad2db[_0x50c1f9(0x22b)]===_0x50c1f9(0x1f7)&&typeof _0x5ad2db[_0x50c1f9(0x202)]==='number',_0x269b65=_0x5ad2db['state']!==_0x50c1f9(0x204)&&_0x5ad2db['type']===ENEMY3_TYPE&&_0x5ad2db[_0x50c1f9(0x21d)]&&_0x5ad2db[_0x50c1f9(0x288)],_0x4d0ef0=_0x45ab48||_0x269b65?_0x5ad2db[_0x50c1f9(0x288)][_0x50c1f9(0x1df)]:0x0,_0x574762=_0x45ab48||_0x269b65?_0x5ad2db[_0x50c1f9(0x288)][_0x50c1f9(0x248)]:0x0;let _0x38a89a=0x0,_0x39bf03=0x0;if(_0x45ab48)_0x38a89a=Math[_0x50c1f9(0x21b)](_0x5ad2db['capturedShipX']),_0x39bf03=Math[_0x50c1f9(0x21b)](_0x5ad2db[_0x50c1f9(0x22b)]);else _0x269b65&&(_0x38a89a=Math['round'](_0x5ad2db['x']+CAPTURED_SHIP_OFFSET_X),_0x39bf03=Math[_0x50c1f9(0x21b)](_0x5ad2db['y']+CAPTURED_SHIP_OFFSET_Y));const _0x185a65=(_0x365973,_0x3c7a07,_0x3329c1,_0x2d92be)=>{const _0x4dc502=_0x50c1f9;typeof _0x51f257!==_0x4dc502(0x1ea)&&_0x51f257['complete']&&_0x51f257['naturalHeight']!==0x0?gameCtx[_0x4dc502(0x21f)](_0x51f257,_0x365973,_0x3c7a07,_0x3329c1,_0x2d92be):(gameCtx[_0x4dc502(0x1f1)]=_0x356dc0,gameCtx[_0x4dc502(0x20f)](_0x365973,_0x3c7a07,_0x3329c1,_0x2d92be)),_0x2d84b1&&(gameCtx[_0x4dc502(0x1e3)]=_0x4dc502(0x249),gameCtx[_0x4dc502(0x1f1)]=_0x4dc502(0x270),gameCtx[_0x4dc502(0x20f)](_0x365973,_0x3c7a07,_0x3329c1,_0x2d92be),gameCtx[_0x4dc502(0x1e3)]='source-over');};if(_0xf6f38e){const _0x33d48d=_0x2117b7+_0x5b31d5/0x2,_0x1e9b52=_0x3618c1+_0x1fb24a/0x2;gameCtx['translate'](_0x33d48d,_0x1e9b52);let _0x5679e8=Math[_0x50c1f9(0x228)](_0x5ad2db[_0x50c1f9(0x1cb)],_0x5ad2db[_0x50c1f9(0x24e)])+Math['PI']/0x2;if(_0x5ad2db[_0x50c1f9(0x1cc)]===ENEMY3_TYPE&&_0x5ad2db[_0x50c1f9(0x213)]===_0x50c1f9(0x275))_0x5679e8+=Math['PI'];gameCtx['rotate'](_0x5679e8),_0x185a65(-_0x5b31d5/0x2,-_0x1fb24a/0x2,_0x5b31d5,_0x1fb24a);if(_0x269b65&&typeof shipImage!=='undefined'&&shipImage['complete']){gameCtx[_0x50c1f9(0x1ef)]=0.8;const _0x137902=CAPTURED_SHIP_OFFSET_X,_0x3fe117=CAPTURED_SHIP_OFFSET_Y;gameCtx[_0x50c1f9(0x21f)](shipImage,_0x137902-_0x4d0ef0/0x2,_0x3fe117-_0x574762/0x2,_0x4d0ef0,_0x574762),gameCtx[_0x50c1f9(0x1ef)]=0x1,gameCtx[_0x50c1f9(0x201)](),gameCtx[_0x50c1f9(0x1f1)]=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x50c1f9(0x1e3)]=_0x50c1f9(0x249),gameCtx[_0x50c1f9(0x20f)](_0x137902-_0x4d0ef0/0x2,_0x3fe117-_0x574762/0x2,_0x4d0ef0,_0x574762),gameCtx[_0x50c1f9(0x24d)]();}gameCtx['rotate'](-_0x5679e8),gameCtx[_0x50c1f9(0x209)](-_0x33d48d,-_0x1e9b52);}else _0x185a65(_0x2117b7,_0x3618c1,_0x5b31d5,_0x1fb24a),_0x269b65&&typeof shipImage!==_0x50c1f9(0x1ea)&&shipImage['complete']&&(gameCtx[_0x50c1f9(0x1ef)]=0.8,gameCtx['drawImage'](shipImage,_0x38a89a,_0x39bf03,_0x4d0ef0,_0x574762),gameCtx[_0x50c1f9(0x1ef)]=0x1,gameCtx[_0x50c1f9(0x201)](),gameCtx['fillStyle']=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x50c1f9(0x1e3)]=_0x50c1f9(0x249),gameCtx[_0x50c1f9(0x20f)](_0x38a89a,_0x39bf03,_0x4d0ef0,_0x574762),gameCtx[_0x50c1f9(0x24d)]());if(_0x45ab48&&typeof shipImage!==_0x50c1f9(0x1ea)&&shipImage['complete']){gameCtx[_0x50c1f9(0x201)]();const _0x558bda=_0x38a89a+_0x4d0ef0/0x2,_0x463751=_0x39bf03+_0x574762/0x2;gameCtx[_0x50c1f9(0x209)](_0x558bda,_0x463751),gameCtx['rotate'](_0x5ad2db[_0x50c1f9(0x202)]),gameCtx[_0x50c1f9(0x1ef)]=0.8,gameCtx[_0x50c1f9(0x21f)](shipImage,-_0x4d0ef0/0x2,-_0x574762/0x2,_0x4d0ef0,_0x574762),gameCtx[_0x50c1f9(0x1ef)]=0x1,gameCtx[_0x50c1f9(0x201)](),gameCtx[_0x50c1f9(0x1f1)]=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x50c1f9(0x1e3)]=_0x50c1f9(0x249),gameCtx[_0x50c1f9(0x20f)](-_0x4d0ef0/0x2,-_0x574762/0x2,_0x4d0ef0,_0x574762),gameCtx[_0x50c1f9(0x24d)](),gameCtx[_0x50c1f9(0x24d)]();}}catch(_0x49c829){console[_0x50c1f9(0x1c8)](_0x50c1f9(0x206),_0x49c829),gameCtx[_0x50c1f9(0x1f1)]=_0x50c1f9(0x1d0),gameCtx[_0x50c1f9(0x20f)](Math[_0x50c1f9(0x21b)](_0x5ad2db['x']),Math[_0x50c1f9(0x21b)](_0x5ad2db['y']),_0x5ad2db['width'],_0x5ad2db['height']);}finally{gameCtx[_0x50c1f9(0x24d)]();}}});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){gameCtx[_0x315ad3(0x201)]();const _0x50bc2f=0.4+(Math[_0x315ad3(0x20c)](_0x94af44*CAPTURE_BEAM_PULSE_SPEED)+0x1)/0x2*0.6,_0x2ba81a=captureBeamProgress;gameCtx['globalAlpha']=_0x2ba81a*_0x50bc2f;const _0xa028f0=enemies[_0x315ad3(0x263)](_0x48f5de=>_0x48f5de['id']===capturingBossId);if(_0xa028f0){const _0x81f83c=_0xa028f0['x']+BOSS_WIDTH/0x2,_0x17e2c5=_0xa028f0['y']+BOSS_HEIGHT,_0x41aa09=gameCanvas[_0x315ad3(0x248)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x5a0c41=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x4e617e=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR;if(_0x17e2c5<_0x41aa09){const _0x2daf25=gameCtx[_0x315ad3(0x1e4)](_0x81f83c,_0x17e2c5,_0x81f83c,_0x41aa09);_0x2daf25[_0x315ad3(0x261)](0x0,CAPTURE_BEAM_COLOR_START),_0x2daf25['addColorStop'](0x1,CAPTURE_BEAM_COLOR_END),gameCtx[_0x315ad3(0x1f1)]=_0x2daf25,gameCtx[_0x315ad3(0x26a)](),gameCtx[_0x315ad3(0x1dd)](_0x81f83c-_0x5a0c41/0x2,_0x17e2c5),gameCtx[_0x315ad3(0x220)](_0x81f83c+_0x5a0c41/0x2,_0x17e2c5),gameCtx[_0x315ad3(0x220)](_0x81f83c+_0x4e617e/0x2,_0x41aa09),gameCtx[_0x315ad3(0x220)](_0x81f83c-_0x4e617e/0x2,_0x41aa09),gameCtx[_0x315ad3(0x267)](),gameCtx[_0x315ad3(0x225)]();}}gameCtx[_0x315ad3(0x24d)]();}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x1c77e0=![];const _0x224a79=gameCanvas[_0x315ad3(0x248)]/0x2,_0x5dc554=gameCanvas[_0x315ad3(0x1df)]/0x2,_0x32fd49='NUMBER\x20OF\x20HITS\x20'+challengingStageEnemiesHit,_0x3eeb66='BONUS\x20'+scoreEarnedThisCS;if(isPaused)drawCanvasText('PAUSED',_0x5dc554,_0x224a79,PAUSE_TEXT_FONT,PAUSE_TEXT_COLOR,_0x315ad3(0x1d9),_0x315ad3(0x253),PAUSE_TEXT_SHADOW),_0x1c77e0=!![];else{if(isShowingCaptureMessage)drawCanvasText(_0x315ad3(0x1da),_0x5dc554,_0x224a79-0x28,INTRO_TEXT_FONT,_0x315ad3(0x226),'center',_0x315ad3(0x253),!![]),_0x1c77e0=!![];else{if(showCsBonusScoreMessage||showPerfectMessage||showCsHitsMessage)drawCanvasText(_0x32fd49,_0x5dc554,_0x224a79,INTRO_TEXT_FONT,CS_HITS_TEXT_COLOR,'center','middle',!![]),_0x1c77e0=!![],(showCsBonusScoreMessage||showPerfectMessage)&&drawCanvasText(_0x315ad3(0x246),_0x5dc554,_0x224a79-CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,PERFECT_TEXT_COLOR,_0x315ad3(0x1d9),_0x315ad3(0x253),!![]),showCsBonusScoreMessage&&drawCanvasText('SPECIAL\x20BONUS\x2010000\x20PTS',_0x5dc554,_0x224a79+CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_BONUS_SCORE_TEXT_COLOR,'center',_0x315ad3(0x253),!![]);else{if(showCSClearMessage)drawCanvasText('STAGE\x20CLEARED',_0x5dc554,_0x224a79-CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_CLEAR_TEXT_COLOR,_0x315ad3(0x1d9),_0x315ad3(0x253),!![]),_0x1c77e0=!![],showCsHitsForClearMessage&&drawCanvasText(_0x32fd49,_0x5dc554,_0x224a79,INTRO_TEXT_FONT,CS_HITS_TEXT_COLOR,_0x315ad3(0x1d9),_0x315ad3(0x253),!![]),showCsScoreForClearMessage&&drawCanvasText(_0x3eeb66,_0x5dc554,_0x224a79+CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_CLEAR_SCORE_TEXT_COLOR,_0x315ad3(0x1d9),_0x315ad3(0x253),!![]);else{if(showExtraLifeMessage)drawCanvasText(_0x315ad3(0x281),_0x5dc554,_0x224a79,INTRO_TEXT_FONT,EXTRA_LIFE_TEXT_COLOR,_0x315ad3(0x1d9),'middle',!![]),_0x1c77e0=!![];else{if(isShowingIntro){let _0x5d073a='',_0x577a6e=INTRO_TEXT_COLOR_NORMAL;if(introStep===0x1)_0x5d073a=!isManualControl?_0x315ad3(0x1c9):_0x315ad3(0x268)+(isTwoPlayerMode?currentPlayer:0x1);else{if(introStep===0x2)_0x5d073a=_0x315ad3(0x262)+level;else introStep===0x3&&(_0x5d073a=_0x315ad3(0x1e7),_0x577a6e=INTRO_TEXT_COLOR_CS_TEXT,!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]));}_0x5d073a&&(drawCanvasText(_0x5d073a,_0x5dc554,_0x224a79,INTRO_TEXT_FONT,_0x577a6e,_0x315ad3(0x1d9),_0x315ad3(0x253),!![]),_0x1c77e0=!![]);}else{if(!isManualControl&&isShowingDemoText&&!_0x1c77e0&&!isEntrancePhaseActive&&!isCsCompletionDelayActive){const _0x89d899=DEMO_TEXT_BLINK_CYCLE_MS*1.5,_0x28ba5d=DEMO_TEXT_BLINK_ON_MS*1.5;_0x94af44%_0x89d899<_0x28ba5d&&drawCanvasText(_0x315ad3(0x210),_0x5dc554,_0x224a79,DEMO_TEXT_LINE1_FONT,DEMO_TEXT_COLOR,_0x315ad3(0x1d9),_0x315ad3(0x253),!![]);}}}}}}}gameCtx[_0x315ad3(0x24d)]();}else{if(isShowingPlayerGameOverMessage){const _0x4e6ef9='PLAYER\x20'+playerWhoIsGameOver,_0x3c167d=RESULTS_LINE_V_SPACING_SINGLE,_0x16bcbf=gameCanvas[_0x315ad3(0x248)]*0.45;drawCanvasText(_0x4e6ef9,gameCanvas[_0x315ad3(0x1df)]/0x2,_0x16bcbf-_0x3c167d/0x2,INTRO_TEXT_FONT,INTRO_TEXT_COLOR_NORMAL,_0x315ad3(0x1d9),_0x315ad3(0x253),!![]),drawCanvasText(_0x315ad3(0x26b),gameCanvas[_0x315ad3(0x1df)]/0x2,_0x16bcbf+_0x3c167d/0x2,INTRO_TEXT_FONT,INTRO_TEXT_COLOR_NORMAL,_0x315ad3(0x1d9),_0x315ad3(0x253),!![]);}else{if(gameOverSequenceStartTime>0x0){const _0x4c86d5=_0x94af44-gameOverSequenceStartTime,_0x3ea83c=_0x4c86d5<GAME_OVER_DURATION,_0x37fb13=_0x4c86d5>=GAME_OVER_DURATION;if(_0x3ea83c)drawCanvasText('GAME\x20OVER',gameCanvas['width']/0x2,gameCanvas['height']/0x2,GAME_OVER_FONT,GAME_OVER_COLOR,_0x315ad3(0x1d9),_0x315ad3(0x253),GAME_OVER_SHADOW);else{if(_0x37fb13){gameCtx[_0x315ad3(0x201)]();const _0x46fc53=gameCanvas[_0x315ad3(0x1df)]/0x2,_0x6d4e76=gameCanvas[_0x315ad3(0x1df)];let _0x50af46=RESULTS_START_Y+RESULTS_LINE_V_SPACING_SINGLE;const _0x22cd03=(_0x232545,_0x226a76,_0x5ad3bb,_0x2c1421,_0x2d4ee5,_0x3674fc,_0x4a9dd2,_0x4b18b2)=>{const _0x3dd8d2=_0x315ad3;let _0x408dcc=_0x4b18b2;const _0x4e90a4=RESULTS_VALUE_COLOR_YELLOW,_0x1163c7=RESULTS_VALUE_COLOR_CYAN;drawCanvasText(_0x3dd8d2(0x265),_0x4a9dd2,_0x408dcc,INTRO_TEXT_FONT,RESULTS_HEADER_COLOR,'center',_0x3dd8d2(0x278),!![]),_0x408dcc+=getSubtitleApproxHeight(INTRO_TEXT_FONT)+RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x232545,_0x4a9dd2,_0x408dcc,INTRO_TEXT_FONT,_0x3dd8d2(0x237),_0x3dd8d2(0x1d9),_0x3dd8d2(0x253),![]),_0x408dcc+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x3dd8d2(0x224),_0x4a9dd2,_0x408dcc,INTRO_TEXT_FONT,_0x4e90a4,_0x3dd8d2(0x1d9),_0x3dd8d2(0x253),![]),_0x408dcc+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x3674fc[_0x3dd8d2(0x1bc)](),_0x4a9dd2,_0x408dcc,INTRO_TEXT_FONT,_0x1163c7,_0x3dd8d2(0x1d9),_0x3dd8d2(0x253),![]),_0x408dcc+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x3dd8d2(0x1fe),_0x4a9dd2,_0x408dcc,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0x3dd8d2(0x1d9),_0x3dd8d2(0x253),![]),_0x408dcc+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x226a76[_0x3dd8d2(0x1bc)](),_0x4a9dd2,_0x408dcc,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x3dd8d2(0x1d9),_0x3dd8d2(0x253),![]),_0x408dcc+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x3dd8d2(0x1d3),_0x4a9dd2,_0x408dcc,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0x3dd8d2(0x1d9),_0x3dd8d2(0x253),![]),_0x408dcc+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x5ad3bb['toString'](),_0x4a9dd2,_0x408dcc,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x3dd8d2(0x1d9),_0x3dd8d2(0x253),![]),_0x408dcc+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x3dd8d2(0x1fa),_0x4a9dd2,_0x408dcc,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,'center',_0x3dd8d2(0x253),![]),_0x408dcc+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x2c1421[_0x3dd8d2(0x1bc)](),_0x4a9dd2,_0x408dcc,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x3dd8d2(0x1d9),'middle',![]),_0x408dcc+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x3dd8d2(0x203),_0x4a9dd2,_0x408dcc,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0x3dd8d2(0x1d9),_0x3dd8d2(0x253),![]),_0x408dcc+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x2d4ee5,_0x4a9dd2,_0x408dcc,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x3dd8d2(0x1d9),_0x3dd8d2(0x253),![]),_0x408dcc+=RESULTS_LINE_V_SPACING_SINGLE*1.5,drawCanvasText(_0x3dd8d2(0x240),_0x4a9dd2,_0x408dcc,RESULTS_FOOTER_FONT,RESULTS_FOOTER_COLOR,_0x3dd8d2(0x1d9),_0x3dd8d2(0x253),![]);};if(isTwoPlayerMode){const _0x4d8dec=player1ShotsFired||0x0,_0x441461=player1EnemiesHit||0x0,_0x39ee15=_0x4d8dec>0x0?Math[_0x315ad3(0x21b)](_0x441461/_0x4d8dec*0x64)+'%':'0%',_0x2fbdde=player2ShotsFired||0x0,_0x362b22=player2EnemiesHit||0x0,_0x51ef84=_0x2fbdde>0x0?Math['round'](_0x362b22/_0x2fbdde*0x64)+'%':'0%',_0x5774d8=_0x6d4e76*0.4,_0x8495a3=_0x6d4e76*0.1,_0x23f070=_0x46fc53-_0x8495a3/0x2-_0x5774d8/0x2+_0x5774d8*0.1,_0x40cbbd=_0x46fc53+_0x8495a3/0x2+_0x5774d8/0x2-_0x5774d8*0.1,_0x4b31bb=_0x315ad3(0x1d5);_0x22cd03(_0x4b31bb,player1Score,_0x4d8dec,_0x441461,_0x39ee15,player1MaxLevelReached,_0x23f070,_0x50af46),_0x22cd03('PLAYER\x202',player2Score,_0x2fbdde,_0x362b22,_0x51ef84,player2MaxLevelReached,_0x40cbbd,_0x50af46);let _0x2ce075=0x0;if(player1Score>player2Score)_0x2ce075=0x1;else{if(player2Score>player1Score)_0x2ce075=0x2;}if(_0x2ce075>0x0){let _0x3571f4=_0x50af46;_0x3571f4+=getSubtitleApproxHeight(INTRO_TEXT_FONT)+RESULTS_LINE_V_SPACING_SINGLE,_0x3571f4+=RESULTS_LINE_V_SPACING_SINGLE;let _0x1828e6=_0x50af46;_0x1828e6+=getSubtitleApproxHeight(INTRO_TEXT_FONT)+RESULTS_LINE_V_SPACING_SINGLE,_0x1828e6+=RESULTS_LINE_V_SPACING_SINGLE;const _0x30cfd2=_0x315ad3(0x268)+_0x2ce075,_0x2fbb39=_0x315ad3(0x25a);drawCanvasText(_0x30cfd2,_0x46fc53,_0x1828e6,INTRO_TEXT_FONT,_0x315ad3(0x237),_0x315ad3(0x1d9),_0x315ad3(0x253),!![]),drawCanvasText(_0x2fbb39,_0x46fc53,_0x1828e6+RESULTS_LINE_V_SPACING_SINGLE,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x315ad3(0x1d9),_0x315ad3(0x253),!![]);}}else{const _0x1e17b8=player1ShotsFired||0x0,_0x37665a=player1EnemiesHit||0x0,_0x390569=wasLastGameAIDemo?score:player1Score,_0x967b5=wasLastGameAIDemo?level:player1MaxLevelReached,_0x10e8a3=_0x1e17b8>0x0?Math[_0x315ad3(0x21b)](_0x37665a/_0x1e17b8*0x64)+'%':'0%',_0x5abdb4=wasLastGameAIDemo?_0x315ad3(0x1c9):_0x315ad3(0x1d5);_0x22cd03(_0x5abdb4,_0x390569,_0x1e17b8,_0x37665a,_0x10e8a3,_0x967b5,_0x46fc53,_0x50af46);}gameCtx[_0x315ad3(0x24d)]();}}}}}}}catch(_0x3cfbe6){console[_0x315ad3(0x1c8)](_0x315ad3(0x27f),_0x3cfbe6,_0x3cfbe6[_0x315ad3(0x284)]);if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;try{gameCtx&&gameCanvas&&(gameCtx[_0x315ad3(0x1f1)]=_0x315ad3(0x226),gameCtx['font']='20px\x20sans-serif',gameCtx['textAlign']=_0x315ad3(0x1d9),gameCtx[_0x315ad3(0x247)](_0x315ad3(0x1fd),gameCanvas[_0x315ad3(0x1df)]/0x2,gameCanvas['height']/0x2));}catch(_0x4cc91f){}try{showMenuState();}catch(_0x2cb03d){}}}function hideCursor(){const _0xf902d3=_0x16aed7;gameCanvas&&(gameCanvas['style']['cursor']=_0xf902d3(0x20b)),mouseIdleTimerId=null;}function handleCanvasMouseMove(_0x43b96c){const _0x3d8bd3=_0x16aed7;if(!gameCanvas)return;let _0x139371=_0x3d8bd3(0x1f3);const _0x3220f2=!isInGameState||isShowingScoreScreen||gameOverSequenceStartTime>0x0&&Date[_0x3d8bd3(0x252)]()-gameOverSequenceStartTime>=GAME_OVER_DURATION;let _0x137d10=![],_0x209247=selectedButtonIndex;if(_0x3220f2){const _0x39f294=gameCanvas['getBoundingClientRect'](),_0x16b568=gameCanvas[_0x3d8bd3(0x1df)]/_0x39f294[_0x3d8bd3(0x1df)],_0x2bce5e=gameCanvas['height']/_0x39f294[_0x3d8bd3(0x248)],_0x426277=(_0x43b96c[_0x3d8bd3(0x1eb)]-_0x39f294['left'])*_0x16b568,_0x5f2f6d=(_0x43b96c[_0x3d8bd3(0x21e)]-_0x39f294[_0x3d8bd3(0x278)])*_0x2bce5e,_0x1e51d0=getMenuButtonRect(0x0),_0x177a32=getMenuButtonRect(0x1);if(_0x1e51d0&&checkCollision({'x':_0x426277,'y':_0x5f2f6d,'width':0x1,'height':0x1},_0x1e51d0))_0x209247=0x0,_0x137d10=!![];else _0x177a32&&checkCollision({'x':_0x426277,'y':_0x5f2f6d,'width':0x1,'height':0x1},_0x177a32)?(_0x209247=0x1,_0x137d10=!![]):(_0x209247=-0x1,_0x137d10=![]);_0x209247!==selectedButtonIndex&&(selectedButtonIndex=_0x209247,_0x137d10&&stopAutoDemoTimer()),_0x139371=_0x137d10?'pointer':_0x3d8bd3(0x1f3);}else _0x139371=_0x3d8bd3(0x20b),selectedButtonIndex=-0x1;(gameCanvas[_0x3d8bd3(0x282)][_0x3d8bd3(0x280)]===_0x3d8bd3(0x20b)||gameCanvas[_0x3d8bd3(0x282)]['cursor']!==_0x139371)&&(gameCanvas[_0x3d8bd3(0x282)][_0x3d8bd3(0x280)]=_0x139371);clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);if(!isInGameState){const _0x5b55a1=Date[_0x3d8bd3(0x252)]();if(_0x5b55a1-lastMouseMoveResetTime>0x1f4){if(typeof startAutoDemoTimer==='function')startAutoDemoTimer();lastMouseMoveResetTime=_0x5b55a1;}}}function getTouchPos(_0x45d6e5,_0x5abcca){const _0x5ad10a=_0x16aed7,_0xde6514=_0x5abcca[_0x5ad10a(0x1e0)]&&_0x5abcca[_0x5ad10a(0x1e0)][_0x5ad10a(0x22e)]>0x0?_0x5abcca['changedTouches']:_0x5abcca[_0x5ad10a(0x232)];if(!_0x45d6e5||!_0xde6514||_0xde6514[_0x5ad10a(0x22e)]===0x0)return null;const _0x23e3bd=_0x45d6e5[_0x5ad10a(0x1be)](),_0x430c6f=_0xde6514[0x0],_0x59e693=_0x45d6e5[_0x5ad10a(0x1df)]/_0x23e3bd[_0x5ad10a(0x1df)],_0xf8954=_0x45d6e5[_0x5ad10a(0x248)]/_0x23e3bd[_0x5ad10a(0x248)];return{'x':(_0x430c6f[_0x5ad10a(0x1eb)]-_0x23e3bd['left'])*_0x59e693,'y':(_0x430c6f[_0x5ad10a(0x21e)]-_0x23e3bd[_0x5ad10a(0x278)])*_0xf8954};}function _0x359d(_0x3138fe,_0x49a4c1){const _0x14eb18=_0x14eb();return _0x359d=function(_0x359dc1,_0x3ccba2){_0x359dc1=_0x359dc1-0x1bc;let _0xa36b89=_0x14eb18[_0x359dc1];return _0xa36b89;},_0x359d(_0x3138fe,_0x49a4c1);}function handleTouchStart(_0x4af4ba){const _0x2aaf55=_0x16aed7;if(!gameCanvas)return;_0x4af4ba[_0x2aaf55(0x274)]();const _0x3a037c=getTouchPos(gameCanvas,_0x4af4ba);if(!_0x3a037c)return;isTouching=!![],touchStartX=_0x3a037c['x'],touchCurrentX=_0x3a037c['x'],isDraggingShip=![],lastTapTime=Date[_0x2aaf55(0x252)](),touchJustFiredSingle=![],isTouchFiringActive=![];const _0x5f4db9=isInGameState&&!isPaused&&ship&&isManualControl&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage;if(_0x5f4db9){const _0x2c599b=ship['x']+ship[_0x2aaf55(0x1df)]/0x2,_0x3ce57c={'x':ship['x']-ship[_0x2aaf55(0x1df)]*0.25,'y':ship['y']-ship[_0x2aaf55(0x248)]*0.5,'width':ship['width']*1.5,'height':ship['height']*0x2};checkCollision({'x':_0x3a037c['x'],'y':_0x3a037c['y'],'width':0x1,'height':0x1},_0x3ce57c)?shipTouchOffsetX=_0x3a037c['x']-_0x2c599b:shipTouchOffsetX=0x0,selectedFiringMode==='rapid'&&(isTouchFiringActive=!![],typeof firePlayerBullet==='function'&&firePlayerBullet(![]));}else shipTouchOffsetX=0x0;}function handleTouchMove(_0x1aea26){const _0x578ff1=_0x16aed7;if(!isTouching||!gameCanvas)return;_0x1aea26[_0x578ff1(0x274)]();const _0x5f3feb=getTouchPos(gameCanvas,_0x1aea26);if(!_0x5f3feb)return;touchCurrentX=_0x5f3feb['x'];const _0x2cc8d9=Math[_0x578ff1(0x219)](touchCurrentX-touchStartX),_0x526eee=Date['now']()-lastTapTime;!isDraggingShip&&((_0x2cc8d9>MIN_DRAG_DISTANCE_FOR_TAP_CANCEL||_0x526eee>MIN_DRAG_TIME_FOR_TAP_CANCEL)&&(isDraggingShip=!![]));if(isDraggingShip&&isInGameState&&!isPaused&&ship&&isManualControl&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isShowingCaptureMessage&&!isWaitingForRespawn&&!isCsCompletionDelayActive){let _0x3e4ded=touchCurrentX-shipTouchOffsetX,_0x3e15dd=_0x3e4ded-ship[_0x578ff1(0x1df)]/0x2;const _0x45dab8=isDualShipActive?ship['width']+DUAL_SHIP_OFFSET_X:ship[_0x578ff1(0x1df)];ship['x']=Math['max'](0x0,Math[_0x578ff1(0x1d8)](gameCanvas[_0x578ff1(0x1df)]-_0x45dab8,_0x3e15dd)),ship[_0x578ff1(0x23b)]=ship['x'];}}function handleTouchEnd(_0xdfc4ed){const _0x5e0255=_0x16aed7;if(!isTouching||!gameCanvas)return;_0xdfc4ed[_0x5e0255(0x274)]();const _0x5ce65e=!isDraggingShip;if(_0x5ce65e){const _0x2fc561=getTouchPos(gameCanvas,_0xdfc4ed);if(!_0x2fc561){isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];return;}if(isShowingIntro&&isInGameState)typeof stopGameAndShowMenu==='function'&&stopGameAndShowMenu();else{if(!isInGameState||isShowingScoreScreen)typeof processMenuInteraction===_0x5e0255(0x1e8)&&processMenuInteraction(_0x2fc561['x'],_0x2fc561['y']);else isInGameState&&isManualControl&&playerLives>0x0&&!isPaused&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage&&!isWaitingForRespawn&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!showExtraLifeMessage&&(selectedFiringMode==='single'&&(typeof firePlayerBullet===_0x5e0255(0x1e8)&&(!touchJustFiredSingle&&(firePlayerBullet(![])&&(touchJustFiredSingle=!![])))));}}isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];}function handleTouchCancel(_0x11e59e){const _0x2300a3=_0x16aed7;if(!isTouching)return;_0x11e59e[_0x2300a3(0x274)](),isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![],touchJustFiredSingle=![];}function mainLoop(_0x36e635){const _0xb345ed=_0x16aed7;try{drawStars();retroGridCtx&&retroGridCanvas&&drawRetroGrid();pollControllerForMenu();if(isInGameState&&!isPaused){if(!isManualControl&&connectedGamepadIndex!==null){const _0x34dab7=navigator[_0xb345ed(0x1f8)]();if(_0x34dab7?.[connectedGamepadIndex]){const _0x12b7cd=_0x34dab7[connectedGamepadIndex],_0x2cd5fe=_0x12b7cd['buttons'][_0xb345ed(0x1e2)](_0x4b57c5=>_0x4b57c5[_0xb345ed(0x244)]);let _0x5c42d0=![];for(let _0x3266cc=0x0;_0x3266cc<_0x2cd5fe[_0xb345ed(0x22e)];_0x3266cc++){if(_0x3266cc===PS5_BUTTON_R1||_0x3266cc===PS5_BUTTON_TRIANGLE)continue;if(_0x2cd5fe[_0x3266cc]&&!(previousDemoButtonStates[_0x3266cc]??![])){_0x5c42d0=!![];break;}}if(_0x5c42d0){stopSound(menuMusicSound),showMenuState(),requestAnimationFrame(mainLoop);return;}previousDemoButtonStates=_0x2cd5fe[_0xb345ed(0x23a)]();}else{if(previousDemoButtonStates[_0xb345ed(0x22e)]>0x0)previousDemoButtonStates=[];}}else{if(previousDemoButtonStates[_0xb345ed(0x22e)]>0x0)previousDemoButtonStates=[];}if(typeof runSingleGameUpdate===_0xb345ed(0x1e8))runSingleGameUpdate(_0x36e635);else{console['error']('FATAL:\x20runSingleGameUpdate\x20is\x20not\x20defined!');if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,showMenuState(),requestAnimationFrame(mainLoop);return;}if(gameOverSequenceStartTime>0x0){const _0x4b7156=Date[_0xb345ed(0x252)](),_0x1dd921=_0x4b7156-gameOverSequenceStartTime,_0x4efa2e=GAME_OVER_DURATION+RESULTS_SCREEN_DURATION;if(_0x1dd921>=_0x4efa2e){showMenuState(),requestAnimationFrame(mainLoop);return;}}}else{if(isShowingScoreScreen){const _0x1aac77=Date[_0xb345ed(0x252)]()-scoreScreenStartTime;if(_0x1aac77>=SCORE_SCREEN_DURATION){startAIDemo(),requestAnimationFrame(mainLoop);return;}if(typeof renderGame===_0xb345ed(0x1e8))renderGame();}else{if(isInGameState&&gameOverSequenceStartTime>0x0){if(typeof renderGame===_0xb345ed(0x1e8))renderGame();const _0x103f9c=Date[_0xb345ed(0x252)](),_0x29d973=_0x103f9c-gameOverSequenceStartTime,_0x57e970=GAME_OVER_DURATION+RESULTS_SCREEN_DURATION;if(_0x29d973>=_0x57e970){showMenuState(),requestAnimationFrame(mainLoop);return;}}else{if(isInGameState&&isPaused){if(typeof renderGame===_0xb345ed(0x1e8))renderGame();}else{if(isInGameState&&isCsCompletionDelayActive){if(typeof runSingleGameUpdate===_0xb345ed(0x1e8))runSingleGameUpdate(_0x36e635);else{if(typeof renderGame===_0xb345ed(0x1e8))renderGame();}}else{if(isInGameState&&isShowingPlayerGameOverMessage){if(typeof runSingleGameUpdate==='function')runSingleGameUpdate(_0x36e635);else{if(typeof renderGame===_0xb345ed(0x1e8))renderGame();}}else{if(typeof renderGame===_0xb345ed(0x1e8))renderGame();}}}}}}mainLoopId=requestAnimationFrame(mainLoop);}catch(_0x5bf0e4){console['error'](_0xb345ed(0x22f),_0x5bf0e4,_0x5bf0e4[_0xb345ed(0x284)]);if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,isPaused=![],stopAllGameSounds(),isGridSoundPlaying=![];try{showMenuState();}catch(_0x50fb8d){console[_0xb345ed(0x1c8)](_0xb345ed(0x1fc),_0x50fb8d),document[_0xb345ed(0x22a)][_0xb345ed(0x260)]='<p\x20style=\x22color:white;\x22>CRITICAL\x20LOOP\x20ERROR.\x20Please\x20refresh.</p>';}}}function startMainLoop(){mainLoopId===null&&(gridOffsetY=0x0,mainLoop());}function initializeGame(){const _0x568a68=_0x16aed7;try{if(typeof initializeDOMElements==='function'){if(!initializeDOMElements()){console[_0x568a68(0x1c8)](_0x568a68(0x236));return;}}else{console[_0x568a68(0x1c8)](_0x568a68(0x218));return;}if(typeof resizeCanvases===_0x568a68(0x1e8))resizeCanvases();else{console[_0x568a68(0x1c8)](_0x568a68(0x221));if(gameCanvas&&starrySkyCanvas&&retroGridCanvas){const _0x1d3ba7=window[_0x568a68(0x1c7)],_0x3840aa=window[_0x568a68(0x24a)];starrySkyCanvas[_0x568a68(0x1df)]=_0x1d3ba7,starrySkyCanvas[_0x568a68(0x248)]=_0x3840aa,retroGridCanvas[_0x568a68(0x1df)]=_0x1d3ba7,retroGridCanvas[_0x568a68(0x248)]=_0x3840aa,gameCanvas['width']=_0x1d3ba7,gameCanvas[_0x568a68(0x248)]=_0x3840aa;}else{console['error'](_0x568a68(0x1de));return;}}typeof defineNormalWaveEntrancePaths===_0x568a68(0x1e8)?defineNormalWaveEntrancePaths():console['error']('defineNormalWaveEntrancePaths\x20not\x20found!');typeof defineChallengingStagePaths===_0x568a68(0x1e8)?defineChallengingStagePaths():console[_0x568a68(0x1c8)](_0x568a68(0x230));if(typeof loadHighScore===_0x568a68(0x1e8))loadHighScore();else console['warn'](_0x568a68(0x1c3));window[_0x568a68(0x1e1)](_0x568a68(0x24c),handleKeyDown),window['addEventListener']('keyup',handleKeyUp),gameCanvas?(gameCanvas[_0x568a68(0x1e1)]('click',handleCanvasClick),gameCanvas[_0x568a68(0x1e1)](_0x568a68(0x1db),handleCanvasMouseMove),gameCanvas[_0x568a68(0x1e1)]('touchstart',handleTouchStart,{'passive':![]}),gameCanvas['addEventListener'](_0x568a68(0x1e5),handleTouchMove,{'passive':![]}),gameCanvas[_0x568a68(0x1e1)](_0x568a68(0x27b),handleTouchEnd,{'passive':![]}),gameCanvas['addEventListener'](_0x568a68(0x1c2),handleTouchCancel,{'passive':![]})):console[_0x568a68(0x1c8)](_0x568a68(0x212)),window[_0x568a68(0x1e1)](_0x568a68(0x23c),handleGamepadConnected),window[_0x568a68(0x1e1)](_0x568a68(0x20a),handleGamepadDisconnected),window[_0x568a68(0x1e1)]('resize',resizeCanvases),showMenuState(),startMainLoop();}catch(_0x3a5698){console[_0x568a68(0x1c8)](_0x568a68(0x257),_0x3a5698,_0x3a5698[_0x568a68(0x284)]),document['body']['innerHTML']=_0x568a68(0x238)+_0x3a5698[_0x568a68(0x26f)]+_0x568a68(0x245),mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);}}window[_0x16aed7(0x1e1)]('load',initializeGame);