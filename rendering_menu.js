const _0x512421=_0x529e;(function(_0x5e6b85,_0x9afdd){const _0x2a22ad=_0x529e,_0x5d5007=_0x5e6b85();while(!![]){try{const _0x51b6cd=-parseInt(_0x2a22ad(0x1d2))/0x1*(parseInt(_0x2a22ad(0x1ad))/0x2)+parseInt(_0x2a22ad(0x199))/0x3*(parseInt(_0x2a22ad(0x1cf))/0x4)+parseInt(_0x2a22ad(0x1fa))/0x5+-parseInt(_0x2a22ad(0x1aa))/0x6+parseInt(_0x2a22ad(0x212))/0x7+parseInt(_0x2a22ad(0x1f2))/0x8+-parseInt(_0x2a22ad(0x229))/0x9;if(_0x51b6cd===_0x9afdd)break;else _0x5d5007['push'](_0x5d5007['shift']());}catch(_0x3772a3){_0x5d5007['push'](_0x5d5007['shift']());}}}(_0x49d1,0x37302));const MENU_LOGO_APPROX_HEIGHT=0x55,MENU_SUBTITLE_TEXT=_0x512421(0x1d7),MENU_SUBTITLE_FONT='bold\x2018px\x20\x27Arial\x20Black\x27,\x20Gadget,\x20sans-serif',MENU_SUBTITLE_COLOR='red',MENU_BUTTON_FONT='22px\x20\x27Arial\x20Black\x27,\x20Gadget,\x20sans-serif',MENU_BUTTON_COLOR=_0x512421(0x224),MENU_BUTTON_COLOR_HOVER=_0x512421(0x202),MENU_BUTTON_WIDTH=0x12c,MENU_BUTTON_HEIGHT=0x37,MENU_LOGO_BOTTOM_TO_START_GAP=0x5,MENU_BUTTON_V_GAP=-0xf,MENU_BUTTON_SUBTITLE_V_GAP=-0x0,MENU_SCORE_FONT=_0x512421(0x1ed),MENU_SCORE_COLOR=_0x512421(0x224),MENU_SCORE_LABEL_COLOR=_0x512421(0x239),GAME_OVER_FONT='bold\x2018px\x20\x27Press\x20Start\x202P\x27',GAME_OVER_COLOR='rgba(0,\x20191,\x20255,\x200.9)',GAME_OVER_SHADOW=!![],DEMO_TEXT_LINE1_FONT=_0x512421(0x19c),DEMO_TEXT_COLOR=_0x512421(0x202),DEMO_TEXT_BLINK_ON_MS=0x3e8,DEMO_TEXT_BLINK_OFF_MS=0x3e8,DEMO_TEXT_BLINK_CYCLE_MS=DEMO_TEXT_BLINK_ON_MS+DEMO_TEXT_BLINK_OFF_MS,LOGO_SCALE_FACTOR=0.45,MENU_LOGO_EXTRA_Y_OFFSET=0x0,MENU_GENERAL_Y_OFFSET=0x32,INTRO_TEXT_FONT=_0x512421(0x19c),INTRO_TEXT_COLOR_NORMAL=_0x512421(0x202),INTRO_TEXT_COLOR_DARK_YELLOW=_0x512421(0x1ff),INTRO_TEXT_COLOR_CS_TEXT=INTRO_TEXT_COLOR_NORMAL,PERFECT_TEXT_COLOR=_0x512421(0x239),EXTRA_LIFE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,READY_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_BONUS_SCORE_TEXT_COLOR=INTRO_TEXT_COLOR_DARK_YELLOW,CS_CLEAR_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_HITS_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_CLEAR_SCORE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,PAUSE_TEXT_FONT=INTRO_TEXT_FONT,PAUSE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,PAUSE_TEXT_SHADOW=!![],RESULTS_SCREEN_DURATION=0x4e20,PLAYER_GAME_OVER_MESSAGE_DURATION=0x1388,SCORE_SCREEN_TEXT_FONT=INTRO_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_TOP=INTRO_TEXT_COLOR_NORMAL,SCORE_SCREEN_TEXT_COLOR_BONUS=INTRO_TEXT_COLOR_DARK_YELLOW,SCORE_SCREEN_LINE_V_SPACING=0x28,SCORE_SCREEN_ICON_TEXT_H_SPACING=0xf,SCORE_SCREEN_VERTICAL_OFFSET=0x4b,SCORE_SCREEN_PLATINI_TEXT=_0x512421(0x1da),RESULTS_HEADER_COLOR=_0x512421(0x239),RESULTS_VALUE_COLOR_YELLOW=INTRO_TEXT_COLOR_DARK_YELLOW,RESULTS_LABEL_COLOR=_0x512421(0x224),RESULTS_VALUE_COLOR_CYAN=INTRO_TEXT_COLOR_NORMAL,RESULTS_LINE_V_SPACING_SINGLE=0x23,RESULTS_LINE_V_SPACING_DOUBLE=0x5a,RESULTS_START_Y=0x9b+0x14+0x14+0x14+0x14,RESULTS_FOOTER_FONT=MENU_SUBTITLE_FONT,RESULTS_FOOTER_COLOR=MENU_SUBTITLE_COLOR,RESULTS_PLATINI_TEXT=_0x512421(0x1e2),CS_MESSAGE_VERTICAL_OFFSET=0x1e;function _0x529e(_0x5062c8,_0x543549){const _0x49d14a=_0x49d1();return _0x529e=function(_0x529e2c,_0x683ff4){_0x529e2c=_0x529e2c-0x186;let _0x4b696b=_0x49d14a[_0x529e2c];return _0x4b696b;},_0x529e(_0x5062c8,_0x543549);}function getSubtitleApproxHeight(_0x4c1b28){const _0x4dd9ad=_0x512421,_0x47fd2c=_0x4c1b28[_0x4dd9ad(0x1f9)](/(\d+)px/);return _0x47fd2c?.[0x1]?parseInt(_0x47fd2c[0x1],0xa):0x19;}function formatMillisecondsToMMSS(_0xaa090c){const _0x359fe0=_0x512421;if(_0xaa090c<=0x0||typeof _0xaa090c!==_0x359fe0(0x1c6)||!isFinite(_0xaa090c))return _0x359fe0(0x1d1);const _0x45f776=Math[_0x359fe0(0x230)](_0xaa090c/0x3e8),_0x214d4b=Math['floor'](_0x45f776/0x3c),_0x51b843=_0x45f776%0x3c,_0x71cee5=String(_0x214d4b)[_0x359fe0(0x23b)](0x2,'0'),_0x2d5361=String(_0x51b843)[_0x359fe0(0x23b)](0x2,'0');return _0x71cee5+':'+_0x2d5361;}function _0x49d1(){const _0x4a2274=['restore','atan2','1UP','PLAYER\x202','defineChallengingStagePaths\x20not\x20found!','PERFECT\x20!','Platini2000(c)\x20LTD','Error\x20creating\x20explosion:','has','PUSH\x20START\x20BUTTON','resize','PLAYER\x20','following_entrance_path','stack','GAME\x20EXIT','Error\x20drawing\x20enemy:','addEventListener','20px\x20\x27Press\x20Start\x202P\x27','random','HIT-MISS-RATIO','touchstart','addColorStop','2368984ukbwuI','pointer','velocityY','isArray','arc','size','touchcancel','match','1935870rcnXUR','keyup','top','save','sqrt','yellow','capturedShipY','state','rgba(0,\x20191,\x20255,\x200.9)','undefined','moveTo','click','rapid','style','BONUS\x20','20px\x20sans-serif','pressed','Critical\x20error:\x20Game\x20logic\x20not\x20loaded\x20correctly!','abs','toString','Cannot\x20set\x20fallback\x20canvas\x20sizes.','left','30px\x20Arial','gamepadconnected','1493464rXeEFM','error','add','DEMO','clearRect','translate','capturedShipDimensions','buttons','Error\x20starting\x20auto\x20demo\x20timer:','HIGH\x20SCORE','val','function','particles','naturalHeight','clientY','globalAlpha','height','color','white','fill','DOM\x20element\x20initialization\x20failed.','NUMBER\x20OF\x20HITS','img','4490442IlJPJH','alpha','Cannot\x20add\x20canvas\x20listeners:\x20gameCanvas\x20not\x20found\x20during\x20init.','START\x20GAME','text','Error\x20rendering\x20explosions:','LOGO','floor','2\x20PLAYER','purple','tintProgress','drawImage','width','SHOTS\x20FIRED','find','complete','red','captureAnimationRotation','padStart','lineTo','mousemove','showing_capture_message','font','\x202ND\x20LIFE\x20BONUS\x20FOR\x20','load','FATAL:\x20resetGame\x20function\x20is\x20not\x20defined!\x20Cannot\x20start\x20game\x20properly.','2UP','initializeDOMElements\x20function\x20not\x20found!','globalCompositeOperation','cos','PLAYER\x201','shadowBlur','getBoundingClientRect','push','textBaseline','rgba(0,\x200,\x200,\x200.8)','FIGHTER\x20CAPTURED','STAGE\x20CLEARED','length','Could\x20not\x20add\x20','body','default','\x20PTS','min','none','message','STAGE\x20','STAGE','slice','forEach','changedTouches','closePath','GAME\x20OVER','following_bezier_path','FATAL\x20RENDER\x20ERROR.','rotate','3fCorHq','max','single','bold\x2018px\x20\x27Press\x20Start\x202P\x27','innerHTML','axes','clientX','getGamepads','touchend','measureText','SPECIAL\x20BONUS\x2010000\x20PTS','close','shadowOffsetY','right','hasCapturedShip','textAlign','middle','1419696vXNcMt','Error\x20in\x20showMenuState:','fillStyle','154466zGCnZj','NORMAL','fillRect','<p\x20style=\x22color:white;\x22>Error\x20returning\x20to\x20menu.\x20Please\x20refresh.</p>','rgba(255,\x20200,\x2080,\x20','radius','\x20level\x201\x20icons\x20due\x20to\x203-type\x20limit.\x20Used\x20types:','targetX','warn','center','attacking','source-over','Error\x20stopping\x20auto\x20demo\x20timer:','naturalWidth','cursor','innerWidth','SCORE','Cannot\x20start\x20game\x20-\x20canvas\x20not\x20ready.','round','beginPath','preventDefault','sin','toFixed','\x20EXT\x20LIFE\x20FOR\x20EVERY\x20','type','number','resizeCanvases\x20not\x20found!','velocityX','<p\x20style=\x22color:white;\x22>CRITICAL\x20LOOP\x20ERROR.\x20Please\x20refresh.</p>','now','1\x20PLAYER','CHALLENGING\x20STAGE','shadowOffsetX','Critical\x20error\x20starting\x20game!','877684avPFyd','orange','00:00','2opUNhi','Error\x20rendering\x20floating\x20scores:','lighter','blue','fillText','Written\x20By\x20Platini2000(c)','map','source-atop','2025\x20\x20\x20PLATINI2000(c)\x20\x20\x20LTD','defineNormalWaveEntrancePaths\x20not\x20found!'];_0x49d1=function(){return _0x4a2274;};return _0x49d1();}function getMenuButtonRect(_0x45e238){const _0x1a7547=_0x512421;if(!gameCtx||!gameCanvas||gameCanvas[_0x1a7547(0x235)]===0x0||gameCanvas[_0x1a7547(0x222)]===0x0)return null;const _0x173948=gameCanvas[_0x1a7547(0x235)],_0x83994a=gameCanvas[_0x1a7547(0x222)],_0x2b8cd2=_0x173948/0x2-MENU_BUTTON_WIDTH/0x2-0x1;let _0x122477=MENU_LOGO_APPROX_HEIGHT;typeof logoImage!==_0x1a7547(0x203)&&logoImage[_0x1a7547(0x238)]&&logoImage[_0x1a7547(0x21f)]!==0x0&&(_0x122477=logoImage[_0x1a7547(0x21f)]*LOGO_SCALE_FACTOR);const _0x1e8854=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x955790=_0x122477+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x1e8854;let _0x1a6e0f=(_0x83994a-_0x955790)/0x2-0x46;_0x1a6e0f+=MENU_GENERAL_Y_OFFSET;const _0x1447e4=_0x1a6e0f+_0x122477+MENU_LOGO_BOTTOM_TO_START_GAP,_0x68e2b2=_0x1447e4+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP;if(_0x45e238===0x0)return{'x':_0x2b8cd2,'y':Math['round'](_0x1447e4),'width':MENU_BUTTON_WIDTH,'height':MENU_BUTTON_HEIGHT};else{if(_0x45e238===0x1)return{'x':_0x2b8cd2,'y':Math[_0x1a7547(0x1bf)](_0x68e2b2),'width':MENU_BUTTON_WIDTH,'height':MENU_BUTTON_HEIGHT};}return null;}function pollControllerForMenu(){const _0x531b38=_0x512421;try{if(connectedGamepadIndex===null&&connectedGamepadIndexP2===null){joystickMovedVerticallyLastFrame=![];if(previousButtonStates[_0x531b38(0x187)]>0x0)previousButtonStates=[];if(previousGameButtonStates[_0x531b38(0x187)]>0x0)previousGameButtonStates=[];if(previousGameButtonStatesP2[_0x531b38(0x187)]>0x0)previousGameButtonStatesP2=[];return;}let _0x15bf8c=connectedGamepadIndex!==null?connectedGamepadIndex:connectedGamepadIndexP2;if(_0x15bf8c===null)return;const _0x1e598f=navigator[_0x531b38(0x1a0)]();if(!_0x1e598f?.[_0x15bf8c])return;const _0x54a726=_0x1e598f[_0x15bf8c],_0x255c63=_0x54a726[_0x531b38(0x219)][_0x531b38(0x1d8)](_0x90351c=>_0x90351c['pressed']),_0x524191=_0x255c63,_0x1eac46=_0x255c63;let _0x49b5ee=![];const _0x86cb83=Date[_0x531b38(0x1ca)]();let _0x337c75=![];(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0)&&(_0x337c75=!![]);if(_0x337c75){connectedGamepadIndex!==null&&(previousButtonStates=_0x524191[_0x531b38(0x191)](),previousGameButtonStates=_0x1eac46['slice']());if(connectedGamepadIndexP2!==null){const _0x41796f=navigator[_0x531b38(0x1a0)]();_0x41796f?.[connectedGamepadIndexP2]&&(previousGameButtonStatesP2=_0x41796f[connectedGamepadIndexP2][_0x531b38(0x219)][_0x531b38(0x1d8)](_0x1c2f42=>_0x1c2f42[_0x531b38(0x20a)]));}return;}if(isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){const _0x4b780b=_0x1eac46[PS5_BUTTON_TRIANGLE],_0x4bf94b=previousGameButtonStates[PS5_BUTTON_TRIANGLE]??![];_0x4b780b&&!_0x4bf94b&&(stopGameAndShowMenu(),_0x49b5ee=!![]);}if(!_0x49b5ee&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){const _0xd61ab9=_0x1eac46[PS5_BUTTON_R1],_0x6d369c=previousGameButtonStates[PS5_BUTTON_R1]??![];if(_0xd61ab9&&!_0x6d369c){if(typeof togglePause===_0x531b38(0x21d))togglePause();_0x49b5ee=!![];}}if(!_0x49b5ee){const _0x3504cf=isShowingScoreScreen||isShowingResultsScreen;if(_0x3504cf){let _0xe29fd2=![];for(let _0x5c9c6f=0x0;_0x5c9c6f<_0x524191['length'];_0x5c9c6f++){if(_0x5c9c6f===PS5_BUTTON_R1||_0x5c9c6f===PS5_BUTTON_TRIANGLE)continue;const _0x1eb72e=previousButtonStates[_0x5c9c6f]??![];if(_0x524191[_0x5c9c6f]&&!_0x1eb72e){_0xe29fd2=!![];break;}}if(_0xe29fd2){if(typeof showMenuState===_0x531b38(0x21d))showMenuState();_0x49b5ee=!![];}}else{if(!isInGameState&&!_0x49b5ee){const _0x595569=_0x524191[PS5_BUTTON_CROSS],_0x2f0347=previousButtonStates[PS5_BUTTON_CROSS]??![],_0x5a0924=_0x524191[PS5_BUTTON_CIRCLE],_0x3c9af7=previousButtonStates[PS5_BUTTON_CIRCLE]??![],_0x22c055=_0x54a726[_0x531b38(0x19e)][PS5_LEFT_STICK_Y]??0x0,_0x6e2358=_0x524191[PS5_DPAD_UP],_0x1cee42=_0x524191[PS5_DPAD_DOWN];let _0x8cd1bf=0x0;if(_0x22c055<-AXIS_DEAD_ZONE_MENU||_0x6e2358)_0x8cd1bf=-0x1;else{if(_0x22c055>AXIS_DEAD_ZONE_MENU||_0x1cee42)_0x8cd1bf=0x1;}let _0x390828=_0x8cd1bf!==0x0;if(_0x390828&&!joystickMovedVerticallyLastFrame){let _0x2e4ae9=selectedButtonIndex;const _0x7bb527=0x2;_0x2e4ae9===-0x1?_0x2e4ae9=_0x8cd1bf===0x1?0x0:_0x7bb527-0x1:_0x2e4ae9+=_0x8cd1bf;if(_0x2e4ae9<0x0)_0x2e4ae9=_0x7bb527-0x1;if(_0x2e4ae9>=_0x7bb527)_0x2e4ae9=0x0;_0x2e4ae9!==selectedButtonIndex&&(selectedButtonIndex=_0x2e4ae9,startAutoDemoTimer());}joystickMovedVerticallyLastFrame=_0x390828;if(_0x595569&&!_0x2f0347){stopAutoDemoTimer();if(isFiringModeSelectMode)selectedButtonIndex===0x0?selectedFiringMode='rapid':selectedFiringMode=_0x531b38(0x19b),baseStartGame(!![]),_0x49b5ee=!![];else{if(isPlayerSelectMode)selectedButtonIndex===0x0?startGame1P():startGame2P(),_0x49b5ee=!![];else{if(selectedButtonIndex===0x0)isPlayerSelectMode=!![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x49b5ee=!![];else selectedButtonIndex===0x1&&(exitGame(),_0x49b5ee=!![]);}}}if(!_0x49b5ee&&_0x5a0924&&!_0x3c9af7){stopAutoDemoTimer();if(isFiringModeSelectMode)isFiringModeSelectMode=![],isPlayerSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x49b5ee=!![];else isPlayerSelectMode?(isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x49b5ee=!![]):(triggerFullscreen(),playSound(menuMusicSound,!![]),_0x49b5ee=!![]);}}}}connectedGamepadIndex!==null&&(previousButtonStates=_0x524191[_0x531b38(0x191)](),previousGameButtonStates=_0x1eac46[_0x531b38(0x191)]());if(connectedGamepadIndexP2!==null){const _0x70d25=navigator[_0x531b38(0x1a0)]();_0x70d25?.[connectedGamepadIndexP2]&&(previousGameButtonStatesP2=_0x70d25[connectedGamepadIndexP2]['buttons']['map'](_0x113b2c=>_0x113b2c['pressed']));}}catch(_0x223319){console[_0x531b38(0x213)]('Error\x20in\x20pollControllerForMenu:',_0x223319),previousButtonStates=[],previousGameButtonStates=[],previousGameButtonStatesP2=[],selectedButtonIndex=-0x1,joystickMovedVerticallyLastFrame=![];}}function startAutoDemoTimer(){const _0x57c5e3=_0x512421;try{stopAutoDemoTimer(),autoStartTimerId=setTimeout(()=>{!isInGameState&&!isShowingScoreScreen?(isPlayerSelectMode=![],isFiringModeSelectMode=![],showScoreScreen()):autoStartTimerId=null;},MENU_INACTIVITY_TIMEOUT);}catch(_0x53d04d){console['error'](_0x57c5e3(0x21a),_0x53d04d);}}function stopAutoDemoTimer(){const _0x2ac397=_0x512421;try{autoStartTimerId&&(clearTimeout(autoStartTimerId),autoStartTimerId=null);}catch(_0x2f4961){console[_0x2ac397(0x213)](_0x2ac397(0x1b9),_0x2f4961);}}function showScoreScreen(){const _0x2c750a=_0x512421;if(isInGameState||isShowingScoreScreen)return;stopAutoDemoTimer(),isShowingScoreScreen=!![],isPlayerSelectMode=![],isFiringModeSelectMode=![],scoreScreenStartTime=Date[_0x2c750a(0x1ca)](),selectedButtonIndex=-0x1;}function showMenuState(){const _0x25f2d8=_0x512421;try{wasLastGameAIDemo&&(highScore=0x4e20),wasLastGameAIDemo=![],isInGameState=![],isShowingScoreScreen=![],scoreScreenStartTime=0x0,isManualControl=![],isShowingDemoText=![],isPaused=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedFiringMode=_0x25f2d8(0x206),isTwoPlayerMode=![],currentPlayer=0x1,showCsHitsMessage=![],csHitsMessageStartTime=0x0,showPerfectMessage=![],perfectMessageStartTime=0x0,showCsBonusScoreMessage=![],csBonusScoreMessageStartTime=0x0,showCSClearMessage=![],csClearMessageStartTime=0x0,showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,showReadyMessage=![],readyMessageStartTime=0x0,readyForNextWave=![],readyForNextWaveReset=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],stopAllGameSounds(),stopSound(resultsMusicSound),stopSound(startSound),stopSound(levelUpSound),stopSound(entranceSound),isGridSoundPlaying=![],playerLives=0x3,score=0x0,level=0x1,player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,scoreEarnedThisCS=0x0,enemies=[],bullets=[],enemyBullets=[],explosions=[],isShowingIntro=![],introStep=0x0,isChallengingStage=![],challengingStageEnemiesHit=0x0,currentGridOffsetX=0x0,gridMoveDirection=0x1,currentWaveDefinition=null,isEntrancePhaseActive=![],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,typeof enemySpawnTimeouts!==_0x25f2d8(0x203)&&Array[_0x25f2d8(0x1f5)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x25f2d8(0x192)](clearTimeout),enemySpawnTimeouts=[],lastEnemyDetachTime=0x0,selectedButtonIndex=-0x1,joystickMovedVerticallyLastFrame=![],previousButtonStates=[],previousGameButtonStates=[],previousDemoButtonStates=[],previousGameButtonStatesP2=[],isShowingResultsScreen=![],gameOverSequenceStartTime=0x0,gameStartTime=0x0,forceCenterShipNextReset=![],player1CompletedLevel=-0x1,p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isTouching=![],touchCurrentX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],ship&&gameCanvas&&gameCanvas[_0x25f2d8(0x235)]>0x0&&gameCanvas[_0x25f2d8(0x222)]>0x0&&(ship['x']=Math['round'](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),ship[_0x25f2d8(0x1b4)]=ship['x'],ship['y']=gameCanvas[_0x25f2d8(0x222)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN),clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0),playSound(menuMusicSound,!![]),startAutoDemoTimer();}catch(_0x3ff33a){console['error'](_0x25f2d8(0x1ab),_0x3ff33a),wasLastGameAIDemo=![],isInGameState=![],isShowingScoreScreen=![],isPaused=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],isTwoPlayerMode=![],currentPlayer=0x1,isShowingPlayerGameOverMessage=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isTouching=![],touchCurrentX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],clearTimeout(mouseIdleTimerId),mouseIdleTimerId=null;if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert('Error\x20returning\x20to\x20menu.\x20Please\x20refresh\x20the\x20page.'),document[_0x25f2d8(0x189)]['innerHTML']=_0x25f2d8(0x1b0);}}function startAIDemo(){const _0x43055f=_0x512421;if(isInGameState)return;stopSound(menuMusicSound),isShowingScoreScreen=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedFiringMode=_0x43055f(0x206),isTwoPlayerMode=![],isManualControl=![],isShowingDemoText=!![],wasLastGameAIDemo=!![],baseStartGame(![]),gameJustStarted=!![];}function startGame1P(){if(isInGameState)return;isTwoPlayerMode=![],isPlayerSelectMode=![],isFiringModeSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer();}function startGame2P(){if(isInGameState)return;isTwoPlayerMode=!![],isPlayerSelectMode=![],isFiringModeSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer();}function baseStartGame(_0x23cca3){const _0xdbbef1=_0x512421;try{if(!gameCanvas||!gameCtx){console[_0xdbbef1(0x213)](_0xdbbef1(0x1be)),showMenuState();return;}stopSound(menuMusicSound),stopAutoDemoTimer(),isInGameState=!![],isShowingScoreScreen=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],isManualControl=_0x23cca3,isShowingDemoText=!_0x23cca3,isPaused=![],previousButtonStates=[],previousGameButtonStates=[],previousDemoButtonStates=[],previousGameButtonStatesP2=[],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];_0x23cca3&&(wasLastGameAIDemo=![]);clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);if(typeof resetGame==='function')resetGame();else{console[_0xdbbef1(0x213)](_0xdbbef1(0x242)),alert(_0xdbbef1(0x20b)),showMenuState();return;}_0x23cca3&&playSound(coinSound),gameStartTime=Date[_0xdbbef1(0x1ca)](),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],selectedButtonIndex=-0x1,ship&&gameCanvas&&gameCanvas[_0xdbbef1(0x235)]>0x0&&gameCanvas[_0xdbbef1(0x222)]>0x0&&(ship['x']=Math[_0xdbbef1(0x1bf)](gameCanvas[_0xdbbef1(0x235)]/0x2-SHIP_WIDTH/0x2),ship[_0xdbbef1(0x1b4)]=ship['x'],ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN),mainLoopId===null&&startMainLoop();}catch(_0x2a9d25){console['error']('Error\x20in\x20baseStartGame:',_0x2a9d25),wasLastGameAIDemo=![],clearTimeout(mouseIdleTimerId),mouseIdleTimerId=null,alert(_0xdbbef1(0x1ce)),showMenuState();}}function stopGameAndShowMenu(){isPaused=![];if(isManualControl)saveHighScore();showMenuState();}function exitGame(){const _0x27c52c=_0x512421;isPaused=![],stopAutoDemoTimer(),saveHighScore(),isInGameState=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],showMenuState();try{window[_0x27c52c(0x1a4)](),setTimeout(()=>{if(!isInGameState)showMenuState();},0xc8);}catch(_0x5bcd39){console[_0x27c52c(0x213)]('window.close()\x20failed:',_0x5bcd39),showMenuState();}}function triggerGameOver(){triggerFinalGameOverSequence();}function startAutoDemoTimer(){const _0x413d18=_0x512421;try{stopAutoDemoTimer(),autoStartTimerId=setTimeout(()=>{!isInGameState&&!isShowingScoreScreen?(isPlayerSelectMode=![],isFiringModeSelectMode=![],showScoreScreen()):autoStartTimerId=null;},MENU_INACTIVITY_TIMEOUT);}catch(_0x5c071e){console[_0x413d18(0x213)](_0x413d18(0x21a),_0x5c071e);}}function stopAutoDemoTimer(){const _0x536c9c=_0x512421;try{autoStartTimerId&&(clearTimeout(autoStartTimerId),autoStartTimerId=null);}catch(_0x32f0e6){console[_0x536c9c(0x213)](_0x536c9c(0x1b9),_0x32f0e6);}}function showScoreScreen(){const _0x3c8c16=_0x512421;if(isInGameState||isShowingScoreScreen)return;stopAutoDemoTimer(),isShowingScoreScreen=!![],isPlayerSelectMode=![],isFiringModeSelectMode=![],scoreScreenStartTime=Date[_0x3c8c16(0x1ca)](),selectedButtonIndex=-0x1,clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);}function processMenuInteraction(_0xc817b,_0x4f44c0){const _0x401ad7=_0x512421;if(isShowingScoreScreen){if(typeof showMenuState==='function')showMenuState();}else{const _0x5f3674=getMenuButtonRect(0x0),_0x19d3ce=getMenuButtonRect(0x1);let _0x441028=_0x5f3674&&checkCollision({'x':_0xc817b,'y':_0x4f44c0,'width':0x1,'height':0x1},_0x5f3674),_0x58496a=_0x19d3ce&&checkCollision({'x':_0xc817b,'y':_0x4f44c0,'width':0x1,'height':0x1},_0x19d3ce);if(isFiringModeSelectMode){if(_0x441028)selectedFiringMode='rapid',baseStartGame(!![]),stopAutoDemoTimer();else _0x58496a?(selectedFiringMode=_0x401ad7(0x19b),baseStartGame(!![]),stopAutoDemoTimer()):(isFiringModeSelectMode=![],isPlayerSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer());}else{if(isPlayerSelectMode){if(_0x441028)startGame1P(),stopAutoDemoTimer();else _0x58496a?(startGame2P(),stopAutoDemoTimer()):(isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer());}else{if(_0x441028)isPlayerSelectMode=!![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer();else{if(_0x58496a){if(typeof exitGame===_0x401ad7(0x21d))exitGame();stopAutoDemoTimer();}else triggerFullscreen(),playSound(menuMusicSound,!![]),stopAutoDemoTimer();}}}}}function handleCanvasClick(_0x282a24){const _0x4e9b6b=_0x512421;if(!gameCanvas)return;const _0x530cb6=gameCanvas[_0x4e9b6b(0x249)](),_0x1430ba=gameCanvas['width']/_0x530cb6[_0x4e9b6b(0x235)],_0x3eb086=gameCanvas[_0x4e9b6b(0x222)]/_0x530cb6[_0x4e9b6b(0x222)],_0x51bbd2=(_0x282a24[_0x4e9b6b(0x19f)]-_0x530cb6[_0x4e9b6b(0x20f)])*_0x1430ba,_0x4cae06=(_0x282a24[_0x4e9b6b(0x220)]-_0x530cb6['top'])*_0x3eb086;let _0x393405=![];(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0)&&(_0x393405=!![]);if(_0x393405)return;if(isInGameState){if(isPaused){if(typeof togglePause==='function')togglePause();return;}if(!isManualControl){if(typeof stopGameAndShowMenu===_0x4e9b6b(0x21d))stopGameAndShowMenu();}}else processMenuInteraction(_0x51bbd2,_0x4cae06);}function createExplosion(_0x20fe02,_0x28fed){const _0x43a896=_0x512421;try{playSound(explosionSound);let _0x13b82c=[];for(let _0x54c59d=0x0;_0x54c59d<EXPLOSION_PARTICLE_COUNT;_0x54c59d++){const _0x21f408=Math['random']()*Math['PI']*0x2,_0x3df810=Math[_0x43a896(0x1ee)]()*(EXPLOSION_MAX_SPEED-EXPLOSION_MIN_SPEED)+EXPLOSION_MIN_SPEED;_0x13b82c[_0x43a896(0x24a)]({'x':_0x20fe02,'y':_0x28fed,'vx':Math[_0x43a896(0x246)](_0x21f408)*_0x3df810,'vy':Math[_0x43a896(0x1c2)](_0x21f408)*_0x3df810,'radius':EXPLOSION_PARTICLE_RADIUS,'alpha':0x1});}explosions[_0x43a896(0x24a)]({'creationTime':Date[_0x43a896(0x1ca)](),'duration':EXPLOSION_DURATION,'particles':_0x13b82c});}catch(_0x1de27f){console['error'](_0x43a896(0x1e3),_0x1de27f);}}function renderExplosions(){const _0x19c9e0=_0x512421;try{if(!gameCtx)return;gameCtx[_0x19c9e0(0x1fd)](),gameCtx[_0x19c9e0(0x245)]=_0x19c9e0(0x1d4),explosions['forEach'](_0xd6fd41=>{const _0x2869af=_0x19c9e0;_0xd6fd41[_0x2869af(0x21e)][_0x2869af(0x192)](_0x16c16b=>{const _0x54ad0c=_0x2869af,_0x1440c4=_0x16c16b['alpha']*EXPLOSION_MAX_OPACITY;_0x1440c4>0.01&&(gameCtx[_0x54ad0c(0x1c0)](),gameCtx[_0x54ad0c(0x1f6)](Math[_0x54ad0c(0x1bf)](_0x16c16b['x']),Math['round'](_0x16c16b['y']),_0x16c16b[_0x54ad0c(0x1b2)],0x0,Math['PI']*0x2),gameCtx[_0x54ad0c(0x1ac)]=_0x54ad0c(0x1b1)+_0x1440c4[_0x54ad0c(0x1c3)](0x3)+')',gameCtx[_0x54ad0c(0x225)]());});}),gameCtx[_0x19c9e0(0x1dc)]();}catch(_0x3ea57a){console['error'](_0x19c9e0(0x22e),_0x3ea57a);}}function drawCanvasText(_0x3260c2,_0xe1f7aa,_0x1e3ba5,_0x46bdbe,_0x5deec1,_0x3d2e32=_0x512421(0x1b6),_0x406fed='middle',_0x5e5353=![]){const _0x2aa26d=_0x512421;if(!gameCtx)return;gameCtx['save'](),gameCtx['font']=_0x46bdbe,gameCtx[_0x2aa26d(0x1ac)]=_0x5deec1,gameCtx['textAlign']=_0x3d2e32,gameCtx[_0x2aa26d(0x24b)]=_0x406fed,_0x5e5353&&(gameCtx['shadowColor']=_0x2aa26d(0x24c),gameCtx[_0x2aa26d(0x248)]=0x8,gameCtx[_0x2aa26d(0x1cd)]=0x3,gameCtx[_0x2aa26d(0x1a5)]=0x3),gameCtx[_0x2aa26d(0x1d6)](_0x3260c2,_0xe1f7aa,_0x1e3ba5),gameCtx[_0x2aa26d(0x1dc)]();}function drawCanvasButton(_0x2d32d0,_0x29ab3c,_0x355edc){const _0x14c734=_0x512421;if(!gameCtx)return;const _0x207668=getMenuButtonRect(_0x29ab3c);if(!_0x207668)return;gameCtx[_0x14c734(0x1fd)](),drawCanvasText(_0x2d32d0,_0x207668['x']+_0x207668[_0x14c734(0x235)]/0x2,_0x207668['y']+_0x207668['height']/0x2,MENU_BUTTON_FONT,_0x355edc?MENU_BUTTON_COLOR_HOVER:MENU_BUTTON_COLOR,'center',_0x14c734(0x1a9)),gameCtx[_0x14c734(0x1dc)]();}function renderFloatingScores(){const _0x7b8071=_0x512421;try{if(!gameCtx||!floatingScores||floatingScores[_0x7b8071(0x187)]===0x0)return;const _0x11d4be=Date['now']();gameCtx['save'](),gameCtx['globalAlpha']=FLOATING_SCORE_OPACITY,floatingScores['forEach'](_0x2fe8e7=>{const _0x139e04=_0x7b8071;_0x11d4be>=_0x2fe8e7['displayStartTime']&&drawCanvasText(_0x2fe8e7[_0x139e04(0x22d)],_0x2fe8e7['x'],_0x2fe8e7['y'],FLOATING_SCORE_FONT,_0x2fe8e7[_0x139e04(0x223)],_0x139e04(0x1b6),_0x139e04(0x1a9),![]);}),gameCtx[_0x7b8071(0x221)]=0x1,gameCtx[_0x7b8071(0x1dc)]();}catch(_0x5e6d2b){console[_0x7b8071(0x213)](_0x7b8071(0x1d3),_0x5e6d2b);}}function renderHitSparks(){const _0x1f78b0=_0x512421;if(!gameCtx||!hitSparks||hitSparks[_0x1f78b0(0x187)]===0x0)return;gameCtx[_0x1f78b0(0x1fd)](),gameCtx['globalCompositeOperation']=_0x1f78b0(0x1d4),hitSparks[_0x1f78b0(0x192)](_0x5f4bec=>{const _0x12be94=_0x1f78b0;if(_0x5f4bec&&_0x5f4bec[_0x12be94(0x22a)]>0.01){gameCtx['fillStyle']=_0x5f4bec[_0x12be94(0x223)],gameCtx[_0x12be94(0x221)]=_0x5f4bec[_0x12be94(0x22a)],gameCtx[_0x12be94(0x1c0)]();const _0x53b531=_0x5f4bec[_0x12be94(0x1f7)]*Math[_0x12be94(0x1fe)](_0x5f4bec[_0x12be94(0x22a)]);gameCtx[_0x12be94(0x1f6)](Math['round'](_0x5f4bec['x']),Math['round'](_0x5f4bec['y']),Math['max'](0.5,_0x53b531/0x2),0x0,Math['PI']*0x2),gameCtx[_0x12be94(0x225)]();}}),gameCtx[_0x1f78b0(0x221)]=0x1,gameCtx[_0x1f78b0(0x1dc)]();}function renderGame(){const _0x166e93=_0x512421;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x166e93(0x216)](0x0,0x0,gameCanvas[_0x166e93(0x235)],gameCanvas[_0x166e93(0x222)]);const _0x2ec329=Date['now']();gameCtx[_0x166e93(0x1fd)]();const _0x1900f0='20px\x20\x27Press\x20Start\x202P\x27',_0x325479='red',_0x4f4b02=_0x166e93(0x224);gameCtx[_0x166e93(0x23f)]=_0x1900f0,gameCtx[_0x166e93(0x24b)]='top';const _0x1561c1=(_0x1d0d12,_0x31e25d,_0x1bd417,_0x2943fe,_0x2b3952=![])=>{const _0x3ec157=_0x166e93;let _0x180c6d=!![],_0x519ffa=UI_1UP_BLINK_ON_MS*1.5,_0x3756e5=UI_1UP_BLINK_CYCLE_MS*1.5,_0x411f8d=_0x325479;if(_0x1d0d12===_0x3ec157(0x215))_0x519ffa=DEMO_TEXT_BLINK_ON_MS*0.7,_0x3756e5=DEMO_TEXT_BLINK_CYCLE_MS;else{if(_0x1d0d12===_0x3ec157(0x21b)){_0x519ffa=UI_1UP_BLINK_ON_MS*1.5,_0x3756e5=UI_1UP_BLINK_CYCLE_MS*1.5;if(isInGameState&&!isManualControl)_0x519ffa=DEMO_TEXT_BLINK_ON_MS*0.7,_0x3756e5=DEMO_TEXT_BLINK_CYCLE_MS;else isInGameState&&isTwoPlayerMode&&currentPlayer===0x2&&(_0x519ffa=UI_1UP_BLINK_ON_MS*1.5,_0x3756e5=UI_1UP_BLINK_CYCLE_MS*1.5);}}_0x2b3952&&((isPaused||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||!(_0x2ec329%_0x3756e5<_0x519ffa))&&(_0x180c6d=![]));_0x180c6d&&(gameCtx[_0x3ec157(0x1ac)]=_0x411f8d,gameCtx['textAlign']=_0x1bd417,gameCtx[_0x3ec157(0x1d6)](_0x1d0d12,_0x2943fe,MARGIN_TOP));const _0x283958=gameCtx[_0x3ec157(0x1a2)](_0x1d0d12)[_0x3ec157(0x235)];let _0x4ec278;if(_0x1bd417==='left')_0x4ec278=_0x2943fe+_0x283958/0x2;else{if(_0x1bd417===_0x3ec157(0x1a6))_0x4ec278=_0x2943fe-_0x283958/0x2;else _0x4ec278=_0x2943fe;}gameCtx[_0x3ec157(0x1ac)]=_0x4f4b02,gameCtx[_0x3ec157(0x1a8)]=_0x3ec157(0x1b6);let _0x3d2e85=MARGIN_TOP+SCORE_OFFSET_Y+0x5;_0x1d0d12===_0x3ec157(0x21b)&&(_0x4ec278=_0x2943fe),gameCtx['fillText'](_0x31e25d[_0x3ec157(0x20d)](),_0x4ec278,_0x3d2e85);};let _0x52e4f8,_0x428e7a,_0x1ea7b7,_0x8c12a8,_0x2e215c=![],_0x58ed21=![],_0x2f32c9=![];if(isShowingResultsScreen)_0x52e4f8=player1Score||0x0,_0x428e7a=player2Score||0x0,_0x1ea7b7=highScore||0x4e20,_0x1ea7b7=Math['max'](_0x1ea7b7,_0x52e4f8,_0x428e7a),_0x8c12a8=wasLastGameAIDemo?_0x166e93(0x215):_0x166e93(0x1de),_0x2f32c9=![],_0x2e215c=![],_0x58ed21=![];else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage)_0x52e4f8=player1Score||0x0,_0x428e7a=player2Score||0x0,_0x1ea7b7=highScore||0x4e20,_0x1ea7b7=Math[_0x166e93(0x19a)](_0x1ea7b7,_0x52e4f8,_0x428e7a),_0x8c12a8=wasLastGameAIDemo?_0x166e93(0x215):_0x166e93(0x1de),_0x2f32c9=![],_0x2e215c=![],_0x58ed21=![];else{if(isShowingPlayerGameOverMessage)_0x52e4f8=player1Score||0x0,_0x428e7a=player2Score||0x0,_0x1ea7b7=highScore||0x4e20,_0x1ea7b7=Math[_0x166e93(0x19a)](_0x1ea7b7,_0x52e4f8,_0x428e7a),_0x8c12a8=_0x166e93(0x1de),_0x2f32c9=![],_0x2e215c=![],_0x58ed21=![];else{if(!isInGameState)_0x52e4f8=player1Score||0x0,_0x428e7a=player2Score||0x0,_0x1ea7b7=highScore||0x4e20,_0x1ea7b7=Math['max'](_0x1ea7b7,_0x52e4f8,_0x428e7a),_0x8c12a8='1UP',_0x2f32c9=![],_0x2e215c=![],_0x58ed21=![];else{_0x1ea7b7=highScore||0x0;if(!isManualControl)_0x52e4f8=score,_0x428e7a=0x0,_0x1ea7b7=Math[_0x166e93(0x19a)](_0x1ea7b7,score),_0x8c12a8=_0x166e93(0x215),_0x2e215c=!isShowingIntro&&!isPaused&&!isShipCaptured,_0x2f32c9=!isPaused&&!isShowingIntro&&score>0x0&&_0x1ea7b7>0x0&&score>=_0x1ea7b7;else isTwoPlayerMode?(_0x52e4f8=currentPlayer===0x1?score:player1Score,_0x428e7a=currentPlayer===0x2?score:player2Score,_0x1ea7b7=Math[_0x166e93(0x19a)](_0x1ea7b7,player1Score,player2Score,score),_0x8c12a8=_0x166e93(0x1de),_0x2e215c=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured,_0x58ed21=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured,_0x2f32c9=!isPaused&&!isShowingIntro&&score>0x0&&_0x1ea7b7>0x0&&score>=_0x1ea7b7):(_0x52e4f8=score,_0x428e7a=player2Score||0x0,_0x1ea7b7=Math['max'](_0x1ea7b7,score),_0x8c12a8=_0x166e93(0x1de),_0x2e215c=!isShowingIntro&&!isPaused&&playerLives>0x0&&!isShipCaptured,_0x2f32c9=!isPaused&&!isShowingIntro&&score>0x0&&_0x1ea7b7>0x0&&score>=_0x1ea7b7);}}}}let _0x203483=![];if(_0x2f32c9){if(!isManualControl)_0x203483=_0x2e215c&&player1TriggeredHighScoreSound;else isTwoPlayerMode?currentPlayer===0x1?_0x203483=_0x2e215c&&player1TriggeredHighScoreSound:_0x203483=_0x58ed21&&player2TriggeredHighScoreSound:_0x203483=_0x2e215c&&player1TriggeredHighScoreSound;}typeof MARGIN_SIDE!==_0x166e93(0x203)&&typeof MARGIN_TOP!=='undefined'&&typeof SCORE_OFFSET_Y!==_0x166e93(0x203)&&(_0x1561c1(_0x8c12a8,_0x52e4f8,'left',MARGIN_SIDE,_0x2e215c),_0x1561c1('HIGH\x20SCORE',_0x1ea7b7,'center',gameCanvas[_0x166e93(0x235)]/0x2,_0x203483),_0x1561c1(_0x166e93(0x243),_0x428e7a,_0x166e93(0x1a6),gameCanvas[_0x166e93(0x235)]-MARGIN_SIDE,_0x58ed21));if(typeof shipImage!==_0x166e93(0x203)&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x166e93(0x203)&&typeof LIFE_ICON_SIZE!==_0x166e93(0x203)&&typeof LIFE_ICON_MARGIN_LEFT!=='undefined'&&typeof LIFE_ICON_SPACING!==_0x166e93(0x203)){if(shipImage[_0x166e93(0x238)]&&shipImage[_0x166e93(0x21f)]!==0x0){const _0x241efa=gameCanvas[_0x166e93(0x222)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x11cd0c=0x0;if(isShowingResultsScreen||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage)_0x11cd0c=0x2;else{if(!isInGameState||isShowingScoreScreen)_0x11cd0c=0x2;else isInGameState&&playerLives>0x0?_0x11cd0c=Math['max'](0x0,playerLives-0x1):_0x11cd0c=0x0;}const _0x357447=0x5;for(let _0x368317=0x0;_0x368317<Math[_0x166e93(0x18c)](_0x11cd0c,_0x357447);_0x368317++){const _0x4857b3=LIFE_ICON_MARGIN_LEFT+_0x368317*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x166e93(0x234)](shipImage,Math[_0x166e93(0x1bf)](_0x4857b3),Math[_0x166e93(0x1bf)](_0x241efa),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}let _0x3d003c=0x1;if(gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage)_0x3d003c=Math[_0x166e93(0x19a)](0x1,player1MaxLevelReached,player2MaxLevelReached);else{if(!isInGameState||isShowingScoreScreen)_0x3d003c=0x1;else isInGameState&&(_0x3d003c=level);}if(_0x3d003c>0x0&&typeof LEVEL_ICON_MARGIN_BOTTOM!==_0x166e93(0x203)&&typeof LEVEL_ICON_SIZE!=='undefined'&&typeof LEVEL_ICON_MARGIN_RIGHT!==_0x166e93(0x203)&&typeof LEVEL_ICON_SPACING!==_0x166e93(0x203)){const _0x11af87=[{'val':0x32,'img':level50Image},{'val':0x1e,'img':level30Image},{'val':0x14,'img':level20Image},{'val':0xa,'img':level10Image},{'val':0x5,'img':level5Image},{'val':0x1,'img':level1Image}];let _0x4f9de6=_0x3d003c,_0x444372=[],_0x3ee93c=new Set();const _0x36b4ab=(_0x52ddeb,_0x1b6468,_0x5f431d)=>{const _0x3ba206=_0x166e93;let _0x460d7a=_0x52ddeb,_0x327198=new Set(_0x5f431d);for(let _0x2ff824=_0x1b6468;_0x2ff824<_0x11af87[_0x3ba206(0x187)];_0x2ff824++){const _0x3cc0af=_0x11af87[_0x2ff824][_0x3ba206(0x21c)];if(_0x460d7a>=_0x3cc0af){const _0x168788=_0x327198[_0x3ba206(0x1f7)]<0x3||_0x327198[_0x3ba206(0x1e4)](_0x3cc0af);if(!_0x168788)continue;const _0x4acecb=Math[_0x3ba206(0x230)](_0x460d7a/_0x3cc0af);_0x460d7a-=_0x4acecb*_0x3cc0af,_0x327198[_0x3ba206(0x214)](_0x3cc0af);if(_0x460d7a===0x0)return!![];}}return _0x460d7a===0x0;};for(let _0x47ea2e=0x0;_0x47ea2e<_0x11af87[_0x166e93(0x187)]-0x1;_0x47ea2e++){const _0x50f827=_0x11af87[_0x47ea2e],_0x17fe2d=_0x50f827[_0x166e93(0x21c)],_0x2e129d=_0x50f827[_0x166e93(0x228)];if(_0x4f9de6>=_0x17fe2d){const _0x43dac4=Math['floor'](_0x4f9de6/_0x17fe2d),_0x2a5b05=_0x4f9de6-_0x43dac4*_0x17fe2d;let _0x329c36=new Set(_0x3ee93c);_0x329c36['add'](_0x17fe2d);if(_0x36b4ab(_0x2a5b05,_0x47ea2e+0x1,_0x329c36)){for(let _0x5a1564=0x0;_0x5a1564<_0x43dac4;_0x5a1564++){_0x444372['push'](_0x2e129d);}_0x4f9de6=_0x2a5b05,_0x3ee93c[_0x166e93(0x214)](_0x17fe2d);if(_0x4f9de6===0x0)break;}}}if(_0x4f9de6>0x0){const _0x29f2e0=_0x3ee93c[_0x166e93(0x1f7)]<0x3||_0x3ee93c[_0x166e93(0x1e4)](0x1);if(_0x29f2e0){for(let _0x585695=0x0;_0x585695<_0x4f9de6;_0x585695++){_0x444372[_0x166e93(0x24a)](level1Image);}_0x3ee93c[_0x166e93(0x214)](0x1),_0x4f9de6=0x0;}else console[_0x166e93(0x1b5)](_0x166e93(0x188)+_0x4f9de6+_0x166e93(0x1b3),_0x3ee93c);}_0x444372['length']===0x0&&_0x444372['push'](level1Image);const _0x145235=_0x444372[_0x166e93(0x187)],_0x5ccddb=_0x145235*LEVEL_ICON_SIZE+Math[_0x166e93(0x19a)](0x0,_0x145235-0x1)*LEVEL_ICON_SPACING,_0x55bfe8=gameCanvas[_0x166e93(0x235)]-LEVEL_ICON_MARGIN_RIGHT,_0x4a34de=_0x55bfe8-_0x5ccddb,_0x28e96f=gameCanvas[_0x166e93(0x222)]-LEVEL_ICON_MARGIN_BOTTOM-LEVEL_ICON_SIZE;let _0x2f4681=_0x4a34de;for(const _0x216fcb of _0x444372){_0x216fcb&&_0x216fcb[_0x166e93(0x238)]&&_0x216fcb['naturalHeight']!==0x0&&gameCtx[_0x166e93(0x234)](_0x216fcb,Math[_0x166e93(0x1bf)](_0x2f4681),Math[_0x166e93(0x1bf)](_0x28e96f),LEVEL_ICON_SIZE,LEVEL_ICON_SIZE),_0x2f4681+=LEVEL_ICON_SIZE+LEVEL_ICON_SPACING;}}gameCtx[_0x166e93(0x1dc)](),gameCtx[_0x166e93(0x1fd)]();if(ship&&!isShowingCaptureMessage){let _0x3e89c7=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x273e08=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS,_0x1bbae2=_0x2ec329%_0x273e08;_0x1bbae2>=INVINCIBILITY_BLINK_ON_MS&&(_0x3e89c7=![]);}if(_0x3e89c7){let _0x3fe903=ship['x'],_0xf25c41=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0xf25c41&&(_0x3fe903=Math[_0x166e93(0x1bf)](gameCanvas[_0x166e93(0x235)]/0x2-ship[_0x166e93(0x235)]/0x2));const _0x36ffb8=gameCanvas[_0x166e93(0x222)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;typeof shipImage!==_0x166e93(0x203)&&shipImage[_0x166e93(0x238)]&&shipImage[_0x166e93(0x21f)]!==0x0?gameCtx[_0x166e93(0x234)](shipImage,Math[_0x166e93(0x1bf)](_0x3fe903),Math['round'](_0x36ffb8),ship[_0x166e93(0x235)],ship['height']):(gameCtx[_0x166e93(0x1ac)]=_0x166e93(0x1d5),gameCtx[_0x166e93(0x1af)](Math['round'](_0x3fe903),Math['round'](_0x36ffb8),ship[_0x166e93(0x235)],ship[_0x166e93(0x222)]));if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&typeof shipImage!==_0x166e93(0x203)&&shipImage['complete']&&shipImage[_0x166e93(0x21f)]!==0x0){const _0x3d5ca6=_0x3fe903+DUAL_SHIP_OFFSET_X;gameCtx[_0x166e93(0x234)](shipImage,Math[_0x166e93(0x1bf)](_0x3d5ca6),Math[_0x166e93(0x1bf)](_0x36ffb8),ship[_0x166e93(0x235)],ship[_0x166e93(0x222)]);}}}fallingShips[_0x166e93(0x187)]>0x0&&typeof shipImage!==_0x166e93(0x203)&&shipImage[_0x166e93(0x238)]&&fallingShips[_0x166e93(0x192)](_0x176adb=>{const _0x3bd4cb=_0x166e93;if(_0x176adb){gameCtx[_0x3bd4cb(0x1fd)]();const _0xba3494=_0x176adb['x']+_0x176adb[_0x3bd4cb(0x235)]/0x2,_0x5fab15=_0x176adb['y']+_0x176adb[_0x3bd4cb(0x222)]/0x2;gameCtx[_0x3bd4cb(0x217)](_0xba3494,_0x5fab15),gameCtx[_0x3bd4cb(0x198)](_0x176adb['rotation']||0x0);const _0x51dd2d=-_0x176adb[_0x3bd4cb(0x235)]/0x2,_0x4d4507=-_0x176adb['height']/0x2,_0x1119cb=_0x176adb[_0x3bd4cb(0x235)],_0x2b1086=_0x176adb[_0x3bd4cb(0x222)];gameCtx[_0x3bd4cb(0x234)](shipImage,_0x51dd2d,_0x4d4507,_0x1119cb,_0x2b1086),typeof _0x176adb[_0x3bd4cb(0x233)]===_0x3bd4cb(0x1c6)&&_0x176adb['tintProgress']>0.01&&(gameCtx['save'](),gameCtx[_0x3bd4cb(0x221)]=_0x176adb[_0x3bd4cb(0x233)],gameCtx[_0x3bd4cb(0x1ac)]=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x3bd4cb(0x245)]=_0x3bd4cb(0x1d9),gameCtx[_0x3bd4cb(0x1af)](_0x51dd2d,_0x4d4507,_0x1119cb,_0x2b1086),gameCtx[_0x3bd4cb(0x1dc)]()),gameCtx[_0x3bd4cb(0x1dc)]();}});gameCtx[_0x166e93(0x1dc)]();if(!isInGameState){if(isShowingScoreScreen){if(typeof LIFE_ICON_SIZE!==_0x166e93(0x203)){gameCtx[_0x166e93(0x1fd)]();const _0x32787e=gameCanvas[_0x166e93(0x235)]/0x2;let _0x10f8a9=gameCanvas[_0x166e93(0x222)]*0.25+SCORE_SCREEN_VERTICAL_OFFSET,_0x4603e9=0x0,_0x24911a=_0x10f8a9+0x0;drawCanvasText(_0x166e93(0x1e5),_0x32787e,_0x24911a-0x1e,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_TOP,'center','middle',!![]);let _0x5ba689=_0x24911a+SCORE_SCREEN_LINE_V_SPACING*1.8;const _0x2a343='\x201ST\x20LIFE\x20BONUS\x20FOR\x2020000\x20PTS';gameCtx[_0x166e93(0x23f)]=SCORE_SCREEN_TEXT_FONT;const _0x33491f=gameCtx[_0x166e93(0x1a2)](_0x2a343)['width'],_0x3a23dd=LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING+_0x33491f;_0x4603e9=_0x32787e-_0x3a23dd/0x2-0x1e;typeof shipImage!==_0x166e93(0x203)&&shipImage['complete']&&shipImage['naturalHeight']!==0x0&&gameCtx[_0x166e93(0x234)](shipImage,Math[_0x166e93(0x1bf)](_0x4603e9),Math[_0x166e93(0x1bf)](_0x5ba689-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x2a343,_0x4603e9+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x5ba689,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0x166e93(0x20f),_0x166e93(0x1a9),![]);let _0x1f83c0=_0x5ba689+SCORE_SCREEN_LINE_V_SPACING*0x1;const _0x6cf329=_0x166e93(0x240)+RECURRING_EXTRA_LIFE_INTERVAL+_0x166e93(0x18b);typeof shipImage!==_0x166e93(0x203)&&shipImage[_0x166e93(0x238)]&&shipImage[_0x166e93(0x21f)]!==0x0&&gameCtx[_0x166e93(0x234)](shipImage,Math[_0x166e93(0x1bf)](_0x4603e9),Math[_0x166e93(0x1bf)](_0x1f83c0-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x6cf329,_0x4603e9+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x1f83c0,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0x166e93(0x20f),'middle',![]);let _0x1bc48e=_0x1f83c0+SCORE_SCREEN_LINE_V_SPACING*0x1;const _0xf8d66a=_0x166e93(0x1c4)+RECURRING_EXTRA_LIFE_INTERVAL+'\x20PTS';typeof shipImage!==_0x166e93(0x203)&&shipImage[_0x166e93(0x238)]&&shipImage[_0x166e93(0x21f)]!==0x0&&gameCtx['drawImage'](shipImage,Math[_0x166e93(0x1bf)](_0x4603e9),Math[_0x166e93(0x1bf)](_0x1bc48e-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0xf8d66a,_0x4603e9+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x1bc48e,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0x166e93(0x20f),_0x166e93(0x1a9),![]);let _0x184598=_0x1bc48e+SCORE_SCREEN_LINE_V_SPACING*1.8;drawCanvasText(SCORE_SCREEN_PLATINI_TEXT,_0x32787e-0xa,_0x184598+0x1e,MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,'center',_0x166e93(0x1a9),![]),gameCtx['restore']();}}else{gameCtx['save']();const _0x27ea7d=gameCanvas[_0x166e93(0x235)],_0x36a063=gameCanvas[_0x166e93(0x222)],_0x2da3f2=_0x27ea7d/0x2;selectedButtonIndex===-0x1&&(selectedButtonIndex=0x0);let _0x29527e=MENU_LOGO_APPROX_HEIGHT,_0x4eeffa=_0x29527e*(logoImage['naturalWidth']/logoImage[_0x166e93(0x21f)]||0x1);typeof logoImage!==_0x166e93(0x203)&&logoImage['complete']&&logoImage[_0x166e93(0x21f)]!==0x0&&(_0x29527e=logoImage[_0x166e93(0x21f)]*LOGO_SCALE_FACTOR,_0x4eeffa=logoImage[_0x166e93(0x1ba)]*LOGO_SCALE_FACTOR);const _0x3e908e=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x4ecea0=_0x29527e+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x3e908e;let _0x28f25e=(_0x36a063-_0x4ecea0)/0x2-0x46;_0x28f25e+=MENU_GENERAL_Y_OFFSET;const _0x5f2cc9=_0x2da3f2-_0x4eeffa/0x2,_0x56916d=_0x28f25e+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x166e93(0x203)&&logoImage[_0x166e93(0x238)]&&logoImage[_0x166e93(0x21f)]!==0x0?gameCtx[_0x166e93(0x234)](logoImage,Math[_0x166e93(0x1bf)](_0x5f2cc9),Math[_0x166e93(0x1bf)](_0x56916d),_0x4eeffa,_0x29527e):drawCanvasText(_0x166e93(0x22f),_0x2da3f2,_0x56916d+_0x29527e/0x2,_0x166e93(0x210),'grey');if(isFiringModeSelectMode)drawCanvasButton('EASY',0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x166e93(0x1ae),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x166e93(0x1cb),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x166e93(0x231),0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x166e93(0x22c),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x166e93(0x1ea),0x1,selectedButtonIndex===0x1));const _0x3bb546=getMenuButtonRect(0x1);let _0x2888dd;_0x3bb546?_0x2888dd=_0x3bb546['y']+_0x3bb546[_0x166e93(0x222)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x3e908e/0x2:_0x2888dd=_0x28f25e+_0x29527e+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x3e908e/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x2da3f2-0x1,Math[_0x166e93(0x1bf)](_0x2888dd),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x166e93(0x1b6),'middle',!![]),gameCtx[_0x166e93(0x1dc)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x166e93(0x1fd)]();let _0x36ab12=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x36ab12&&(bullets['forEach'](_0x3d91f7=>{const _0x49fb02=_0x166e93;_0x3d91f7&&(typeof bulletImage!==_0x49fb02(0x203)&&bulletImage[_0x49fb02(0x238)]?gameCtx[_0x49fb02(0x234)](bulletImage,Math['round'](_0x3d91f7['x']),Math[_0x49fb02(0x1bf)](_0x3d91f7['y']),_0x3d91f7[_0x49fb02(0x235)],_0x3d91f7[_0x49fb02(0x222)]):(gameCtx['fillStyle']=_0x49fb02(0x1ff),gameCtx[_0x49fb02(0x1af)](Math[_0x49fb02(0x1bf)](_0x3d91f7['x']),Math[_0x49fb02(0x1bf)](_0x3d91f7['y']),_0x3d91f7['width'],_0x3d91f7['height'])));}),enemyBullets[_0x166e93(0x192)](_0x46be24=>{const _0x302337=_0x166e93;_0x46be24&&(typeof enemyBulletImage!==_0x302337(0x203)&&enemyBulletImage[_0x302337(0x238)]&&enemyBulletImage[_0x302337(0x1ba)]>0x0?gameCtx[_0x302337(0x234)](enemyBulletImage,Math[_0x302337(0x1bf)](_0x46be24['x']),Math['round'](_0x46be24['y']),_0x46be24[_0x302337(0x235)],_0x46be24[_0x302337(0x222)]):(gameCtx[_0x302337(0x1ac)]='white',gameCtx[_0x302337(0x1af)](Math[_0x302337(0x1bf)](_0x46be24['x']),Math[_0x302337(0x1bf)](_0x46be24['y']),_0x46be24[_0x302337(0x235)],_0x46be24[_0x302337(0x222)])));}));enemies[_0x166e93(0x192)](_0xa9d13e=>{const _0x3fb79c=_0x166e93;if(_0xa9d13e&&_0xa9d13e['y']<gameCanvas[_0x3fb79c(0x222)]+_0xa9d13e[_0x3fb79c(0x222)]*0x2&&_0xa9d13e['y']>-_0xa9d13e[_0x3fb79c(0x222)]*0x2){gameCtx[_0x3fb79c(0x1fd)]();try{let _0x120e5=null,_0x1c95de='grey';const _0x263f13=!isPaused&&_0x2ec329%(ENEMY_ANIMATION_INTERVAL_MS*0x2)>=ENEMY_ANIMATION_INTERVAL_MS;if(_0xa9d13e['type']===ENEMY3_TYPE)_0x120e5=_0x263f13?bossGalagaImage2:bossGalagaImage,_0x1c95de=_0x3fb79c(0x232);else _0xa9d13e['type']===ENEMY2_TYPE?(_0x120e5=_0x263f13?butterflyImage2:butterflyImage,_0x1c95de='cyan'):(_0x120e5=_0x263f13?beeImage2:beeImage,_0x1c95de=_0x3fb79c(0x239));const _0x2984bc=Math['round'](_0xa9d13e['x']),_0x87ba6a=Math[_0x3fb79c(0x1bf)](_0xa9d13e['y']),_0x5e9862=_0xa9d13e[_0x3fb79c(0x235)],_0x27af37=_0xa9d13e[_0x3fb79c(0x222)],_0x10df5e=_0xa9d13e[_0x3fb79c(0x1c5)]===ENEMY3_TYPE&&_0xa9d13e['isDamaged'],_0x160119=!isPaused&&(_0xa9d13e[_0x3fb79c(0x201)]==='attacking'||_0xa9d13e[_0x3fb79c(0x201)]===_0x3fb79c(0x196)||_0xa9d13e[_0x3fb79c(0x201)]===_0x3fb79c(0x1e8))&&_0xa9d13e['y']>-_0xa9d13e[_0x3fb79c(0x222)]*0.5&&(Math[_0x3fb79c(0x20c)](_0xa9d13e[_0x3fb79c(0x1c8)])>0.1||Math[_0x3fb79c(0x20c)](_0xa9d13e[_0x3fb79c(0x1f4)])>0.1),_0x554c34=_0xa9d13e['state']===_0x3fb79c(0x23e)&&_0xa9d13e[_0x3fb79c(0x1c5)]===ENEMY3_TYPE&&_0xa9d13e[_0x3fb79c(0x1a7)]&&_0xa9d13e[_0x3fb79c(0x218)]&&typeof _0xa9d13e['capturedShipX']==='number'&&typeof _0xa9d13e[_0x3fb79c(0x200)]==='number'&&typeof _0xa9d13e[_0x3fb79c(0x23a)]==='number',_0x2d08d5=_0xa9d13e[_0x3fb79c(0x201)]!==_0x3fb79c(0x23e)&&_0xa9d13e[_0x3fb79c(0x1c5)]===ENEMY3_TYPE&&_0xa9d13e[_0x3fb79c(0x1a7)]&&_0xa9d13e[_0x3fb79c(0x218)],_0x3f95ba=_0x554c34||_0x2d08d5?_0xa9d13e[_0x3fb79c(0x218)][_0x3fb79c(0x235)]:0x0,_0x52fad0=_0x554c34||_0x2d08d5?_0xa9d13e[_0x3fb79c(0x218)][_0x3fb79c(0x222)]:0x0;let _0xc7a330=0x0,_0x1a61dd=0x0;if(_0x554c34)_0xc7a330=Math[_0x3fb79c(0x1bf)](_0xa9d13e['capturedShipX']),_0x1a61dd=Math[_0x3fb79c(0x1bf)](_0xa9d13e[_0x3fb79c(0x200)]);else _0x2d08d5&&(_0xc7a330=Math[_0x3fb79c(0x1bf)](_0xa9d13e['x']+CAPTURED_SHIP_OFFSET_X),_0x1a61dd=Math[_0x3fb79c(0x1bf)](_0xa9d13e['y']+CAPTURED_SHIP_OFFSET_Y));const _0x10b513=(_0x28f6c2,_0x477079,_0x1fefa6,_0x375836)=>{const _0x14a059=_0x3fb79c;typeof _0x120e5!==_0x14a059(0x203)&&_0x120e5[_0x14a059(0x238)]&&_0x120e5[_0x14a059(0x21f)]!==0x0?gameCtx[_0x14a059(0x234)](_0x120e5,_0x28f6c2,_0x477079,_0x1fefa6,_0x375836):(gameCtx[_0x14a059(0x1ac)]=_0x1c95de,gameCtx[_0x14a059(0x1af)](_0x28f6c2,_0x477079,_0x1fefa6,_0x375836)),_0x10df5e&&(gameCtx[_0x14a059(0x245)]=_0x14a059(0x1d9),gameCtx[_0x14a059(0x1ac)]='rgba(0,\x200,\x20139,\x200.5)',gameCtx['fillRect'](_0x28f6c2,_0x477079,_0x1fefa6,_0x375836),gameCtx['globalCompositeOperation']=_0x14a059(0x1b8));};if(_0x160119){const _0x28d084=_0x2984bc+_0x5e9862/0x2,_0x3421f2=_0x87ba6a+_0x27af37/0x2;gameCtx[_0x3fb79c(0x217)](_0x28d084,_0x3421f2);let _0xa79b37=Math[_0x3fb79c(0x1dd)](_0xa9d13e[_0x3fb79c(0x1f4)],_0xa9d13e['velocityX'])+Math['PI']/0x2;if(_0xa9d13e[_0x3fb79c(0x1c5)]===ENEMY3_TYPE&&_0xa9d13e['state']===_0x3fb79c(0x1b7))_0xa79b37+=Math['PI'];gameCtx[_0x3fb79c(0x198)](_0xa79b37),_0x10b513(-_0x5e9862/0x2,-_0x27af37/0x2,_0x5e9862,_0x27af37);if(_0x2d08d5&&typeof shipImage!=='undefined'&&shipImage[_0x3fb79c(0x238)]){gameCtx['globalAlpha']=0.8;const _0x3eba35=CAPTURED_SHIP_OFFSET_X,_0x40b689=CAPTURED_SHIP_OFFSET_Y;gameCtx['drawImage'](shipImage,_0x3eba35-_0x3f95ba/0x2,_0x40b689-_0x52fad0/0x2,_0x3f95ba,_0x52fad0),gameCtx[_0x3fb79c(0x221)]=0x1,gameCtx[_0x3fb79c(0x1fd)](),gameCtx['fillStyle']=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x3fb79c(0x245)]=_0x3fb79c(0x1d9),gameCtx[_0x3fb79c(0x1af)](_0x3eba35-_0x3f95ba/0x2,_0x40b689-_0x52fad0/0x2,_0x3f95ba,_0x52fad0),gameCtx[_0x3fb79c(0x1dc)]();}gameCtx[_0x3fb79c(0x198)](-_0xa79b37),gameCtx[_0x3fb79c(0x217)](-_0x28d084,-_0x3421f2);}else _0x10b513(_0x2984bc,_0x87ba6a,_0x5e9862,_0x27af37),_0x2d08d5&&typeof shipImage!=='undefined'&&shipImage['complete']&&(gameCtx['globalAlpha']=0.8,gameCtx[_0x3fb79c(0x234)](shipImage,_0xc7a330,_0x1a61dd,_0x3f95ba,_0x52fad0),gameCtx[_0x3fb79c(0x221)]=0x1,gameCtx[_0x3fb79c(0x1fd)](),gameCtx[_0x3fb79c(0x1ac)]=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x3fb79c(0x245)]=_0x3fb79c(0x1d9),gameCtx[_0x3fb79c(0x1af)](_0xc7a330,_0x1a61dd,_0x3f95ba,_0x52fad0),gameCtx[_0x3fb79c(0x1dc)]());if(_0x554c34&&typeof shipImage!==_0x3fb79c(0x203)&&shipImage[_0x3fb79c(0x238)]){gameCtx[_0x3fb79c(0x1fd)]();const _0x2418b1=_0xc7a330+_0x3f95ba/0x2,_0x357573=_0x1a61dd+_0x52fad0/0x2;gameCtx['translate'](_0x2418b1,_0x357573),gameCtx['rotate'](_0xa9d13e[_0x3fb79c(0x23a)]),gameCtx['globalAlpha']=0.8,gameCtx[_0x3fb79c(0x234)](shipImage,-_0x3f95ba/0x2,-_0x52fad0/0x2,_0x3f95ba,_0x52fad0),gameCtx[_0x3fb79c(0x221)]=0x1,gameCtx['save'](),gameCtx[_0x3fb79c(0x1ac)]=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x3fb79c(0x245)]=_0x3fb79c(0x1d9),gameCtx[_0x3fb79c(0x1af)](-_0x3f95ba/0x2,-_0x52fad0/0x2,_0x3f95ba,_0x52fad0),gameCtx[_0x3fb79c(0x1dc)](),gameCtx[_0x3fb79c(0x1dc)]();}}catch(_0x51e8ee){console['error'](_0x3fb79c(0x1eb),_0x51e8ee),gameCtx['fillStyle']=_0x3fb79c(0x1d0),gameCtx[_0x3fb79c(0x1af)](Math[_0x3fb79c(0x1bf)](_0xa9d13e['x']),Math['round'](_0xa9d13e['y']),_0xa9d13e['width'],_0xa9d13e[_0x3fb79c(0x222)]);}finally{gameCtx[_0x3fb79c(0x1dc)]();}}});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){gameCtx[_0x166e93(0x1fd)]();const _0x50df74=0.4+(Math[_0x166e93(0x1c2)](_0x2ec329*CAPTURE_BEAM_PULSE_SPEED)+0x1)/0x2*0.6,_0xb94a07=captureBeamProgress;gameCtx['globalAlpha']=_0xb94a07*_0x50df74;const _0x5d79ae=enemies[_0x166e93(0x237)](_0x35cb3c=>_0x35cb3c['id']===capturingBossId);if(_0x5d79ae){const _0x5fea2a=_0x5d79ae['x']+BOSS_WIDTH/0x2,_0x536db5=_0x5d79ae['y']+BOSS_HEIGHT,_0x3ea5bf=gameCanvas[_0x166e93(0x222)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x480501=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x11f7ec=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR;if(_0x536db5<_0x3ea5bf){const _0x3b4a87=gameCtx['createLinearGradient'](_0x5fea2a,_0x536db5,_0x5fea2a,_0x3ea5bf);_0x3b4a87[_0x166e93(0x1f1)](0x0,CAPTURE_BEAM_COLOR_START),_0x3b4a87['addColorStop'](0x1,CAPTURE_BEAM_COLOR_END),gameCtx['fillStyle']=_0x3b4a87,gameCtx[_0x166e93(0x1c0)](),gameCtx[_0x166e93(0x204)](_0x5fea2a-_0x480501/0x2,_0x536db5),gameCtx[_0x166e93(0x23c)](_0x5fea2a+_0x480501/0x2,_0x536db5),gameCtx[_0x166e93(0x23c)](_0x5fea2a+_0x11f7ec/0x2,_0x3ea5bf),gameCtx[_0x166e93(0x23c)](_0x5fea2a-_0x11f7ec/0x2,_0x3ea5bf),gameCtx[_0x166e93(0x194)](),gameCtx[_0x166e93(0x225)]();}}gameCtx['restore']();}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x2168b4=![];const _0x4bf9d8=gameCanvas[_0x166e93(0x222)]/0x2,_0x16de47=gameCanvas['width']/0x2,_0x1b6115='NUMBER\x20OF\x20HITS\x20'+challengingStageEnemiesHit,_0x235bec=_0x166e93(0x208)+scoreEarnedThisCS;if(isPaused)drawCanvasText('PAUSED',_0x16de47,_0x4bf9d8,PAUSE_TEXT_FONT,PAUSE_TEXT_COLOR,_0x166e93(0x1b6),_0x166e93(0x1a9),PAUSE_TEXT_SHADOW),_0x2168b4=!![];else{if(isShowingCaptureMessage)drawCanvasText(_0x166e93(0x24d),_0x16de47,_0x4bf9d8-0x28,INTRO_TEXT_FONT,'red','center','middle',!![]),_0x2168b4=!![];else{if(showCsBonusScoreMessage||showPerfectMessage||showCsHitsMessage)drawCanvasText(_0x1b6115,_0x16de47,_0x4bf9d8,INTRO_TEXT_FONT,CS_HITS_TEXT_COLOR,'center',_0x166e93(0x1a9),!![]),_0x2168b4=!![],(showCsBonusScoreMessage||showPerfectMessage)&&drawCanvasText(_0x166e93(0x1e1),_0x16de47,_0x4bf9d8-CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,PERFECT_TEXT_COLOR,'center',_0x166e93(0x1a9),!![]),showCsBonusScoreMessage&&drawCanvasText(_0x166e93(0x1a3),_0x16de47,_0x4bf9d8+CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_BONUS_SCORE_TEXT_COLOR,_0x166e93(0x1b6),_0x166e93(0x1a9),!![]);else{if(showCSClearMessage)drawCanvasText(_0x166e93(0x186),_0x16de47,_0x4bf9d8-CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_CLEAR_TEXT_COLOR,_0x166e93(0x1b6),_0x166e93(0x1a9),!![]),_0x2168b4=!![],showCsHitsForClearMessage&&drawCanvasText(_0x1b6115,_0x16de47,_0x4bf9d8,INTRO_TEXT_FONT,CS_HITS_TEXT_COLOR,'center','middle',!![]),showCsScoreForClearMessage&&drawCanvasText(_0x235bec,_0x16de47,_0x4bf9d8+CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_CLEAR_SCORE_TEXT_COLOR,_0x166e93(0x1b6),_0x166e93(0x1a9),!![]);else{if(showExtraLifeMessage)drawCanvasText('EXTRA\x20LIFE',_0x16de47,_0x4bf9d8,INTRO_TEXT_FONT,EXTRA_LIFE_TEXT_COLOR,'center',_0x166e93(0x1a9),!![]),_0x2168b4=!![];else{if(isShowingIntro){let _0x5dec56='',_0x5755cd=INTRO_TEXT_COLOR_NORMAL;if(introStep===0x1)_0x5dec56=!isManualControl?_0x166e93(0x215):'PLAYER\x20'+(isTwoPlayerMode?currentPlayer:0x1);else{if(introStep===0x2)_0x5dec56=_0x166e93(0x18f)+level;else introStep===0x3&&(_0x5dec56=_0x166e93(0x1cc),_0x5755cd=INTRO_TEXT_COLOR_CS_TEXT,!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]));}_0x5dec56&&(drawCanvasText(_0x5dec56,_0x16de47,_0x4bf9d8,INTRO_TEXT_FONT,_0x5755cd,'center',_0x166e93(0x1a9),!![]),_0x2168b4=!![]);}else{if(!isManualControl&&isShowingDemoText&&!_0x2168b4&&!isEntrancePhaseActive&&!isCsCompletionDelayActive){const _0x3ccc27=DEMO_TEXT_BLINK_CYCLE_MS*1.5,_0x26dfef=DEMO_TEXT_BLINK_ON_MS*1.5;_0x2ec329%_0x3ccc27<_0x26dfef&&drawCanvasText(_0x166e93(0x1e5),_0x16de47,_0x4bf9d8,DEMO_TEXT_LINE1_FONT,DEMO_TEXT_COLOR,'center',_0x166e93(0x1a9),!![]);}}}}}}}gameCtx[_0x166e93(0x1dc)]();}else{if(isShowingPlayerGameOverMessage){const _0x3d2c4e='PLAYER\x20'+playerWhoIsGameOver,_0x574cf8=RESULTS_LINE_V_SPACING_SINGLE,_0x4ec726=gameCanvas[_0x166e93(0x222)]*0.45;drawCanvasText(_0x3d2c4e,gameCanvas[_0x166e93(0x235)]/0x2,_0x4ec726-_0x574cf8/0x2,INTRO_TEXT_FONT,INTRO_TEXT_COLOR_NORMAL,_0x166e93(0x1b6),_0x166e93(0x1a9),!![]),drawCanvasText('GAME\x20OVER',gameCanvas[_0x166e93(0x235)]/0x2,_0x4ec726+_0x574cf8/0x2,INTRO_TEXT_FONT,INTRO_TEXT_COLOR_NORMAL,_0x166e93(0x1b6),'middle',!![]);}else{if(gameOverSequenceStartTime>0x0){const _0x4c4c4a=_0x2ec329-gameOverSequenceStartTime,_0xb79420=_0x4c4c4a<GAME_OVER_DURATION,_0x4b77d5=_0x4c4c4a>=GAME_OVER_DURATION;if(_0xb79420)drawCanvasText(_0x166e93(0x195),gameCanvas['width']/0x2,gameCanvas[_0x166e93(0x222)]/0x2,GAME_OVER_FONT,GAME_OVER_COLOR,_0x166e93(0x1b6),_0x166e93(0x1a9),GAME_OVER_SHADOW);else{if(_0x4b77d5){gameCtx['save']();const _0x3c7b28=gameCanvas['width']/0x2,_0x3eccc2=gameCanvas[_0x166e93(0x235)];let _0x489e4f=RESULTS_START_Y+RESULTS_LINE_V_SPACING_SINGLE;const _0x5b7fba=(_0x3b31ae,_0x43a7e1,_0x3631ee,_0x5f29db,_0x238e9b,_0x5dde57,_0xb020af,_0x1106c9)=>{const _0xdc56ed=_0x166e93;let _0x5eaa04=_0x1106c9;const _0x385e07=RESULTS_VALUE_COLOR_YELLOW,_0x34332c=RESULTS_VALUE_COLOR_CYAN;drawCanvasText('-\x20RESULTS\x20-',_0xb020af,_0x5eaa04,INTRO_TEXT_FONT,RESULTS_HEADER_COLOR,_0xdc56ed(0x1b6),'top',!![]),_0x5eaa04+=getSubtitleApproxHeight(INTRO_TEXT_FONT)+RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x3b31ae,_0xb020af,_0x5eaa04,INTRO_TEXT_FONT,_0xdc56ed(0x224),'center',_0xdc56ed(0x1a9),![]),_0x5eaa04+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0xdc56ed(0x190),_0xb020af,_0x5eaa04,INTRO_TEXT_FONT,_0x385e07,'center',_0xdc56ed(0x1a9),![]),_0x5eaa04+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x5dde57['toString'](),_0xb020af,_0x5eaa04,INTRO_TEXT_FONT,_0x34332c,_0xdc56ed(0x1b6),'middle',![]),_0x5eaa04+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0xdc56ed(0x1bd),_0xb020af,_0x5eaa04,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,'center',_0xdc56ed(0x1a9),![]),_0x5eaa04+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x43a7e1[_0xdc56ed(0x20d)](),_0xb020af,_0x5eaa04,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0xdc56ed(0x1b6),_0xdc56ed(0x1a9),![]),_0x5eaa04+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0xdc56ed(0x236),_0xb020af,_0x5eaa04,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,'center',_0xdc56ed(0x1a9),![]),_0x5eaa04+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x3631ee[_0xdc56ed(0x20d)](),_0xb020af,_0x5eaa04,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,'center',_0xdc56ed(0x1a9),![]),_0x5eaa04+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0xdc56ed(0x227),_0xb020af,_0x5eaa04,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0xdc56ed(0x1b6),_0xdc56ed(0x1a9),![]),_0x5eaa04+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x5f29db['toString'](),_0xb020af,_0x5eaa04,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0xdc56ed(0x1b6),_0xdc56ed(0x1a9),![]),_0x5eaa04+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0xdc56ed(0x1ef),_0xb020af,_0x5eaa04,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,'center',_0xdc56ed(0x1a9),![]),_0x5eaa04+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x238e9b,_0xb020af,_0x5eaa04,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0xdc56ed(0x1b6),_0xdc56ed(0x1a9),![]),_0x5eaa04+=RESULTS_LINE_V_SPACING_SINGLE*1.5,drawCanvasText(RESULTS_PLATINI_TEXT,_0xb020af,_0x5eaa04-0xa,RESULTS_FOOTER_FONT,RESULTS_FOOTER_COLOR,_0xdc56ed(0x1b6),_0xdc56ed(0x1a9),![]);};if(isTwoPlayerMode){const _0x49836f=player1ShotsFired||0x0,_0x1316e7=player1EnemiesHit||0x0,_0x3695a2=_0x49836f>0x0?Math[_0x166e93(0x1bf)](_0x1316e7/_0x49836f*0x64)+'%':'0%',_0x372673=player2ShotsFired||0x0,_0xd226f5=player2EnemiesHit||0x0,_0x88948b=_0x372673>0x0?Math[_0x166e93(0x1bf)](_0xd226f5/_0x372673*0x64)+'%':'0%',_0x180b5c=_0x3eccc2*0.4,_0x10199d=_0x3eccc2*0.1,_0x16e93d=_0x3c7b28-_0x10199d/0x2-_0x180b5c/0x2+_0x180b5c*0.1,_0x32fa06=_0x3c7b28+_0x10199d/0x2+_0x180b5c/0x2-_0x180b5c*0.1,_0x4d5c05=_0x166e93(0x247);_0x5b7fba(_0x4d5c05,player1Score,_0x49836f,_0x1316e7,_0x3695a2,player1MaxLevelReached,_0x16e93d,_0x489e4f),_0x5b7fba(_0x166e93(0x1df),player2Score,_0x372673,_0xd226f5,_0x88948b,player2MaxLevelReached,_0x32fa06,_0x489e4f);let _0x317c36=0x0;if(player1Score>player2Score)_0x317c36=0x1;else{if(player2Score>player1Score)_0x317c36=0x2;}if(_0x317c36>0x0){let _0x8f2a5a=_0x489e4f;_0x8f2a5a+=getSubtitleApproxHeight(INTRO_TEXT_FONT)+RESULTS_LINE_V_SPACING_SINGLE,_0x8f2a5a+=RESULTS_LINE_V_SPACING_SINGLE,_0x8f2a5a+=RESULTS_LINE_V_SPACING_SINGLE*0x2;const _0x26b35f=_0x166e93(0x1e7)+_0x317c36,_0x1948d3='WINS';drawCanvasText(_0x26b35f,_0x3c7b28,_0x8f2a5a,INTRO_TEXT_FONT,_0x166e93(0x224),_0x166e93(0x1b6),'middle',!![]),drawCanvasText(_0x1948d3,_0x3c7b28,_0x8f2a5a+RESULTS_LINE_V_SPACING_SINGLE,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x166e93(0x1b6),'middle',!![]);}}else{const _0xa8511c=player1ShotsFired||0x0,_0x5c80b7=player1EnemiesHit||0x0,_0x322dc5=wasLastGameAIDemo?score:player1Score,_0x271075=wasLastGameAIDemo?level:player1MaxLevelReached,_0x451930=_0xa8511c>0x0?Math[_0x166e93(0x1bf)](_0x5c80b7/_0xa8511c*0x64)+'%':'0%',_0x2eae35=wasLastGameAIDemo?'DEMO':'PLAYER\x201';_0x5b7fba(_0x2eae35,_0x322dc5,_0xa8511c,_0x5c80b7,_0x451930,_0x271075,_0x3c7b28,_0x489e4f);}gameCtx[_0x166e93(0x1dc)]();}}}}}}}catch(_0x1a641b){console[_0x166e93(0x213)]('Error\x20in\x20renderGame:',_0x1a641b,_0x1a641b['stack']);if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;try{gameCtx&&gameCanvas&&(gameCtx['fillStyle']=_0x166e93(0x239),gameCtx['font']=_0x166e93(0x209),gameCtx['textAlign']=_0x166e93(0x1b6),gameCtx[_0x166e93(0x1d6)](_0x166e93(0x197),gameCanvas[_0x166e93(0x235)]/0x2,gameCanvas[_0x166e93(0x222)]/0x2));}catch(_0x5e673e){}try{showMenuState();}catch(_0x4a9490){}}}function hideCursor(){const _0x47529c=_0x512421;gameCanvas&&(gameCanvas[_0x47529c(0x207)]['cursor']=_0x47529c(0x18d)),mouseIdleTimerId=null;}function handleCanvasMouseMove(_0x567c28){const _0x5bb610=_0x512421;if(!gameCanvas)return;let _0x42404e=_0x5bb610(0x18a);const _0x1fba04=!isInGameState||isShowingScoreScreen||gameOverSequenceStartTime>0x0&&Date[_0x5bb610(0x1ca)]()-gameOverSequenceStartTime>=GAME_OVER_DURATION;let _0x366fdd=![],_0x4889eb=selectedButtonIndex;if(_0x1fba04){const _0x471494=gameCanvas[_0x5bb610(0x249)](),_0x45438c=gameCanvas[_0x5bb610(0x235)]/_0x471494['width'],_0x2c5a9c=gameCanvas[_0x5bb610(0x222)]/_0x471494[_0x5bb610(0x222)],_0x2ff13c=(_0x567c28[_0x5bb610(0x19f)]-_0x471494['left'])*_0x45438c,_0x5df6e3=(_0x567c28[_0x5bb610(0x220)]-_0x471494[_0x5bb610(0x1fc)])*_0x2c5a9c,_0x311098=getMenuButtonRect(0x0),_0x52875a=getMenuButtonRect(0x1);if(_0x311098&&checkCollision({'x':_0x2ff13c,'y':_0x5df6e3,'width':0x1,'height':0x1},_0x311098))_0x4889eb=0x0,_0x366fdd=!![];else _0x52875a&&checkCollision({'x':_0x2ff13c,'y':_0x5df6e3,'width':0x1,'height':0x1},_0x52875a)?(_0x4889eb=0x1,_0x366fdd=!![]):(_0x4889eb=-0x1,_0x366fdd=![]);_0x4889eb!==selectedButtonIndex&&(selectedButtonIndex=_0x4889eb,_0x366fdd&&stopAutoDemoTimer()),_0x42404e=_0x366fdd?_0x5bb610(0x1f3):_0x5bb610(0x18a);}else _0x42404e=_0x5bb610(0x18d),selectedButtonIndex=-0x1;(gameCanvas[_0x5bb610(0x207)][_0x5bb610(0x1bb)]===_0x5bb610(0x18d)||gameCanvas[_0x5bb610(0x207)][_0x5bb610(0x1bb)]!==_0x42404e)&&(gameCanvas[_0x5bb610(0x207)][_0x5bb610(0x1bb)]=_0x42404e);clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);if(!isInGameState){const _0x2e1f5c=Date['now']();if(_0x2e1f5c-lastMouseMoveResetTime>0x1f4){if(typeof startAutoDemoTimer===_0x5bb610(0x21d))startAutoDemoTimer();lastMouseMoveResetTime=_0x2e1f5c;}}}function getTouchPos(_0x395b7f,_0x2f9063){const _0x5bbf12=_0x512421,_0x452aca=_0x2f9063[_0x5bbf12(0x193)]&&_0x2f9063[_0x5bbf12(0x193)]['length']>0x0?_0x2f9063[_0x5bbf12(0x193)]:_0x2f9063['touches'];if(!_0x395b7f||!_0x452aca||_0x452aca['length']===0x0)return null;const _0x449a22=_0x395b7f[_0x5bbf12(0x249)](),_0x30cad8=_0x452aca[0x0],_0x2b4964=_0x395b7f['width']/_0x449a22['width'],_0x2c4f4e=_0x395b7f[_0x5bbf12(0x222)]/_0x449a22[_0x5bbf12(0x222)];return{'x':(_0x30cad8[_0x5bbf12(0x19f)]-_0x449a22[_0x5bbf12(0x20f)])*_0x2b4964,'y':(_0x30cad8['clientY']-_0x449a22['top'])*_0x2c4f4e};}function handleTouchStart(_0x22d5df){const _0x27343c=_0x512421;if(!gameCanvas)return;_0x22d5df[_0x27343c(0x1c1)]();const _0x2c21d5=getTouchPos(gameCanvas,_0x22d5df);if(!_0x2c21d5)return;isTouching=!![],touchStartX=_0x2c21d5['x'],touchCurrentX=_0x2c21d5['x'],isDraggingShip=![],lastTapTime=Date[_0x27343c(0x1ca)](),touchJustFiredSingle=![],isTouchFiringActive=![];const _0x2f963d=isInGameState&&!isPaused&&ship&&isManualControl&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage;if(_0x2f963d){const _0x38e6ae=ship['x']+ship[_0x27343c(0x235)]/0x2,_0x25ec66={'x':ship['x']-ship[_0x27343c(0x235)]*0.25,'y':ship['y']-ship[_0x27343c(0x222)]*0.5,'width':ship[_0x27343c(0x235)]*1.5,'height':ship[_0x27343c(0x222)]*0x2};checkCollision({'x':_0x2c21d5['x'],'y':_0x2c21d5['y'],'width':0x1,'height':0x1},_0x25ec66)?shipTouchOffsetX=_0x2c21d5['x']-_0x38e6ae:shipTouchOffsetX=0x0,selectedFiringMode===_0x27343c(0x206)&&(isTouchFiringActive=!![],typeof firePlayerBullet===_0x27343c(0x21d)&&firePlayerBullet(![]));}else shipTouchOffsetX=0x0;}function handleTouchMove(_0x298ca5){const _0xadd232=_0x512421;if(!isTouching||!gameCanvas)return;_0x298ca5[_0xadd232(0x1c1)]();const _0x22470e=getTouchPos(gameCanvas,_0x298ca5);if(!_0x22470e)return;touchCurrentX=_0x22470e['x'];const _0x4ead4a=Math['abs'](touchCurrentX-touchStartX),_0x20f9c4=Date['now']()-lastTapTime;!isDraggingShip&&((_0x4ead4a>MIN_DRAG_DISTANCE_FOR_TAP_CANCEL||_0x20f9c4>MIN_DRAG_TIME_FOR_TAP_CANCEL)&&(isDraggingShip=!![]));if(isDraggingShip&&isInGameState&&!isPaused&&ship&&isManualControl&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isShowingCaptureMessage&&!isWaitingForRespawn&&!isCsCompletionDelayActive){let _0x24b29f=touchCurrentX-shipTouchOffsetX,_0x54ac34=_0x24b29f-ship[_0xadd232(0x235)]/0x2;const _0x42a3ce=isDualShipActive?ship['width']+DUAL_SHIP_OFFSET_X:ship['width'];ship['x']=Math[_0xadd232(0x19a)](0x0,Math[_0xadd232(0x18c)](gameCanvas[_0xadd232(0x235)]-_0x42a3ce,_0x54ac34)),ship[_0xadd232(0x1b4)]=ship['x'];}}function handleTouchEnd(_0x142949){const _0xc46560=_0x512421;if(!isTouching||!gameCanvas)return;_0x142949['preventDefault']();const _0x594956=!isDraggingShip;if(_0x594956){const _0x5a30eb=getTouchPos(gameCanvas,_0x142949);if(!_0x5a30eb){isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];return;}if(isShowingIntro&&isInGameState)typeof stopGameAndShowMenu===_0xc46560(0x21d)&&stopGameAndShowMenu();else{if(!isInGameState||isShowingScoreScreen)typeof processMenuInteraction===_0xc46560(0x21d)&&processMenuInteraction(_0x5a30eb['x'],_0x5a30eb['y']);else isInGameState&&isManualControl&&playerLives>0x0&&!isPaused&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage&&!isWaitingForRespawn&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!showExtraLifeMessage&&(selectedFiringMode===_0xc46560(0x19b)&&(typeof firePlayerBullet===_0xc46560(0x21d)&&(!touchJustFiredSingle&&(firePlayerBullet(![])&&(touchJustFiredSingle=!![])))));}}isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];}function handleTouchCancel(_0x5769be){const _0x1b5301=_0x512421;if(!isTouching)return;_0x5769be[_0x1b5301(0x1c1)](),isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![],touchJustFiredSingle=![];}function mainLoop(_0x450408){const _0xbd0be3=_0x512421;try{drawStars();retroGridCtx&&retroGridCanvas&&drawRetroGrid();pollControllerForMenu();if(isInGameState&&!isPaused){if(!isManualControl&&connectedGamepadIndex!==null){const _0x136c11=navigator[_0xbd0be3(0x1a0)]();if(_0x136c11?.[connectedGamepadIndex]){const _0x1ed363=_0x136c11[connectedGamepadIndex],_0x470c2a=_0x1ed363[_0xbd0be3(0x219)][_0xbd0be3(0x1d8)](_0x447ac0=>_0x447ac0[_0xbd0be3(0x20a)]);let _0x21c9bb=![];for(let _0x30cf85=0x0;_0x30cf85<_0x470c2a[_0xbd0be3(0x187)];_0x30cf85++){if(_0x30cf85===PS5_BUTTON_R1||_0x30cf85===PS5_BUTTON_TRIANGLE)continue;if(_0x470c2a[_0x30cf85]&&!(previousDemoButtonStates[_0x30cf85]??![])){_0x21c9bb=!![];break;}}if(_0x21c9bb){stopSound(menuMusicSound),showMenuState(),requestAnimationFrame(mainLoop);return;}previousDemoButtonStates=_0x470c2a[_0xbd0be3(0x191)]();}else{if(previousDemoButtonStates[_0xbd0be3(0x187)]>0x0)previousDemoButtonStates=[];}}else{if(previousDemoButtonStates['length']>0x0)previousDemoButtonStates=[];}if(typeof runSingleGameUpdate===_0xbd0be3(0x21d))runSingleGameUpdate(_0x450408);else{console['error']('FATAL:\x20runSingleGameUpdate\x20is\x20not\x20defined!');if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,showMenuState(),requestAnimationFrame(mainLoop);return;}if(gameOverSequenceStartTime>0x0){const _0x3f438e=Date['now'](),_0x1d21d1=_0x3f438e-gameOverSequenceStartTime,_0x50886f=GAME_OVER_DURATION+RESULTS_SCREEN_DURATION;if(_0x1d21d1>=_0x50886f){showMenuState(),requestAnimationFrame(mainLoop);return;}}}else{if(isShowingScoreScreen){const _0x5593aa=Date[_0xbd0be3(0x1ca)]()-scoreScreenStartTime;if(_0x5593aa>=SCORE_SCREEN_DURATION){startAIDemo(),requestAnimationFrame(mainLoop);return;}if(typeof renderGame==='function')renderGame();}else{if(isInGameState&&gameOverSequenceStartTime>0x0){if(typeof renderGame==='function')renderGame();const _0x1d996b=Date['now'](),_0x233812=_0x1d996b-gameOverSequenceStartTime,_0x82f57c=GAME_OVER_DURATION+RESULTS_SCREEN_DURATION;if(_0x233812>=_0x82f57c){showMenuState(),requestAnimationFrame(mainLoop);return;}}else{if(isInGameState&&isPaused){if(typeof renderGame===_0xbd0be3(0x21d))renderGame();}else{if(isInGameState&&isCsCompletionDelayActive){if(typeof runSingleGameUpdate===_0xbd0be3(0x21d))runSingleGameUpdate(_0x450408);else{if(typeof renderGame===_0xbd0be3(0x21d))renderGame();}}else{if(isInGameState&&isShowingPlayerGameOverMessage){if(typeof runSingleGameUpdate===_0xbd0be3(0x21d))runSingleGameUpdate(_0x450408);else{if(typeof renderGame===_0xbd0be3(0x21d))renderGame();}}else{if(typeof renderGame==='function')renderGame();}}}}}}mainLoopId=requestAnimationFrame(mainLoop);}catch(_0x4b69a6){console[_0xbd0be3(0x213)]('!!!\x20CRITICAL\x20ERROR\x20IN\x20mainLoop:',_0x4b69a6,_0x4b69a6['stack']);if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,isPaused=![],stopAllGameSounds(),isGridSoundPlaying=![];try{showMenuState();}catch(_0x9c89d6){console[_0xbd0be3(0x213)]('Failed\x20to\x20return\x20to\x20menu\x20after\x20loop\x20error:',_0x9c89d6),document[_0xbd0be3(0x189)]['innerHTML']=_0xbd0be3(0x1c9);}}}function startMainLoop(){mainLoopId===null&&(gridOffsetY=0x0,mainLoop());}function initializeGame(){const _0xbb3c6b=_0x512421;try{if(typeof initializeDOMElements===_0xbb3c6b(0x21d)){if(!initializeDOMElements()){console['error'](_0xbb3c6b(0x226));return;}}else{console[_0xbb3c6b(0x213)](_0xbb3c6b(0x244));return;}if(typeof resizeCanvases===_0xbb3c6b(0x21d))resizeCanvases();else{console[_0xbb3c6b(0x213)](_0xbb3c6b(0x1c7));if(gameCanvas&&starrySkyCanvas&&retroGridCanvas){const _0x274c3f=window[_0xbb3c6b(0x1bc)],_0x11ad02=window['innerHeight'];starrySkyCanvas['width']=_0x274c3f,starrySkyCanvas[_0xbb3c6b(0x222)]=_0x11ad02,retroGridCanvas[_0xbb3c6b(0x235)]=_0x274c3f,retroGridCanvas[_0xbb3c6b(0x222)]=_0x11ad02,gameCanvas[_0xbb3c6b(0x235)]=_0x274c3f,gameCanvas[_0xbb3c6b(0x222)]=_0x11ad02;}else{console[_0xbb3c6b(0x213)](_0xbb3c6b(0x20e));return;}}typeof defineNormalWaveEntrancePaths==='function'?defineNormalWaveEntrancePaths():console[_0xbb3c6b(0x213)](_0xbb3c6b(0x1db));typeof defineChallengingStagePaths===_0xbb3c6b(0x21d)?defineChallengingStagePaths():console['error'](_0xbb3c6b(0x1e0));if(typeof loadHighScore===_0xbb3c6b(0x21d))loadHighScore();else console[_0xbb3c6b(0x1b5)]('loadHighScore\x20function\x20not\x20found.');window[_0xbb3c6b(0x1ec)]('keydown',handleKeyDown),window[_0xbb3c6b(0x1ec)](_0xbb3c6b(0x1fb),handleKeyUp),gameCanvas?(gameCanvas[_0xbb3c6b(0x1ec)](_0xbb3c6b(0x205),handleCanvasClick),gameCanvas[_0xbb3c6b(0x1ec)](_0xbb3c6b(0x23d),handleCanvasMouseMove),gameCanvas[_0xbb3c6b(0x1ec)](_0xbb3c6b(0x1f0),handleTouchStart,{'passive':![]}),gameCanvas[_0xbb3c6b(0x1ec)]('touchmove',handleTouchMove,{'passive':![]}),gameCanvas[_0xbb3c6b(0x1ec)](_0xbb3c6b(0x1a1),handleTouchEnd,{'passive':![]}),gameCanvas[_0xbb3c6b(0x1ec)](_0xbb3c6b(0x1f8),handleTouchCancel,{'passive':![]})):console[_0xbb3c6b(0x213)](_0xbb3c6b(0x22b)),window[_0xbb3c6b(0x1ec)](_0xbb3c6b(0x211),handleGamepadConnected),window['addEventListener']('gamepaddisconnected',handleGamepadDisconnected),window[_0xbb3c6b(0x1ec)](_0xbb3c6b(0x1e6),resizeCanvases),showMenuState(),startMainLoop();}catch(_0x1ecda1){console[_0xbb3c6b(0x213)]('FATAL\x20INITIALIZATION\x20ERROR:',_0x1ecda1,_0x1ecda1[_0xbb3c6b(0x1e9)]),document[_0xbb3c6b(0x189)][_0xbb3c6b(0x19d)]='<div\x20style=\x22color:white;\x20padding:\x2020px;\x20font-family:\x20sans-serif;\x22><h1>Fatal\x20Initialization\x20Error</h1><p>The\x20game\x20could\x20not\x20be\x20started.\x20Please\x20check\x20the\x20browser\x20console\x20(F12)\x20for\x20details.</p><p>Error:\x20'+_0x1ecda1[_0xbb3c6b(0x18e)]+'</p></div>',mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);}}window[_0x512421(0x1ec)](_0x512421(0x241),initializeGame);