const _0x3c938f=_0x2545;(function(_0x3d9dc0,_0x44a6ae){const _0xd66185=_0x2545,_0x7b22a3=_0x3d9dc0();while(!![]){try{const _0x9028f7=-parseInt(_0xd66185(0x269))/0x1*(-parseInt(_0xd66185(0x215))/0x2)+-parseInt(_0xd66185(0x271))/0x3*(parseInt(_0xd66185(0x1c5))/0x4)+-parseInt(_0xd66185(0x261))/0x5+-parseInt(_0xd66185(0x224))/0x6+parseInt(_0xd66185(0x253))/0x7+-parseInt(_0xd66185(0x245))/0x8*(parseInt(_0xd66185(0x25b))/0x9)+parseInt(_0xd66185(0x288))/0xa*(parseInt(_0xd66185(0x1ec))/0xb);if(_0x9028f7===_0x44a6ae)break;else _0x7b22a3['push'](_0x7b22a3['shift']());}catch(_0x20d2e0){_0x7b22a3['push'](_0x7b22a3['shift']());}}}(_0x56f6,0xb2d8e));const MENU_LOGO_APPROX_HEIGHT=0x55,MENU_SUBTITLE_TEXT='Written\x20By\x20Platini2000(c)',MENU_SUBTITLE_FONT=_0x3c938f(0x1ef),MENU_SUBTITLE_COLOR='red',MENU_BUTTON_FONT=_0x3c938f(0x281),MENU_BUTTON_COLOR=_0x3c938f(0x208),MENU_BUTTON_COLOR_HOVER='rgba(0,\x20191,\x20255,\x200.9)',MENU_BUTTON_WIDTH=0x12c,MENU_BUTTON_HEIGHT=0x37,MENU_LOGO_BOTTOM_TO_START_GAP=0x5,MENU_BUTTON_V_GAP=-0xf,MENU_BUTTON_SUBTITLE_V_GAP=-0x0,MENU_SCORE_FONT=_0x3c938f(0x20c),MENU_SCORE_COLOR=_0x3c938f(0x208),MENU_SCORE_LABEL_COLOR=_0x3c938f(0x244),GAME_OVER_FONT=_0x3c938f(0x213),GAME_OVER_COLOR='rgba(0,\x20191,\x20255,\x200.9)',GAME_OVER_SHADOW=!![],DEMO_TEXT_LINE1_FONT='bold\x2018px\x20\x27Press\x20Start\x202P\x27',DEMO_TEXT_COLOR='rgba(0,\x20191,\x20255,\x200.9)',DEMO_TEXT_BLINK_ON_MS=0x3e8,DEMO_TEXT_BLINK_OFF_MS=0x3e8,DEMO_TEXT_BLINK_CYCLE_MS=DEMO_TEXT_BLINK_ON_MS+DEMO_TEXT_BLINK_OFF_MS,LOGO_SCALE_FACTOR=0.45,MENU_LOGO_EXTRA_Y_OFFSET=0x0,MENU_GENERAL_Y_OFFSET=0x32,INTRO_TEXT_FONT=_0x3c938f(0x213),INTRO_TEXT_COLOR_NORMAL=_0x3c938f(0x1cb),INTRO_TEXT_COLOR_DARK_YELLOW=_0x3c938f(0x1c9),INTRO_TEXT_COLOR_CS_TEXT=INTRO_TEXT_COLOR_NORMAL,PERFECT_TEXT_COLOR=_0x3c938f(0x244),EXTRA_LIFE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,READY_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_BONUS_SCORE_TEXT_COLOR=INTRO_TEXT_COLOR_DARK_YELLOW,CS_CLEAR_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_HITS_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_CLEAR_SCORE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,PAUSE_TEXT_FONT=INTRO_TEXT_FONT,PAUSE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,PAUSE_TEXT_SHADOW=!![],RESULTS_SCREEN_DURATION=0x4e20,PLAYER_GAME_OVER_MESSAGE_DURATION=0x1388,SCORE_SCREEN_TEXT_FONT=INTRO_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_TOP=INTRO_TEXT_COLOR_NORMAL,SCORE_SCREEN_TEXT_COLOR_BONUS=INTRO_TEXT_COLOR_DARK_YELLOW,SCORE_SCREEN_LINE_V_SPACING=0x28,SCORE_SCREEN_ICON_TEXT_H_SPACING=0xf,SCORE_SCREEN_VERTICAL_OFFSET=0x4b,SCORE_SCREEN_PLATINI_TEXT=_0x3c938f(0x274),RESULTS_HEADER_COLOR='red',RESULTS_VALUE_COLOR_YELLOW=INTRO_TEXT_COLOR_DARK_YELLOW,RESULTS_LABEL_COLOR=_0x3c938f(0x208),RESULTS_VALUE_COLOR_CYAN=INTRO_TEXT_COLOR_NORMAL,RESULTS_LINE_V_SPACING_SINGLE=0x23,RESULTS_LINE_V_SPACING_DOUBLE=0x5a,RESULTS_START_Y=0x9b+0x14+0x14+0x14+0x14,RESULTS_FOOTER_FONT=MENU_SUBTITLE_FONT,RESULTS_FOOTER_COLOR=MENU_SUBTITLE_COLOR,RESULTS_PLATINI_TEXT=_0x3c938f(0x28f),CS_MESSAGE_VERTICAL_OFFSET=0x1e;function getSubtitleApproxHeight(_0x2185b8){const _0x536924=_0x3c938f,_0x402d98=_0x2185b8[_0x536924(0x22c)](/(\d+)px/);return _0x402d98?.[0x1]?parseInt(_0x402d98[0x1],0xa):0x19;}function formatMillisecondsToMMSS(_0x2694a9){const _0x229ee3=_0x3c938f;if(_0x2694a9<=0x0||typeof _0x2694a9!==_0x229ee3(0x227)||!isFinite(_0x2694a9))return _0x229ee3(0x264);const _0x30e9ca=Math[_0x229ee3(0x232)](_0x2694a9/0x3e8),_0x4572eb=Math[_0x229ee3(0x232)](_0x30e9ca/0x3c),_0x23fec8=_0x30e9ca%0x3c,_0x2fde0d=String(_0x4572eb)['padStart'](0x2,'0'),_0x52eed2=String(_0x23fec8)['padStart'](0x2,'0');return _0x2fde0d+':'+_0x52eed2;}function getMenuButtonRect(_0x111719){const _0x2a4938=_0x3c938f;if(!gameCtx||!gameCanvas||gameCanvas['width']===0x0||gameCanvas[_0x2a4938(0x23a)]===0x0)return null;const _0x246535=gameCanvas['width'],_0x4240e2=gameCanvas[_0x2a4938(0x23a)],_0x9f291a=_0x246535/0x2-MENU_BUTTON_WIDTH/0x2-0x1;let _0x5a04f9=MENU_LOGO_APPROX_HEIGHT;typeof logoImage!==_0x2a4938(0x203)&&logoImage[_0x2a4938(0x289)]&&logoImage[_0x2a4938(0x1bf)]!==0x0&&(_0x5a04f9=logoImage[_0x2a4938(0x1bf)]*LOGO_SCALE_FACTOR);const _0x5e127a=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x510c0f=_0x5a04f9+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x5e127a;let _0x274465=(_0x4240e2-_0x510c0f)/0x2-0x46;_0x274465+=MENU_GENERAL_Y_OFFSET;const _0x4f51b3=_0x274465+_0x5a04f9+MENU_LOGO_BOTTOM_TO_START_GAP,_0x47ca0b=_0x4f51b3+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP;if(_0x111719===0x0)return{'x':_0x9f291a,'y':Math[_0x2a4938(0x238)](_0x4f51b3),'width':MENU_BUTTON_WIDTH,'height':MENU_BUTTON_HEIGHT};else{if(_0x111719===0x1)return{'x':_0x9f291a,'y':Math[_0x2a4938(0x238)](_0x47ca0b),'width':MENU_BUTTON_WIDTH,'height':MENU_BUTTON_HEIGHT};}return null;}function pollControllerForMenu(){const _0x8db405=_0x3c938f;try{if(connectedGamepadIndex===null&&connectedGamepadIndexP2===null){joystickMovedVerticallyLastFrame=![];if(previousButtonStates[_0x8db405(0x1e0)]>0x0)previousButtonStates=[];if(previousGameButtonStates[_0x8db405(0x1e0)]>0x0)previousGameButtonStates=[];if(previousGameButtonStatesP2[_0x8db405(0x1e0)]>0x0)previousGameButtonStatesP2=[];return;}let _0x5c3111=connectedGamepadIndex!==null?connectedGamepadIndex:connectedGamepadIndexP2;if(_0x5c3111===null)return;const _0x20120f=navigator[_0x8db405(0x28c)]();if(!_0x20120f?.[_0x5c3111])return;const _0x58295b=_0x20120f[_0x5c3111],_0x516897=_0x58295b[_0x8db405(0x1d2)]['map'](_0x5b6f5c=>_0x5b6f5c[_0x8db405(0x28e)]),_0x42fa66=_0x516897,_0x53607c=_0x516897;let _0xd9e75d=![];const _0x3cc2f0=Date[_0x8db405(0x221)]();let _0x105e15=![];(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0)&&(_0x105e15=!![]);if(_0x105e15){connectedGamepadIndex!==null&&(previousButtonStates=_0x42fa66['slice'](),previousGameButtonStates=_0x53607c['slice']());if(connectedGamepadIndexP2!==null){const _0xefe4b4=navigator[_0x8db405(0x28c)]();_0xefe4b4?.[connectedGamepadIndexP2]&&(previousGameButtonStatesP2=_0xefe4b4[connectedGamepadIndexP2][_0x8db405(0x1d2)][_0x8db405(0x283)](_0x24e71b=>_0x24e71b[_0x8db405(0x28e)]));}return;}if(isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){const _0x2c0ec3=_0x53607c[PS5_BUTTON_TRIANGLE],_0xc49a23=previousGameButtonStates[PS5_BUTTON_TRIANGLE]??![];_0x2c0ec3&&!_0xc49a23&&(stopGameAndShowMenu(),_0xd9e75d=!![]);}if(!_0xd9e75d&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){const _0x203add=_0x53607c[PS5_BUTTON_R1],_0x3e9f12=previousGameButtonStates[PS5_BUTTON_R1]??![];if(_0x203add&&!_0x3e9f12){if(typeof togglePause==='function')togglePause();_0xd9e75d=!![];}}if(!_0xd9e75d){const _0x5807d5=isShowingScoreScreen||isShowingResultsScreen;if(_0x5807d5){let _0x4ae605=![];for(let _0x3854f4=0x0;_0x3854f4<_0x42fa66[_0x8db405(0x1e0)];_0x3854f4++){if(_0x3854f4===PS5_BUTTON_R1||_0x3854f4===PS5_BUTTON_TRIANGLE)continue;const _0x427e40=previousButtonStates[_0x3854f4]??![];if(_0x42fa66[_0x3854f4]&&!_0x427e40){_0x4ae605=!![];break;}}if(_0x4ae605){if(typeof showMenuState==='function')showMenuState();_0xd9e75d=!![];}}else{if(!isInGameState&&!_0xd9e75d){const _0x38e2b5=_0x42fa66[PS5_BUTTON_CROSS],_0x1fb959=previousButtonStates[PS5_BUTTON_CROSS]??![],_0xac9414=_0x42fa66[PS5_BUTTON_CIRCLE],_0x256653=previousButtonStates[PS5_BUTTON_CIRCLE]??![],_0x4cbe3e=_0x58295b[_0x8db405(0x1e6)][PS5_LEFT_STICK_Y]??0x0,_0x219d59=_0x42fa66[PS5_DPAD_UP],_0x4b126a=_0x42fa66[PS5_DPAD_DOWN];let _0x285c49=0x0;if(_0x4cbe3e<-AXIS_DEAD_ZONE_MENU||_0x219d59)_0x285c49=-0x1;else{if(_0x4cbe3e>AXIS_DEAD_ZONE_MENU||_0x4b126a)_0x285c49=0x1;}let _0x512db5=_0x285c49!==0x0;if(_0x512db5&&!joystickMovedVerticallyLastFrame){let _0x136149=selectedButtonIndex;const _0x61b58e=0x2;_0x136149===-0x1?_0x136149=_0x285c49===0x1?0x0:_0x61b58e-0x1:_0x136149+=_0x285c49;if(_0x136149<0x0)_0x136149=_0x61b58e-0x1;if(_0x136149>=_0x61b58e)_0x136149=0x0;_0x136149!==selectedButtonIndex&&(selectedButtonIndex=_0x136149,startAutoDemoTimer());}joystickMovedVerticallyLastFrame=_0x512db5;if(_0x38e2b5&&!_0x1fb959){stopAutoDemoTimer();if(isFiringModeSelectMode)selectedButtonIndex===0x0?selectedFiringMode=_0x8db405(0x1d0):selectedFiringMode=_0x8db405(0x24b),baseStartGame(!![]),_0xd9e75d=!![];else{if(isPlayerSelectMode)selectedButtonIndex===0x0?startGame1P():startGame2P(),_0xd9e75d=!![];else{if(selectedButtonIndex===0x0)isPlayerSelectMode=!![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0xd9e75d=!![];else selectedButtonIndex===0x1&&(exitGame(),_0xd9e75d=!![]);}}}if(!_0xd9e75d&&_0xac9414&&!_0x256653){stopAutoDemoTimer();if(isFiringModeSelectMode)isFiringModeSelectMode=![],isPlayerSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0xd9e75d=!![];else isPlayerSelectMode?(isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0xd9e75d=!![]):(triggerFullscreen(),playSound(menuMusicSound,!![]),_0xd9e75d=!![]);}}}}connectedGamepadIndex!==null&&(previousButtonStates=_0x42fa66[_0x8db405(0x206)](),previousGameButtonStates=_0x53607c[_0x8db405(0x206)]());if(connectedGamepadIndexP2!==null){const _0x4b7157=navigator[_0x8db405(0x28c)]();_0x4b7157?.[connectedGamepadIndexP2]&&(previousGameButtonStatesP2=_0x4b7157[connectedGamepadIndexP2]['buttons'][_0x8db405(0x283)](_0x4a3376=>_0x4a3376[_0x8db405(0x28e)]));}}catch(_0x11e02b){console[_0x8db405(0x241)](_0x8db405(0x1e7),_0x11e02b),previousButtonStates=[],previousGameButtonStates=[],previousGameButtonStatesP2=[],selectedButtonIndex=-0x1,joystickMovedVerticallyLastFrame=![];}}function _0x2545(_0x3f6f53,_0x370b10){const _0x56f692=_0x56f6();return _0x2545=function(_0x254590,_0x39af29){_0x254590=_0x254590-0x1bc;let _0x509a99=_0x56f692[_0x254590];return _0x509a99;},_0x2545(_0x3f6f53,_0x370b10);}function startAutoDemoTimer(){const _0x286aec=_0x3c938f;try{stopAutoDemoTimer(),autoStartTimerId=setTimeout(()=>{!isInGameState&&!isShowingScoreScreen?(isPlayerSelectMode=![],isFiringModeSelectMode=![],showScoreScreen()):autoStartTimerId=null;},MENU_INACTIVITY_TIMEOUT);}catch(_0x22e822){console[_0x286aec(0x241)](_0x286aec(0x291),_0x22e822);}}function stopAutoDemoTimer(){const _0x32ccde=_0x3c938f;try{autoStartTimerId&&(clearTimeout(autoStartTimerId),autoStartTimerId=null);}catch(_0x57f842){console[_0x32ccde(0x241)]('Error\x20stopping\x20auto\x20demo\x20timer:',_0x57f842);}}function _0x56f6(){const _0x1002d6=['EXTRA\x20LIFE','grey','Cannot\x20set\x20fallback\x20canvas\x20sizes.','4037283IwDHoo','resizeCanvases\x20not\x20found!','\x20EXT\x20LIFE\x20FOR\x20EVERY\x20','2025\x20\x20\x20PLATINI2000(c)\x20\x20\x20LTD','gamepaddisconnected','drawImage','\x20PTS','capturedShipDimensions','touchend','SCORE','default','\x202ND\x20LIFE\x20BONUS\x20FOR\x20','rotate','createLinearGradient','has','fillText','22px\x20\x27Arial\x20Black\x27,\x20Gadget,\x20sans-serif','20px\x20sans-serif','map','rotation','right','STAGE','Could\x20not\x20add\x20','933490dFayJi','complete','closePath','GAME\x20EXIT','getGamepads','source-over','pressed','Platini2000(c)\x20LTD','abs','Error\x20starting\x20auto\x20demo\x20timer:','message','shadowBlur','keyup','naturalHeight','shadowColor','clientY','left','rgba(255,\x20200,\x2080,\x20','sqrt','4DawBif','isDamaged','keydown','SPECIAL\x20BONUS\x2010000\x20PTS','yellow','FIGHTER\x20CAPTURED','rgba(0,\x20191,\x20255,\x200.9)','sin','radius','globalCompositeOperation','PLAYER\x20','rapid','GAME\x20OVER','buttons','random','WINS','moveTo','PUSH\x20START\x20BUTTON','cos','shadowOffsetX','NUMBER\x20OF\x20HITS\x20','lighter','font','pointer','forEach','style','textBaseline','length','toString','arc','attacking','PAUSED','Cannot\x20add\x20canvas\x20listeners:\x20gameCanvas\x20not\x20found\x20during\x20init.','axes','Error\x20in\x20pollControllerForMenu:','fillRect','velocityX','capturedShipX','add','143WYurLf','HIT-MISS-RATIO','following_entrance_path','bold\x2018px\x20\x27Arial\x20Black\x27,\x20Gadget,\x20sans-serif','val','HIGH\x20SCORE','FATAL\x20INITIALIZATION\x20ERROR:','warn','width','stack','targetX','lineTo','fill','window.close()\x20failed:','following_bezier_path','find','addColorStop','function','innerHTML','particles','velocityY','purple','translate','undefined','save','Critical\x20error:\x20Game\x20logic\x20not\x20loaded\x20correctly!','slice','PERFECT\x20!','white','img','<p\x20style=\x22color:white;\x22>CRITICAL\x20LOOP\x20ERROR.\x20Please\x20refresh.</p>','toFixed','20px\x20\x27Press\x20Start\x202P\x27','min','<div\x20style=\x22color:white;\x20padding:\x2020px;\x20font-family:\x20sans-serif;\x22><h1>Fatal\x20Initialization\x20Error</h1><p>The\x20game\x20could\x20not\x20be\x20started.\x20Please\x20check\x20the\x20browser\x20console\x20(F12)\x20for\x20details.</p><p>Error:\x20','isArray','none','defineNormalWaveEntrancePaths\x20not\x20found!','innerWidth','bold\x2018px\x20\x27Press\x20Start\x202P\x27','orange','366050dBDHqv','body','LOGO','FATAL:\x20runSingleGameUpdate\x20is\x20not\x20defined!','\x201ST\x20LIFE\x20BONUS\x20FOR\x2020000\x20PTS','touches','cursor','SHOTS\x20FIRED','center','Error\x20rendering\x20explosions:','globalAlpha','color','now','preventDefault','middle','2735496PaNsBs','1UP','state','number','max','displayStartTime','alpha','beginPath','match','naturalWidth','\x20level\x201\x20icons\x20due\x20to\x203-type\x20limit.\x20Used\x20types:','Critical\x20error\x20starting\x20game!','STAGE\x20','Error\x20returning\x20to\x20menu.\x20Please\x20refresh\x20the\x20page.','floor','addEventListener','-\x20RESULTS\x20-','Failed\x20to\x20return\x20to\x20menu\x20after\x20loop\x20error:','fillStyle','EASY','round','DEMO','height','clearRect','touchmove','blue','showing_capture_message','measureText','!!!\x20CRITICAL\x20ERROR\x20IN\x20mainLoop:','error','NORMAL','push','red','48EdgZXd','clientX','resize','getBoundingClientRect','BONUS\x20','Error\x20in\x20renderGame:','single','type','cyan','START\x20GAME','load','Error\x20in\x20baseStartGame:','mousemove','restore','4622940ftHBOZ','close','click','gamepadconnected','STAGE\x20CLEARED','Error\x20stopping\x20auto\x20demo\x20timer:','rgba(0,\x200,\x200,\x200.8)','captureAnimationRotation','1106757FJEaYK','textAlign','2UP','initializeDOMElements\x20function\x20not\x20found!','FATAL\x20RENDER\x20ERROR.','size','330420CzwgBi','source-atop','2\x20PLAYER','00:00','PLAYER\x202','NUMBER\x20OF\x20HITS','changedTouches','tintProgress','8lEDBJa','touchcancel','atan2','touchstart','top'];_0x56f6=function(){return _0x1002d6;};return _0x56f6();}function showScoreScreen(){const _0x17fd3e=_0x3c938f;if(isInGameState||isShowingScoreScreen)return;stopAutoDemoTimer(),isShowingScoreScreen=!![],isPlayerSelectMode=![],isFiringModeSelectMode=![],scoreScreenStartTime=Date[_0x17fd3e(0x221)](),selectedButtonIndex=-0x1;}function showMenuState(){const _0x2d31ec=_0x3c938f;try{wasLastGameAIDemo&&(highScore=0x4e20),wasLastGameAIDemo=![],isInGameState=![],isShowingScoreScreen=![],scoreScreenStartTime=0x0,isManualControl=![],isShowingDemoText=![],isPaused=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedFiringMode='rapid',isTwoPlayerMode=![],currentPlayer=0x1,showCsHitsMessage=![],csHitsMessageStartTime=0x0,showPerfectMessage=![],perfectMessageStartTime=0x0,showCsBonusScoreMessage=![],csBonusScoreMessageStartTime=0x0,showCSClearMessage=![],csClearMessageStartTime=0x0,showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,showReadyMessage=![],readyMessageStartTime=0x0,readyForNextWave=![],readyForNextWaveReset=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],stopAllGameSounds(),stopSound(resultsMusicSound),stopSound(startSound),stopSound(levelUpSound),stopSound(entranceSound),isGridSoundPlaying=![],playerLives=0x3,score=0x0,level=0x1,player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,scoreEarnedThisCS=0x0,enemies=[],bullets=[],enemyBullets=[],explosions=[],isShowingIntro=![],introStep=0x0,isChallengingStage=![],challengingStageEnemiesHit=0x0,currentGridOffsetX=0x0,gridMoveDirection=0x1,currentWaveDefinition=null,isEntrancePhaseActive=![],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,typeof enemySpawnTimeouts!==_0x2d31ec(0x203)&&Array[_0x2d31ec(0x20f)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x2d31ec(0x1dd)](clearTimeout),enemySpawnTimeouts=[],lastEnemyDetachTime=0x0,selectedButtonIndex=-0x1,joystickMovedVerticallyLastFrame=![],previousButtonStates=[],previousGameButtonStates=[],previousDemoButtonStates=[],previousGameButtonStatesP2=[],isShowingResultsScreen=![],gameOverSequenceStartTime=0x0,gameStartTime=0x0,forceCenterShipNextReset=![],player1CompletedLevel=-0x1,p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isTouching=![],touchCurrentX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],ship&&gameCanvas&&gameCanvas[_0x2d31ec(0x1f4)]>0x0&&gameCanvas[_0x2d31ec(0x23a)]>0x0&&(ship['x']=Math['round'](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),ship[_0x2d31ec(0x1f6)]=ship['x'],ship['y']=gameCanvas[_0x2d31ec(0x23a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN),clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0),playSound(menuMusicSound,!![]),startAutoDemoTimer();}catch(_0x386160){console[_0x2d31ec(0x241)]('Error\x20in\x20showMenuState:',_0x386160),wasLastGameAIDemo=![],isInGameState=![],isShowingScoreScreen=![],isPaused=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],isTwoPlayerMode=![],currentPlayer=0x1,isShowingPlayerGameOverMessage=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isTouching=![],touchCurrentX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],clearTimeout(mouseIdleTimerId),mouseIdleTimerId=null;if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x2d31ec(0x231)),document['body'][_0x2d31ec(0x1fe)]='<p\x20style=\x22color:white;\x22>Error\x20returning\x20to\x20menu.\x20Please\x20refresh.</p>';}}function startAIDemo(){if(isInGameState)return;stopSound(menuMusicSound),isShowingScoreScreen=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedFiringMode='rapid',isTwoPlayerMode=![],isManualControl=![],isShowingDemoText=!![],wasLastGameAIDemo=!![],baseStartGame(![]),gameJustStarted=!![];}function startGame1P(){if(isInGameState)return;isTwoPlayerMode=![],isPlayerSelectMode=![],isFiringModeSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer();}function startGame2P(){if(isInGameState)return;isTwoPlayerMode=!![],isPlayerSelectMode=![],isFiringModeSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer();}function baseStartGame(_0x469918){const _0x6286dc=_0x3c938f;try{if(!gameCanvas||!gameCtx){console[_0x6286dc(0x241)]('Cannot\x20start\x20game\x20-\x20canvas\x20not\x20ready.'),showMenuState();return;}stopSound(menuMusicSound),stopAutoDemoTimer(),isInGameState=!![],isShowingScoreScreen=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],isManualControl=_0x469918,isShowingDemoText=!_0x469918,isPaused=![],previousButtonStates=[],previousGameButtonStates=[],previousDemoButtonStates=[],previousGameButtonStatesP2=[],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];_0x469918&&(wasLastGameAIDemo=![]);clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);if(typeof resetGame===_0x6286dc(0x1fd))resetGame();else{console[_0x6286dc(0x241)]('FATAL:\x20resetGame\x20function\x20is\x20not\x20defined!\x20Cannot\x20start\x20game\x20properly.'),alert(_0x6286dc(0x205)),showMenuState();return;}_0x469918&&playSound(coinSound),gameStartTime=Date[_0x6286dc(0x221)](),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],selectedButtonIndex=-0x1,ship&&gameCanvas&&gameCanvas[_0x6286dc(0x1f4)]>0x0&&gameCanvas[_0x6286dc(0x23a)]>0x0&&(ship['x']=Math['round'](gameCanvas[_0x6286dc(0x1f4)]/0x2-SHIP_WIDTH/0x2),ship[_0x6286dc(0x1f6)]=ship['x'],ship['y']=gameCanvas[_0x6286dc(0x23a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN),mainLoopId===null&&startMainLoop();}catch(_0x199edb){console['error'](_0x6286dc(0x250),_0x199edb),wasLastGameAIDemo=![],clearTimeout(mouseIdleTimerId),mouseIdleTimerId=null,alert(_0x6286dc(0x22f)),showMenuState();}}function stopGameAndShowMenu(){isPaused=![];if(isManualControl)saveHighScore();showMenuState();}function exitGame(){const _0x23cc23=_0x3c938f;isPaused=![],stopAutoDemoTimer(),saveHighScore(),isInGameState=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],showMenuState();try{window[_0x23cc23(0x254)](),setTimeout(()=>{if(!isInGameState)showMenuState();},0xc8);}catch(_0x3fdefe){console[_0x23cc23(0x241)](_0x23cc23(0x1f9),_0x3fdefe),showMenuState();}}function triggerGameOver(){triggerFinalGameOverSequence();}function startAutoDemoTimer(){const _0x79663b=_0x3c938f;try{stopAutoDemoTimer(),autoStartTimerId=setTimeout(()=>{!isInGameState&&!isShowingScoreScreen?(isPlayerSelectMode=![],isFiringModeSelectMode=![],showScoreScreen()):autoStartTimerId=null;},MENU_INACTIVITY_TIMEOUT);}catch(_0xb2f017){console[_0x79663b(0x241)]('Error\x20starting\x20auto\x20demo\x20timer:',_0xb2f017);}}function stopAutoDemoTimer(){const _0x351d9a=_0x3c938f;try{autoStartTimerId&&(clearTimeout(autoStartTimerId),autoStartTimerId=null);}catch(_0x2c57c1){console['error'](_0x351d9a(0x258),_0x2c57c1);}}function showScoreScreen(){const _0x1d6157=_0x3c938f;if(isInGameState||isShowingScoreScreen)return;stopAutoDemoTimer(),isShowingScoreScreen=!![],isPlayerSelectMode=![],isFiringModeSelectMode=![],scoreScreenStartTime=Date[_0x1d6157(0x221)](),selectedButtonIndex=-0x1,clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);}function processMenuInteraction(_0xe505ef,_0x397b7d){const _0x17dabb=_0x3c938f;if(isShowingScoreScreen){if(typeof showMenuState===_0x17dabb(0x1fd))showMenuState();}else{const _0xb692f8=getMenuButtonRect(0x0),_0x2cb24a=getMenuButtonRect(0x1);let _0x5808b8=_0xb692f8&&checkCollision({'x':_0xe505ef,'y':_0x397b7d,'width':0x1,'height':0x1},_0xb692f8),_0x3207ae=_0x2cb24a&&checkCollision({'x':_0xe505ef,'y':_0x397b7d,'width':0x1,'height':0x1},_0x2cb24a);if(isFiringModeSelectMode){if(_0x5808b8)selectedFiringMode=_0x17dabb(0x1d0),baseStartGame(!![]),stopAutoDemoTimer();else _0x3207ae?(selectedFiringMode=_0x17dabb(0x24b),baseStartGame(!![]),stopAutoDemoTimer()):(isFiringModeSelectMode=![],isPlayerSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer());}else{if(isPlayerSelectMode){if(_0x5808b8)startGame1P(),stopAutoDemoTimer();else _0x3207ae?(startGame2P(),stopAutoDemoTimer()):(isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer());}else{if(_0x5808b8)isPlayerSelectMode=!![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer();else{if(_0x3207ae){if(typeof exitGame==='function')exitGame();stopAutoDemoTimer();}else triggerFullscreen(),playSound(menuMusicSound,!![]),stopAutoDemoTimer();}}}}}function handleCanvasClick(_0x1dabb3){const _0x1347c3=_0x3c938f;if(!gameCanvas)return;const _0x2fff9c=gameCanvas[_0x1347c3(0x248)](),_0x48668e=gameCanvas[_0x1347c3(0x1f4)]/_0x2fff9c['width'],_0x16fe94=gameCanvas['height']/_0x2fff9c['height'],_0x1adc33=(_0x1dabb3[_0x1347c3(0x246)]-_0x2fff9c[_0x1347c3(0x1c2)])*_0x48668e,_0x1848c4=(_0x1dabb3[_0x1347c3(0x1c1)]-_0x2fff9c[_0x1347c3(0x26d)])*_0x16fe94;let _0x224fb3=![];(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0)&&(_0x224fb3=!![]);if(_0x224fb3)return;if(isInGameState){if(isPaused){if(typeof togglePause===_0x1347c3(0x1fd))togglePause();return;}if(!isManualControl){if(typeof stopGameAndShowMenu==='function')stopGameAndShowMenu();}}else processMenuInteraction(_0x1adc33,_0x1848c4);}function createExplosion(_0x31be0a,_0x46dc2a){const _0x53d8e3=_0x3c938f;try{playSound(explosionSound);let _0xaca54a=[];for(let _0x4c6230=0x0;_0x4c6230<EXPLOSION_PARTICLE_COUNT;_0x4c6230++){const _0x5a36cb=Math[_0x53d8e3(0x1d3)]()*Math['PI']*0x2,_0x1c44dc=Math[_0x53d8e3(0x1d3)]()*(EXPLOSION_MAX_SPEED-EXPLOSION_MIN_SPEED)+EXPLOSION_MIN_SPEED;_0xaca54a[_0x53d8e3(0x243)]({'x':_0x31be0a,'y':_0x46dc2a,'vx':Math[_0x53d8e3(0x1d7)](_0x5a36cb)*_0x1c44dc,'vy':Math[_0x53d8e3(0x1cc)](_0x5a36cb)*_0x1c44dc,'radius':EXPLOSION_PARTICLE_RADIUS,'alpha':0x1});}explosions[_0x53d8e3(0x243)]({'creationTime':Date[_0x53d8e3(0x221)](),'duration':EXPLOSION_DURATION,'particles':_0xaca54a});}catch(_0x2b9589){console[_0x53d8e3(0x241)]('Error\x20creating\x20explosion:',_0x2b9589);}}function renderExplosions(){const _0x161226=_0x3c938f;try{if(!gameCtx)return;gameCtx['save'](),gameCtx['globalCompositeOperation']='lighter',explosions['forEach'](_0x261a33=>{const _0x261f67=_0x2545;_0x261a33[_0x261f67(0x1ff)][_0x261f67(0x1dd)](_0x4cd6b2=>{const _0x298da7=_0x261f67,_0x432833=_0x4cd6b2['alpha']*EXPLOSION_MAX_OPACITY;_0x432833>0.01&&(gameCtx[_0x298da7(0x22b)](),gameCtx[_0x298da7(0x1e2)](Math[_0x298da7(0x238)](_0x4cd6b2['x']),Math[_0x298da7(0x238)](_0x4cd6b2['y']),_0x4cd6b2[_0x298da7(0x1cd)],0x0,Math['PI']*0x2),gameCtx[_0x298da7(0x236)]=_0x298da7(0x1c3)+_0x432833[_0x298da7(0x20b)](0x3)+')',gameCtx['fill']());});}),gameCtx[_0x161226(0x252)]();}catch(_0x2caa82){console[_0x161226(0x241)](_0x161226(0x21e),_0x2caa82);}}function drawCanvasText(_0xe87c3a,_0x3b1d1c,_0x261583,_0xd5230f,_0x431b43,_0x147bb8=_0x3c938f(0x21d),_0x45b049=_0x3c938f(0x223),_0x3219bc=![]){const _0x489f4e=_0x3c938f;if(!gameCtx)return;gameCtx['save'](),gameCtx[_0x489f4e(0x1db)]=_0xd5230f,gameCtx['fillStyle']=_0x431b43,gameCtx[_0x489f4e(0x25c)]=_0x147bb8,gameCtx['textBaseline']=_0x45b049,_0x3219bc&&(gameCtx[_0x489f4e(0x1c0)]=_0x489f4e(0x259),gameCtx[_0x489f4e(0x1bd)]=0x8,gameCtx[_0x489f4e(0x1d8)]=0x3,gameCtx['shadowOffsetY']=0x3),gameCtx[_0x489f4e(0x280)](_0xe87c3a,_0x3b1d1c,_0x261583),gameCtx[_0x489f4e(0x252)]();}function drawCanvasButton(_0x1d0021,_0x58a765,_0x1b6e14){const _0x115af6=_0x3c938f;if(!gameCtx)return;const _0x1f4d09=getMenuButtonRect(_0x58a765);if(!_0x1f4d09)return;gameCtx['save'](),drawCanvasText(_0x1d0021,_0x1f4d09['x']+_0x1f4d09[_0x115af6(0x1f4)]/0x2,_0x1f4d09['y']+_0x1f4d09[_0x115af6(0x23a)]/0x2,MENU_BUTTON_FONT,_0x1b6e14?MENU_BUTTON_COLOR_HOVER:MENU_BUTTON_COLOR,_0x115af6(0x21d),_0x115af6(0x223)),gameCtx[_0x115af6(0x252)]();}function renderFloatingScores(){const _0x53f7b=_0x3c938f;try{if(!gameCtx||!floatingScores||floatingScores[_0x53f7b(0x1e0)]===0x0)return;const _0x43499a=Date['now']();gameCtx['save'](),gameCtx[_0x53f7b(0x21f)]=FLOATING_SCORE_OPACITY,floatingScores['forEach'](_0x411ae8=>{const _0x2905e0=_0x53f7b;_0x43499a>=_0x411ae8[_0x2905e0(0x229)]&&drawCanvasText(_0x411ae8['text'],_0x411ae8['x'],_0x411ae8['y'],FLOATING_SCORE_FONT,_0x411ae8[_0x2905e0(0x220)],_0x2905e0(0x21d),'middle',![]);}),gameCtx['globalAlpha']=0x1,gameCtx[_0x53f7b(0x252)]();}catch(_0x54ac96){console['error']('Error\x20rendering\x20floating\x20scores:',_0x54ac96);}}function renderHitSparks(){const _0x2ba024=_0x3c938f;if(!gameCtx||!hitSparks||hitSparks[_0x2ba024(0x1e0)]===0x0)return;gameCtx[_0x2ba024(0x204)](),gameCtx['globalCompositeOperation']=_0x2ba024(0x1da),hitSparks['forEach'](_0x42b051=>{const _0x53190b=_0x2ba024;if(_0x42b051&&_0x42b051[_0x53190b(0x22a)]>0.01){gameCtx[_0x53190b(0x236)]=_0x42b051[_0x53190b(0x220)],gameCtx['globalAlpha']=_0x42b051[_0x53190b(0x22a)],gameCtx[_0x53190b(0x22b)]();const _0x317e88=_0x42b051['size']*Math[_0x53190b(0x1c4)](_0x42b051['alpha']);gameCtx['arc'](Math[_0x53190b(0x238)](_0x42b051['x']),Math[_0x53190b(0x238)](_0x42b051['y']),Math[_0x53190b(0x228)](0.5,_0x317e88/0x2),0x0,Math['PI']*0x2),gameCtx[_0x53190b(0x1f8)]();}}),gameCtx['globalAlpha']=0x1,gameCtx['restore']();}function renderGame(){const _0x314b44=_0x3c938f;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x314b44(0x23b)](0x0,0x0,gameCanvas['width'],gameCanvas[_0x314b44(0x23a)]);const _0x248fdf=Date[_0x314b44(0x221)]();gameCtx[_0x314b44(0x204)]();const _0x363c12='20px\x20\x27Press\x20Start\x202P\x27',_0x51ad7e='red',_0x1f986a=_0x314b44(0x208);gameCtx[_0x314b44(0x1db)]=_0x363c12,gameCtx[_0x314b44(0x1df)]=_0x314b44(0x26d);const _0x28f057=(_0x451df4,_0x1e9711,_0x2d7f16,_0x3244e4,_0x58106d=![])=>{const _0x1f50d0=_0x314b44;let _0x398e16=!![],_0x953515=UI_1UP_BLINK_ON_MS*1.5,_0x557b7a=UI_1UP_BLINK_CYCLE_MS*1.5,_0x448bd5=_0x51ad7e;if(_0x451df4===_0x1f50d0(0x239))_0x953515=DEMO_TEXT_BLINK_ON_MS*0.7,_0x557b7a=DEMO_TEXT_BLINK_CYCLE_MS;else{if(_0x451df4===_0x1f50d0(0x1f1)){_0x953515=UI_1UP_BLINK_ON_MS*1.5,_0x557b7a=UI_1UP_BLINK_CYCLE_MS*1.5;if(isInGameState&&!isManualControl)_0x953515=DEMO_TEXT_BLINK_ON_MS*0.7,_0x557b7a=DEMO_TEXT_BLINK_CYCLE_MS;else isInGameState&&isTwoPlayerMode&&currentPlayer===0x2&&(_0x953515=UI_1UP_BLINK_ON_MS*1.5,_0x557b7a=UI_1UP_BLINK_CYCLE_MS*1.5);}}_0x58106d&&((isPaused||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||!(_0x248fdf%_0x557b7a<_0x953515))&&(_0x398e16=![]));_0x398e16&&(gameCtx[_0x1f50d0(0x236)]=_0x448bd5,gameCtx[_0x1f50d0(0x25c)]=_0x2d7f16,gameCtx[_0x1f50d0(0x280)](_0x451df4,_0x3244e4,MARGIN_TOP));const _0xc440=gameCtx[_0x1f50d0(0x23f)](_0x451df4)[_0x1f50d0(0x1f4)];let _0x53669c;if(_0x2d7f16==='left')_0x53669c=_0x3244e4+_0xc440/0x2;else{if(_0x2d7f16===_0x1f50d0(0x285))_0x53669c=_0x3244e4-_0xc440/0x2;else _0x53669c=_0x3244e4;}gameCtx[_0x1f50d0(0x236)]=_0x1f986a,gameCtx[_0x1f50d0(0x25c)]=_0x1f50d0(0x21d);let _0xa1fc62=MARGIN_TOP+SCORE_OFFSET_Y+0x5;_0x451df4===_0x1f50d0(0x1f1)&&(_0x53669c=_0x3244e4),gameCtx['fillText'](_0x1e9711[_0x1f50d0(0x1e1)](),_0x53669c,_0xa1fc62);};let _0x296b57,_0x588437,_0x24cec5,_0x24e6ea,_0x38c7ec=![],_0x157d12=![],_0x331587=![];if(isShowingResultsScreen)_0x296b57=player1Score||0x0,_0x588437=player2Score||0x0,_0x24cec5=highScore||0x4e20,_0x24cec5=Math['max'](_0x24cec5,_0x296b57,_0x588437),_0x24e6ea=wasLastGameAIDemo?_0x314b44(0x239):_0x314b44(0x225),_0x331587=![],_0x38c7ec=![],_0x157d12=![];else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage)_0x296b57=player1Score||0x0,_0x588437=player2Score||0x0,_0x24cec5=highScore||0x4e20,_0x24cec5=Math[_0x314b44(0x228)](_0x24cec5,_0x296b57,_0x588437),_0x24e6ea=wasLastGameAIDemo?_0x314b44(0x239):_0x314b44(0x225),_0x331587=![],_0x38c7ec=![],_0x157d12=![];else{if(isShowingPlayerGameOverMessage)_0x296b57=player1Score||0x0,_0x588437=player2Score||0x0,_0x24cec5=highScore||0x4e20,_0x24cec5=Math[_0x314b44(0x228)](_0x24cec5,_0x296b57,_0x588437),_0x24e6ea=_0x314b44(0x225),_0x331587=![],_0x38c7ec=![],_0x157d12=![];else{if(!isInGameState)_0x296b57=player1Score||0x0,_0x588437=player2Score||0x0,_0x24cec5=highScore||0x4e20,_0x24cec5=Math[_0x314b44(0x228)](_0x24cec5,_0x296b57,_0x588437),_0x24e6ea='1UP',_0x331587=![],_0x38c7ec=![],_0x157d12=![];else{_0x24cec5=highScore||0x0;if(!isManualControl)_0x296b57=score,_0x588437=0x0,_0x24cec5=Math[_0x314b44(0x228)](_0x24cec5,score),_0x24e6ea=_0x314b44(0x239),_0x38c7ec=!isShowingIntro&&!isPaused&&!isShipCaptured,_0x331587=!isPaused&&!isShowingIntro&&score>0x0&&_0x24cec5>0x0&&score>=_0x24cec5;else isTwoPlayerMode?(_0x296b57=currentPlayer===0x1?score:player1Score,_0x588437=currentPlayer===0x2?score:player2Score,_0x24cec5=Math[_0x314b44(0x228)](_0x24cec5,player1Score,player2Score,score),_0x24e6ea='1UP',_0x38c7ec=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured,_0x157d12=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured,_0x331587=!isPaused&&!isShowingIntro&&score>0x0&&_0x24cec5>0x0&&score>=_0x24cec5):(_0x296b57=score,_0x588437=player2Score||0x0,_0x24cec5=Math[_0x314b44(0x228)](_0x24cec5,score),_0x24e6ea='1UP',_0x38c7ec=!isShowingIntro&&!isPaused&&playerLives>0x0&&!isShipCaptured,_0x331587=!isPaused&&!isShowingIntro&&score>0x0&&_0x24cec5>0x0&&score>=_0x24cec5);}}}}let _0x1469cd=![];if(_0x331587){if(!isManualControl)_0x1469cd=_0x38c7ec&&player1TriggeredHighScoreSound;else isTwoPlayerMode?currentPlayer===0x1?_0x1469cd=_0x38c7ec&&player1TriggeredHighScoreSound:_0x1469cd=_0x157d12&&player2TriggeredHighScoreSound:_0x1469cd=_0x38c7ec&&player1TriggeredHighScoreSound;}typeof MARGIN_SIDE!==_0x314b44(0x203)&&typeof MARGIN_TOP!==_0x314b44(0x203)&&typeof SCORE_OFFSET_Y!=='undefined'&&(_0x28f057(_0x24e6ea,_0x296b57,'left',MARGIN_SIDE,_0x38c7ec),_0x28f057('HIGH\x20SCORE',_0x24cec5,_0x314b44(0x21d),gameCanvas[_0x314b44(0x1f4)]/0x2,_0x1469cd),_0x28f057(_0x314b44(0x25d),_0x588437,_0x314b44(0x285),gameCanvas[_0x314b44(0x1f4)]-MARGIN_SIDE,_0x157d12));if(typeof shipImage!==_0x314b44(0x203)&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x314b44(0x203)&&typeof LIFE_ICON_SIZE!=='undefined'&&typeof LIFE_ICON_MARGIN_LEFT!==_0x314b44(0x203)&&typeof LIFE_ICON_SPACING!==_0x314b44(0x203)){if(shipImage['complete']&&shipImage[_0x314b44(0x1bf)]!==0x0){const _0x2cf713=gameCanvas['height']-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x111613=0x0;if(isShowingResultsScreen||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage)_0x111613=0x2;else{if(!isInGameState||isShowingScoreScreen)_0x111613=0x2;else isInGameState&&playerLives>0x0?_0x111613=Math[_0x314b44(0x228)](0x0,playerLives-0x1):_0x111613=0x0;}const _0x492f35=0x5;for(let _0x466a1f=0x0;_0x466a1f<Math[_0x314b44(0x20d)](_0x111613,_0x492f35);_0x466a1f++){const _0x498a42=LIFE_ICON_MARGIN_LEFT+_0x466a1f*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x314b44(0x276)](shipImage,Math[_0x314b44(0x238)](_0x498a42),Math[_0x314b44(0x238)](_0x2cf713),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}let _0x4524a0=0x1;if(gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage)_0x4524a0=Math[_0x314b44(0x228)](0x1,player1MaxLevelReached,player2MaxLevelReached);else{if(!isInGameState||isShowingScoreScreen)_0x4524a0=0x1;else isInGameState&&(_0x4524a0=level);}if(_0x4524a0>0x0&&typeof LEVEL_ICON_MARGIN_BOTTOM!==_0x314b44(0x203)&&typeof LEVEL_ICON_SIZE!==_0x314b44(0x203)&&typeof LEVEL_ICON_MARGIN_RIGHT!=='undefined'&&typeof LEVEL_ICON_SPACING!==_0x314b44(0x203)){const _0x5bb2fb=[{'val':0x32,'img':level50Image},{'val':0x1e,'img':level30Image},{'val':0x14,'img':level20Image},{'val':0xa,'img':level10Image},{'val':0x5,'img':level5Image},{'val':0x1,'img':level1Image}];let _0x1d09ad=_0x4524a0,_0xfdc67e=[],_0x515d42=new Set();const _0x43b067=(_0x2d0f78,_0x4c2746,_0xc42f16)=>{const _0x3a90d3=_0x314b44;let _0x33416c=_0x2d0f78,_0x3d1b13=new Set(_0xc42f16);for(let _0x213301=_0x4c2746;_0x213301<_0x5bb2fb['length'];_0x213301++){const _0x1c2d19=_0x5bb2fb[_0x213301][_0x3a90d3(0x1f0)];if(_0x33416c>=_0x1c2d19){const _0x2512df=_0x3d1b13[_0x3a90d3(0x260)]<0x3||_0x3d1b13[_0x3a90d3(0x27f)](_0x1c2d19);if(!_0x2512df)continue;const _0x190ebf=Math[_0x3a90d3(0x232)](_0x33416c/_0x1c2d19);_0x33416c-=_0x190ebf*_0x1c2d19,_0x3d1b13[_0x3a90d3(0x1eb)](_0x1c2d19);if(_0x33416c===0x0)return!![];}}return _0x33416c===0x0;};for(let _0x4ef47f=0x0;_0x4ef47f<_0x5bb2fb['length']-0x1;_0x4ef47f++){const _0x1f1904=_0x5bb2fb[_0x4ef47f],_0x19da31=_0x1f1904[_0x314b44(0x1f0)],_0x2b0db1=_0x1f1904[_0x314b44(0x209)];if(_0x1d09ad>=_0x19da31){const _0x1b912b=Math[_0x314b44(0x232)](_0x1d09ad/_0x19da31),_0xb5a456=_0x1d09ad-_0x1b912b*_0x19da31;let _0x363f3b=new Set(_0x515d42);_0x363f3b[_0x314b44(0x1eb)](_0x19da31);if(_0x43b067(_0xb5a456,_0x4ef47f+0x1,_0x363f3b)){for(let _0x251aeb=0x0;_0x251aeb<_0x1b912b;_0x251aeb++){_0xfdc67e[_0x314b44(0x243)](_0x2b0db1);}_0x1d09ad=_0xb5a456,_0x515d42[_0x314b44(0x1eb)](_0x19da31);if(_0x1d09ad===0x0)break;}}}if(_0x1d09ad>0x0){const _0x190b08=_0x515d42[_0x314b44(0x260)]<0x3||_0x515d42['has'](0x1);if(_0x190b08){for(let _0x2f6d46=0x0;_0x2f6d46<_0x1d09ad;_0x2f6d46++){_0xfdc67e[_0x314b44(0x243)](level1Image);}_0x515d42[_0x314b44(0x1eb)](0x1),_0x1d09ad=0x0;}else console[_0x314b44(0x1f3)](_0x314b44(0x287)+_0x1d09ad+_0x314b44(0x22e),_0x515d42);}_0xfdc67e[_0x314b44(0x1e0)]===0x0&&_0xfdc67e[_0x314b44(0x243)](level1Image);const _0x4def36=_0xfdc67e[_0x314b44(0x1e0)],_0x1f4f45=_0x4def36*LEVEL_ICON_SIZE+Math[_0x314b44(0x228)](0x0,_0x4def36-0x1)*LEVEL_ICON_SPACING,_0xdd9204=gameCanvas['width']-LEVEL_ICON_MARGIN_RIGHT,_0x4fe576=_0xdd9204-_0x1f4f45,_0x5d37a5=gameCanvas[_0x314b44(0x23a)]-LEVEL_ICON_MARGIN_BOTTOM-LEVEL_ICON_SIZE;let _0xe976b0=_0x4fe576;for(const _0x5877d1 of _0xfdc67e){_0x5877d1&&_0x5877d1['complete']&&_0x5877d1[_0x314b44(0x1bf)]!==0x0&&gameCtx[_0x314b44(0x276)](_0x5877d1,Math[_0x314b44(0x238)](_0xe976b0),Math[_0x314b44(0x238)](_0x5d37a5),LEVEL_ICON_SIZE,LEVEL_ICON_SIZE),_0xe976b0+=LEVEL_ICON_SIZE+LEVEL_ICON_SPACING;}}gameCtx[_0x314b44(0x252)](),gameCtx[_0x314b44(0x204)]();if(ship&&!isShowingCaptureMessage){let _0x2d0e68=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x263eb7=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS,_0x5eea7f=_0x248fdf%_0x263eb7;_0x5eea7f>=INVINCIBILITY_BLINK_ON_MS&&(_0x2d0e68=![]);}if(_0x2d0e68){let _0x54492a=ship['x'],_0x4792a3=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x4792a3&&(_0x54492a=Math[_0x314b44(0x238)](gameCanvas[_0x314b44(0x1f4)]/0x2-ship[_0x314b44(0x1f4)]/0x2));const _0x959c22=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;typeof shipImage!==_0x314b44(0x203)&&shipImage[_0x314b44(0x289)]&&shipImage[_0x314b44(0x1bf)]!==0x0?gameCtx[_0x314b44(0x276)](shipImage,Math[_0x314b44(0x238)](_0x54492a),Math[_0x314b44(0x238)](_0x959c22),ship[_0x314b44(0x1f4)],ship[_0x314b44(0x23a)]):(gameCtx[_0x314b44(0x236)]=_0x314b44(0x23d),gameCtx['fillRect'](Math['round'](_0x54492a),Math['round'](_0x959c22),ship[_0x314b44(0x1f4)],ship['height']));if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&typeof shipImage!==_0x314b44(0x203)&&shipImage[_0x314b44(0x289)]&&shipImage[_0x314b44(0x1bf)]!==0x0){const _0x5e33dd=_0x54492a+DUAL_SHIP_OFFSET_X;gameCtx[_0x314b44(0x276)](shipImage,Math[_0x314b44(0x238)](_0x5e33dd),Math[_0x314b44(0x238)](_0x959c22),ship[_0x314b44(0x1f4)],ship[_0x314b44(0x23a)]);}}}fallingShips[_0x314b44(0x1e0)]>0x0&&typeof shipImage!==_0x314b44(0x203)&&shipImage['complete']&&fallingShips[_0x314b44(0x1dd)](_0x4c2f98=>{const _0x29a89c=_0x314b44;if(_0x4c2f98){gameCtx[_0x29a89c(0x204)]();const _0x190311=_0x4c2f98['x']+_0x4c2f98[_0x29a89c(0x1f4)]/0x2,_0x98d798=_0x4c2f98['y']+_0x4c2f98[_0x29a89c(0x23a)]/0x2;gameCtx[_0x29a89c(0x202)](_0x190311,_0x98d798),gameCtx[_0x29a89c(0x27d)](_0x4c2f98[_0x29a89c(0x284)]||0x0);const _0x5b2267=-_0x4c2f98[_0x29a89c(0x1f4)]/0x2,_0x386568=-_0x4c2f98[_0x29a89c(0x23a)]/0x2,_0x4dff44=_0x4c2f98[_0x29a89c(0x1f4)],_0x12e465=_0x4c2f98[_0x29a89c(0x23a)];gameCtx['drawImage'](shipImage,_0x5b2267,_0x386568,_0x4dff44,_0x12e465),typeof _0x4c2f98[_0x29a89c(0x268)]==='number'&&_0x4c2f98[_0x29a89c(0x268)]>0.01&&(gameCtx[_0x29a89c(0x204)](),gameCtx['globalAlpha']=_0x4c2f98[_0x29a89c(0x268)],gameCtx['fillStyle']=CAPTURED_SHIP_TINT_COLOR,gameCtx['globalCompositeOperation']='source-atop',gameCtx['fillRect'](_0x5b2267,_0x386568,_0x4dff44,_0x12e465),gameCtx[_0x29a89c(0x252)]()),gameCtx['restore']();}});gameCtx[_0x314b44(0x252)]();if(!isInGameState){if(isShowingScoreScreen){if(typeof LIFE_ICON_SIZE!==_0x314b44(0x203)){gameCtx[_0x314b44(0x204)]();const _0x1025ce=gameCanvas[_0x314b44(0x1f4)]/0x2;let _0xf0ec39=gameCanvas['height']*0.25+SCORE_SCREEN_VERTICAL_OFFSET,_0x29340b=0x0,_0x1ced1b=_0xf0ec39+0x0;drawCanvasText(_0x314b44(0x1d6),_0x1025ce,_0x1ced1b-0x1e,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_TOP,'center',_0x314b44(0x223),!![]);let _0x469664=_0x1ced1b+SCORE_SCREEN_LINE_V_SPACING*1.8;const _0x4bf717=_0x314b44(0x219);gameCtx['font']=SCORE_SCREEN_TEXT_FONT;const _0x1ffb06=gameCtx[_0x314b44(0x23f)](_0x4bf717)[_0x314b44(0x1f4)],_0x308f56=LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING+_0x1ffb06;_0x29340b=_0x1025ce-_0x308f56/0x2-0x1e;typeof shipImage!==_0x314b44(0x203)&&shipImage[_0x314b44(0x289)]&&shipImage[_0x314b44(0x1bf)]!==0x0&&gameCtx['drawImage'](shipImage,Math[_0x314b44(0x238)](_0x29340b),Math[_0x314b44(0x238)](_0x469664-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x4bf717,_0x29340b+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x469664,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0x314b44(0x1c2),'middle',![]);let _0x21ce8c=_0x469664+SCORE_SCREEN_LINE_V_SPACING*0x1;const _0x3dd949=_0x314b44(0x27c)+RECURRING_EXTRA_LIFE_INTERVAL+_0x314b44(0x277);typeof shipImage!==_0x314b44(0x203)&&shipImage['complete']&&shipImage[_0x314b44(0x1bf)]!==0x0&&gameCtx[_0x314b44(0x276)](shipImage,Math[_0x314b44(0x238)](_0x29340b),Math['round'](_0x21ce8c-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x3dd949,_0x29340b+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x21ce8c,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0x314b44(0x1c2),_0x314b44(0x223),![]);let _0x4335fb=_0x21ce8c+SCORE_SCREEN_LINE_V_SPACING*0x1;const _0x5a57a9=_0x314b44(0x273)+RECURRING_EXTRA_LIFE_INTERVAL+'\x20PTS';typeof shipImage!==_0x314b44(0x203)&&shipImage['complete']&&shipImage[_0x314b44(0x1bf)]!==0x0&&gameCtx[_0x314b44(0x276)](shipImage,Math[_0x314b44(0x238)](_0x29340b),Math['round'](_0x4335fb-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x5a57a9,_0x29340b+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x4335fb,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0x314b44(0x1c2),'middle',![]);let _0x3826e9=_0x4335fb+SCORE_SCREEN_LINE_V_SPACING*1.8;drawCanvasText(SCORE_SCREEN_PLATINI_TEXT,_0x1025ce-0xa,_0x3826e9+0x1e,MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x314b44(0x21d),_0x314b44(0x223),![]),gameCtx['restore']();}}else{gameCtx[_0x314b44(0x204)]();const _0xeb92ba=gameCanvas['width'],_0x2b3264=gameCanvas[_0x314b44(0x23a)],_0x27056c=_0xeb92ba/0x2;selectedButtonIndex===-0x1&&(selectedButtonIndex=0x0);let _0x49e3ec=MENU_LOGO_APPROX_HEIGHT,_0x223aac=_0x49e3ec*(logoImage['naturalWidth']/logoImage['naturalHeight']||0x1);typeof logoImage!=='undefined'&&logoImage[_0x314b44(0x289)]&&logoImage[_0x314b44(0x1bf)]!==0x0&&(_0x49e3ec=logoImage[_0x314b44(0x1bf)]*LOGO_SCALE_FACTOR,_0x223aac=logoImage['naturalWidth']*LOGO_SCALE_FACTOR);const _0x52dc30=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x530022=_0x49e3ec+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x52dc30;let _0x471ece=(_0x2b3264-_0x530022)/0x2-0x46;_0x471ece+=MENU_GENERAL_Y_OFFSET;const _0x4b7031=_0x27056c-_0x223aac/0x2,_0x231548=_0x471ece+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x314b44(0x203)&&logoImage['complete']&&logoImage[_0x314b44(0x1bf)]!==0x0?gameCtx['drawImage'](logoImage,Math[_0x314b44(0x238)](_0x4b7031),Math['round'](_0x231548),_0x223aac,_0x49e3ec):drawCanvasText(_0x314b44(0x217),_0x27056c,_0x231548+_0x49e3ec/0x2,'30px\x20Arial',_0x314b44(0x26f));if(isFiringModeSelectMode)drawCanvasButton(_0x314b44(0x237),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x314b44(0x242),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton('1\x20PLAYER',0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x314b44(0x263),0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x314b44(0x24e),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x314b44(0x28b),0x1,selectedButtonIndex===0x1));const _0xe585ce=getMenuButtonRect(0x1);let _0xb72824;_0xe585ce?_0xb72824=_0xe585ce['y']+_0xe585ce[_0x314b44(0x23a)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x52dc30/0x2:_0xb72824=_0x471ece+_0x49e3ec+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x52dc30/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x27056c-0x1,Math[_0x314b44(0x238)](_0xb72824),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x314b44(0x21d),_0x314b44(0x223),!![]),gameCtx[_0x314b44(0x252)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x314b44(0x204)]();let _0x302b29=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x302b29&&(bullets[_0x314b44(0x1dd)](_0x5b5c7b=>{const _0x4c9953=_0x314b44;_0x5b5c7b&&(typeof bulletImage!==_0x4c9953(0x203)&&bulletImage[_0x4c9953(0x289)]?gameCtx['drawImage'](bulletImage,Math[_0x4c9953(0x238)](_0x5b5c7b['x']),Math[_0x4c9953(0x238)](_0x5b5c7b['y']),_0x5b5c7b['width'],_0x5b5c7b[_0x4c9953(0x23a)]):(gameCtx[_0x4c9953(0x236)]=_0x4c9953(0x1c9),gameCtx[_0x4c9953(0x1e8)](Math[_0x4c9953(0x238)](_0x5b5c7b['x']),Math[_0x4c9953(0x238)](_0x5b5c7b['y']),_0x5b5c7b['width'],_0x5b5c7b['height'])));}),enemyBullets[_0x314b44(0x1dd)](_0x54d5a5=>{const _0x1289ce=_0x314b44;_0x54d5a5&&(typeof enemyBulletImage!==_0x1289ce(0x203)&&enemyBulletImage['complete']&&enemyBulletImage[_0x1289ce(0x22d)]>0x0?gameCtx[_0x1289ce(0x276)](enemyBulletImage,Math[_0x1289ce(0x238)](_0x54d5a5['x']),Math[_0x1289ce(0x238)](_0x54d5a5['y']),_0x54d5a5[_0x1289ce(0x1f4)],_0x54d5a5[_0x1289ce(0x23a)]):(gameCtx[_0x1289ce(0x236)]=_0x1289ce(0x208),gameCtx['fillRect'](Math[_0x1289ce(0x238)](_0x54d5a5['x']),Math['round'](_0x54d5a5['y']),_0x54d5a5[_0x1289ce(0x1f4)],_0x54d5a5[_0x1289ce(0x23a)])));}));enemies[_0x314b44(0x1dd)](_0x2f63e0=>{const _0x1b64d6=_0x314b44;if(_0x2f63e0&&_0x2f63e0['y']<gameCanvas['height']+_0x2f63e0['height']*0x2&&_0x2f63e0['y']>-_0x2f63e0['height']*0x2){gameCtx['save']();try{let _0x3f7947=null,_0x99ec16='grey';const _0x52425f=!isPaused&&_0x248fdf%(ENEMY_ANIMATION_INTERVAL_MS*0x2)>=ENEMY_ANIMATION_INTERVAL_MS;if(_0x2f63e0[_0x1b64d6(0x24c)]===ENEMY3_TYPE)_0x3f7947=_0x52425f?bossGalagaImage2:bossGalagaImage,_0x99ec16=_0x1b64d6(0x201);else _0x2f63e0[_0x1b64d6(0x24c)]===ENEMY2_TYPE?(_0x3f7947=_0x52425f?butterflyImage2:butterflyImage,_0x99ec16=_0x1b64d6(0x24d)):(_0x3f7947=_0x52425f?beeImage2:beeImage,_0x99ec16=_0x1b64d6(0x244));const _0x35f17=Math['round'](_0x2f63e0['x']),_0x2adacc=Math[_0x1b64d6(0x238)](_0x2f63e0['y']),_0x5b159c=_0x2f63e0[_0x1b64d6(0x1f4)],_0x279ccf=_0x2f63e0['height'],_0x436862=_0x2f63e0[_0x1b64d6(0x24c)]===ENEMY3_TYPE&&_0x2f63e0[_0x1b64d6(0x1c6)],_0x21d9c4=!isPaused&&(_0x2f63e0['state']==='attacking'||_0x2f63e0[_0x1b64d6(0x226)]===_0x1b64d6(0x1fa)||_0x2f63e0[_0x1b64d6(0x226)]===_0x1b64d6(0x1ee))&&_0x2f63e0['y']>-_0x2f63e0[_0x1b64d6(0x23a)]*0.5&&(Math[_0x1b64d6(0x290)](_0x2f63e0['velocityX'])>0.1||Math['abs'](_0x2f63e0[_0x1b64d6(0x200)])>0.1),_0x38780f=_0x2f63e0[_0x1b64d6(0x226)]===_0x1b64d6(0x23e)&&_0x2f63e0[_0x1b64d6(0x24c)]===ENEMY3_TYPE&&_0x2f63e0['hasCapturedShip']&&_0x2f63e0[_0x1b64d6(0x278)]&&typeof _0x2f63e0['capturedShipX']===_0x1b64d6(0x227)&&typeof _0x2f63e0['capturedShipY']===_0x1b64d6(0x227)&&typeof _0x2f63e0[_0x1b64d6(0x25a)]===_0x1b64d6(0x227),_0x158735=_0x2f63e0[_0x1b64d6(0x226)]!=='showing_capture_message'&&_0x2f63e0[_0x1b64d6(0x24c)]===ENEMY3_TYPE&&_0x2f63e0['hasCapturedShip']&&_0x2f63e0['capturedShipDimensions'],_0x46d462=_0x38780f||_0x158735?_0x2f63e0[_0x1b64d6(0x278)][_0x1b64d6(0x1f4)]:0x0,_0x17cea8=_0x38780f||_0x158735?_0x2f63e0['capturedShipDimensions']['height']:0x0;let _0x301004=0x0,_0x3db607=0x0;if(_0x38780f)_0x301004=Math[_0x1b64d6(0x238)](_0x2f63e0[_0x1b64d6(0x1ea)]),_0x3db607=Math['round'](_0x2f63e0['capturedShipY']);else _0x158735&&(_0x301004=Math[_0x1b64d6(0x238)](_0x2f63e0['x']+CAPTURED_SHIP_OFFSET_X),_0x3db607=Math[_0x1b64d6(0x238)](_0x2f63e0['y']+CAPTURED_SHIP_OFFSET_Y));const _0xa64076=(_0x4d4d29,_0x7bbf89,_0x5f05d8,_0x10aa03)=>{const _0x254dac=_0x1b64d6;typeof _0x3f7947!=='undefined'&&_0x3f7947[_0x254dac(0x289)]&&_0x3f7947['naturalHeight']!==0x0?gameCtx[_0x254dac(0x276)](_0x3f7947,_0x4d4d29,_0x7bbf89,_0x5f05d8,_0x10aa03):(gameCtx[_0x254dac(0x236)]=_0x99ec16,gameCtx[_0x254dac(0x1e8)](_0x4d4d29,_0x7bbf89,_0x5f05d8,_0x10aa03)),_0x436862&&(gameCtx[_0x254dac(0x1ce)]=_0x254dac(0x262),gameCtx['fillStyle']='rgba(0,\x200,\x20139,\x200.5)',gameCtx[_0x254dac(0x1e8)](_0x4d4d29,_0x7bbf89,_0x5f05d8,_0x10aa03),gameCtx[_0x254dac(0x1ce)]=_0x254dac(0x28d));};if(_0x21d9c4){const _0x27288c=_0x35f17+_0x5b159c/0x2,_0x49001d=_0x2adacc+_0x279ccf/0x2;gameCtx[_0x1b64d6(0x202)](_0x27288c,_0x49001d);let _0x49b26b=Math[_0x1b64d6(0x26b)](_0x2f63e0[_0x1b64d6(0x200)],_0x2f63e0[_0x1b64d6(0x1e9)])+Math['PI']/0x2;if(_0x2f63e0[_0x1b64d6(0x24c)]===ENEMY3_TYPE&&_0x2f63e0[_0x1b64d6(0x226)]===_0x1b64d6(0x1e3))_0x49b26b+=Math['PI'];gameCtx[_0x1b64d6(0x27d)](_0x49b26b),_0xa64076(-_0x5b159c/0x2,-_0x279ccf/0x2,_0x5b159c,_0x279ccf);if(_0x158735&&typeof shipImage!==_0x1b64d6(0x203)&&shipImage[_0x1b64d6(0x289)]){gameCtx[_0x1b64d6(0x21f)]=0.8;const _0x351d23=CAPTURED_SHIP_OFFSET_X,_0x2bc293=CAPTURED_SHIP_OFFSET_Y;gameCtx['drawImage'](shipImage,_0x351d23-_0x46d462/0x2,_0x2bc293-_0x17cea8/0x2,_0x46d462,_0x17cea8),gameCtx[_0x1b64d6(0x21f)]=0x1,gameCtx['save'](),gameCtx[_0x1b64d6(0x236)]=CAPTURED_SHIP_TINT_COLOR,gameCtx['globalCompositeOperation']=_0x1b64d6(0x262),gameCtx[_0x1b64d6(0x1e8)](_0x351d23-_0x46d462/0x2,_0x2bc293-_0x17cea8/0x2,_0x46d462,_0x17cea8),gameCtx[_0x1b64d6(0x252)]();}gameCtx['rotate'](-_0x49b26b),gameCtx['translate'](-_0x27288c,-_0x49001d);}else _0xa64076(_0x35f17,_0x2adacc,_0x5b159c,_0x279ccf),_0x158735&&typeof shipImage!==_0x1b64d6(0x203)&&shipImage[_0x1b64d6(0x289)]&&(gameCtx[_0x1b64d6(0x21f)]=0.8,gameCtx['drawImage'](shipImage,_0x301004,_0x3db607,_0x46d462,_0x17cea8),gameCtx[_0x1b64d6(0x21f)]=0x1,gameCtx[_0x1b64d6(0x204)](),gameCtx['fillStyle']=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x1b64d6(0x1ce)]=_0x1b64d6(0x262),gameCtx[_0x1b64d6(0x1e8)](_0x301004,_0x3db607,_0x46d462,_0x17cea8),gameCtx[_0x1b64d6(0x252)]());if(_0x38780f&&typeof shipImage!==_0x1b64d6(0x203)&&shipImage[_0x1b64d6(0x289)]){gameCtx[_0x1b64d6(0x204)]();const _0x510c83=_0x301004+_0x46d462/0x2,_0x1ac371=_0x3db607+_0x17cea8/0x2;gameCtx[_0x1b64d6(0x202)](_0x510c83,_0x1ac371),gameCtx[_0x1b64d6(0x27d)](_0x2f63e0[_0x1b64d6(0x25a)]),gameCtx[_0x1b64d6(0x21f)]=0.8,gameCtx[_0x1b64d6(0x276)](shipImage,-_0x46d462/0x2,-_0x17cea8/0x2,_0x46d462,_0x17cea8),gameCtx[_0x1b64d6(0x21f)]=0x1,gameCtx[_0x1b64d6(0x204)](),gameCtx['fillStyle']=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x1b64d6(0x1ce)]='source-atop',gameCtx[_0x1b64d6(0x1e8)](-_0x46d462/0x2,-_0x17cea8/0x2,_0x46d462,_0x17cea8),gameCtx[_0x1b64d6(0x252)](),gameCtx[_0x1b64d6(0x252)]();}}catch(_0x365905){console['error']('Error\x20drawing\x20enemy:',_0x365905),gameCtx[_0x1b64d6(0x236)]=_0x1b64d6(0x214),gameCtx[_0x1b64d6(0x1e8)](Math['round'](_0x2f63e0['x']),Math[_0x1b64d6(0x238)](_0x2f63e0['y']),_0x2f63e0[_0x1b64d6(0x1f4)],_0x2f63e0[_0x1b64d6(0x23a)]);}finally{gameCtx[_0x1b64d6(0x252)]();}}});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){gameCtx[_0x314b44(0x204)]();const _0x45eed5=0.4+(Math[_0x314b44(0x1cc)](_0x248fdf*CAPTURE_BEAM_PULSE_SPEED)+0x1)/0x2*0.6,_0x47dc57=captureBeamProgress;gameCtx[_0x314b44(0x21f)]=_0x47dc57*_0x45eed5;const _0xd6fc09=enemies[_0x314b44(0x1fb)](_0x1e68b5=>_0x1e68b5['id']===capturingBossId);if(_0xd6fc09){const _0x4119b5=_0xd6fc09['x']+BOSS_WIDTH/0x2,_0x159500=_0xd6fc09['y']+BOSS_HEIGHT,_0x594990=gameCanvas[_0x314b44(0x23a)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x12d845=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x2c8586=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR;if(_0x159500<_0x594990){const _0x88dbe7=gameCtx[_0x314b44(0x27e)](_0x4119b5,_0x159500,_0x4119b5,_0x594990);_0x88dbe7[_0x314b44(0x1fc)](0x0,CAPTURE_BEAM_COLOR_START),_0x88dbe7[_0x314b44(0x1fc)](0x1,CAPTURE_BEAM_COLOR_END),gameCtx[_0x314b44(0x236)]=_0x88dbe7,gameCtx['beginPath'](),gameCtx[_0x314b44(0x1d5)](_0x4119b5-_0x12d845/0x2,_0x159500),gameCtx[_0x314b44(0x1f7)](_0x4119b5+_0x12d845/0x2,_0x159500),gameCtx[_0x314b44(0x1f7)](_0x4119b5+_0x2c8586/0x2,_0x594990),gameCtx[_0x314b44(0x1f7)](_0x4119b5-_0x2c8586/0x2,_0x594990),gameCtx[_0x314b44(0x28a)](),gameCtx[_0x314b44(0x1f8)]();}}gameCtx[_0x314b44(0x252)]();}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x1888c2=![];const _0x2818e5=gameCanvas[_0x314b44(0x23a)]/0x2,_0x1225a3=gameCanvas[_0x314b44(0x1f4)]/0x2,_0x594773=_0x314b44(0x1d9)+challengingStageEnemiesHit,_0x2ff26b=_0x314b44(0x249)+scoreEarnedThisCS;if(isPaused)drawCanvasText(_0x314b44(0x1e4),_0x1225a3,_0x2818e5,PAUSE_TEXT_FONT,PAUSE_TEXT_COLOR,_0x314b44(0x21d),'middle',PAUSE_TEXT_SHADOW),_0x1888c2=!![];else{if(isShowingCaptureMessage)drawCanvasText(_0x314b44(0x1ca),_0x1225a3,_0x2818e5-0x28,INTRO_TEXT_FONT,'red',_0x314b44(0x21d),_0x314b44(0x223),!![]),_0x1888c2=!![];else{if(showCsBonusScoreMessage||showPerfectMessage||showCsHitsMessage)drawCanvasText(_0x594773,_0x1225a3,_0x2818e5,INTRO_TEXT_FONT,CS_HITS_TEXT_COLOR,_0x314b44(0x21d),_0x314b44(0x223),!![]),_0x1888c2=!![],(showCsBonusScoreMessage||showPerfectMessage)&&drawCanvasText(_0x314b44(0x207),_0x1225a3,_0x2818e5-CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,PERFECT_TEXT_COLOR,_0x314b44(0x21d),'middle',!![]),showCsBonusScoreMessage&&drawCanvasText(_0x314b44(0x1c8),_0x1225a3,_0x2818e5+CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_BONUS_SCORE_TEXT_COLOR,_0x314b44(0x21d),_0x314b44(0x223),!![]);else{if(showCSClearMessage)drawCanvasText(_0x314b44(0x257),_0x1225a3,_0x2818e5-CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_CLEAR_TEXT_COLOR,_0x314b44(0x21d),'middle',!![]),_0x1888c2=!![],showCsHitsForClearMessage&&drawCanvasText(_0x594773,_0x1225a3,_0x2818e5,INTRO_TEXT_FONT,CS_HITS_TEXT_COLOR,_0x314b44(0x21d),_0x314b44(0x223),!![]),showCsScoreForClearMessage&&drawCanvasText(_0x2ff26b,_0x1225a3,_0x2818e5+CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_CLEAR_SCORE_TEXT_COLOR,_0x314b44(0x21d),_0x314b44(0x223),!![]);else{if(showExtraLifeMessage)drawCanvasText(_0x314b44(0x26e),_0x1225a3,_0x2818e5,INTRO_TEXT_FONT,EXTRA_LIFE_TEXT_COLOR,_0x314b44(0x21d),_0x314b44(0x223),!![]),_0x1888c2=!![];else{if(isShowingIntro){let _0x4a23f3='',_0x4eb50e=INTRO_TEXT_COLOR_NORMAL;if(introStep===0x1)_0x4a23f3=!isManualControl?'DEMO':_0x314b44(0x1cf)+(isTwoPlayerMode?currentPlayer:0x1);else{if(introStep===0x2)_0x4a23f3=_0x314b44(0x230)+level;else introStep===0x3&&(_0x4a23f3='CHALLENGING\x20STAGE',_0x4eb50e=INTRO_TEXT_COLOR_CS_TEXT,!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]));}_0x4a23f3&&(drawCanvasText(_0x4a23f3,_0x1225a3,_0x2818e5,INTRO_TEXT_FONT,_0x4eb50e,_0x314b44(0x21d),_0x314b44(0x223),!![]),_0x1888c2=!![]);}else{if(!isManualControl&&isShowingDemoText&&!_0x1888c2&&!isEntrancePhaseActive&&!isCsCompletionDelayActive){const _0xc1ab7d=DEMO_TEXT_BLINK_CYCLE_MS*1.5,_0x3208fd=DEMO_TEXT_BLINK_ON_MS*1.5;_0x248fdf%_0xc1ab7d<_0x3208fd&&drawCanvasText('PUSH\x20START\x20BUTTON',_0x1225a3,_0x2818e5,DEMO_TEXT_LINE1_FONT,DEMO_TEXT_COLOR,'center',_0x314b44(0x223),!![]);}}}}}}}gameCtx[_0x314b44(0x252)]();}else{if(isShowingPlayerGameOverMessage){const _0x36e30c=_0x314b44(0x1cf)+playerWhoIsGameOver,_0x5476a4=RESULTS_LINE_V_SPACING_SINGLE,_0x39e8b5=gameCanvas[_0x314b44(0x23a)]*0.45;drawCanvasText(_0x36e30c,gameCanvas[_0x314b44(0x1f4)]/0x2,_0x39e8b5-_0x5476a4/0x2,INTRO_TEXT_FONT,INTRO_TEXT_COLOR_NORMAL,_0x314b44(0x21d),'middle',!![]),drawCanvasText('GAME\x20OVER',gameCanvas[_0x314b44(0x1f4)]/0x2,_0x39e8b5+_0x5476a4/0x2,INTRO_TEXT_FONT,INTRO_TEXT_COLOR_NORMAL,_0x314b44(0x21d),_0x314b44(0x223),!![]);}else{if(gameOverSequenceStartTime>0x0){const _0x52a200=_0x248fdf-gameOverSequenceStartTime,_0x510413=_0x52a200<GAME_OVER_DURATION,_0xb360ed=_0x52a200>=GAME_OVER_DURATION;if(_0x510413)drawCanvasText(_0x314b44(0x1d1),gameCanvas[_0x314b44(0x1f4)]/0x2,gameCanvas[_0x314b44(0x23a)]/0x2,GAME_OVER_FONT,GAME_OVER_COLOR,_0x314b44(0x21d),'middle',GAME_OVER_SHADOW);else{if(_0xb360ed){gameCtx['save']();const _0x4e48b3=gameCanvas[_0x314b44(0x1f4)]/0x2,_0x39ee9b=gameCanvas[_0x314b44(0x1f4)];let _0x3b4e87=RESULTS_START_Y+RESULTS_LINE_V_SPACING_SINGLE;const _0x209fff=(_0xbde3cb,_0x3c4c38,_0x273775,_0x25c7f4,_0x426d5b,_0xc26707,_0x38dfb5,_0x5c8c49)=>{const _0x1440d8=_0x314b44;let _0x4a5ad0=_0x5c8c49;const _0x222e95=RESULTS_VALUE_COLOR_YELLOW,_0x1dae00=RESULTS_VALUE_COLOR_CYAN;drawCanvasText(_0x1440d8(0x234),_0x38dfb5,_0x4a5ad0,INTRO_TEXT_FONT,RESULTS_HEADER_COLOR,_0x1440d8(0x21d),_0x1440d8(0x26d),!![]),_0x4a5ad0+=getSubtitleApproxHeight(INTRO_TEXT_FONT)+RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0xbde3cb,_0x38dfb5,_0x4a5ad0,INTRO_TEXT_FONT,'white',_0x1440d8(0x21d),'middle',![]),_0x4a5ad0+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x1440d8(0x286),_0x38dfb5,_0x4a5ad0,INTRO_TEXT_FONT,_0x222e95,'center',_0x1440d8(0x223),![]),_0x4a5ad0+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0xc26707[_0x1440d8(0x1e1)](),_0x38dfb5,_0x4a5ad0,INTRO_TEXT_FONT,_0x1dae00,'center',_0x1440d8(0x223),![]),_0x4a5ad0+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x1440d8(0x27a),_0x38dfb5,_0x4a5ad0,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0x1440d8(0x21d),_0x1440d8(0x223),![]),_0x4a5ad0+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x3c4c38['toString'](),_0x38dfb5,_0x4a5ad0,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,'center',_0x1440d8(0x223),![]),_0x4a5ad0+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x1440d8(0x21c),_0x38dfb5,_0x4a5ad0,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,'center',_0x1440d8(0x223),![]),_0x4a5ad0+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x273775[_0x1440d8(0x1e1)](),_0x38dfb5,_0x4a5ad0,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x1440d8(0x21d),_0x1440d8(0x223),![]),_0x4a5ad0+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x1440d8(0x266),_0x38dfb5,_0x4a5ad0,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,'center',_0x1440d8(0x223),![]),_0x4a5ad0+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x25c7f4['toString'](),_0x38dfb5,_0x4a5ad0,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x1440d8(0x21d),_0x1440d8(0x223),![]),_0x4a5ad0+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x1440d8(0x1ed),_0x38dfb5,_0x4a5ad0,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0x1440d8(0x21d),'middle',![]),_0x4a5ad0+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x426d5b,_0x38dfb5,_0x4a5ad0,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,'center',_0x1440d8(0x223),![]),_0x4a5ad0+=RESULTS_LINE_V_SPACING_SINGLE*1.5,drawCanvasText(RESULTS_PLATINI_TEXT,_0x38dfb5,_0x4a5ad0-0xa,RESULTS_FOOTER_FONT,RESULTS_FOOTER_COLOR,_0x1440d8(0x21d),_0x1440d8(0x223),![]);};if(isTwoPlayerMode){const _0x27519f=player1ShotsFired||0x0,_0x3bac6a=player1EnemiesHit||0x0,_0x1d725a=_0x27519f>0x0?Math[_0x314b44(0x238)](_0x3bac6a/_0x27519f*0x64)+'%':'0%',_0x59d9df=player2ShotsFired||0x0,_0x53f151=player2EnemiesHit||0x0,_0x250095=_0x59d9df>0x0?Math[_0x314b44(0x238)](_0x53f151/_0x59d9df*0x64)+'%':'0%',_0x537a5d=_0x39ee9b*0.4,_0x56c76a=_0x39ee9b*0.1,_0x5367c6=_0x4e48b3-_0x56c76a/0x2-_0x537a5d/0x2+_0x537a5d*0.1,_0x4554ac=_0x4e48b3+_0x56c76a/0x2+_0x537a5d/0x2-_0x537a5d*0.1,_0x375513='PLAYER\x201';_0x209fff(_0x375513,player1Score,_0x27519f,_0x3bac6a,_0x1d725a,player1MaxLevelReached,_0x5367c6,_0x3b4e87),_0x209fff(_0x314b44(0x265),player2Score,_0x59d9df,_0x53f151,_0x250095,player2MaxLevelReached,_0x4554ac,_0x3b4e87);let _0x316b62=0x0;if(player1Score>player2Score)_0x316b62=0x1;else{if(player2Score>player1Score)_0x316b62=0x2;}if(_0x316b62>0x0){let _0xa7bbe6=_0x3b4e87;_0xa7bbe6+=getSubtitleApproxHeight(INTRO_TEXT_FONT)+RESULTS_LINE_V_SPACING_SINGLE,_0xa7bbe6+=RESULTS_LINE_V_SPACING_SINGLE,_0xa7bbe6+=RESULTS_LINE_V_SPACING_SINGLE*0x2;const _0x3b2acc='PLAYER\x20'+_0x316b62,_0x2461e8=_0x314b44(0x1d4);drawCanvasText(_0x3b2acc,_0x4e48b3,_0xa7bbe6,INTRO_TEXT_FONT,_0x314b44(0x208),_0x314b44(0x21d),_0x314b44(0x223),!![]),drawCanvasText(_0x2461e8,_0x4e48b3,_0xa7bbe6+RESULTS_LINE_V_SPACING_SINGLE,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x314b44(0x21d),_0x314b44(0x223),!![]);}}else{const _0x12b332=player1ShotsFired||0x0,_0x441902=player1EnemiesHit||0x0,_0x426ba5=wasLastGameAIDemo?score:player1Score,_0x48b819=wasLastGameAIDemo?level:player1MaxLevelReached,_0x22683a=_0x12b332>0x0?Math[_0x314b44(0x238)](_0x441902/_0x12b332*0x64)+'%':'0%',_0x4f3908=wasLastGameAIDemo?_0x314b44(0x239):'PLAYER\x201';_0x209fff(_0x4f3908,_0x426ba5,_0x12b332,_0x441902,_0x22683a,_0x48b819,_0x4e48b3,_0x3b4e87);}gameCtx[_0x314b44(0x252)]();}}}}}}}catch(_0x3fd000){console[_0x314b44(0x241)](_0x314b44(0x24a),_0x3fd000,_0x3fd000[_0x314b44(0x1f5)]);if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;try{gameCtx&&gameCanvas&&(gameCtx['fillStyle']='red',gameCtx[_0x314b44(0x1db)]=_0x314b44(0x282),gameCtx[_0x314b44(0x25c)]=_0x314b44(0x21d),gameCtx[_0x314b44(0x280)](_0x314b44(0x25f),gameCanvas['width']/0x2,gameCanvas[_0x314b44(0x23a)]/0x2));}catch(_0x5c6e71){}try{showMenuState();}catch(_0x28b8b0){}}}function hideCursor(){const _0x543963=_0x3c938f;gameCanvas&&(gameCanvas[_0x543963(0x1de)][_0x543963(0x21b)]=_0x543963(0x210)),mouseIdleTimerId=null;}function handleCanvasMouseMove(_0x3bdd92){const _0x230daf=_0x3c938f;if(!gameCanvas)return;let _0x5185af=_0x230daf(0x27b);const _0x517236=!isInGameState||isShowingScoreScreen||gameOverSequenceStartTime>0x0&&Date[_0x230daf(0x221)]()-gameOverSequenceStartTime>=GAME_OVER_DURATION;let _0x10dba4=![],_0x29b69a=selectedButtonIndex;if(_0x517236){const _0x41cde0=gameCanvas[_0x230daf(0x248)](),_0x50367a=gameCanvas[_0x230daf(0x1f4)]/_0x41cde0[_0x230daf(0x1f4)],_0x441aa4=gameCanvas['height']/_0x41cde0['height'],_0x9d93d3=(_0x3bdd92['clientX']-_0x41cde0[_0x230daf(0x1c2)])*_0x50367a,_0x11fcc4=(_0x3bdd92[_0x230daf(0x1c1)]-_0x41cde0[_0x230daf(0x26d)])*_0x441aa4,_0x539be0=getMenuButtonRect(0x0),_0x49bef5=getMenuButtonRect(0x1);if(_0x539be0&&checkCollision({'x':_0x9d93d3,'y':_0x11fcc4,'width':0x1,'height':0x1},_0x539be0))_0x29b69a=0x0,_0x10dba4=!![];else _0x49bef5&&checkCollision({'x':_0x9d93d3,'y':_0x11fcc4,'width':0x1,'height':0x1},_0x49bef5)?(_0x29b69a=0x1,_0x10dba4=!![]):(_0x29b69a=-0x1,_0x10dba4=![]);_0x29b69a!==selectedButtonIndex&&(selectedButtonIndex=_0x29b69a,_0x10dba4&&stopAutoDemoTimer()),_0x5185af=_0x10dba4?_0x230daf(0x1dc):_0x230daf(0x27b);}else _0x5185af=_0x230daf(0x210),selectedButtonIndex=-0x1;(gameCanvas[_0x230daf(0x1de)]['cursor']==='none'||gameCanvas[_0x230daf(0x1de)]['cursor']!==_0x5185af)&&(gameCanvas[_0x230daf(0x1de)][_0x230daf(0x21b)]=_0x5185af);clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);if(!isInGameState){const _0xd8a4e1=Date[_0x230daf(0x221)]();if(_0xd8a4e1-lastMouseMoveResetTime>0x1f4){if(typeof startAutoDemoTimer===_0x230daf(0x1fd))startAutoDemoTimer();lastMouseMoveResetTime=_0xd8a4e1;}}}function getTouchPos(_0xccdff2,_0x28370b){const _0x5bb6b5=_0x3c938f,_0x14c2ca=_0x28370b[_0x5bb6b5(0x267)]&&_0x28370b[_0x5bb6b5(0x267)]['length']>0x0?_0x28370b[_0x5bb6b5(0x267)]:_0x28370b[_0x5bb6b5(0x21a)];if(!_0xccdff2||!_0x14c2ca||_0x14c2ca[_0x5bb6b5(0x1e0)]===0x0)return null;const _0x4d9f4e=_0xccdff2[_0x5bb6b5(0x248)](),_0x1f094a=_0x14c2ca[0x0],_0x513a9c=_0xccdff2['width']/_0x4d9f4e[_0x5bb6b5(0x1f4)],_0x1aa14d=_0xccdff2['height']/_0x4d9f4e[_0x5bb6b5(0x23a)];return{'x':(_0x1f094a[_0x5bb6b5(0x246)]-_0x4d9f4e[_0x5bb6b5(0x1c2)])*_0x513a9c,'y':(_0x1f094a['clientY']-_0x4d9f4e['top'])*_0x1aa14d};}function handleTouchStart(_0x49ec2f){const _0x407609=_0x3c938f;if(!gameCanvas)return;_0x49ec2f[_0x407609(0x222)]();const _0x29f272=getTouchPos(gameCanvas,_0x49ec2f);if(!_0x29f272)return;isTouching=!![],touchStartX=_0x29f272['x'],touchCurrentX=_0x29f272['x'],isDraggingShip=![],lastTapTime=Date[_0x407609(0x221)](),touchJustFiredSingle=![],isTouchFiringActive=![];const _0x53007e=isInGameState&&!isPaused&&ship&&isManualControl&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage;if(_0x53007e){const _0x1e2839=ship['x']+ship[_0x407609(0x1f4)]/0x2,_0x54b0dc={'x':ship['x']-ship['width']*0.25,'y':ship['y']-ship['height']*0.5,'width':ship[_0x407609(0x1f4)]*1.5,'height':ship['height']*0x2};checkCollision({'x':_0x29f272['x'],'y':_0x29f272['y'],'width':0x1,'height':0x1},_0x54b0dc)?shipTouchOffsetX=_0x29f272['x']-_0x1e2839:shipTouchOffsetX=0x0,selectedFiringMode===_0x407609(0x1d0)&&(isTouchFiringActive=!![],typeof firePlayerBullet===_0x407609(0x1fd)&&firePlayerBullet(![]));}else shipTouchOffsetX=0x0;}function handleTouchMove(_0x282f70){const _0x470c3f=_0x3c938f;if(!isTouching||!gameCanvas)return;_0x282f70[_0x470c3f(0x222)]();const _0x29acd0=getTouchPos(gameCanvas,_0x282f70);if(!_0x29acd0)return;touchCurrentX=_0x29acd0['x'];const _0xc4bdd7=Math[_0x470c3f(0x290)](touchCurrentX-touchStartX),_0x1f794a=Date[_0x470c3f(0x221)]()-lastTapTime;!isDraggingShip&&((_0xc4bdd7>MIN_DRAG_DISTANCE_FOR_TAP_CANCEL||_0x1f794a>MIN_DRAG_TIME_FOR_TAP_CANCEL)&&(isDraggingShip=!![]));if(isDraggingShip&&isInGameState&&!isPaused&&ship&&isManualControl&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isShowingCaptureMessage&&!isWaitingForRespawn&&!isCsCompletionDelayActive){let _0x2f9731=touchCurrentX-shipTouchOffsetX,_0x572786=_0x2f9731-ship[_0x470c3f(0x1f4)]/0x2;const _0x4ae7d9=isDualShipActive?ship['width']+DUAL_SHIP_OFFSET_X:ship['width'];ship['x']=Math[_0x470c3f(0x228)](0x0,Math[_0x470c3f(0x20d)](gameCanvas[_0x470c3f(0x1f4)]-_0x4ae7d9,_0x572786)),ship['targetX']=ship['x'];}}function handleTouchEnd(_0x7a694a){const _0x2c45f5=_0x3c938f;if(!isTouching||!gameCanvas)return;_0x7a694a[_0x2c45f5(0x222)]();const _0x151563=!isDraggingShip;if(_0x151563){const _0x47a1cb=getTouchPos(gameCanvas,_0x7a694a);if(!_0x47a1cb){isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];return;}if(isShowingIntro&&isInGameState)typeof stopGameAndShowMenu==='function'&&stopGameAndShowMenu();else{if(!isInGameState||isShowingScoreScreen)typeof processMenuInteraction===_0x2c45f5(0x1fd)&&processMenuInteraction(_0x47a1cb['x'],_0x47a1cb['y']);else isInGameState&&isManualControl&&playerLives>0x0&&!isPaused&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage&&!isWaitingForRespawn&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!showExtraLifeMessage&&(selectedFiringMode==='single'&&(typeof firePlayerBullet===_0x2c45f5(0x1fd)&&(!touchJustFiredSingle&&(firePlayerBullet(![])&&(touchJustFiredSingle=!![])))));}}isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];}function handleTouchCancel(_0x37e77d){const _0x98b785=_0x3c938f;if(!isTouching)return;_0x37e77d[_0x98b785(0x222)](),isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![],touchJustFiredSingle=![];}function mainLoop(_0x4036a9){const _0x27144a=_0x3c938f;try{drawStars();retroGridCtx&&retroGridCanvas&&drawRetroGrid();pollControllerForMenu();if(isInGameState&&!isPaused){if(!isManualControl&&connectedGamepadIndex!==null){const _0x3b3d8b=navigator['getGamepads']();if(_0x3b3d8b?.[connectedGamepadIndex]){const _0x2aaa2b=_0x3b3d8b[connectedGamepadIndex],_0xb98d5d=_0x2aaa2b[_0x27144a(0x1d2)]['map'](_0x1087a2=>_0x1087a2[_0x27144a(0x28e)]);let _0x10c7b3=![];for(let _0x24768a=0x0;_0x24768a<_0xb98d5d[_0x27144a(0x1e0)];_0x24768a++){if(_0x24768a===PS5_BUTTON_R1||_0x24768a===PS5_BUTTON_TRIANGLE)continue;if(_0xb98d5d[_0x24768a]&&!(previousDemoButtonStates[_0x24768a]??![])){_0x10c7b3=!![];break;}}if(_0x10c7b3){stopSound(menuMusicSound),showMenuState(),requestAnimationFrame(mainLoop);return;}previousDemoButtonStates=_0xb98d5d[_0x27144a(0x206)]();}else{if(previousDemoButtonStates['length']>0x0)previousDemoButtonStates=[];}}else{if(previousDemoButtonStates[_0x27144a(0x1e0)]>0x0)previousDemoButtonStates=[];}if(typeof runSingleGameUpdate===_0x27144a(0x1fd))runSingleGameUpdate(_0x4036a9);else{console['error'](_0x27144a(0x218));if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,showMenuState(),requestAnimationFrame(mainLoop);return;}if(gameOverSequenceStartTime>0x0){const _0x32f480=Date[_0x27144a(0x221)](),_0x5d0f7c=_0x32f480-gameOverSequenceStartTime,_0x5bc62b=GAME_OVER_DURATION+RESULTS_SCREEN_DURATION;if(_0x5d0f7c>=_0x5bc62b){showMenuState(),requestAnimationFrame(mainLoop);return;}}}else{if(isShowingScoreScreen){const _0x3eac8e=Date[_0x27144a(0x221)]()-scoreScreenStartTime;if(_0x3eac8e>=SCORE_SCREEN_DURATION){startAIDemo(),requestAnimationFrame(mainLoop);return;}if(typeof renderGame===_0x27144a(0x1fd))renderGame();}else{if(isInGameState&&gameOverSequenceStartTime>0x0){if(typeof renderGame===_0x27144a(0x1fd))renderGame();const _0x5c37c5=Date[_0x27144a(0x221)](),_0x53214d=_0x5c37c5-gameOverSequenceStartTime,_0x51c400=GAME_OVER_DURATION+RESULTS_SCREEN_DURATION;if(_0x53214d>=_0x51c400){showMenuState(),requestAnimationFrame(mainLoop);return;}}else{if(isInGameState&&isPaused){if(typeof renderGame===_0x27144a(0x1fd))renderGame();}else{if(isInGameState&&isCsCompletionDelayActive){if(typeof runSingleGameUpdate===_0x27144a(0x1fd))runSingleGameUpdate(_0x4036a9);else{if(typeof renderGame==='function')renderGame();}}else{if(isInGameState&&isShowingPlayerGameOverMessage){if(typeof runSingleGameUpdate===_0x27144a(0x1fd))runSingleGameUpdate(_0x4036a9);else{if(typeof renderGame===_0x27144a(0x1fd))renderGame();}}else{if(typeof renderGame===_0x27144a(0x1fd))renderGame();}}}}}}mainLoopId=requestAnimationFrame(mainLoop);}catch(_0x1a7627){console[_0x27144a(0x241)](_0x27144a(0x240),_0x1a7627,_0x1a7627['stack']);if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,isPaused=![],stopAllGameSounds(),isGridSoundPlaying=![];try{showMenuState();}catch(_0x159b1b){console[_0x27144a(0x241)](_0x27144a(0x235),_0x159b1b),document['body'][_0x27144a(0x1fe)]=_0x27144a(0x20a);}}}function startMainLoop(){mainLoopId===null&&(gridOffsetY=0x0,mainLoop());}function initializeGame(){const _0x1313bb=_0x3c938f;try{if(typeof initializeDOMElements==='function'){if(!initializeDOMElements()){console[_0x1313bb(0x241)]('DOM\x20element\x20initialization\x20failed.');return;}}else{console[_0x1313bb(0x241)](_0x1313bb(0x25e));return;}if(typeof resizeCanvases===_0x1313bb(0x1fd))resizeCanvases();else{console[_0x1313bb(0x241)](_0x1313bb(0x272));if(gameCanvas&&starrySkyCanvas&&retroGridCanvas){const _0x31f167=window[_0x1313bb(0x212)],_0x119cca=window['innerHeight'];starrySkyCanvas['width']=_0x31f167,starrySkyCanvas[_0x1313bb(0x23a)]=_0x119cca,retroGridCanvas[_0x1313bb(0x1f4)]=_0x31f167,retroGridCanvas[_0x1313bb(0x23a)]=_0x119cca,gameCanvas[_0x1313bb(0x1f4)]=_0x31f167,gameCanvas[_0x1313bb(0x23a)]=_0x119cca;}else{console[_0x1313bb(0x241)](_0x1313bb(0x270));return;}}typeof defineNormalWaveEntrancePaths===_0x1313bb(0x1fd)?defineNormalWaveEntrancePaths():console[_0x1313bb(0x241)](_0x1313bb(0x211));typeof defineChallengingStagePaths===_0x1313bb(0x1fd)?defineChallengingStagePaths():console['error']('defineChallengingStagePaths\x20not\x20found!');if(typeof loadHighScore===_0x1313bb(0x1fd))loadHighScore();else console['warn']('loadHighScore\x20function\x20not\x20found.');window[_0x1313bb(0x233)](_0x1313bb(0x1c7),handleKeyDown),window[_0x1313bb(0x233)](_0x1313bb(0x1be),handleKeyUp),gameCanvas?(gameCanvas[_0x1313bb(0x233)](_0x1313bb(0x255),handleCanvasClick),gameCanvas[_0x1313bb(0x233)](_0x1313bb(0x251),handleCanvasMouseMove),gameCanvas[_0x1313bb(0x233)](_0x1313bb(0x26c),handleTouchStart,{'passive':![]}),gameCanvas[_0x1313bb(0x233)](_0x1313bb(0x23c),handleTouchMove,{'passive':![]}),gameCanvas[_0x1313bb(0x233)](_0x1313bb(0x279),handleTouchEnd,{'passive':![]}),gameCanvas[_0x1313bb(0x233)](_0x1313bb(0x26a),handleTouchCancel,{'passive':![]})):console['error'](_0x1313bb(0x1e5)),window[_0x1313bb(0x233)](_0x1313bb(0x256),handleGamepadConnected),window[_0x1313bb(0x233)](_0x1313bb(0x275),handleGamepadDisconnected),window[_0x1313bb(0x233)](_0x1313bb(0x247),resizeCanvases),showMenuState(),startMainLoop();}catch(_0x5c886b){console[_0x1313bb(0x241)](_0x1313bb(0x1f2),_0x5c886b,_0x5c886b['stack']),document[_0x1313bb(0x216)][_0x1313bb(0x1fe)]=_0x1313bb(0x20e)+_0x5c886b[_0x1313bb(0x1bc)]+'</p></div>',mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);}}window[_0x3c938f(0x233)](_0x3c938f(0x24f),initializeGame);