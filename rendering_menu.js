const _0xd18ba5=_0x2cef;(function(_0x3418c5,_0x1f929b){const _0x2c8977=_0x2cef,_0x21a2ab=_0x3418c5();while(!![]){try{const _0x5c8e5f=parseInt(_0x2c8977(0x158))/0x1+parseInt(_0x2c8977(0x143))/0x2*(parseInt(_0x2c8977(0xf0))/0x3)+parseInt(_0x2c8977(0x179))/0x4+-parseInt(_0x2c8977(0xf1))/0x5*(-parseInt(_0x2c8977(0x138))/0x6)+parseInt(_0x2c8977(0xf5))/0x7+parseInt(_0x2c8977(0x172))/0x8+-parseInt(_0x2c8977(0xb6))/0x9*(parseInt(_0x2c8977(0x16f))/0xa);if(_0x5c8e5f===_0x1f929b)break;else _0x21a2ab['push'](_0x21a2ab['shift']());}catch(_0x372925){_0x21a2ab['push'](_0x21a2ab['shift']());}}}(_0x5b02,0x20241));const MENU_LOGO_APPROX_HEIGHT=0x55,MENU_SUBTITLE_TEXT=_0xd18ba5(0x114),MENU_SUBTITLE_FONT=_0xd18ba5(0xc0),MENU_SUBTITLE_COLOR=_0xd18ba5(0x150),MENU_BUTTON_FONT='22px\x20\x27Arial\x20Black\x27,\x20Gadget,\x20sans-serif',MENU_BUTTON_COLOR=_0xd18ba5(0xfe),MENU_BUTTON_COLOR_HOVER=_0xd18ba5(0x102),MENU_BUTTON_WIDTH=0x12c,MENU_BUTTON_HEIGHT=0x37,MENU_LOGO_BOTTOM_TO_START_GAP=0x5,MENU_BUTTON_V_GAP=-0xf,MENU_BUTTON_SUBTITLE_V_GAP=-0x0,MENU_SCORE_FONT='20px\x20\x27Press\x20Start\x202P\x27',MENU_SCORE_COLOR=_0xd18ba5(0xfe),MENU_SCORE_LABEL_COLOR=_0xd18ba5(0x150),GAME_OVER_FONT='bold\x2018px\x20\x27Press\x20Start\x202P\x27',GAME_OVER_COLOR=_0xd18ba5(0x102),GAME_OVER_SHADOW=!![],DEMO_TEXT_LINE1_FONT='bold\x2018px\x20\x27Press\x20Start\x202P\x27',DEMO_TEXT_COLOR='rgba(0,\x20191,\x20255,\x200.9)',DEMO_TEXT_BLINK_ON_MS=0x3e8,DEMO_TEXT_BLINK_OFF_MS=0x3e8,DEMO_TEXT_BLINK_CYCLE_MS=DEMO_TEXT_BLINK_ON_MS+DEMO_TEXT_BLINK_OFF_MS,LOGO_SCALE_FACTOR=0.45,MENU_LOGO_EXTRA_Y_OFFSET=0x0,MENU_GENERAL_Y_OFFSET=0x32,INTRO_TEXT_FONT=_0xd18ba5(0xbe),INTRO_TEXT_COLOR_NORMAL=_0xd18ba5(0x102),INTRO_TEXT_COLOR_DARK_YELLOW=_0xd18ba5(0x16b),INTRO_TEXT_COLOR_CS_TEXT=INTRO_TEXT_COLOR_NORMAL,PERFECT_TEXT_COLOR=_0xd18ba5(0x150),EXTRA_LIFE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,READY_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_BONUS_SCORE_TEXT_COLOR=INTRO_TEXT_COLOR_DARK_YELLOW,CS_CLEAR_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_HITS_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_CLEAR_SCORE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,PAUSE_TEXT_FONT=INTRO_TEXT_FONT,PAUSE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,PAUSE_TEXT_SHADOW=!![],RESULTS_SCREEN_DURATION=0x4e20,PLAYER_GAME_OVER_MESSAGE_DURATION=0x1388,SCORE_SCREEN_TEXT_FONT=INTRO_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_TOP=INTRO_TEXT_COLOR_NORMAL,SCORE_SCREEN_TEXT_COLOR_BONUS=INTRO_TEXT_COLOR_DARK_YELLOW,SCORE_SCREEN_LINE_V_SPACING=0x28,SCORE_SCREEN_ICON_TEXT_H_SPACING=0xf,SCORE_SCREEN_VERTICAL_OFFSET=0x4b,SCORE_SCREEN_PLATINI_TEXT=_0xd18ba5(0x13d),RESULTS_HEADER_COLOR=_0xd18ba5(0x150),RESULTS_VALUE_COLOR_YELLOW=INTRO_TEXT_COLOR_DARK_YELLOW,RESULTS_LABEL_COLOR=_0xd18ba5(0xfe),RESULTS_VALUE_COLOR_CYAN=INTRO_TEXT_COLOR_NORMAL,RESULTS_LINE_V_SPACING_SINGLE=0x23,RESULTS_LINE_V_SPACING_DOUBLE=0x5a,RESULTS_START_Y=0x9b+0x14+0x14+0x14+0x14,RESULTS_FOOTER_FONT=MENU_SUBTITLE_FONT,RESULTS_FOOTER_COLOR=MENU_SUBTITLE_COLOR,RESULTS_PLATINI_TEXT=_0xd18ba5(0x13b),CS_MESSAGE_VERTICAL_OFFSET=0x1e;function getSubtitleApproxHeight(_0x309ce0){const _0x3ce808=_0xd18ba5,_0xdc2604=_0x309ce0[_0x3ce808(0x161)](/(\d+)px/);return _0xdc2604?.[0x1]?parseInt(_0xdc2604[0x1],0xa):0x19;}function formatMillisecondsToMMSS(_0x3833a8){const _0x391ada=_0xd18ba5;if(_0x3833a8<=0x0||typeof _0x3833a8!=='number'||!isFinite(_0x3833a8))return'00:00';const _0x3840c1=Math[_0x391ada(0x14d)](_0x3833a8/0x3e8),_0x6c4711=Math[_0x391ada(0x14d)](_0x3840c1/0x3c),_0x2439d1=_0x3840c1%0x3c,_0x42cc9f=String(_0x6c4711)[_0x391ada(0x112)](0x2,'0'),_0x3f7bc2=String(_0x2439d1)[_0x391ada(0x112)](0x2,'0');return _0x42cc9f+':'+_0x3f7bc2;}function getMenuButtonRect(_0x5ac05b){const _0x3f3a94=_0xd18ba5;if(!gameCtx||!gameCanvas||gameCanvas[_0x3f3a94(0x157)]===0x0||gameCanvas[_0x3f3a94(0x127)]===0x0)return null;const _0x5db221=gameCanvas[_0x3f3a94(0x157)],_0x6ecb79=gameCanvas[_0x3f3a94(0x127)],_0x332b1f=_0x5db221/0x2-MENU_BUTTON_WIDTH/0x2-0x1;let _0x1669ea=MENU_LOGO_APPROX_HEIGHT;typeof logoImage!==_0x3f3a94(0xd8)&&logoImage['complete']&&logoImage['naturalHeight']!==0x0&&(_0x1669ea=logoImage['naturalHeight']*LOGO_SCALE_FACTOR);const _0x395333=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x4e5dfe=_0x1669ea+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x395333;let _0x227c92=(_0x6ecb79-_0x4e5dfe)/0x2-0x46;_0x227c92+=MENU_GENERAL_Y_OFFSET;const _0x890206=_0x227c92+_0x1669ea+MENU_LOGO_BOTTOM_TO_START_GAP,_0xf87f1a=_0x890206+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP;if(_0x5ac05b===0x0)return{'x':_0x332b1f,'y':Math[_0x3f3a94(0xeb)](_0x890206),'width':MENU_BUTTON_WIDTH,'height':MENU_BUTTON_HEIGHT};else{if(_0x5ac05b===0x1)return{'x':_0x332b1f,'y':Math[_0x3f3a94(0xeb)](_0xf87f1a),'width':MENU_BUTTON_WIDTH,'height':MENU_BUTTON_HEIGHT};}return null;}function pollControllerForMenu(){const _0x16410f=_0xd18ba5;try{if(connectedGamepadIndex===null&&connectedGamepadIndexP2===null){joystickMovedVerticallyLastFrame=![];if(previousButtonStates[_0x16410f(0xc1)]>0x0)previousButtonStates=[];if(previousGameButtonStates[_0x16410f(0xc1)]>0x0)previousGameButtonStates=[];if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];return;}let _0x827ef8=connectedGamepadIndex!==null?connectedGamepadIndex:connectedGamepadIndexP2;if(_0x827ef8===null)return;const _0x474f2a=navigator[_0x16410f(0xf7)]();if(!_0x474f2a?.[_0x827ef8])return;const _0x3d5610=_0x474f2a[_0x827ef8],_0x2448af=_0x3d5610['buttons']['map'](_0x56d50e=>_0x56d50e[_0x16410f(0xef)]),_0x9194bb=_0x2448af,_0xac2b7b=_0x2448af;let _0x198265=![];const _0xb1221b=Date['now']();let _0x1d8f9c=![];(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0)&&(_0x1d8f9c=!![]);if(_0x1d8f9c){connectedGamepadIndex!==null&&(previousButtonStates=_0x9194bb[_0x16410f(0x11f)](),previousGameButtonStates=_0xac2b7b[_0x16410f(0x11f)]());if(connectedGamepadIndexP2!==null){const _0x3f193e=navigator['getGamepads']();_0x3f193e?.[connectedGamepadIndexP2]&&(previousGameButtonStatesP2=_0x3f193e[connectedGamepadIndexP2]['buttons'][_0x16410f(0xe8)](_0x65575a=>_0x65575a['pressed']));}return;}if(isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){const _0x6a8878=_0xac2b7b[PS5_BUTTON_TRIANGLE],_0x2b829a=previousGameButtonStates[PS5_BUTTON_TRIANGLE]??![];_0x6a8878&&!_0x2b829a&&(stopGameAndShowMenu(),_0x198265=!![]);}if(!_0x198265&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){const _0x5c8b91=_0xac2b7b[PS5_BUTTON_R1],_0x5f1e2b=previousGameButtonStates[PS5_BUTTON_R1]??![];if(_0x5c8b91&&!_0x5f1e2b){if(typeof togglePause==='function')togglePause();_0x198265=!![];}}if(!_0x198265){const _0x2097d7=isShowingScoreScreen||isShowingResultsScreen;if(_0x2097d7){let _0x4e2b21=![];for(let _0x511cda=0x0;_0x511cda<_0x9194bb[_0x16410f(0xc1)];_0x511cda++){if(_0x511cda===PS5_BUTTON_R1||_0x511cda===PS5_BUTTON_TRIANGLE)continue;const _0x5771b5=previousButtonStates[_0x511cda]??![];if(_0x9194bb[_0x511cda]&&!_0x5771b5){_0x4e2b21=!![];break;}}if(_0x4e2b21){if(typeof showMenuState===_0x16410f(0x13f))showMenuState();_0x198265=!![];}}else{if(!isInGameState&&!_0x198265){const _0x57f6dd=_0x9194bb[PS5_BUTTON_CROSS],_0x1b4fd0=previousButtonStates[PS5_BUTTON_CROSS]??![],_0x30553a=_0x9194bb[PS5_BUTTON_CIRCLE],_0x275e69=previousButtonStates[PS5_BUTTON_CIRCLE]??![],_0x1e91ec=_0x3d5610['axes'][PS5_LEFT_STICK_Y]??0x0,_0x24ca14=_0x9194bb[PS5_DPAD_UP],_0x255be3=_0x9194bb[PS5_DPAD_DOWN];let _0x1c3206=0x0;if(_0x1e91ec<-AXIS_DEAD_ZONE_MENU||_0x24ca14)_0x1c3206=-0x1;else{if(_0x1e91ec>AXIS_DEAD_ZONE_MENU||_0x255be3)_0x1c3206=0x1;}let _0x4f6955=_0x1c3206!==0x0;if(_0x4f6955&&!joystickMovedVerticallyLastFrame){let _0x3c7eb6=selectedButtonIndex;const _0x19eb5d=0x2;_0x3c7eb6===-0x1?_0x3c7eb6=_0x1c3206===0x1?0x0:_0x19eb5d-0x1:_0x3c7eb6+=_0x1c3206;if(_0x3c7eb6<0x0)_0x3c7eb6=_0x19eb5d-0x1;if(_0x3c7eb6>=_0x19eb5d)_0x3c7eb6=0x0;_0x3c7eb6!==selectedButtonIndex&&(selectedButtonIndex=_0x3c7eb6,startAutoDemoTimer());}joystickMovedVerticallyLastFrame=_0x4f6955;if(_0x57f6dd&&!_0x1b4fd0){stopAutoDemoTimer();if(isFiringModeSelectMode)selectedButtonIndex===0x0?selectedFiringMode=_0x16410f(0x14a):selectedFiringMode='single',baseStartGame(!![]),_0x198265=!![];else{if(isPlayerSelectMode)selectedButtonIndex===0x0?startGame1P():startGame2P(),_0x198265=!![];else{if(selectedButtonIndex===0x0)isPlayerSelectMode=!![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x198265=!![];else selectedButtonIndex===0x1&&(exitGame(),_0x198265=!![]);}}}if(!_0x198265&&_0x30553a&&!_0x275e69){stopAutoDemoTimer();if(isFiringModeSelectMode)isFiringModeSelectMode=![],isPlayerSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x198265=!![];else isPlayerSelectMode?(isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x198265=!![]):(triggerFullscreen(),playSound(menuMusicSound,!![]),_0x198265=!![]);}}}}connectedGamepadIndex!==null&&(previousButtonStates=_0x9194bb[_0x16410f(0x11f)](),previousGameButtonStates=_0xac2b7b[_0x16410f(0x11f)]());if(connectedGamepadIndexP2!==null){const _0x5dcee6=navigator[_0x16410f(0xf7)]();_0x5dcee6?.[connectedGamepadIndexP2]&&(previousGameButtonStatesP2=_0x5dcee6[connectedGamepadIndexP2]['buttons'][_0x16410f(0xe8)](_0x1226d6=>_0x1226d6[_0x16410f(0xef)]));}}catch(_0x181c3c){console[_0x16410f(0xc8)]('Error\x20in\x20pollControllerForMenu:',_0x181c3c),previousButtonStates=[],previousGameButtonStates=[],previousGameButtonStatesP2=[],selectedButtonIndex=-0x1,joystickMovedVerticallyLastFrame=![];}}function startAutoDemoTimer(){const _0x3c1a5e=_0xd18ba5;try{stopAutoDemoTimer(),autoStartTimerId=setTimeout(()=>{!isInGameState&&!isShowingScoreScreen?(isPlayerSelectMode=![],isFiringModeSelectMode=![],showScoreScreen()):autoStartTimerId=null;},MENU_INACTIVITY_TIMEOUT);}catch(_0x590e36){console[_0x3c1a5e(0xc8)](_0x3c1a5e(0x16e),_0x590e36);}}function stopAutoDemoTimer(){const _0x15dca9=_0xd18ba5;try{autoStartTimerId&&(clearTimeout(autoStartTimerId),autoStartTimerId=null);}catch(_0x5cc254){console[_0x15dca9(0xc8)](_0x15dca9(0xf4),_0x5cc254);}}function showScoreScreen(){const _0x38e168=_0xd18ba5;if(isInGameState||isShowingScoreScreen)return;stopAutoDemoTimer(),isShowingScoreScreen=!![],isPlayerSelectMode=![],isFiringModeSelectMode=![],scoreScreenStartTime=Date[_0x38e168(0x109)](),selectedButtonIndex=-0x1;}function showMenuState(){const _0xd8cfa0=_0xd18ba5;try{wasLastGameAIDemo&&(highScore=0x4e20),wasLastGameAIDemo=![],isInGameState=![],isShowingScoreScreen=![],scoreScreenStartTime=0x0,isManualControl=![],isShowingDemoText=![],isPaused=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedFiringMode=_0xd8cfa0(0x14a),isTwoPlayerMode=![],currentPlayer=0x1,showCsHitsMessage=![],csHitsMessageStartTime=0x0,showPerfectMessage=![],perfectMessageStartTime=0x0,showCsBonusScoreMessage=![],csBonusScoreMessageStartTime=0x0,showCSClearMessage=![],csClearMessageStartTime=0x0,showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,showReadyMessage=![],readyMessageStartTime=0x0,readyForNextWave=![],readyForNextWaveReset=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],stopAllGameSounds(),stopSound(resultsMusicSound),stopSound(startSound),stopSound(levelUpSound),stopSound(entranceSound),isGridSoundPlaying=![],playerLives=0x3,score=0x0,level=0x1,player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,scoreEarnedThisCS=0x0,enemies=[],bullets=[],enemyBullets=[],explosions=[],isShowingIntro=![],introStep=0x0,isChallengingStage=![],challengingStageEnemiesHit=0x0,currentGridOffsetX=0x0,gridMoveDirection=0x1,currentWaveDefinition=null,isEntrancePhaseActive=![],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,typeof enemySpawnTimeouts!=='undefined'&&Array[_0xd8cfa0(0x120)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0xd8cfa0(0x139)](clearTimeout),enemySpawnTimeouts=[],lastEnemyDetachTime=0x0,selectedButtonIndex=-0x1,joystickMovedVerticallyLastFrame=![],previousButtonStates=[],previousGameButtonStates=[],previousDemoButtonStates=[],previousGameButtonStatesP2=[],isShowingResultsScreen=![],gameOverSequenceStartTime=0x0,gameStartTime=0x0,forceCenterShipNextReset=![],player1CompletedLevel=-0x1,p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isTouching=![],touchCurrentX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],ship&&gameCanvas&&gameCanvas[_0xd8cfa0(0x157)]>0x0&&gameCanvas[_0xd8cfa0(0x127)]>0x0&&(ship['x']=Math[_0xd8cfa0(0xeb)](gameCanvas[_0xd8cfa0(0x157)]/0x2-SHIP_WIDTH/0x2),ship[_0xd8cfa0(0xca)]=ship['x'],ship['y']=gameCanvas[_0xd8cfa0(0x127)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN),clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0),playSound(menuMusicSound,!![]),startAutoDemoTimer();}catch(_0x7f15a7){console[_0xd8cfa0(0xc8)]('Error\x20in\x20showMenuState:',_0x7f15a7),wasLastGameAIDemo=![],isInGameState=![],isShowingScoreScreen=![],isPaused=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],isTwoPlayerMode=![],currentPlayer=0x1,isShowingPlayerGameOverMessage=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isTouching=![],touchCurrentX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],clearTimeout(mouseIdleTimerId),mouseIdleTimerId=null;if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0xd8cfa0(0x118)),document['body']['innerHTML']=_0xd8cfa0(0x178);}}function startAIDemo(){const _0x183f12=_0xd18ba5;if(isInGameState)return;stopSound(menuMusicSound),isShowingScoreScreen=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedFiringMode=_0x183f12(0x14a),isTwoPlayerMode=![],isManualControl=![],isShowingDemoText=!![],wasLastGameAIDemo=!![],baseStartGame(![]),gameJustStarted=!![];}function startGame1P(){if(isInGameState)return;isTwoPlayerMode=![],isPlayerSelectMode=![],isFiringModeSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer();}function startGame2P(){if(isInGameState)return;isTwoPlayerMode=!![],isPlayerSelectMode=![],isFiringModeSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer();}function baseStartGame(_0x2d87f2){const _0x3ddfe8=_0xd18ba5;try{if(!gameCanvas||!gameCtx){console[_0x3ddfe8(0xc8)](_0x3ddfe8(0xd2)),showMenuState();return;}stopSound(menuMusicSound),stopAutoDemoTimer(),isInGameState=!![],isShowingScoreScreen=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],isManualControl=_0x2d87f2,isShowingDemoText=!_0x2d87f2,isPaused=![],previousButtonStates=[],previousGameButtonStates=[],previousDemoButtonStates=[],previousGameButtonStatesP2=[],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];_0x2d87f2&&(wasLastGameAIDemo=![]);clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);if(typeof resetGame===_0x3ddfe8(0x13f))resetGame();else{console[_0x3ddfe8(0xc8)]('FATAL:\x20resetGame\x20function\x20is\x20not\x20defined!\x20Cannot\x20start\x20game\x20properly.'),alert(_0x3ddfe8(0x142)),showMenuState();return;}_0x2d87f2&&playSound(coinSound),gameStartTime=Date[_0x3ddfe8(0x109)](),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],selectedButtonIndex=-0x1,ship&&gameCanvas&&gameCanvas[_0x3ddfe8(0x157)]>0x0&&gameCanvas[_0x3ddfe8(0x127)]>0x0&&(ship['x']=Math['round'](gameCanvas[_0x3ddfe8(0x157)]/0x2-SHIP_WIDTH/0x2),ship['targetX']=ship['x'],ship['y']=gameCanvas[_0x3ddfe8(0x127)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN),mainLoopId===null&&startMainLoop();}catch(_0x16d5c4){console[_0x3ddfe8(0xc8)](_0x3ddfe8(0xfa),_0x16d5c4),wasLastGameAIDemo=![],clearTimeout(mouseIdleTimerId),mouseIdleTimerId=null,alert('Critical\x20error\x20starting\x20game!'),showMenuState();}}function stopGameAndShowMenu(){isPaused=![];if(isManualControl)saveHighScore();showMenuState();}function exitGame(){const _0x3acbe4=_0xd18ba5;isPaused=![],stopAutoDemoTimer(),saveHighScore(),isInGameState=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],showMenuState();try{window[_0x3acbe4(0x146)](),setTimeout(()=>{if(!isInGameState)showMenuState();},0xc8);}catch(_0x2c1d00){console[_0x3acbe4(0xc8)](_0x3acbe4(0x16a),_0x2c1d00),showMenuState();}}function triggerGameOver(){triggerFinalGameOverSequence();}function startAutoDemoTimer(){const _0x501fa7=_0xd18ba5;try{stopAutoDemoTimer(),autoStartTimerId=setTimeout(()=>{!isInGameState&&!isShowingScoreScreen?(isPlayerSelectMode=![],isFiringModeSelectMode=![],showScoreScreen()):autoStartTimerId=null;},MENU_INACTIVITY_TIMEOUT);}catch(_0x5b1e0b){console[_0x501fa7(0xc8)](_0x501fa7(0x16e),_0x5b1e0b);}}function stopAutoDemoTimer(){const _0x126eea=_0xd18ba5;try{autoStartTimerId&&(clearTimeout(autoStartTimerId),autoStartTimerId=null);}catch(_0x1ddb6f){console[_0x126eea(0xc8)](_0x126eea(0xf4),_0x1ddb6f);}}function showScoreScreen(){const _0x44604e=_0xd18ba5;if(isInGameState||isShowingScoreScreen)return;stopAutoDemoTimer(),isShowingScoreScreen=!![],isPlayerSelectMode=![],isFiringModeSelectMode=![],scoreScreenStartTime=Date[_0x44604e(0x109)](),selectedButtonIndex=-0x1,clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);}function processMenuInteraction(_0x45442b,_0x52a95e){const _0x5ad6e0=_0xd18ba5;if(isShowingScoreScreen){if(typeof showMenuState===_0x5ad6e0(0x13f))showMenuState();}else{const _0xbb61ed=getMenuButtonRect(0x0),_0x4cf4f7=getMenuButtonRect(0x1);let _0xff7d7f=_0xbb61ed&&checkCollision({'x':_0x45442b,'y':_0x52a95e,'width':0x1,'height':0x1},_0xbb61ed),_0x5e7488=_0x4cf4f7&&checkCollision({'x':_0x45442b,'y':_0x52a95e,'width':0x1,'height':0x1},_0x4cf4f7);if(isFiringModeSelectMode){if(_0xff7d7f)selectedFiringMode=_0x5ad6e0(0x14a),baseStartGame(!![]),stopAutoDemoTimer();else _0x5e7488?(selectedFiringMode='single',baseStartGame(!![]),stopAutoDemoTimer()):(isFiringModeSelectMode=![],isPlayerSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer());}else{if(isPlayerSelectMode){if(_0xff7d7f)startGame1P(),stopAutoDemoTimer();else _0x5e7488?(startGame2P(),stopAutoDemoTimer()):(isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer());}else{if(_0xff7d7f)isPlayerSelectMode=!![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer();else{if(_0x5e7488){if(typeof exitGame===_0x5ad6e0(0x13f))exitGame();stopAutoDemoTimer();}else triggerFullscreen(),playSound(menuMusicSound,!![]),stopAutoDemoTimer();}}}}}function handleCanvasClick(_0x386e28){const _0x40ffa8=_0xd18ba5;if(!gameCanvas)return;const _0x342505=gameCanvas['getBoundingClientRect'](),_0xce61df=gameCanvas[_0x40ffa8(0x157)]/_0x342505[_0x40ffa8(0x157)],_0x17113b=gameCanvas[_0x40ffa8(0x127)]/_0x342505[_0x40ffa8(0x127)],_0x55dd32=(_0x386e28[_0x40ffa8(0xe6)]-_0x342505[_0x40ffa8(0xcc)])*_0xce61df,_0x11eed1=(_0x386e28[_0x40ffa8(0x15f)]-_0x342505['top'])*_0x17113b;let _0x42f97a=![];(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0)&&(_0x42f97a=!![]);if(_0x42f97a)return;if(isInGameState){if(isPaused){if(typeof togglePause===_0x40ffa8(0x13f))togglePause();return;}if(!isManualControl){if(typeof stopGameAndShowMenu===_0x40ffa8(0x13f))stopGameAndShowMenu();}}else processMenuInteraction(_0x55dd32,_0x11eed1);}function createExplosion(_0x148586,_0x561970){const _0x4828f9=_0xd18ba5;try{playSound(explosionSound);let _0x5795e1=[];for(let _0x16d1b2=0x0;_0x16d1b2<EXPLOSION_PARTICLE_COUNT;_0x16d1b2++){const _0x7c4ab4=Math[_0x4828f9(0xdf)]()*Math['PI']*0x2,_0x5315c3=Math[_0x4828f9(0xdf)]()*(EXPLOSION_MAX_SPEED-EXPLOSION_MIN_SPEED)+EXPLOSION_MIN_SPEED;_0x5795e1['push']({'x':_0x148586,'y':_0x561970,'vx':Math[_0x4828f9(0x164)](_0x7c4ab4)*_0x5315c3,'vy':Math[_0x4828f9(0xc6)](_0x7c4ab4)*_0x5315c3,'radius':EXPLOSION_PARTICLE_RADIUS,'alpha':0x1});}explosions['push']({'creationTime':Date[_0x4828f9(0x109)](),'duration':EXPLOSION_DURATION,'particles':_0x5795e1});}catch(_0xa929fc){console[_0x4828f9(0xc8)](_0x4828f9(0x11b),_0xa929fc);}}function renderExplosions(){const _0x314665=_0xd18ba5;try{if(!gameCtx)return;gameCtx['save'](),gameCtx['globalCompositeOperation']=_0x314665(0x16d),explosions['forEach'](_0x4d8934=>{const _0x26a7d1=_0x314665;_0x4d8934[_0x26a7d1(0xd9)][_0x26a7d1(0x139)](_0x2b3b33=>{const _0x2d3ae9=_0x26a7d1,_0x11d069=_0x2b3b33[_0x2d3ae9(0x10d)]*EXPLOSION_MAX_OPACITY;_0x11d069>0.01&&(gameCtx['beginPath'](),gameCtx[_0x2d3ae9(0x17a)](Math['round'](_0x2b3b33['x']),Math[_0x2d3ae9(0xeb)](_0x2b3b33['y']),_0x2b3b33[_0x2d3ae9(0x169)],0x0,Math['PI']*0x2),gameCtx[_0x2d3ae9(0x101)]='rgba(255,\x20200,\x2080,\x20'+_0x11d069[_0x2d3ae9(0x152)](0x3)+')',gameCtx['fill']());});}),gameCtx[_0x314665(0xfd)]();}catch(_0xc24dd3){console[_0x314665(0xc8)](_0x314665(0x151),_0xc24dd3);}}function drawCanvasText(_0x5199a5,_0x4ca878,_0x5b9ce5,_0x52150f,_0x3d73e4,_0x567960=_0xd18ba5(0xe3),_0x8421b=_0xd18ba5(0x15e),_0x58c41c=![]){const _0x3091d6=_0xd18ba5;if(!gameCtx)return;gameCtx[_0x3091d6(0x149)](),gameCtx[_0x3091d6(0x16c)]=_0x52150f,gameCtx[_0x3091d6(0x101)]=_0x3d73e4,gameCtx['textAlign']=_0x567960,gameCtx['textBaseline']=_0x8421b,_0x58c41c&&(gameCtx[_0x3091d6(0x14f)]=_0x3091d6(0x106),gameCtx['shadowBlur']=0x8,gameCtx[_0x3091d6(0xff)]=0x3,gameCtx[_0x3091d6(0x147)]=0x3),gameCtx['fillText'](_0x5199a5,_0x4ca878,_0x5b9ce5),gameCtx[_0x3091d6(0xfd)]();}function drawCanvasButton(_0x337c30,_0x59876a,_0x3de5af){const _0x1030c0=_0xd18ba5;if(!gameCtx)return;const _0xb12acf=getMenuButtonRect(_0x59876a);if(!_0xb12acf)return;gameCtx['save'](),drawCanvasText(_0x337c30,_0xb12acf['x']+_0xb12acf[_0x1030c0(0x157)]/0x2,_0xb12acf['y']+_0xb12acf[_0x1030c0(0x127)]/0x2,MENU_BUTTON_FONT,_0x3de5af?MENU_BUTTON_COLOR_HOVER:MENU_BUTTON_COLOR,_0x1030c0(0xe3),_0x1030c0(0x15e)),gameCtx[_0x1030c0(0xfd)]();}function renderFloatingScores(){const _0x32711a=_0xd18ba5;try{if(!gameCtx||!floatingScores||floatingScores['length']===0x0)return;const _0x360a7d=Date[_0x32711a(0x109)]();gameCtx['save'](),gameCtx['globalAlpha']=FLOATING_SCORE_OPACITY,floatingScores[_0x32711a(0x139)](_0x123312=>{const _0x213fab=_0x32711a;_0x360a7d>=_0x123312['displayStartTime']&&drawCanvasText(_0x123312[_0x213fab(0xe5)],_0x123312['x'],_0x123312['y'],FLOATING_SCORE_FONT,_0x123312['color'],_0x213fab(0xe3),_0x213fab(0x15e),![]);}),gameCtx[_0x32711a(0x176)]=0x1,gameCtx['restore']();}catch(_0x4cb10c){console['error'](_0x32711a(0x125),_0x4cb10c);}}function renderHitSparks(){const _0x12b6aa=_0xd18ba5;if(!gameCtx||!hitSparks||hitSparks[_0x12b6aa(0xc1)]===0x0)return;gameCtx['save'](),gameCtx['globalCompositeOperation']=_0x12b6aa(0x16d),hitSparks[_0x12b6aa(0x139)](_0x225339=>{const _0x4394db=_0x12b6aa;if(_0x225339&&_0x225339[_0x4394db(0x10d)]>0.01){gameCtx[_0x4394db(0x101)]=_0x225339[_0x4394db(0xe7)],gameCtx['globalAlpha']=_0x225339[_0x4394db(0x10d)],gameCtx['beginPath']();const _0x24981a=_0x225339['size']*Math[_0x4394db(0x10f)](_0x225339[_0x4394db(0x10d)]);gameCtx[_0x4394db(0x17a)](Math[_0x4394db(0xeb)](_0x225339['x']),Math[_0x4394db(0xeb)](_0x225339['y']),Math[_0x4394db(0xd5)](0.5,_0x24981a/0x2),0x0,Math['PI']*0x2),gameCtx[_0x4394db(0x177)]();}}),gameCtx[_0x12b6aa(0x176)]=0x1,gameCtx[_0x12b6aa(0xfd)]();}function _0x2cef(_0x656d71,_0xeeb64b){const _0x5b02e1=_0x5b02();return _0x2cef=function(_0x2cef05,_0x3c96c3){_0x2cef05=_0x2cef05-0xb6;let _0x408391=_0x5b02e1[_0x2cef05];return _0x408391;},_0x2cef(_0x656d71,_0xeeb64b);}function renderGame(){const _0xca7632=_0xd18ba5;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0xca7632(0x113)](0x0,0x0,gameCanvas[_0xca7632(0x157)],gameCanvas[_0xca7632(0x127)]);const _0x278849=Date[_0xca7632(0x109)]();gameCtx[_0xca7632(0x149)]();const _0x9f6c03=_0xca7632(0x137),_0x52c76c='red',_0xb061e6=_0xca7632(0xfe);gameCtx['font']=_0x9f6c03,gameCtx[_0xca7632(0xbd)]='top',ui2upRect=null;const _0x4f2789=(_0x3d5805,_0x48064b,_0x44612d,_0xf9858b,_0x268cf3=![])=>{const _0x5009c6=_0xca7632;let _0xc5dea8=!![],_0x47a384=UI_1UP_BLINK_ON_MS*1.5,_0x261f9c=UI_1UP_BLINK_CYCLE_MS*1.5,_0x4d5e59=_0x52c76c;if(_0x3d5805===_0x5009c6(0xdb))_0x47a384=DEMO_TEXT_BLINK_ON_MS*0.7,_0x261f9c=DEMO_TEXT_BLINK_CYCLE_MS;else{if(_0x3d5805===_0x5009c6(0xd1)){_0x47a384=UI_1UP_BLINK_ON_MS*1.5,_0x261f9c=UI_1UP_BLINK_CYCLE_MS*1.5;if(isInGameState&&!isManualControl)_0x47a384=DEMO_TEXT_BLINK_ON_MS*0.7,_0x261f9c=DEMO_TEXT_BLINK_CYCLE_MS;else isInGameState&&isTwoPlayerMode&&currentPlayer===0x2&&(_0x47a384=UI_1UP_BLINK_ON_MS*1.5,_0x261f9c=UI_1UP_BLINK_CYCLE_MS*1.5);}}_0x268cf3&&((isPaused||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||!(_0x278849%_0x261f9c<_0x47a384))&&(_0xc5dea8=![]));gameCtx['textAlign']=_0x44612d;const _0x39c442=gameCtx['measureText'](_0x3d5805),_0x1fa7f3=_0x39c442[_0x5009c6(0x157)],_0x3193da=0x14,_0xfc2e07=MARGIN_TOP;_0xc5dea8&&(gameCtx[_0x5009c6(0x101)]=_0x4d5e59,gameCtx[_0x5009c6(0x13a)](_0x3d5805,_0xf9858b,_0xfc2e07));const _0x1b4896=_0x48064b['toString']();let _0x56b86d;if(_0x44612d===_0x5009c6(0xcc))_0x56b86d=_0xf9858b+_0x1fa7f3/0x2;else{if(_0x44612d===_0x5009c6(0xd0))_0x56b86d=_0xf9858b-_0x1fa7f3/0x2;else _0x56b86d=_0xf9858b;}gameCtx['textAlign']=_0x5009c6(0xe3);const _0x117035=gameCtx['measureText'](_0x1b4896),_0x277e93=_0x117035['width'],_0x462abc=0x14,_0x218177=_0xfc2e07+SCORE_OFFSET_Y+0x5;gameCtx[_0x5009c6(0x101)]=_0xb061e6,gameCtx['fillText'](_0x1b4896,_0x56b86d,_0x218177);let _0x5be6c6,_0x487867,_0x4630d1,_0x2fc7a3;_0x4630d1=_0xfc2e07,_0x2fc7a3=_0x218177+_0x462abc;if(_0x44612d==='left')_0x5be6c6=_0xf9858b,_0x487867=Math[_0x5009c6(0xd5)](_0xf9858b+_0x1fa7f3,_0x56b86d+_0x277e93/0x2);else _0x44612d==='right'?(_0x487867=_0xf9858b,_0x5be6c6=Math['min'](_0xf9858b-_0x1fa7f3,_0x56b86d-_0x277e93/0x2)):(_0x5be6c6=Math[_0x5009c6(0x12f)](_0xf9858b-_0x1fa7f3/0x2,_0x56b86d-_0x277e93/0x2),_0x487867=Math[_0x5009c6(0xd5)](_0xf9858b+_0x1fa7f3/0x2,_0x56b86d+_0x277e93/0x2));const _0x8b4474=_0x487867-_0x5be6c6,_0x44c49d=_0x2fc7a3-_0x4630d1;if(_0x3d5805===_0x5009c6(0xcb)){const _0x1bf97d=0x14,_0x3abc55=0xa;ui2upRect={'x':_0x5be6c6-_0x1bf97d,'y':_0x4630d1-_0x3abc55,'width':_0x8b4474+_0x1bf97d*0x2,'height':_0x44c49d+_0x3abc55*0x2};}};let _0x45cbc8,_0x53cefc,_0xab01bb,_0x27a579,_0x37a8c0=![],_0x502f8=![],_0x3e0564=![];if(isShowingResultsScreen)_0x45cbc8=player1Score||0x0,_0x53cefc=player2Score||0x0,_0xab01bb=highScore||0x4e20,_0xab01bb=Math[_0xca7632(0xd5)](_0xab01bb,_0x45cbc8,_0x53cefc),_0x27a579=wasLastGameAIDemo?_0xca7632(0xdb):_0xca7632(0xcd),_0x3e0564=![],_0x37a8c0=![],_0x502f8=![];else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage)_0x45cbc8=player1Score||0x0,_0x53cefc=player2Score||0x0,_0xab01bb=highScore||0x4e20,_0xab01bb=Math['max'](_0xab01bb,_0x45cbc8,_0x53cefc),_0x27a579=wasLastGameAIDemo?_0xca7632(0xdb):'1UP',_0x3e0564=![],_0x37a8c0=![],_0x502f8=![];else{if(isShowingPlayerGameOverMessage)_0x45cbc8=player1Score||0x0,_0x53cefc=player2Score||0x0,_0xab01bb=highScore||0x4e20,_0xab01bb=Math[_0xca7632(0xd5)](_0xab01bb,_0x45cbc8,_0x53cefc),_0x27a579=_0xca7632(0xcd),_0x3e0564=![],_0x37a8c0=![],_0x502f8=![];else{if(!isInGameState)_0x45cbc8=player1Score||0x0,_0x53cefc=player2Score||0x0,_0xab01bb=highScore||0x4e20,_0xab01bb=Math[_0xca7632(0xd5)](_0xab01bb,_0x45cbc8,_0x53cefc),_0x27a579=_0xca7632(0xcd),_0x3e0564=![],_0x37a8c0=![],_0x502f8=![];else{_0xab01bb=highScore||0x0;if(!isManualControl)_0x45cbc8=score,_0x53cefc=0x0,_0xab01bb=Math['max'](_0xab01bb,score),_0x27a579=_0xca7632(0xdb),_0x37a8c0=!isShowingIntro&&!isPaused&&!isShipCaptured,_0x3e0564=!isPaused&&!isShowingIntro&&score>0x0&&_0xab01bb>0x0&&score>=_0xab01bb;else isTwoPlayerMode?(_0x45cbc8=currentPlayer===0x1?score:player1Score,_0x53cefc=currentPlayer===0x2?score:player2Score,_0xab01bb=Math['max'](_0xab01bb,player1Score,player2Score,score),_0x27a579=_0xca7632(0xcd),_0x37a8c0=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured,_0x502f8=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured,_0x3e0564=!isPaused&&!isShowingIntro&&score>0x0&&_0xab01bb>0x0&&score>=_0xab01bb):(_0x45cbc8=score,_0x53cefc=player2Score||0x0,_0xab01bb=Math[_0xca7632(0xd5)](_0xab01bb,score),_0x27a579='1UP',_0x37a8c0=!isShowingIntro&&!isPaused&&playerLives>0x0&&!isShipCaptured,_0x3e0564=!isPaused&&!isShowingIntro&&score>0x0&&_0xab01bb>0x0&&score>=_0xab01bb);}}}}let _0x54b106=![];if(_0x3e0564){if(!isManualControl)_0x54b106=_0x37a8c0&&player1TriggeredHighScoreSound;else isTwoPlayerMode?currentPlayer===0x1?_0x54b106=_0x37a8c0&&player1TriggeredHighScoreSound:_0x54b106=_0x502f8&&player2TriggeredHighScoreSound:_0x54b106=_0x37a8c0&&player1TriggeredHighScoreSound;}typeof MARGIN_SIDE!==_0xca7632(0xd8)&&typeof MARGIN_TOP!==_0xca7632(0xd8)&&typeof SCORE_OFFSET_Y!==_0xca7632(0xd8)&&(_0x4f2789(_0x27a579,_0x45cbc8,_0xca7632(0xcc),MARGIN_SIDE,_0x37a8c0),_0x4f2789(_0xca7632(0xd1),_0xab01bb,_0xca7632(0xe3),gameCanvas[_0xca7632(0x157)]/0x2,_0x54b106),_0x4f2789(_0xca7632(0xcb),_0x53cefc,_0xca7632(0xd0),gameCanvas[_0xca7632(0x157)]-MARGIN_SIDE,_0x502f8));if(typeof shipImage!==_0xca7632(0xd8)&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0xca7632(0xd8)&&typeof LIFE_ICON_SIZE!==_0xca7632(0xd8)&&typeof LIFE_ICON_MARGIN_LEFT!==_0xca7632(0xd8)&&typeof LIFE_ICON_SPACING!=='undefined'){if(shipImage[_0xca7632(0xf9)]&&shipImage[_0xca7632(0x14c)]!==0x0){const _0x1eb6d5=gameCanvas[_0xca7632(0x127)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x2aa1d0=0x0;if(isShowingResultsScreen||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage)_0x2aa1d0=0x2;else{if(!isInGameState||isShowingScoreScreen)_0x2aa1d0=0x2;else isInGameState&&playerLives>0x0?_0x2aa1d0=Math['max'](0x0,playerLives-0x1):_0x2aa1d0=0x0;}const _0x4be8e5=0x5;for(let _0x4180d5=0x0;_0x4180d5<Math[_0xca7632(0x12f)](_0x2aa1d0,_0x4be8e5);_0x4180d5++){const _0x5bb49b=LIFE_ICON_MARGIN_LEFT+_0x4180d5*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0xca7632(0xc4)](shipImage,Math['round'](_0x5bb49b),Math[_0xca7632(0xeb)](_0x1eb6d5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}let _0x39eed3=0x1;if(gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage)_0x39eed3=Math[_0xca7632(0xd5)](0x1,player1MaxLevelReached,player2MaxLevelReached);else{if(!isInGameState||isShowingScoreScreen)_0x39eed3=0x1;else isInGameState&&(_0x39eed3=level);}if(_0x39eed3>0x0&&typeof LEVEL_ICON_MARGIN_BOTTOM!=='undefined'&&typeof LEVEL_ICON_SIZE!==_0xca7632(0xd8)&&typeof LEVEL_ICON_MARGIN_RIGHT!==_0xca7632(0xd8)&&typeof LEVEL_ICON_SPACING!==_0xca7632(0xd8)){const _0x89f68c=[{'val':0x32,'img':level50Image},{'val':0x1e,'img':level30Image},{'val':0x14,'img':level20Image},{'val':0xa,'img':level10Image},{'val':0x5,'img':level5Image},{'val':0x1,'img':level1Image}];let _0x128558=_0x39eed3,_0xb003ba=[],_0x22585e=new Set();const _0x3cc764=(_0x682fec,_0x31983a,_0x14b765)=>{const _0x35855d=_0xca7632;let _0x230be3=_0x682fec,_0x244bdc=new Set(_0x14b765);for(let _0x5c9541=_0x31983a;_0x5c9541<_0x89f68c[_0x35855d(0xc1)];_0x5c9541++){const _0x336788=_0x89f68c[_0x5c9541][_0x35855d(0x15d)];if(_0x230be3>=_0x336788){const _0x4c9de8=_0x244bdc[_0x35855d(0x162)]<0x3||_0x244bdc[_0x35855d(0x119)](_0x336788);if(!_0x4c9de8)continue;const _0x2f556e=Math['floor'](_0x230be3/_0x336788);_0x230be3-=_0x2f556e*_0x336788,_0x244bdc[_0x35855d(0x10c)](_0x336788);if(_0x230be3===0x0)return!![];}}return _0x230be3===0x0;};for(let _0x23722d=0x0;_0x23722d<_0x89f68c[_0xca7632(0xc1)]-0x1;_0x23722d++){const _0x37272a=_0x89f68c[_0x23722d],_0x4bb956=_0x37272a[_0xca7632(0x15d)],_0x499305=_0x37272a[_0xca7632(0x14b)];if(_0x128558>=_0x4bb956){const _0x990200=Math[_0xca7632(0x14d)](_0x128558/_0x4bb956),_0x16350c=_0x128558-_0x990200*_0x4bb956;let _0x2483e4=new Set(_0x22585e);_0x2483e4[_0xca7632(0x10c)](_0x4bb956);if(_0x3cc764(_0x16350c,_0x23722d+0x1,_0x2483e4)){for(let _0x3e3c1c=0x0;_0x3e3c1c<_0x990200;_0x3e3c1c++){_0xb003ba['push'](_0x499305);}_0x128558=_0x16350c,_0x22585e[_0xca7632(0x10c)](_0x4bb956);if(_0x128558===0x0)break;}}}if(_0x128558>0x0){const _0x5abe1d=_0x22585e[_0xca7632(0x162)]<0x3||_0x22585e[_0xca7632(0x119)](0x1);if(_0x5abe1d){for(let _0x548146=0x0;_0x548146<_0x128558;_0x548146++){_0xb003ba[_0xca7632(0x14e)](level1Image);}_0x22585e[_0xca7632(0x10c)](0x1),_0x128558=0x0;}else console[_0xca7632(0x116)]('Could\x20not\x20add\x20'+_0x128558+'\x20level\x201\x20icons\x20due\x20to\x203-type\x20limit.\x20Used\x20types:',_0x22585e);}_0xb003ba[_0xca7632(0xc1)]===0x0&&_0xb003ba[_0xca7632(0x14e)](level1Image);const _0x273e97=_0xb003ba[_0xca7632(0xc1)],_0x26810a=_0x273e97*LEVEL_ICON_SIZE+Math[_0xca7632(0xd5)](0x0,_0x273e97-0x1)*LEVEL_ICON_SPACING,_0x3294af=gameCanvas[_0xca7632(0x157)]-LEVEL_ICON_MARGIN_RIGHT,_0x291dba=_0x3294af-_0x26810a,_0x1dc2c0=gameCanvas[_0xca7632(0x127)]-LEVEL_ICON_MARGIN_BOTTOM-LEVEL_ICON_SIZE;let _0x4d8e69=_0x291dba;for(const _0x1f5c49 of _0xb003ba){_0x1f5c49&&_0x1f5c49[_0xca7632(0xf9)]&&_0x1f5c49[_0xca7632(0x14c)]!==0x0&&gameCtx[_0xca7632(0xc4)](_0x1f5c49,Math[_0xca7632(0xeb)](_0x4d8e69),Math[_0xca7632(0xeb)](_0x1dc2c0),LEVEL_ICON_SIZE,LEVEL_ICON_SIZE),_0x4d8e69+=LEVEL_ICON_SIZE+LEVEL_ICON_SPACING;}}gameCtx[_0xca7632(0xfd)](),gameCtx[_0xca7632(0x149)]();if(ship&&!isShowingCaptureMessage){let _0x7476ee=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x51283e=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS,_0xe3ad91=_0x278849%_0x51283e;_0xe3ad91>=INVINCIBILITY_BLINK_ON_MS&&(_0x7476ee=![]);}if(_0x7476ee){let _0x1b3952=ship['x'],_0x11cdec=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x11cdec&&(_0x1b3952=Math['round'](gameCanvas['width']/0x2-ship[_0xca7632(0x157)]/0x2));const _0x55e695=gameCanvas[_0xca7632(0x127)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;typeof shipImage!=='undefined'&&shipImage[_0xca7632(0xf9)]&&shipImage[_0xca7632(0x14c)]!==0x0?gameCtx[_0xca7632(0xc4)](shipImage,Math[_0xca7632(0xeb)](_0x1b3952),Math['round'](_0x55e695),ship['width'],ship[_0xca7632(0x127)]):(gameCtx['fillStyle']=_0xca7632(0x134),gameCtx[_0xca7632(0x126)](Math[_0xca7632(0xeb)](_0x1b3952),Math[_0xca7632(0xeb)](_0x55e695),ship[_0xca7632(0x157)],ship[_0xca7632(0x127)]));if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&typeof shipImage!=='undefined'&&shipImage[_0xca7632(0xf9)]&&shipImage[_0xca7632(0x14c)]!==0x0){const _0x41763f=_0x1b3952+DUAL_SHIP_OFFSET_X;gameCtx[_0xca7632(0xc4)](shipImage,Math[_0xca7632(0xeb)](_0x41763f),Math[_0xca7632(0xeb)](_0x55e695),ship[_0xca7632(0x157)],ship[_0xca7632(0x127)]);}}}fallingShips[_0xca7632(0xc1)]>0x0&&typeof shipImage!==_0xca7632(0xd8)&&shipImage[_0xca7632(0xf9)]&&fallingShips[_0xca7632(0x139)](_0x265a3d=>{const _0x47b27f=_0xca7632;if(_0x265a3d){gameCtx[_0x47b27f(0x149)]();const _0x5816ce=_0x265a3d['x']+_0x265a3d[_0x47b27f(0x157)]/0x2,_0x39d697=_0x265a3d['y']+_0x265a3d[_0x47b27f(0x127)]/0x2;gameCtx['translate'](_0x5816ce,_0x39d697),gameCtx[_0x47b27f(0x153)](_0x265a3d[_0x47b27f(0xba)]||0x0);const _0x397382=-_0x265a3d['width']/0x2,_0x44bfd3=-_0x265a3d[_0x47b27f(0x127)]/0x2,_0x52d75c=_0x265a3d['width'],_0x2b7724=_0x265a3d[_0x47b27f(0x127)];gameCtx[_0x47b27f(0xc4)](shipImage,_0x397382,_0x44bfd3,_0x52d75c,_0x2b7724),typeof _0x265a3d[_0x47b27f(0x17d)]===_0x47b27f(0xbb)&&_0x265a3d[_0x47b27f(0x17d)]>0.01&&(gameCtx[_0x47b27f(0x149)](),gameCtx[_0x47b27f(0x176)]=_0x265a3d[_0x47b27f(0x17d)],gameCtx[_0x47b27f(0x101)]=CAPTURED_SHIP_TINT_COLOR,gameCtx['globalCompositeOperation']=_0x47b27f(0x128),gameCtx[_0x47b27f(0x126)](_0x397382,_0x44bfd3,_0x52d75c,_0x2b7724),gameCtx[_0x47b27f(0xfd)]()),gameCtx[_0x47b27f(0xfd)]();}});gameCtx[_0xca7632(0xfd)]();if(!isInGameState){if(isShowingScoreScreen){if(typeof LIFE_ICON_SIZE!==_0xca7632(0xd8)){gameCtx[_0xca7632(0x149)]();const _0x3d191c=gameCanvas['width']/0x2;let _0x23bd4f=gameCanvas[_0xca7632(0x127)]*0.25+SCORE_SCREEN_VERTICAL_OFFSET,_0x496b96=0x0,_0x1d2223=_0x23bd4f+0x0;drawCanvasText('PUSH\x20START\x20BUTTON',_0x3d191c,_0x1d2223-0x1e,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_TOP,_0xca7632(0xe3),_0xca7632(0x15e),!![]);let _0x321d73=_0x1d2223+SCORE_SCREEN_LINE_V_SPACING*1.8;const _0x6eee82=_0xca7632(0x145);gameCtx[_0xca7632(0x16c)]=SCORE_SCREEN_TEXT_FONT;const _0x98148f=gameCtx[_0xca7632(0x103)](_0x6eee82)[_0xca7632(0x157)],_0x48973c=LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING+_0x98148f;_0x496b96=_0x3d191c-_0x48973c/0x2-0x1e;typeof shipImage!==_0xca7632(0xd8)&&shipImage['complete']&&shipImage[_0xca7632(0x14c)]!==0x0&&gameCtx['drawImage'](shipImage,Math[_0xca7632(0xeb)](_0x496b96),Math[_0xca7632(0xeb)](_0x321d73-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x6eee82,_0x496b96+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x321d73,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0xca7632(0xcc),_0xca7632(0x15e),![]);let _0x200762=_0x321d73+SCORE_SCREEN_LINE_V_SPACING*0x1;const _0x2e51d6='\x202ND\x20LIFE\x20BONUS\x20FOR\x20'+RECURRING_EXTRA_LIFE_INTERVAL+_0xca7632(0xe2);typeof shipImage!=='undefined'&&shipImage[_0xca7632(0xf9)]&&shipImage[_0xca7632(0x14c)]!==0x0&&gameCtx['drawImage'](shipImage,Math['round'](_0x496b96),Math[_0xca7632(0xeb)](_0x200762-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x2e51d6,_0x496b96+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x200762,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0xca7632(0xcc),_0xca7632(0x15e),![]);let _0x25be2f=_0x200762+SCORE_SCREEN_LINE_V_SPACING*0x1;const _0x55a8f5=_0xca7632(0x10a)+RECURRING_EXTRA_LIFE_INTERVAL+'\x20PTS';typeof shipImage!==_0xca7632(0xd8)&&shipImage[_0xca7632(0xf9)]&&shipImage[_0xca7632(0x14c)]!==0x0&&gameCtx['drawImage'](shipImage,Math[_0xca7632(0xeb)](_0x496b96),Math[_0xca7632(0xeb)](_0x25be2f-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x55a8f5,_0x496b96+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x25be2f,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0xca7632(0xcc),_0xca7632(0x15e),![]);let _0x5eebab=_0x25be2f+SCORE_SCREEN_LINE_V_SPACING*1.8;drawCanvasText(SCORE_SCREEN_PLATINI_TEXT,_0x3d191c-0xa,_0x5eebab+0x1e,MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0xca7632(0xe3),'middle',![]),gameCtx[_0xca7632(0xfd)]();}}else{gameCtx[_0xca7632(0x149)]();const _0x3f494b=gameCanvas['width'],_0x3dd919=gameCanvas[_0xca7632(0x127)],_0x584b07=_0x3f494b/0x2;selectedButtonIndex===-0x1&&(selectedButtonIndex=0x0);let _0x571c49=MENU_LOGO_APPROX_HEIGHT,_0x8159ea=_0x571c49*(logoImage[_0xca7632(0x115)]/logoImage['naturalHeight']||0x1);typeof logoImage!=='undefined'&&logoImage[_0xca7632(0xf9)]&&logoImage['naturalHeight']!==0x0&&(_0x571c49=logoImage[_0xca7632(0x14c)]*LOGO_SCALE_FACTOR,_0x8159ea=logoImage[_0xca7632(0x115)]*LOGO_SCALE_FACTOR);const _0x41e976=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x1c742b=_0x571c49+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x41e976;let _0x4ca29f=(_0x3dd919-_0x1c742b)/0x2-0x46;_0x4ca29f+=MENU_GENERAL_Y_OFFSET;const _0x496a4e=_0x584b07-_0x8159ea/0x2,_0x554b1a=_0x4ca29f+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0xca7632(0xd8)&&logoImage['complete']&&logoImage[_0xca7632(0x14c)]!==0x0?gameCtx[_0xca7632(0xc4)](logoImage,Math[_0xca7632(0xeb)](_0x496a4e),Math[_0xca7632(0xeb)](_0x554b1a),_0x8159ea,_0x571c49):drawCanvasText('LOGO',_0x584b07,_0x554b1a+_0x571c49/0x2,'30px\x20Arial',_0xca7632(0x160));if(isFiringModeSelectMode)drawCanvasButton('EASY',0x0,selectedButtonIndex===0x0),drawCanvasButton('NORMAL',0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0xca7632(0xf6),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0xca7632(0xec),0x1,selectedButtonIndex===0x1)):(drawCanvasButton('START\x20GAME',0x0,selectedButtonIndex===0x0),drawCanvasButton(_0xca7632(0x171),0x1,selectedButtonIndex===0x1));const _0x12beb0=getMenuButtonRect(0x1);let _0x333964;_0x12beb0?_0x333964=_0x12beb0['y']+_0x12beb0[_0xca7632(0x127)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x41e976/0x2:_0x333964=_0x4ca29f+_0x571c49+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x41e976/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x584b07-0x1,Math['round'](_0x333964),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0xca7632(0xe3),_0xca7632(0x15e),!![]),gameCtx[_0xca7632(0xfd)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0xca7632(0x149)]();let _0x250866=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x250866&&(bullets[_0xca7632(0x139)](_0x4f5f36=>{const _0x255f1f=_0xca7632;_0x4f5f36&&(typeof bulletImage!=='undefined'&&bulletImage['complete']?gameCtx[_0x255f1f(0xc4)](bulletImage,Math[_0x255f1f(0xeb)](_0x4f5f36['x']),Math[_0x255f1f(0xeb)](_0x4f5f36['y']),_0x4f5f36[_0x255f1f(0x157)],_0x4f5f36[_0x255f1f(0x127)]):(gameCtx[_0x255f1f(0x101)]=_0x255f1f(0x16b),gameCtx[_0x255f1f(0x126)](Math[_0x255f1f(0xeb)](_0x4f5f36['x']),Math[_0x255f1f(0xeb)](_0x4f5f36['y']),_0x4f5f36['width'],_0x4f5f36[_0x255f1f(0x127)])));}),enemyBullets[_0xca7632(0x139)](_0x726caf=>{const _0x1ac613=_0xca7632;_0x726caf&&(typeof enemyBulletImage!==_0x1ac613(0xd8)&&enemyBulletImage['complete']&&enemyBulletImage[_0x1ac613(0x115)]>0x0?gameCtx[_0x1ac613(0xc4)](enemyBulletImage,Math['round'](_0x726caf['x']),Math['round'](_0x726caf['y']),_0x726caf['width'],_0x726caf[_0x1ac613(0x127)]):(gameCtx[_0x1ac613(0x101)]=_0x1ac613(0xfe),gameCtx['fillRect'](Math[_0x1ac613(0xeb)](_0x726caf['x']),Math['round'](_0x726caf['y']),_0x726caf['width'],_0x726caf[_0x1ac613(0x127)])));}));enemies['forEach'](_0xca3b09=>{const _0x43688f=_0xca7632;if(_0xca3b09&&_0xca3b09['y']<gameCanvas[_0x43688f(0x127)]+_0xca3b09[_0x43688f(0x127)]*0x2&&_0xca3b09['y']>-_0xca3b09[_0x43688f(0x127)]*0x2){gameCtx['save']();try{let _0x2827c3=null,_0x4d81f5='grey';const _0x16daec=!isPaused&&_0x278849%(ENEMY_ANIMATION_INTERVAL_MS*0x2)>=ENEMY_ANIMATION_INTERVAL_MS;if(_0xca3b09['type']===ENEMY3_TYPE)_0x2827c3=_0x16daec?bossGalagaImage2:bossGalagaImage,_0x4d81f5=_0x43688f(0x13c);else _0xca3b09[_0x43688f(0x107)]===ENEMY2_TYPE?(_0x2827c3=_0x16daec?butterflyImage2:butterflyImage,_0x4d81f5=_0x43688f(0xea)):(_0x2827c3=_0x16daec?beeImage2:beeImage,_0x4d81f5=_0x43688f(0x150));const _0x1eed8c=Math[_0x43688f(0xeb)](_0xca3b09['x']),_0x47b4bc=Math[_0x43688f(0xeb)](_0xca3b09['y']),_0x44b02e=_0xca3b09[_0x43688f(0x157)],_0x4b15a3=_0xca3b09[_0x43688f(0x127)],_0x1bf59d=_0xca3b09[_0x43688f(0x107)]===ENEMY3_TYPE&&_0xca3b09[_0x43688f(0x144)],_0x461605=!isPaused&&(_0xca3b09['state']===_0x43688f(0x111)||_0xca3b09['state']===_0x43688f(0x11d)||_0xca3b09[_0x43688f(0x121)]===_0x43688f(0x168))&&_0xca3b09['y']>-_0xca3b09[_0x43688f(0x127)]*0.5&&(Math['abs'](_0xca3b09[_0x43688f(0xe9)])>0.1||Math[_0x43688f(0x117)](_0xca3b09['velocityY'])>0.1),_0x1b2ded=_0xca3b09[_0x43688f(0x121)]===_0x43688f(0x100)&&_0xca3b09['type']===ENEMY3_TYPE&&_0xca3b09['hasCapturedShip']&&_0xca3b09['capturedShipDimensions']&&typeof _0xca3b09['capturedShipX']===_0x43688f(0xbb)&&typeof _0xca3b09[_0x43688f(0x11a)]===_0x43688f(0xbb)&&typeof _0xca3b09[_0x43688f(0x10e)]==='number',_0x39a7e7=_0xca3b09['state']!==_0x43688f(0x100)&&_0xca3b09[_0x43688f(0x107)]===ENEMY3_TYPE&&_0xca3b09['hasCapturedShip']&&_0xca3b09[_0x43688f(0x170)],_0x4684cb=_0x1b2ded||_0x39a7e7?_0xca3b09[_0x43688f(0x170)][_0x43688f(0x157)]:0x0,_0x295f3d=_0x1b2ded||_0x39a7e7?_0xca3b09[_0x43688f(0x170)][_0x43688f(0x127)]:0x0;let _0x5a684d=0x0,_0x2821be=0x0;if(_0x1b2ded)_0x5a684d=Math[_0x43688f(0xeb)](_0xca3b09[_0x43688f(0xd7)]),_0x2821be=Math[_0x43688f(0xeb)](_0xca3b09['capturedShipY']);else _0x39a7e7&&(_0x5a684d=Math[_0x43688f(0xeb)](_0xca3b09['x']+CAPTURED_SHIP_OFFSET_X),_0x2821be=Math[_0x43688f(0xeb)](_0xca3b09['y']+CAPTURED_SHIP_OFFSET_Y));const _0x1383d9=(_0x3b6813,_0x1d4381,_0x5bfa4c,_0x55fac0)=>{const _0x480d49=_0x43688f;typeof _0x2827c3!==_0x480d49(0xd8)&&_0x2827c3[_0x480d49(0xf9)]&&_0x2827c3[_0x480d49(0x14c)]!==0x0?gameCtx[_0x480d49(0xc4)](_0x2827c3,_0x3b6813,_0x1d4381,_0x5bfa4c,_0x55fac0):(gameCtx[_0x480d49(0x101)]=_0x4d81f5,gameCtx[_0x480d49(0x126)](_0x3b6813,_0x1d4381,_0x5bfa4c,_0x55fac0)),_0x1bf59d&&(gameCtx[_0x480d49(0xc3)]=_0x480d49(0x128),gameCtx[_0x480d49(0x101)]=_0x480d49(0x17e),gameCtx[_0x480d49(0x126)](_0x3b6813,_0x1d4381,_0x5bfa4c,_0x55fac0),gameCtx['globalCompositeOperation']='source-over');};if(_0x461605){const _0x166c74=_0x1eed8c+_0x44b02e/0x2,_0x5f0927=_0x47b4bc+_0x4b15a3/0x2;gameCtx['translate'](_0x166c74,_0x5f0927);let _0x5f4a75=Math['atan2'](_0xca3b09[_0x43688f(0x132)],_0xca3b09['velocityX'])+Math['PI']/0x2;if(_0xca3b09['type']===ENEMY3_TYPE&&_0xca3b09[_0x43688f(0x121)]==='attacking')_0x5f4a75+=Math['PI'];gameCtx[_0x43688f(0x153)](_0x5f4a75),_0x1383d9(-_0x44b02e/0x2,-_0x4b15a3/0x2,_0x44b02e,_0x4b15a3);if(_0x39a7e7&&typeof shipImage!=='undefined'&&shipImage[_0x43688f(0xf9)]){gameCtx['globalAlpha']=0.8;const _0x5b7af7=CAPTURED_SHIP_OFFSET_X,_0x533628=CAPTURED_SHIP_OFFSET_Y;gameCtx[_0x43688f(0xc4)](shipImage,_0x5b7af7-_0x4684cb/0x2,_0x533628-_0x295f3d/0x2,_0x4684cb,_0x295f3d),gameCtx[_0x43688f(0x176)]=0x1,gameCtx['save'](),gameCtx['fillStyle']=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x43688f(0xc3)]=_0x43688f(0x128),gameCtx[_0x43688f(0x126)](_0x5b7af7-_0x4684cb/0x2,_0x533628-_0x295f3d/0x2,_0x4684cb,_0x295f3d),gameCtx['restore']();}gameCtx[_0x43688f(0x153)](-_0x5f4a75),gameCtx['translate'](-_0x166c74,-_0x5f0927);}else _0x1383d9(_0x1eed8c,_0x47b4bc,_0x44b02e,_0x4b15a3),_0x39a7e7&&typeof shipImage!==_0x43688f(0xd8)&&shipImage[_0x43688f(0xf9)]&&(gameCtx[_0x43688f(0x176)]=0.8,gameCtx[_0x43688f(0xc4)](shipImage,_0x5a684d,_0x2821be,_0x4684cb,_0x295f3d),gameCtx[_0x43688f(0x176)]=0x1,gameCtx[_0x43688f(0x149)](),gameCtx[_0x43688f(0x101)]=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x43688f(0xc3)]='source-atop',gameCtx['fillRect'](_0x5a684d,_0x2821be,_0x4684cb,_0x295f3d),gameCtx[_0x43688f(0xfd)]());if(_0x1b2ded&&typeof shipImage!==_0x43688f(0xd8)&&shipImage[_0x43688f(0xf9)]){gameCtx['save']();const _0x267436=_0x5a684d+_0x4684cb/0x2,_0x5442af=_0x2821be+_0x295f3d/0x2;gameCtx['translate'](_0x267436,_0x5442af),gameCtx[_0x43688f(0x153)](_0xca3b09['captureAnimationRotation']),gameCtx['globalAlpha']=0.8,gameCtx[_0x43688f(0xc4)](shipImage,-_0x4684cb/0x2,-_0x295f3d/0x2,_0x4684cb,_0x295f3d),gameCtx[_0x43688f(0x176)]=0x1,gameCtx[_0x43688f(0x149)](),gameCtx[_0x43688f(0x101)]=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x43688f(0xc3)]=_0x43688f(0x128),gameCtx[_0x43688f(0x126)](-_0x4684cb/0x2,-_0x295f3d/0x2,_0x4684cb,_0x295f3d),gameCtx[_0x43688f(0xfd)](),gameCtx['restore']();}}catch(_0x5cbd6b){console['error'](_0x43688f(0x122),_0x5cbd6b),gameCtx[_0x43688f(0x101)]=_0x43688f(0xd4),gameCtx[_0x43688f(0x126)](Math[_0x43688f(0xeb)](_0xca3b09['x']),Math[_0x43688f(0xeb)](_0xca3b09['y']),_0xca3b09[_0x43688f(0x157)],_0xca3b09[_0x43688f(0x127)]);}finally{gameCtx[_0x43688f(0xfd)]();}}});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){gameCtx['save']();const _0x3c9703=0.4+(Math['sin'](_0x278849*CAPTURE_BEAM_PULSE_SPEED)+0x1)/0x2*0.6,_0x21ae98=captureBeamProgress;gameCtx[_0xca7632(0x176)]=_0x21ae98*_0x3c9703;const _0x1706eb=enemies[_0xca7632(0x136)](_0x5f37a4=>_0x5f37a4['id']===capturingBossId);if(_0x1706eb){const _0x4a0db8=_0x1706eb['x']+BOSS_WIDTH/0x2,_0x441c85=_0x1706eb['y']+BOSS_HEIGHT,_0x4e0d4d=gameCanvas[_0xca7632(0x127)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x431e1d=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x210bd6=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR;if(_0x441c85<_0x4e0d4d){const _0x11f379=gameCtx[_0xca7632(0x133)](_0x4a0db8,_0x441c85,_0x4a0db8,_0x4e0d4d);_0x11f379[_0xca7632(0xfc)](0x0,CAPTURE_BEAM_COLOR_START),_0x11f379[_0xca7632(0xfc)](0x1,CAPTURE_BEAM_COLOR_END),gameCtx[_0xca7632(0x101)]=_0x11f379,gameCtx[_0xca7632(0xbf)](),gameCtx['moveTo'](_0x4a0db8-_0x431e1d/0x2,_0x441c85),gameCtx[_0xca7632(0xe4)](_0x4a0db8+_0x431e1d/0x2,_0x441c85),gameCtx[_0xca7632(0xe4)](_0x4a0db8+_0x210bd6/0x2,_0x4e0d4d),gameCtx[_0xca7632(0xe4)](_0x4a0db8-_0x210bd6/0x2,_0x4e0d4d),gameCtx[_0xca7632(0x165)](),gameCtx[_0xca7632(0x177)]();}}gameCtx[_0xca7632(0xfd)]();}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x136483=![];const _0x46c038=gameCanvas[_0xca7632(0x127)]/0x2,_0x1dc78f=gameCanvas[_0xca7632(0x157)]/0x2,_0x3bcb67=_0xca7632(0xf3)+challengingStageEnemiesHit,_0x236c4f=_0xca7632(0x174)+scoreEarnedThisCS;if(isPaused)drawCanvasText(_0xca7632(0x104),_0x1dc78f,_0x46c038,PAUSE_TEXT_FONT,PAUSE_TEXT_COLOR,_0xca7632(0xe3),_0xca7632(0x15e),PAUSE_TEXT_SHADOW),_0x136483=!![];else{if(isShowingCaptureMessage)drawCanvasText(_0xca7632(0x10b),_0x1dc78f,_0x46c038-0x28,INTRO_TEXT_FONT,'red',_0xca7632(0xe3),_0xca7632(0x15e),!![]),_0x136483=!![];else{if(showCsBonusScoreMessage||showPerfectMessage||showCsHitsMessage)drawCanvasText(_0x3bcb67,_0x1dc78f,_0x46c038,INTRO_TEXT_FONT,CS_HITS_TEXT_COLOR,_0xca7632(0xe3),_0xca7632(0x15e),!![]),_0x136483=!![],(showCsBonusScoreMessage||showPerfectMessage)&&drawCanvasText(_0xca7632(0x12b),_0x1dc78f,_0x46c038-CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,PERFECT_TEXT_COLOR,'center','middle',!![]),showCsBonusScoreMessage&&drawCanvasText(_0xca7632(0x15b),_0x1dc78f,_0x46c038+CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_BONUS_SCORE_TEXT_COLOR,_0xca7632(0xe3),'middle',!![]);else{if(showCSClearMessage)drawCanvasText(_0xca7632(0x17b),_0x1dc78f,_0x46c038-CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_CLEAR_TEXT_COLOR,'center','middle',!![]),_0x136483=!![],showCsHitsForClearMessage&&drawCanvasText(_0x3bcb67,_0x1dc78f,_0x46c038,INTRO_TEXT_FONT,CS_HITS_TEXT_COLOR,_0xca7632(0xe3),_0xca7632(0x15e),!![]),showCsScoreForClearMessage&&drawCanvasText(_0x236c4f,_0x1dc78f,_0x46c038+CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_CLEAR_SCORE_TEXT_COLOR,_0xca7632(0xe3),'middle',!![]);else{if(showExtraLifeMessage)drawCanvasText(_0xca7632(0x141),_0x1dc78f,_0x46c038,INTRO_TEXT_FONT,EXTRA_LIFE_TEXT_COLOR,'center','middle',!![]),_0x136483=!![];else{if(isShowingIntro){let _0x12cd5e='',_0x54e453=INTRO_TEXT_COLOR_NORMAL;if(introStep===0x1)_0x12cd5e=!isManualControl?_0xca7632(0xdb):_0xca7632(0xcf)+(isTwoPlayerMode?currentPlayer:0x1);else{if(introStep===0x2)_0x12cd5e=_0xca7632(0x154)+level;else introStep===0x3&&(_0x12cd5e=_0xca7632(0xee),_0x54e453=INTRO_TEXT_COLOR_CS_TEXT,!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]));}_0x12cd5e&&(drawCanvasText(_0x12cd5e,_0x1dc78f,_0x46c038,INTRO_TEXT_FONT,_0x54e453,'center',_0xca7632(0x15e),!![]),_0x136483=!![]);}else{if(!isManualControl&&isShowingDemoText&&!_0x136483&&!isEntrancePhaseActive&&!isCsCompletionDelayActive){const _0x3c723b=DEMO_TEXT_BLINK_CYCLE_MS*1.5,_0x2d9c99=DEMO_TEXT_BLINK_ON_MS*1.5;_0x278849%_0x3c723b<_0x2d9c99&&drawCanvasText('PUSH\x20START\x20BUTTON',_0x1dc78f,_0x46c038,DEMO_TEXT_LINE1_FONT,DEMO_TEXT_COLOR,'center',_0xca7632(0x15e),!![]);}}}}}}}gameCtx['restore']();}else{if(isShowingPlayerGameOverMessage){const _0x396c7a=_0xca7632(0xcf)+playerWhoIsGameOver,_0x123981=RESULTS_LINE_V_SPACING_SINGLE,_0x451ad7=gameCanvas[_0xca7632(0x127)]*0.45;drawCanvasText(_0x396c7a,gameCanvas[_0xca7632(0x157)]/0x2,_0x451ad7-_0x123981/0x2,INTRO_TEXT_FONT,INTRO_TEXT_COLOR_NORMAL,'center',_0xca7632(0x15e),!![]),drawCanvasText(_0xca7632(0x13e),gameCanvas['width']/0x2,_0x451ad7+_0x123981/0x2,INTRO_TEXT_FONT,INTRO_TEXT_COLOR_NORMAL,'center','middle',!![]);}else{if(gameOverSequenceStartTime>0x0){const _0x4610d0=_0x278849-gameOverSequenceStartTime,_0x30cb61=_0x4610d0<GAME_OVER_DURATION,_0x43b21a=_0x4610d0>=GAME_OVER_DURATION;if(_0x30cb61)drawCanvasText(_0xca7632(0x13e),gameCanvas['width']/0x2,gameCanvas[_0xca7632(0x127)]/0x2,GAME_OVER_FONT,GAME_OVER_COLOR,_0xca7632(0xe3),_0xca7632(0x15e),GAME_OVER_SHADOW);else{if(_0x43b21a){gameCtx['save']();const _0x33164f=gameCanvas[_0xca7632(0x157)]/0x2,_0x3fefa8=gameCanvas['width'];let _0x45d3c4=RESULTS_START_Y+RESULTS_LINE_V_SPACING_SINGLE;const _0x1b5ec6=(_0x24040d,_0x327894,_0x56dbfb,_0x2ce07e,_0x4460e6,_0x48877b,_0x46bd71,_0x1aae94)=>{const _0xf9b425=_0xca7632;let _0x4d08c9=_0x1aae94;const _0x1e9f59=RESULTS_VALUE_COLOR_YELLOW,_0x537705=RESULTS_VALUE_COLOR_CYAN;drawCanvasText(_0xf9b425(0x108),_0x46bd71,_0x4d08c9,INTRO_TEXT_FONT,RESULTS_HEADER_COLOR,_0xf9b425(0xe3),'top',!![]),_0x4d08c9+=getSubtitleApproxHeight(INTRO_TEXT_FONT)+RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x24040d,_0x46bd71,_0x4d08c9,INTRO_TEXT_FONT,'white',_0xf9b425(0xe3),_0xf9b425(0x15e),![]),_0x4d08c9+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0xf9b425(0x166),_0x46bd71,_0x4d08c9,INTRO_TEXT_FONT,_0x1e9f59,_0xf9b425(0xe3),_0xf9b425(0x15e),![]),_0x4d08c9+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x48877b[_0xf9b425(0xf2)](),_0x46bd71,_0x4d08c9,INTRO_TEXT_FONT,_0x537705,_0xf9b425(0xe3),'middle',![]),_0x4d08c9+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0xf9b425(0x156),_0x46bd71,_0x4d08c9,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0xf9b425(0xe3),_0xf9b425(0x15e),![]),_0x4d08c9+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x327894[_0xf9b425(0xf2)](),_0x46bd71,_0x4d08c9,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0xf9b425(0xe3),_0xf9b425(0x15e),![]),_0x4d08c9+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0xf9b425(0x12a),_0x46bd71,_0x4d08c9,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0xf9b425(0xe3),_0xf9b425(0x15e),![]),_0x4d08c9+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x56dbfb['toString'](),_0x46bd71,_0x4d08c9,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0xf9b425(0xe3),'middle',![]),_0x4d08c9+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0xf9b425(0x11e),_0x46bd71,_0x4d08c9,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,'center',_0xf9b425(0x15e),![]),_0x4d08c9+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x2ce07e[_0xf9b425(0xf2)](),_0x46bd71,_0x4d08c9,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,'center',_0xf9b425(0x15e),![]),_0x4d08c9+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0xf9b425(0x155),_0x46bd71,_0x4d08c9,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0xf9b425(0xe3),_0xf9b425(0x15e),![]),_0x4d08c9+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x4460e6,_0x46bd71,_0x4d08c9,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0xf9b425(0xe3),_0xf9b425(0x15e),![]),_0x4d08c9+=RESULTS_LINE_V_SPACING_SINGLE*1.5,drawCanvasText(RESULTS_PLATINI_TEXT,_0x46bd71,_0x4d08c9-0xa,RESULTS_FOOTER_FONT,RESULTS_FOOTER_COLOR,_0xf9b425(0xe3),_0xf9b425(0x15e),![]);};if(isTwoPlayerMode){const _0x10c06b=player1ShotsFired||0x0,_0x116c7d=player1EnemiesHit||0x0,_0x36ee51=_0x10c06b>0x0?Math['round'](_0x116c7d/_0x10c06b*0x64)+'%':'0%',_0x1a0934=player2ShotsFired||0x0,_0x17ae5c=player2EnemiesHit||0x0,_0x311111=_0x1a0934>0x0?Math[_0xca7632(0xeb)](_0x17ae5c/_0x1a0934*0x64)+'%':'0%',_0x297d57=_0x3fefa8*0.4,_0x52ca62=_0x3fefa8*0.1,_0xce04d9=_0x33164f-_0x52ca62/0x2-_0x297d57/0x2+_0x297d57*0.1,_0x226402=_0x33164f+_0x52ca62/0x2+_0x297d57/0x2-_0x297d57*0.1,_0x29397d='PLAYER\x201';_0x1b5ec6(_0x29397d,player1Score,_0x10c06b,_0x116c7d,_0x36ee51,player1MaxLevelReached,_0xce04d9,_0x45d3c4),_0x1b5ec6(_0xca7632(0xc9),player2Score,_0x1a0934,_0x17ae5c,_0x311111,player2MaxLevelReached,_0x226402,_0x45d3c4);let _0x52378d=0x0;if(player1Score>player2Score)_0x52378d=0x1;else{if(player2Score>player1Score)_0x52378d=0x2;}if(_0x52378d>0x0){let _0x4e2ffb=_0x45d3c4;_0x4e2ffb+=getSubtitleApproxHeight(INTRO_TEXT_FONT)+RESULTS_LINE_V_SPACING_SINGLE,_0x4e2ffb+=RESULTS_LINE_V_SPACING_SINGLE,_0x4e2ffb+=RESULTS_LINE_V_SPACING_SINGLE*0x2;const _0x1a505b=_0xca7632(0xcf)+_0x52378d,_0x3c92b4=_0xca7632(0xc2);drawCanvasText(_0x1a505b,_0x33164f,_0x4e2ffb,INTRO_TEXT_FONT,_0xca7632(0xfe),'center',_0xca7632(0x15e),!![]),drawCanvasText(_0x3c92b4,_0x33164f,_0x4e2ffb+RESULTS_LINE_V_SPACING_SINGLE,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0xca7632(0xe3),_0xca7632(0x15e),!![]);}}else{const _0x5ec244=player1ShotsFired||0x0,_0x1478fe=player1EnemiesHit||0x0,_0x846142=wasLastGameAIDemo?score:player1Score,_0x319d1b=wasLastGameAIDemo?level:player1MaxLevelReached,_0x51a50d=_0x5ec244>0x0?Math[_0xca7632(0xeb)](_0x1478fe/_0x5ec244*0x64)+'%':'0%',_0x4b0813=wasLastGameAIDemo?_0xca7632(0xdb):_0xca7632(0xe0);_0x1b5ec6(_0x4b0813,_0x846142,_0x5ec244,_0x1478fe,_0x51a50d,_0x319d1b,_0x33164f,_0x45d3c4);}gameCtx[_0xca7632(0xfd)]();}}}}}}}catch(_0x1ab043){console[_0xca7632(0xc8)]('Error\x20in\x20renderGame:',_0x1ab043,_0x1ab043[_0xca7632(0xb9)]);if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;try{gameCtx&&gameCanvas&&(gameCtx[_0xca7632(0x101)]=_0xca7632(0x150),gameCtx[_0xca7632(0x16c)]=_0xca7632(0x173),gameCtx[_0xca7632(0x124)]=_0xca7632(0xe3),gameCtx[_0xca7632(0x13a)]('FATAL\x20RENDER\x20ERROR.',gameCanvas['width']/0x2,gameCanvas[_0xca7632(0x127)]/0x2));}catch(_0xb1959){}try{showMenuState();}catch(_0x38b0ea){}}}function hideCursor(){const _0x1cf58b=_0xd18ba5;gameCanvas&&(gameCanvas[_0x1cf58b(0x135)][_0x1cf58b(0xd3)]=_0x1cf58b(0x148)),mouseIdleTimerId=null;}function handleCanvasMouseMove(_0x5b775c){const _0x858d87=_0xd18ba5;if(!gameCanvas)return;let _0x2b0607=_0x858d87(0x110);const _0x6934d9=!isInGameState||isShowingScoreScreen||gameOverSequenceStartTime>0x0&&Date[_0x858d87(0x109)]()-gameOverSequenceStartTime>=GAME_OVER_DURATION;let _0x43c679=![],_0x3942f5=selectedButtonIndex;if(_0x6934d9){const _0x5742d4=gameCanvas[_0x858d87(0xce)](),_0x1f3c5c=gameCanvas[_0x858d87(0x157)]/_0x5742d4[_0x858d87(0x157)],_0x22add7=gameCanvas['height']/_0x5742d4[_0x858d87(0x127)],_0x837eb2=(_0x5b775c[_0x858d87(0xe6)]-_0x5742d4[_0x858d87(0xcc)])*_0x1f3c5c,_0x3751f0=(_0x5b775c[_0x858d87(0x15f)]-_0x5742d4[_0x858d87(0x131)])*_0x22add7,_0x452df3=getMenuButtonRect(0x0),_0x2e014a=getMenuButtonRect(0x1);if(_0x452df3&&checkCollision({'x':_0x837eb2,'y':_0x3751f0,'width':0x1,'height':0x1},_0x452df3))_0x3942f5=0x0,_0x43c679=!![];else _0x2e014a&&checkCollision({'x':_0x837eb2,'y':_0x3751f0,'width':0x1,'height':0x1},_0x2e014a)?(_0x3942f5=0x1,_0x43c679=!![]):(_0x3942f5=-0x1,_0x43c679=![]);_0x3942f5!==selectedButtonIndex&&(selectedButtonIndex=_0x3942f5,_0x43c679&&stopAutoDemoTimer()),_0x2b0607=_0x43c679?_0x858d87(0xc7):_0x858d87(0x110);}else _0x2b0607=_0x858d87(0x148),selectedButtonIndex=-0x1;(gameCanvas[_0x858d87(0x135)][_0x858d87(0xd3)]==='none'||gameCanvas['style'][_0x858d87(0xd3)]!==_0x2b0607)&&(gameCanvas['style'][_0x858d87(0xd3)]=_0x2b0607);clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);if(!isInGameState){const _0x2258a8=Date['now']();if(_0x2258a8-lastMouseMoveResetTime>0x1f4){if(typeof startAutoDemoTimer===_0x858d87(0x13f))startAutoDemoTimer();lastMouseMoveResetTime=_0x2258a8;}}}function getTouchPos(_0x5cadb8,_0x536ab4){const _0xfa37=_0xd18ba5,_0x5979db=_0x536ab4[_0xfa37(0x175)]&&_0x536ab4[_0xfa37(0x175)][_0xfa37(0xc1)]>0x0?_0x536ab4['changedTouches']:_0x536ab4['touches'];if(!_0x5cadb8||!_0x5979db||_0x5979db['length']===0x0)return null;const _0x1f1a4d=_0x5cadb8[_0xfa37(0xce)](),_0x4ad214=_0x5979db[0x0],_0xfd9e06=_0x5cadb8[_0xfa37(0x157)]/_0x1f1a4d[_0xfa37(0x157)],_0x52c8b9=_0x5cadb8[_0xfa37(0x127)]/_0x1f1a4d[_0xfa37(0x127)];return{'x':(_0x4ad214[_0xfa37(0xe6)]-_0x1f1a4d[_0xfa37(0xcc)])*_0xfd9e06,'y':(_0x4ad214[_0xfa37(0x15f)]-_0x1f1a4d['top'])*_0x52c8b9};}function handleTouchStart(_0x406f23){const _0x35aa6b=_0xd18ba5;if(!gameCanvas)return;_0x406f23[_0x35aa6b(0x123)]();const _0x94ba91=getTouchPos(gameCanvas,_0x406f23);if(!_0x94ba91)return;isTouching=!![],touchStartX=_0x94ba91['x'],touchCurrentX=_0x94ba91['x'],isDraggingShip=![],lastTapTime=Date[_0x35aa6b(0x109)](),touchJustFiredSingle=![],isTouchFiringActive=![];const _0x438351=isInGameState&&!isPaused&&ship&&isManualControl&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage;if(_0x438351){const _0x4eb00f=ship['x']+ship[_0x35aa6b(0x157)]/0x2,_0x2e0a13={'x':ship['x']-ship[_0x35aa6b(0x157)]*0.25,'y':ship['y']-ship[_0x35aa6b(0x127)]*0.5,'width':ship[_0x35aa6b(0x157)]*1.5,'height':ship['height']*0x2};checkCollision({'x':_0x94ba91['x'],'y':_0x94ba91['y'],'width':0x1,'height':0x1},_0x2e0a13)?shipTouchOffsetX=_0x94ba91['x']-_0x4eb00f:shipTouchOffsetX=0x0,selectedFiringMode===_0x35aa6b(0x14a)&&(isTouchFiringActive=!![],typeof firePlayerBullet===_0x35aa6b(0x13f)&&firePlayerBullet(![]));}else shipTouchOffsetX=0x0;}function handleTouchMove(_0x350aba){const _0x520190=_0xd18ba5;if(!isTouching||!gameCanvas)return;_0x350aba['preventDefault']();const _0x38fde8=getTouchPos(gameCanvas,_0x350aba);if(!_0x38fde8)return;touchCurrentX=_0x38fde8['x'];const _0x1778ad=Math[_0x520190(0x117)](touchCurrentX-touchStartX),_0x30dd29=Date[_0x520190(0x109)]()-lastTapTime;!isDraggingShip&&((_0x1778ad>MIN_DRAG_DISTANCE_FOR_TAP_CANCEL||_0x30dd29>MIN_DRAG_TIME_FOR_TAP_CANCEL)&&(isDraggingShip=!![]));if(isDraggingShip&&isInGameState&&!isPaused&&ship&&isManualControl&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isShowingCaptureMessage&&!isWaitingForRespawn&&!isCsCompletionDelayActive){let _0x45a022=touchCurrentX-shipTouchOffsetX,_0x17f8bf=_0x45a022-ship[_0x520190(0x157)]/0x2;const _0x466ad4=isDualShipActive?ship[_0x520190(0x157)]+DUAL_SHIP_OFFSET_X:ship[_0x520190(0x157)];ship['x']=Math[_0x520190(0xd5)](0x0,Math[_0x520190(0x12f)](gameCanvas['width']-_0x466ad4,_0x17f8bf)),ship['targetX']=ship['x'];}}function handleTouchEnd(_0x25cf06){const _0x402e57=_0xd18ba5;if(!isTouching||!gameCanvas)return;_0x25cf06[_0x402e57(0x123)]();const _0x518e1b=!isDraggingShip;if(_0x518e1b){const _0x3df3dc=getTouchPos(gameCanvas,_0x25cf06);if(!_0x3df3dc){isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];return;}if(isInGameState&&!isShowingIntro&&ui2upRect&&checkCollision({'x':_0x3df3dc['x'],'y':_0x3df3dc['y'],'width':0x1,'height':0x1},ui2upRect)){if(typeof stopGameAndShowMenu===_0x402e57(0x13f)){stopGameAndShowMenu(),isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];return;}}else{if(!isInGameState||isShowingScoreScreen)typeof processMenuInteraction===_0x402e57(0x13f)&&processMenuInteraction(_0x3df3dc['x'],_0x3df3dc['y']);else isInGameState&&!isShowingIntro&&isManualControl&&playerLives>0x0&&!isPaused&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isShowingCaptureMessage&&!isWaitingForRespawn&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!showExtraLifeMessage&&(selectedFiringMode===_0x402e57(0x11c)&&(typeof firePlayerBullet===_0x402e57(0x13f)&&(!touchJustFiredSingle&&(firePlayerBullet(![])&&(touchJustFiredSingle=!![])))));}}isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];}function handleTouchCancel(_0x5e5db5){const _0x2a0e7b=_0xd18ba5;if(!isTouching)return;_0x5e5db5[_0x2a0e7b(0x123)](),isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![],touchJustFiredSingle=![];}function mainLoop(_0x37807e){const _0x3c7ac2=_0xd18ba5;try{drawStars();retroGridCtx&&retroGridCanvas&&drawRetroGrid();pollControllerForMenu();if(isInGameState&&!isPaused){if(!isManualControl&&connectedGamepadIndex!==null){const _0x509af7=navigator[_0x3c7ac2(0xf7)]();if(_0x509af7?.[connectedGamepadIndex]){const _0x2f72ab=_0x509af7[connectedGamepadIndex],_0x556d32=_0x2f72ab[_0x3c7ac2(0xdd)][_0x3c7ac2(0xe8)](_0x19346d=>_0x19346d[_0x3c7ac2(0xef)]);let _0x55030f=![];for(let _0x36cecb=0x0;_0x36cecb<_0x556d32[_0x3c7ac2(0xc1)];_0x36cecb++){if(_0x36cecb===PS5_BUTTON_R1||_0x36cecb===PS5_BUTTON_TRIANGLE)continue;if(_0x556d32[_0x36cecb]&&!(previousDemoButtonStates[_0x36cecb]??![])){_0x55030f=!![];break;}}if(_0x55030f){stopSound(menuMusicSound),showMenuState(),requestAnimationFrame(mainLoop);return;}previousDemoButtonStates=_0x556d32[_0x3c7ac2(0x11f)]();}else{if(previousDemoButtonStates[_0x3c7ac2(0xc1)]>0x0)previousDemoButtonStates=[];}}else{if(previousDemoButtonStates[_0x3c7ac2(0xc1)]>0x0)previousDemoButtonStates=[];}if(typeof runSingleGameUpdate===_0x3c7ac2(0x13f))runSingleGameUpdate(_0x37807e);else{console['error']('FATAL:\x20runSingleGameUpdate\x20is\x20not\x20defined!');if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,showMenuState(),requestAnimationFrame(mainLoop);return;}if(gameOverSequenceStartTime>0x0){const _0x4e801c=Date[_0x3c7ac2(0x109)](),_0x52d954=_0x4e801c-gameOverSequenceStartTime,_0x50f093=GAME_OVER_DURATION+RESULTS_SCREEN_DURATION;if(_0x52d954>=_0x50f093){showMenuState(),requestAnimationFrame(mainLoop);return;}}}else{if(isShowingScoreScreen){const _0x79920a=Date['now']()-scoreScreenStartTime;if(_0x79920a>=SCORE_SCREEN_DURATION){startAIDemo(),requestAnimationFrame(mainLoop);return;}if(typeof renderGame==='function')renderGame();}else{if(isInGameState&&gameOverSequenceStartTime>0x0){if(typeof renderGame===_0x3c7ac2(0x13f))renderGame();const _0x467677=Date[_0x3c7ac2(0x109)](),_0x455719=_0x467677-gameOverSequenceStartTime,_0x38e5a9=GAME_OVER_DURATION+RESULTS_SCREEN_DURATION;if(_0x455719>=_0x38e5a9){showMenuState(),requestAnimationFrame(mainLoop);return;}}else{if(isInGameState&&isPaused){if(typeof renderGame===_0x3c7ac2(0x13f))renderGame();}else{if(isInGameState&&isCsCompletionDelayActive){if(typeof runSingleGameUpdate==='function')runSingleGameUpdate(_0x37807e);else{if(typeof renderGame===_0x3c7ac2(0x13f))renderGame();}}else{if(isInGameState&&isShowingPlayerGameOverMessage){if(typeof runSingleGameUpdate==='function')runSingleGameUpdate(_0x37807e);else{if(typeof renderGame===_0x3c7ac2(0x13f))renderGame();}}else{if(typeof renderGame==='function')renderGame();}}}}}}mainLoopId=requestAnimationFrame(mainLoop);}catch(_0x52bee6){console[_0x3c7ac2(0xc8)](_0x3c7ac2(0x159),_0x52bee6,_0x52bee6['stack']);if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,isPaused=![],stopAllGameSounds(),isGridSoundPlaying=![];try{showMenuState();}catch(_0x428f59){console[_0x3c7ac2(0xc8)](_0x3c7ac2(0xb8),_0x428f59),document[_0x3c7ac2(0xf8)]['innerHTML']=_0x3c7ac2(0xed);}}}function startMainLoop(){mainLoopId===null&&(gridOffsetY=0x0,mainLoop());}function _0x5b02(){const _0x566c26=['undefined','particles','click','DEMO','<div\x20style=\x22color:white;\x20padding:\x2020px;\x20font-family:\x20sans-serif;\x22><h1>Fatal\x20Initialization\x20Error</h1><p>The\x20game\x20could\x20not\x20be\x20started.\x20Please\x20check\x20the\x20browser\x20console\x20(F12)\x20for\x20details.</p><p>Error:\x20','buttons','touchstart','random','PLAYER\x201','touchcancel','\x20PTS','center','lineTo','text','clientX','color','map','velocityX','cyan','round','2\x20PLAYER','<p\x20style=\x22color:white;\x22>CRITICAL\x20LOOP\x20ERROR.\x20Please\x20refresh.</p>','CHALLENGING\x20STAGE','pressed','24kYnGEg','5Jspgzk','toString','NUMBER\x20OF\x20HITS\x20','Error\x20stopping\x20auto\x20demo\x20timer:','776832DJFzsf','1\x20PLAYER','getGamepads','body','complete','Error\x20in\x20baseStartGame:','DOM\x20element\x20initialization\x20failed.','addColorStop','restore','white','shadowOffsetX','showing_capture_message','fillStyle','rgba(0,\x20191,\x20255,\x200.9)','measureText','PAUSED','message','rgba(0,\x200,\x200,\x200.8)','type','-\x20RESULTS\x20-','now','\x20EXT\x20LIFE\x20FOR\x20EVERY\x20','FIGHTER\x20CAPTURED','add','alpha','captureAnimationRotation','sqrt','default','attacking','padStart','clearRect','Written\x20By\x20Platini2000(c)','naturalWidth','warn','abs','Error\x20returning\x20to\x20menu.\x20Please\x20refresh\x20the\x20page.','has','capturedShipY','Error\x20creating\x20explosion:','single','following_bezier_path','NUMBER\x20OF\x20HITS','slice','isArray','state','Error\x20drawing\x20enemy:','preventDefault','textAlign','Error\x20rendering\x20floating\x20scores:','fillRect','height','source-atop','defineNormalWaveEntrancePaths\x20not\x20found!','SHOTS\x20FIRED','PERFECT\x20!','defineChallengingStagePaths\x20not\x20found!','FATAL\x20INITIALIZATION\x20ERROR:','initializeDOMElements\x20function\x20not\x20found!','min','loadHighScore\x20function\x20not\x20found.','top','velocityY','createLinearGradient','blue','style','find','20px\x20\x27Press\x20Start\x202P\x27','127044CRYSzn','forEach','fillText','Platini2000(c)\x20LTD','purple','2025\x20\x20\x20PLATINI2000(c)\x20\x20\x20LTD','GAME\x20OVER','function','Cannot\x20set\x20fallback\x20canvas\x20sizes.','EXTRA\x20LIFE','Critical\x20error:\x20Game\x20logic\x20not\x20loaded\x20correctly!','14318GAPCLn','isDamaged','\x201ST\x20LIFE\x20BONUS\x20FOR\x2020000\x20PTS','close','shadowOffsetY','none','save','rapid','img','naturalHeight','floor','push','shadowColor','red','Error\x20rendering\x20explosions:','toFixed','rotate','STAGE\x20','HIT-MISS-RATIO','SCORE','width','254517HzYNGP','!!!\x20CRITICAL\x20ERROR\x20IN\x20mainLoop:','</p></div>','SPECIAL\x20BONUS\x2010000\x20PTS','innerHTML','val','middle','clientY','grey','match','size','addEventListener','cos','closePath','STAGE','keydown','following_entrance_path','radius','window.close()\x20failed:','yellow','font','lighter','Error\x20starting\x20auto\x20demo\x20timer:','70LoYdtY','capturedShipDimensions','GAME\x20EXIT','925960ksqSSL','20px\x20sans-serif','BONUS\x20','changedTouches','globalAlpha','fill','<p\x20style=\x22color:white;\x22>Error\x20returning\x20to\x20menu.\x20Please\x20refresh.</p>','314808qngFvP','arc','STAGE\x20CLEARED','gamepadconnected','tintProgress','rgba(0,\x200,\x20139,\x200.5)','651519INVtkE','gamepaddisconnected','Failed\x20to\x20return\x20to\x20menu\x20after\x20loop\x20error:','stack','rotation','number','touchend','textBaseline','bold\x2018px\x20\x27Press\x20Start\x202P\x27','beginPath','bold\x2018px\x20\x27Arial\x20Black\x27,\x20Gadget,\x20sans-serif','length','WINS','globalCompositeOperation','drawImage','touchmove','sin','pointer','error','PLAYER\x202','targetX','2UP','left','1UP','getBoundingClientRect','PLAYER\x20','right','HIGH\x20SCORE','Cannot\x20start\x20game\x20-\x20canvas\x20not\x20ready.','cursor','orange','max','keyup','capturedShipX'];_0x5b02=function(){return _0x566c26;};return _0x5b02();}function initializeGame(){const _0x579ec1=_0xd18ba5;try{if(typeof initializeDOMElements==='function'){if(!initializeDOMElements()){console[_0x579ec1(0xc8)](_0x579ec1(0xfb));return;}}else{console[_0x579ec1(0xc8)](_0x579ec1(0x12e));return;}if(typeof resizeCanvases===_0x579ec1(0x13f))resizeCanvases();else{console[_0x579ec1(0xc8)]('resizeCanvases\x20not\x20found!');if(gameCanvas&&starrySkyCanvas&&retroGridCanvas){const _0x5e08e1=window['innerWidth'],_0x5f2dd1=window['innerHeight'];starrySkyCanvas[_0x579ec1(0x157)]=_0x5e08e1,starrySkyCanvas['height']=_0x5f2dd1,retroGridCanvas['width']=_0x5e08e1,retroGridCanvas[_0x579ec1(0x127)]=_0x5f2dd1,gameCanvas[_0x579ec1(0x157)]=_0x5e08e1,gameCanvas[_0x579ec1(0x127)]=_0x5f2dd1;}else{console['error'](_0x579ec1(0x140));return;}}typeof defineNormalWaveEntrancePaths===_0x579ec1(0x13f)?defineNormalWaveEntrancePaths():console[_0x579ec1(0xc8)](_0x579ec1(0x129));typeof defineChallengingStagePaths===_0x579ec1(0x13f)?defineChallengingStagePaths():console['error'](_0x579ec1(0x12c));if(typeof loadHighScore===_0x579ec1(0x13f))loadHighScore();else console[_0x579ec1(0x116)](_0x579ec1(0x130));window['addEventListener'](_0x579ec1(0x167),handleKeyDown),window[_0x579ec1(0x163)](_0x579ec1(0xd6),handleKeyUp),gameCanvas?(gameCanvas[_0x579ec1(0x163)](_0x579ec1(0xda),handleCanvasClick),gameCanvas[_0x579ec1(0x163)]('mousemove',handleCanvasMouseMove),gameCanvas[_0x579ec1(0x163)](_0x579ec1(0xde),handleTouchStart,{'passive':![]}),gameCanvas[_0x579ec1(0x163)](_0x579ec1(0xc5),handleTouchMove,{'passive':![]}),gameCanvas[_0x579ec1(0x163)](_0x579ec1(0xbc),handleTouchEnd,{'passive':![]}),gameCanvas['addEventListener'](_0x579ec1(0xe1),handleTouchCancel,{'passive':![]})):console[_0x579ec1(0xc8)]('Cannot\x20add\x20canvas\x20listeners:\x20gameCanvas\x20not\x20found\x20during\x20init.'),window[_0x579ec1(0x163)](_0x579ec1(0x17c),handleGamepadConnected),window[_0x579ec1(0x163)](_0x579ec1(0xb7),handleGamepadDisconnected),window[_0x579ec1(0x163)]('resize',resizeCanvases),showMenuState(),startMainLoop();}catch(_0x5c90d9){console[_0x579ec1(0xc8)](_0x579ec1(0x12d),_0x5c90d9,_0x5c90d9[_0x579ec1(0xb9)]),document[_0x579ec1(0xf8)][_0x579ec1(0x15c)]=_0x579ec1(0xdc)+_0x5c90d9[_0x579ec1(0x105)]+_0x579ec1(0x15a),mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);}}window[_0xd18ba5(0x163)]('load',initializeGame);