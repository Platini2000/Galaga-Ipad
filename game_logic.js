(function(_0x859ced,_0x405858){const _0x514865=_0x49db,_0x1bd423=_0x859ced();while(!![]){try{const _0xe55365=parseInt(_0x514865(0x155))/0x1+parseInt(_0x514865(0x1e2))/0x2+parseInt(_0x514865(0x212))/0x3*(parseInt(_0x514865(0x138))/0x4)+parseInt(_0x514865(0x1e9))/0x5+parseInt(_0x514865(0x22a))/0x6+parseInt(_0x514865(0x19c))/0x7*(parseInt(_0x514865(0x17e))/0x8)+parseInt(_0x514865(0x1f9))/0x9*(-parseInt(_0x514865(0x14f))/0xa);if(_0xe55365===_0x405858)break;else _0x1bd423['push'](_0x1bd423['shift']());}catch(_0x5108fd){_0x1bd423['push'](_0x1bd423['shift']());}}}(_0x3005,0xb5c9d));let currentWavePatternIndex=-0x1,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined;function resetGame(){const _0x3ec163=_0x49db;try{level=0x1,currentWavePatternIndex=-0x1,isPaused=![],isShowingIntro=![],introStep=0x0,isWaveTransitioning=![],isGridSoundPlaying=![],isEntrancePhaseActive=![],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,enemySpawnTimeouts[_0x3ec163(0x149)](clearTimeout),enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],gameOverSequenceStartTime=0x0,gameStartTime=0x0,stopAllGameSounds(),player1CompletedLevel=-0x1,forceCenterShipNextReset=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,player1Score=0x0,player2Score=0x0,player1Lives=0x3,player2Lives=0x3,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,lastGridFireCheckTime=0x0,firstEnemyLanded=![],player1LifeThresholdsMet=new Set(),player2LifeThresholdsMet=new Set(),currentPlayer=0x1,score=player1Score,playerLives=player1Lives,player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],scoreEarnedThisCS=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],isTouching=![],touchCurrentX=0x0,touchStartX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],isTouchFiringActive=![],resetAllMessages(),explosions=[],isChallengingStage=![],challengingStageEnemiesHit=0x0,isShowingResultsScreen=![],currentWaveDefinition=null,isFullGridWave=![],hitSparks=[],resetWave();}catch(_0x42956d){console[_0x3ec163(0x1ce)](_0x3ec163(0x147),_0x42956d),isWaveTransitioning=![],isGridSoundPlaying=![],isEntrancePhaseActive=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],currentWavePatternIndex=-0x1,player1CompletedLevel=-0x1,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,resetAllMessages(),forceCenterShipNextReset=![],player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isFullGridWave=![],hitSparks=[],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],player1LifeThresholdsMet=new Set(),player2LifeThresholdsMet=new Set(),playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],isTouching=![],touchCurrentX=0x0,touchStartX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],isTouchFiringActive=![];typeof enemySpawnTimeouts!=='undefined'&&Array[_0x3ec163(0x1d3)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x3ec163(0x149)](clearTimeout);enemySpawnTimeouts=[];if(typeof showMenuState==='function')showMenuState();}}function resetAllMessages(){showCsHitsMessage=![],csHitsMessageStartTime=0x0,showPerfectMessage=![],perfectMessageStartTime=0x0,showCsBonusScoreMessage=![],csBonusScoreMessageStartTime=0x0,showCSClearMessage=![],csClearMessageStartTime=0x0,showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,showReadyMessage=![],readyMessageStartTime=0x0,readyForNextWave=![],readyForNextWaveReset=![];}function stopAllGameSounds(){const _0x86882c=_0x49db;if(typeof playingLoopSources==='object'&&playingLoopSources!==null){const _0x4c87c1=Object[_0x86882c(0x1ee)](playingLoopSources);_0x4c87c1['forEach'](_0x549376=>{stopSound(_0x549376);});}isGridSoundPlaying=![],stopSound(captureSound),stopSound(entranceSound);}function getWaveType(_0x4387ca){const _0x3f8c01=_0x49db,_0x15565e=(_0x4387ca-0x1)%0x4;switch(_0x15565e){case 0x0:return _0x3f8c01(0x1ac);case 0x1:return'entrance_flight_1';case 0x2:return'challenging_stage';case 0x3:return _0x3f8c01(0x1ea);default:console[_0x3f8c01(0x1ce)](_0x3f8c01(0x190)+_0x15565e+_0x3f8c01(0x20f)+_0x4387ca);return _0x3f8c01(0x148);}}function generateWaveDefinition(_0x4924f5){const _0x1e0cb5=_0x49db;let _0x85bbb6=[];currentWavePatternIndex=-0x1;const _0x18a475=getWaveType(_0x4924f5);if(typeof waveEntrancePatterns===_0x1e0cb5(0x21c)||!Array[_0x1e0cb5(0x1d3)](waveEntrancePatterns)||waveEntrancePatterns[_0x1e0cb5(0x211)]<0x2)return console[_0x1e0cb5(0x1ce)]('CRITICAL:\x20waveEntrancePatterns\x20is\x20not\x20defined\x20or\x20invalid\x20in\x20generateWaveDefinition\x20(Level\x20'+_0x4924f5+')!'),[];if(_0x18a475===_0x1e0cb5(0x170))_0x85bbb6=[];else{if(_0x18a475==='full_grid'){currentWavePatternIndex=0x0;const _0x27ef30=waveEntrancePatterns[0x0];if(!_0x27ef30||_0x27ef30[_0x1e0cb5(0x211)]===0x0)console[_0x1e0cb5(0x1ce)](_0x1e0cb5(0x1ab)+_0x4924f5+_0x1e0cb5(0x1d2)),_0x85bbb6=[];else try{_0x85bbb6=JSON[_0x1e0cb5(0x15c)](JSON[_0x1e0cb5(0x13e)](_0x27ef30),(_0x4d761d,_0x48ef2b)=>{const _0x4de3d4=_0x1e0cb5;return _0x48ef2b&&typeof _0x48ef2b===_0x4de3d4(0x1da)&&_0x48ef2b[_0x4de3d4(0x193)]===ENEMY3_TYPE&&typeof _0x48ef2b[_0x4de3d4(0x19b)]==='undefined'&&(_0x48ef2b[_0x4de3d4(0x19b)]=![]),_0x48ef2b;});}catch(_0x4aa724){console[_0x1e0cb5(0x1ce)]('Error\x20deep\x20copying\x20selected\x20pattern\x200\x20for\x20Full\x20Grid:',_0x4aa724),_0x85bbb6=[];}}else{if(_0x18a475===_0x1e0cb5(0x1c2)){currentWavePatternIndex=0x0;const _0x150816=waveEntrancePatterns[0x0];if(!_0x150816||_0x150816[_0x1e0cb5(0x211)]===0x0)console[_0x1e0cb5(0x1ce)](_0x1e0cb5(0x1ab)+_0x4924f5+_0x1e0cb5(0x197)),_0x85bbb6=[];else try{_0x85bbb6=JSON[_0x1e0cb5(0x15c)](JSON[_0x1e0cb5(0x13e)](_0x150816),(_0x1ae85c,_0x27d47e)=>{const _0x4ca64b=_0x1e0cb5;return _0x27d47e&&typeof _0x27d47e==='object'&&_0x27d47e[_0x4ca64b(0x193)]===ENEMY3_TYPE&&typeof _0x27d47e['hasCapturedShip']===_0x4ca64b(0x21c)&&(_0x27d47e[_0x4ca64b(0x19b)]=![]),_0x27d47e;});}catch(_0x32f974){console['error'](_0x1e0cb5(0x14a),_0x32f974),_0x85bbb6=[];}}else{if(_0x18a475===_0x1e0cb5(0x1ea)){currentWavePatternIndex=0x1;const _0x47bf6b=waveEntrancePatterns[0x1];if(!_0x47bf6b||_0x47bf6b[_0x1e0cb5(0x211)]===0x0)console['error']('Wave\x20'+_0x4924f5+_0x1e0cb5(0x1ba)),_0x85bbb6=[];else try{_0x85bbb6=JSON[_0x1e0cb5(0x15c)](JSON[_0x1e0cb5(0x13e)](_0x47bf6b),(_0x12d74b,_0x38fe2f)=>{const _0x1d941b=_0x1e0cb5;return _0x38fe2f&&typeof _0x38fe2f===_0x1d941b(0x1da)&&_0x38fe2f[_0x1d941b(0x193)]===ENEMY3_TYPE&&typeof _0x38fe2f['hasCapturedShip']==='undefined'&&(_0x38fe2f[_0x1d941b(0x19b)]=![]),_0x38fe2f;});}catch(_0x172637){console[_0x1e0cb5(0x1ce)]('Error\x20deep\x20copying\x20selected\x20pattern\x201\x20for\x20Entrance\x202:',_0x172637),_0x85bbb6=[];}}else _0x85bbb6=[];}}}if(_0x18a475!==_0x1e0cb5(0x170)){if(typeof normalWaveEntrancePaths==='undefined'||Object['keys'](normalWaveEntrancePaths)[_0x1e0cb5(0x211)]===0x0)return console[_0x1e0cb5(0x1ce)]('CRITICAL:\x20normalWaveEntrancePaths\x20is\x20not\x20defined\x20or\x20empty\x20in\x20generateWaveDefinition\x20(Level\x20'+_0x4924f5+_0x1e0cb5(0x151)),_0x85bbb6;for(let _0xc8619d=_0x85bbb6[_0x1e0cb5(0x211)]-0x1;_0xc8619d>=0x0;_0xc8619d--){const _0x3173c1=_0x85bbb6[_0xc8619d];if(!normalWaveEntrancePaths?.[_0x3173c1[_0x1e0cb5(0x1b6)]]){console[_0x1e0cb5(0x154)]('Wave\x20'+_0x4924f5+_0x1e0cb5(0x1c5)+currentWavePatternIndex+_0x1e0cb5(0x1de)+_0x3173c1[_0x1e0cb5(0x1b6)]+_0x1e0cb5(0x133)),_0x85bbb6['splice'](_0xc8619d,0x1);continue;}if(_0x3173c1[_0x1e0cb5(0x1ad)]&&Array[_0x1e0cb5(0x1d3)](_0x3173c1[_0x1e0cb5(0x1ad)])){for(let _0x57a91e=_0x3173c1[_0x1e0cb5(0x1ad)][_0x1e0cb5(0x211)]-0x1;_0x57a91e>=0x0;_0x57a91e--){const _0x304592=_0x3173c1[_0x1e0cb5(0x1ad)][_0x57a91e];(!_0x304592||!normalWaveEntrancePaths?.[_0x304592[_0x1e0cb5(0x139)]])&&(console[_0x1e0cb5(0x154)](_0x1e0cb5(0x1ab)+_0x4924f5+_0x1e0cb5(0x1c5)+currentWavePatternIndex+',\x20Squadron\x20'+_0x3173c1[_0x1e0cb5(0x1b6)]+_0x1e0cb5(0x183)+_0x304592?.['entrancePathId']+_0x1e0cb5(0x14c)),_0x3173c1[_0x1e0cb5(0x1ad)]['splice'](_0x57a91e,0x1)),_0x304592&&_0x304592[_0x1e0cb5(0x193)]===ENEMY3_TYPE&&typeof _0x304592[_0x1e0cb5(0x19b)]===_0x1e0cb5(0x21c)&&(_0x304592['hasCapturedShip']=![]);}_0x3173c1['enemies'][_0x1e0cb5(0x211)]===0x0&&(console[_0x1e0cb5(0x154)](_0x1e0cb5(0x1ab)+_0x4924f5+',\x20Pattern\x20'+currentWavePatternIndex+':\x20Squadron\x20\x22'+_0x3173c1['pathId']+_0x1e0cb5(0x179)),_0x85bbb6[_0x1e0cb5(0x1d7)](_0xc8619d,0x1));}else console[_0x1e0cb5(0x154)](_0x1e0cb5(0x1ab)+_0x4924f5+',\x20Pattern\x20'+currentWavePatternIndex+':\x20Squadron\x20\x22'+_0x3173c1[_0x1e0cb5(0x1b6)]+_0x1e0cb5(0x1a2)),_0x85bbb6[_0x1e0cb5(0x1d7)](_0xc8619d,0x1);}}return _0x85bbb6;}function resetWave(){const _0x12ef6b=_0x49db;stopAllGameSounds(),isWaveTransitioning=![],isGridSoundPlaying=![],scoreEarnedThisCS=0x0,resetAllMessages(),isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],isTouching=![],touchCurrentX=0x0,touchStartX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],isTouchFiringActive=![];const _0x12b77b=player1Score,_0x189987=player2Score;_0x12b77b<highScore&&(player1TriggeredHighScoreSound=![]);_0x189987<highScore&&(player2TriggeredHighScoreSound=![]);bullets=[],enemyBullets=[],enemies=[],explosions=[],gridMoveDirection=0x1,lastEnemyDetachTime=0x0,currentGridOffsetX=0x0,isEntrancePhaseActive=![],currentWaveDefinition=null,currentWavePatternIndex=-0x1,enemySpawnTimeouts[_0x12ef6b(0x149)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,hitSparks=[],isFullGridWave=![],isChallengingStage=![];try{const _0x509690=getWaveType(level);isChallengingStage=_0x509690===_0x12ef6b(0x170),isFullGridWave=_0x509690===_0x12ef6b(0x1ac),challengingStageEnemiesHit=0x0,isShowingIntro=!![],introDisplayStartTime=Date[_0x12ef6b(0x207)]();if(isChallengingStage)isTwoPlayerMode?introStep=0x1:introStep=0x3;else{if(isFullGridWave){if(isTwoPlayerMode)introStep=0x1;else level===0x1?introStep=0x1:introStep=0x2;}else isTwoPlayerMode?introStep=0x1:introStep=0x2;}level===0x1&&currentPlayer===0x1&&playSound(startSound),gameCanvas?.[_0x12ef6b(0x1bc)]>0x0&&ship?(ship['y']=gameCanvas[_0x12ef6b(0x20a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,(!isManualControl||forceCenterShipNextReset)&&(isDualShipActive?ship['x']=gameCanvas['width']/0x2-ship[_0x12ef6b(0x1bc)]:ship['x']=gameCanvas[_0x12ef6b(0x1bc)]/0x2-ship[_0x12ef6b(0x1bc)]/0x2,ship[_0x12ef6b(0x221)]=ship['x'],smoothedShipX=ship['x'],aiNeedsStabilization=!![])):console['warn']('Canvas/ship\x20not\x20ready\x20in\x20resetWave.'),forceCenterShipNextReset=![];}catch(_0x44b2ef){console['error'](_0x12ef6b(0x1ef),_0x44b2ef),isWaveTransitioning=![],isGridSoundPlaying=![],isShowingIntro=![],introStep=0x0,isChallengingStage=![],isFullGridWave=![],resetAllMessages(),isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],currentWavePatternIndex=-0x1,squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,forceCenterShipNextReset=![],isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,hitSparks=[],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],isTouching=![],touchCurrentX=0x0,touchStartX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],isTouchFiringActive=![];typeof enemySpawnTimeouts!==_0x12ef6b(0x21c)&&Array[_0x12ef6b(0x1d3)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x12ef6b(0x149)](clearTimeout);enemySpawnTimeouts=[];if(typeof showMenuState===_0x12ef6b(0x21e))showMenuState();}}const createBulletSimple=(_0x1e6645,_0x491118=null)=>{const _0x3a0e02=_0x49db;if(!_0x1e6645||playerLives<=0x0||!isInGameState||!ship||isShipCaptured)return![];const _0x4c9fa8=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x3fe27c=_0x491118?_0x491118['x']:_0x1e6645['x']+_0x1e6645['width']/0x2,_0x358b38=_0x491118?_0x491118['y']:_0x1e6645['y']+_0x1e6645['height']/0x2;let _0x2a8bdf=0x0,_0x540379=_0x4c9fa8;const _0xfd3c63=ship['x']+ship[_0x3a0e02(0x1bc)]/0x2-_0x3fe27c,_0x3a5f2d=ship['y']+ship[_0x3a0e02(0x20a)]/0x2-_0x358b38,_0x5f0f12=Math['sqrt'](_0xfd3c63*_0xfd3c63+_0x3a5f2d*_0x3a5f2d);if(_0x5f0f12>0x0){let _0x3d3691=0x0;!isChallengingStage&&(_0x3d3691=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x379ac5=Math[_0x3a0e02(0x223)](_0x3a5f2d,_0xfd3c63);return _0x2a8bdf=Math[_0x3a0e02(0x14e)](_0x379ac5)*_0x4c9fa8*_0x3d3691,_0x540379=Math[_0x3a0e02(0x1d0)](_0x4c9fa8**0x2-_0x2a8bdf**0x2),_0x540379=Math['max'](_0x4c9fa8*(0x1-_0x3d3691)*0.5,_0x540379),_0x3a5f2d<0x0&&(_0x540379=Math['abs'](_0x540379)),enemyBullets[_0x3a0e02(0x177)]({'x':_0x3fe27c-ENEMY_BULLET_WIDTH/0x2,'y':_0x358b38,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x2a8bdf,'vy':_0x540379,'type':_0x1e6645[_0x3a0e02(0x193)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x2dad0c,_0x42abf2,_0x27a35e){const _0xee4110=_0x49db;if(isFullGridWave||isChallengingStage){if(_0x2dad0c?.[_0xee4110(0x1ad)]?.['length']>0x0){enemiesSpawnedThisWave+=_0x2dad0c['enemies']['length'];if(squadronCompletionStatus[_0x42abf2])squadronCompletionStatus[_0x42abf2][_0xee4110(0x21a)]=squadronCompletionStatus[_0x42abf2][_0xee4110(0x144)];}return![];}const _0x24f649=normalWaveEntrancePaths,_0x259769=_0x2dad0c['pathId'],_0x19ae8a=_0x24f649[_0x259769];if(!_0x19ae8a||_0x19ae8a[_0xee4110(0x211)]===0x0){console[_0xee4110(0x1ce)](_0xee4110(0x187)+level+_0xee4110(0x153)+_0x259769+'\x20for\x20squadron\x20'+_0x42abf2+_0xee4110(0x13f));if(_0x2dad0c?.[_0xee4110(0x1ad)]?.[_0xee4110(0x211)]>0x0){enemiesSpawnedThisWave+=_0x2dad0c[_0xee4110(0x1ad)]['length'];if(squadronCompletionStatus[_0x42abf2])squadronCompletionStatus[_0x42abf2][_0xee4110(0x21a)]=squadronCompletionStatus[_0x42abf2][_0xee4110(0x144)];}return![];}const _0x44a73e=setTimeout(()=>{const _0xba513=_0xee4110,_0x116fa6=enemySpawnTimeouts[_0xba513(0x185)](_0x44a73e);if(_0x116fa6>-0x1)enemySpawnTimeouts[_0xba513(0x1d7)](_0x116fa6,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||playerLives<=0x0||isShipCaptured||isFullGridWave){if(_0x2dad0c?.[_0xba513(0x1ad)]?.['length']>0x0){enemiesSpawnedThisWave+=_0x2dad0c['enemies'][_0xba513(0x211)];if(squadronCompletionStatus[_0x42abf2])squadronCompletionStatus[_0x42abf2]['completed']=squadronCompletionStatus[_0x42abf2][_0xba513(0x144)];}return;}try{!squadronEntranceFiringStatus[_0x42abf2]&&(squadronEntranceFiringStatus[_0x42abf2]={});squadronEntranceFiringStatus[_0x42abf2][_0xba513(0x186)]=Date[_0xba513(0x207)]()+_0x27a35e,squadronEntranceFiringStatus[_0x42abf2][_0xba513(0x16f)]=![],squadronEntranceFiringStatus[_0x42abf2][_0xba513(0x1cb)]=null;const _0x13cb76=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x1e51ff=_0x13cb76*0x2,_0x18e3ac=0x1;let _0x1c651d=0x0;_0x2dad0c['enemies'][_0xba513(0x149)]((_0x1d34fe,_0x301999)=>{const _0x2b6fa8=_0xba513;_0x1c651d++;if(!_0x1d34fe||!_0x1d34fe[_0x2b6fa8(0x193)]||typeof _0x1d34fe[_0x2b6fa8(0x200)]===_0x2b6fa8(0x21c)||typeof _0x1d34fe[_0x2b6fa8(0x19e)]===_0x2b6fa8(0x21c)||!_0x1d34fe[_0x2b6fa8(0x139)]){console[_0x2b6fa8(0x1ce)](_0x2b6fa8(0x1f0)+_0x42abf2+_0x2b6fa8(0x136)+_0x259769+_0x2b6fa8(0x218)+_0x301999+_0x2b6fa8(0x226)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x42abf2]&&squadronCompletionStatus[_0x42abf2][_0x2b6fa8(0x21a)]++;return;}const _0x38c2b1=_0x1d34fe[_0x2b6fa8(0x139)],_0xd642ac=_0x24f649[_0x38c2b1];if(!_0xd642ac||_0xd642ac[_0x2b6fa8(0x211)]===0x0){}const _0x48155c=_0xd642ac&&_0xd642ac[_0x2b6fa8(0x211)]>0x0?_0xd642ac:_0x19ae8a,_0x1b2eec=_0xd642ac&&_0xd642ac[_0x2b6fa8(0x211)]>0x0?_0x38c2b1:_0x259769;let _0x2fc166=0x0;const _0x4ee87d=getWaveType(level),_0x33bdbc=_0x4ee87d===_0x2b6fa8(0x1ea)&&(_0x42abf2===0x2||_0x42abf2===0x3);if(_0x33bdbc){const _0x5a76e7=Math[_0x2b6fa8(0x1d1)](_0x301999/0x2);_0x301999%0x2===0x0?_0x2fc166=_0x5a76e7*_0x1e51ff:_0x2fc166=_0x5a76e7*_0x1e51ff+_0x18e3ac;}else _0x2fc166=_0x301999*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x5185dd=setTimeout(()=>{const _0x28e83d=_0x2b6fa8,_0xc56c97=enemySpawnTimeouts['indexOf'](_0x5185dd);if(_0xc56c97>-0x1)enemySpawnTimeouts['splice'](_0xc56c97,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||playerLives<=0x0||isShipCaptured||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x42abf2]&&squadronCompletionStatus[_0x42abf2][_0x28e83d(0x21a)]++;return;}try{let _0x4cb739=_0x1d34fe['type'],_0x1e4791=_0x4cb739===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x29d80c,_0x148e87;if(_0x4cb739===ENEMY1_TYPE)_0x29d80c=ENEMY1_WIDTH,_0x148e87=ENEMY1_HEIGHT;else _0x4cb739===ENEMY3_TYPE?(_0x29d80c=BOSS_WIDTH,_0x148e87=BOSS_HEIGHT):(_0x29d80c=ENEMY_WIDTH,_0x148e87=ENEMY_HEIGHT);let _0x595674=0x0,_0x17e59c=0x0;if(_0x48155c&&_0x48155c[0x0]?.['p0'])_0x595674=_0x48155c[0x0]['p0']['x'],_0x17e59c=_0x48155c[0x0]['p0']['y'];else{console[_0x28e83d(0x1ce)](_0x28e83d(0x210)+_0x1b2eec+_0x28e83d(0x156)+_0x42abf2+',\x20Enemy\x20'+_0x301999+_0x28e83d(0x191));throw new Error(_0x28e83d(0x210)+_0x1b2eec);}let _0xd564ea,_0xa87140;try{const {x:_0x3fc143,y:_0x37a49b}=getCurrentGridSlotPosition(_0x1d34fe['gridRow'],_0x1d34fe[_0x28e83d(0x19e)],_0x29d80c);_0xd564ea=_0x3fc143,_0xa87140=_0x37a49b;}catch(_0x7bed4c){console['error'](_0x28e83d(0x1b5)+_0x1d34fe[_0x28e83d(0x193)]+_0x28e83d(0x1e3)+_0x1d34fe[_0x28e83d(0x200)]+','+_0x1d34fe[_0x28e83d(0x19e)]+']',_0x7bed4c),_0xd564ea=gameCanvas?.[_0x28e83d(0x1bc)]/0x2||0xc8,_0xa87140=ENEMY_TOP_MARGIN+_0x1d34fe[_0x28e83d(0x200)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x19fb04=0x0;const _0x2296f8=_0x33bdbc,_0x447081=_0x2296f8&&_0x301999%0x2!==0x0;_0x447081?_0x19fb04=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x19fb04=-_0x301999*PATH_T_OFFSET_PER_ENEMY;const _0x2749ee={'x':_0x595674,'y':_0x17e59c,'width':_0x29d80c,'height':_0x148e87,'targetGridX':_0xd564ea,'targetGridY':_0xa87140,'speed':0x0,'state':_0x28e83d(0x227),'gridRow':_0x1d34fe[_0x28e83d(0x200)],'gridCol':_0x1d34fe[_0x28e83d(0x19e)],'type':_0x4cb739,'health':_0x1e4791,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x1b2eec,'pathSegmentIndex':0x0,'pathT':_0x19fb04,'squadronId':_0x42abf2,'squadronEnemyIndex':_0x301999,'id':'enemy-entr-'+_0x42abf2+'-'+_0x301999+'-'+Date[_0x28e83d(0x207)]()+'-'+Math['random']()[_0x28e83d(0x181)](0x24)[_0x28e83d(0x162)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x4cb739===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x4cb739===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies['push'](_0x2749ee),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x42abf2]&&squadronCompletionStatus[_0x42abf2]['completed']++,_0x301999===0x0&&(squadronEntranceFiringStatus[_0x42abf2]&&(squadronEntranceFiringStatus[_0x42abf2][_0x28e83d(0x1cb)]=_0x2749ee['id']));}catch(_0xc6b5a2){console[_0x28e83d(0x1ce)](_0x28e83d(0x1f6)+_0x42abf2+_0x28e83d(0x14d)+_0x301999+_0x28e83d(0x204)+_0x259769+'):',_0xc6b5a2),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x42abf2]&&squadronCompletionStatus[_0x42abf2][_0x28e83d(0x21a)]++;}},_0x2fc166);enemySpawnTimeouts[_0x2b6fa8(0x177)](_0x5185dd);});const _0x489fcb=setTimeout(()=>{const _0x1f24cf=_0xba513,_0x36313a=enemySpawnTimeouts[_0x1f24cf(0x185)](_0x489fcb);if(_0x36313a>-0x1)enemySpawnTimeouts[_0x1f24cf(0x1d7)](_0x36313a,0x1);const _0x23b17f=squadronEntranceFiringStatus[_0x42abf2],_0x2e693b=_0x23b17f?_0x23b17f[_0x1f24cf(0x1cb)]:null;if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured||isFullGridWave||!_0x2e693b)return;const _0x5328ea=enemies[_0x1f24cf(0x1c0)](_0x26ff2d=>_0x26ff2d&&_0x26ff2d['id']===_0x2e693b);_0x5328ea&&((_0x5328ea[_0x1f24cf(0x1f7)]==='following_entrance_path'||_0x5328ea['state']===_0x1f24cf(0x216)||_0x5328ea['state']===_0x1f24cf(0x182))&&fireFixedEnemyBurst(_0x2e693b,null,0x0,0x3));},ENTRANCE_SQUADRON_FIRE_DELAY_MS);enemySpawnTimeouts[_0xba513(0x177)](_0x489fcb);}catch(_0xdffad1){console[_0xba513(0x1ce)](_0xba513(0x16a)+_0x42abf2+'\x20(Path\x20'+_0x259769+'):',_0xdffad1),_0x2dad0c?.[_0xba513(0x1ad)]?.[_0xba513(0x211)]>0x0&&(enemiesSpawnedThisWave+=_0x2dad0c[_0xba513(0x1ad)][_0xba513(0x211)],squadronCompletionStatus[_0x42abf2]&&(squadronCompletionStatus[_0x42abf2]['completed']=squadronCompletionStatus[_0x42abf2][_0xba513(0x144)]));}},_0x27a35e);return enemySpawnTimeouts['push'](_0x44a73e),!![];};function startChallengingStageSequence(){const _0x1ec753=_0x49db;isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0x1ec753(0x149)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object['keys'](challengingStagePaths)[_0x1ec753(0x211)]===0x0&&defineChallengingStagePaths();if(Object[_0x1ec753(0x1ee)](challengingStagePaths)[_0x1ec753(0x211)]===0x0){console[_0x1ec753(0x1ce)](_0x1ec753(0x209)),isWaveTransitioning=!![],setTimeout(()=>{const _0x11a7db=_0x1ec753;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x11a7db(0x21e)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x407933=['CS3_DiveLoopL_Sharp','CS3_DiveLoopR_Sharp','CS_HorizontalFlyByL',_0x1ec753(0x229)],_0x1ce714=[_0x1ec753(0x18d),_0x1ec753(0x1fe),_0x1ec753(0x1b0),_0x1ec753(0x228)],_0x5b9e9c=[..._0x407933,..._0x1ce714];for(const _0x45d466 of _0x5b9e9c){if(!challengingStagePaths[_0x1ec753(0x1e0)](_0x45d466)){console[_0x1ec753(0x1ce)](_0x1ec753(0x146)+_0x45d466+'\x22\x20not\x20found!\x20Aborting\x20CS.'),isWaveTransitioning=!![],setTimeout(()=>{const _0x5d56d6=_0x1ec753;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x5d56d6(0x21e)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x4e7f52=[..._0x407933],_0x1cb3cf=[..._0x1ce714][_0x1ec753(0x22e)](()=>Math['random']()-0.5);_0x4e7f52[_0x1ec753(0x177)](..._0x1cb3cf),currentWaveDefinition=[];for(let _0x2d452f=0x0;_0x2d452f<CHALLENGING_STAGE_SQUADRON_COUNT;_0x2d452f++){const _0x29a13d=_0x4e7f52[_0x2d452f%_0x4e7f52[_0x1ec753(0x211)]],_0x48a654={'pathId':_0x29a13d,'enemies':[]};for(let _0x475487=0x0;_0x475487<CHALLENGING_STAGE_SQUADRON_SIZE;_0x475487++){let _0x4fdeb7=_0x475487<Math[_0x1ec753(0x1d1)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x48a654['enemies'][_0x1ec753(0x177)]({'type':_0x4fdeb7,'entrancePathId':_0x29a13d});}currentWaveDefinition[_0x1ec753(0x177)](_0x48a654);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x1ec753(0x211)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x12b617=0x0;const _0x149b4f=-0x1c,_0x2291ea=Math[_0x1ec753(0x1d1)](Math[_0x1ec753(0x1c9)](0x0,level-0x3)/0x4)+0x1,_0x45a7a4=scaleValue(_0x2291ea,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0x1ec753(0x149)]((_0x7e5e6f,_0x1ac02b)=>{const _0x5a4334=_0x1ec753;let _0x4fe0dd=0x0;if(_0x1ac02b<=0x1)_0x4fe0dd=0x0;else _0x1ac02b<=0x3?_0x4fe0dd=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x4fe0dd=(_0x1ac02b-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x5903f8=_0x45a7a4;(_0x1ac02b===0x2||_0x1ac02b===0x3)&&(_0x5903f8*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x1e07bc=setTimeout(()=>{const _0x5df647=_0x49db,_0x3a29ed=enemySpawnTimeouts['indexOf'](_0x1e07bc);if(_0x3a29ed>-0x1)enemySpawnTimeouts[_0x5df647(0x1d7)](_0x3a29ed,0x1);if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&playerLives>0x0)try{const _0x14ab6a=_0x7e5e6f[_0x5df647(0x1b6)],_0x2ae1e2=challengingStagePaths,_0x2cfa4a=_0x2ae1e2[_0x14ab6a];if(!_0x2cfa4a||_0x2cfa4a['length']===0x0){console[_0x5df647(0x1ce)](_0x5df647(0x219)+_0x14ab6a+'\x20for\x20squadron\x20'+_0x1ac02b+_0x5df647(0x1e7)),enemiesSpawnedThisWave+=_0x7e5e6f[_0x5df647(0x1ad)][_0x5df647(0x211)];return;}let _0x408bdd=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x1ac02b>=0x2&&_0x1ac02b<=0x3)_0x408bdd=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x1ac02b>=0x4&&(_0x408bdd=CS_LOOP_ATTACK_SPAWN_DELAY);let _0x165997=0x0;_0x7e5e6f[_0x5df647(0x1ad)][_0x5df647(0x149)]((_0x4ad225,_0x10f94e)=>{const _0x1b1a6b=_0x5df647;_0x165997++;if(!_0x4ad225||!_0x4ad225[_0x1b1a6b(0x193)]){console[_0x1b1a6b(0x1ce)](_0x1b1a6b(0x1ca)+_0x1ac02b+_0x1b1a6b(0x1f8)+_0x10f94e+_0x1b1a6b(0x226)),enemiesSpawnedThisWave++;return;}const _0x476507=_0x10f94e*_0x408bdd,_0x5e8934=setTimeout(()=>{const _0x5e9e37=_0x1b1a6b,_0x12a60a=enemySpawnTimeouts[_0x5e9e37(0x185)](_0x5e8934);if(_0x12a60a>-0x1)enemySpawnTimeouts[_0x5e9e37(0x1d7)](_0x12a60a,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||playerLives<=0x0){enemiesSpawnedThisWave++;return;}try{let _0x2d24c1=_0x4ad225['type'],_0x21f616=_0x2d24c1===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0xd12dd1,_0x3f60bc;if(_0x2d24c1===ENEMY1_TYPE)_0xd12dd1=ENEMY1_WIDTH,_0x3f60bc=ENEMY1_HEIGHT;else _0x2d24c1===ENEMY3_TYPE?(_0xd12dd1=BOSS_WIDTH,_0x3f60bc=BOSS_HEIGHT):(_0xd12dd1=ENEMY_WIDTH,_0x3f60bc=ENEMY_HEIGHT);let _0xe2476e=0x0,_0x457cbb=0x0;if(_0x2cfa4a[0x0]?.['p0'])_0xe2476e=_0x2cfa4a[0x0]['p0']['x'],_0x457cbb=_0x2cfa4a[0x0]['p0']['y'];else throw new Error(_0x5e9e37(0x1ff)+_0x14ab6a);(_0x1ac02b===0x0||_0x1ac02b===0x1)&&(_0xe2476e+=_0x149b4f);const _0x2dd7a8=-_0x10f94e*PATH_T_OFFSET_PER_ENEMY,_0x5cdee2={'x':_0xe2476e,'y':_0x457cbb,'width':_0xd12dd1,'height':_0x3f60bc,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x5e9e37(0x188),'gridRow':-0x1,'gridCol':-0x1,'type':_0x2d24c1,'health':_0x21f616,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x14ab6a,'pathSegmentIndex':0x0,'pathT':_0x2dd7a8,'squadronId':_0x1ac02b,'id':'enemy-cs-'+_0x1ac02b+'-'+_0x10f94e+'-'+Date[_0x5e9e37(0x207)]()+'-'+Math[_0x5e9e37(0x137)]()[_0x5e9e37(0x181)](0x24)[_0x5e9e37(0x162)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x2d24c1===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x2d24c1===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x5903f8};enemies['push'](_0x5cdee2),enemiesSpawnedThisWave++;}catch(_0x1545c9){console['error'](_0x5e9e37(0x134)+_0x1ac02b+',\x20Idx\x20'+_0x10f94e+_0x5e9e37(0x204)+_0x14ab6a+'):',_0x1545c9),enemiesSpawnedThisWave++;}},_0x476507);enemySpawnTimeouts[_0x1b1a6b(0x177)](_0x5e8934),_0x12b617++;});}catch(_0x57ee91){console[_0x5df647(0x1ce)](_0x5df647(0x1a1)+_0x1ac02b+':',_0x57ee91),enemiesSpawnedThisWave+=_0x7e5e6f['enemies'][_0x5df647(0x211)];}else _0x7e5e6f?.[_0x5df647(0x1ad)]?.[_0x5df647(0x211)]>0x0&&(enemiesSpawnedThisWave+=_0x7e5e6f[_0x5df647(0x1ad)][_0x5df647(0x211)]);},_0x4fe0dd);enemySpawnTimeouts[_0x5a4334(0x177)](_0x1e07bc);});}else console[_0x1ec753(0x154)](_0x1ec753(0x1be)),isWaveTransitioning=!![],setTimeout(()=>{const _0x330e7e=_0x1ec753;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x330e7e(0x21e)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0xc8b899,_0x19ac32,_0x52098b){const _0x1a9149=_0x49db;if(!_0xc8b899||isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x549bba=Math[_0x1a9149(0x1a8)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x86ddb1=0x0;_0x86ddb1<_0x549bba;_0x86ddb1++){const _0x30b7eb=_0x52098b+_0x86ddb1*ENTRANCE_FIRE_BURST_DELAY_MS,_0x3b34e7=setTimeout(()=>{const _0x4c1317=_0x1a9149;try{const _0x291bbf=enemySpawnTimeouts[_0x4c1317(0x185)](_0x3b34e7);_0x291bbf>-0x1&&enemySpawnTimeouts[_0x4c1317(0x1d7)](_0x291bbf,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x36d3ae=enemies[_0x4c1317(0x1c0)](_0x50b2c1=>_0x50b2c1&&_0x50b2c1['id']===_0xc8b899);_0x36d3ae&&_0x36d3ae['state']===_0x19ac32&&(createBulletSimple(_0x36d3ae)&&(_0x86ddb1===0x0&&playSound(enemyShootSound),_0x36d3ae[_0x4c1317(0x164)]=Date[_0x4c1317(0x207)]()));}catch(_0x1a6db8){console[_0x4c1317(0x1ce)]('Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x86ddb1+0x1)+'/'+_0x549bba+')\x20for\x20'+_0xc8b899+':',_0x1a6db8);}},_0x30b7eb);enemySpawnTimeouts[_0x1a9149(0x177)](_0x3b34e7);}}function fireFixedEnemyBurst(_0x2a8f33,_0x142c20,_0x4b25b2,_0xd7e903){if(!_0x2a8f33||isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured||_0xd7e903<=0x0)return;for(let _0x697a4=0x0;_0x697a4<_0xd7e903;_0x697a4++){const _0x31bd6e=_0x4b25b2+_0x697a4*ENTRANCE_FIRE_BURST_DELAY_MS,_0x470239=setTimeout(()=>{const _0x2a4de0=_0x49db;try{const _0x46acc3=enemySpawnTimeouts['indexOf'](_0x470239);_0x46acc3>-0x1&&enemySpawnTimeouts[_0x2a4de0(0x1d7)](_0x46acc3,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x451050=enemies['find'](_0x461cc3=>_0x461cc3&&_0x461cc3['id']===_0x2a8f33);_0x451050&&((_0x142c20===null||_0x451050['state']===_0x142c20)&&(createBulletSimple(_0x451050)&&(_0x697a4===0x0&&playSound(enemyShootSound),_0x451050[_0x2a4de0(0x164)]=Date[_0x2a4de0(0x207)]())));}catch(_0x2ca378){console[_0x2a4de0(0x1ce)](_0x2a4de0(0x1ae)+(_0x697a4+0x1)+'/'+_0xd7e903+_0x2a4de0(0x21f)+_0x2a8f33+':',_0x2ca378);}},_0x31bd6e);enemySpawnTimeouts['push'](_0x470239);}}function startFullGridWave(){const _0x31b605=_0x49db;if(!currentWaveDefinition||currentWaveDefinition[_0x31b605(0x211)]===0x0||!isFullGridWave){console[_0x31b605(0x1ce)](_0x31b605(0x15f)),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(entranceSound),enemySpawnTimeouts[_0x31b605(0x149)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x401b4e=0x0;currentWaveDefinition[_0x31b605(0x149)]((_0x436026,_0x4cfe64)=>{const _0x754869=_0x31b605;let _0x119755=0x0;_0x436026&&_0x436026[_0x754869(0x1ad)]&&Array[_0x754869(0x1d3)](_0x436026[_0x754869(0x1ad)])?(_0x119755=_0x436026[_0x754869(0x1ad)]['length'],_0x436026[_0x754869(0x1ad)][_0x754869(0x149)]((_0x5b3fb0,_0x36b371)=>{const _0x201049=_0x754869;try{if(!_0x5b3fb0||!_0x5b3fb0[_0x201049(0x193)]||typeof _0x5b3fb0['gridRow']===_0x201049(0x21c)||typeof _0x5b3fb0[_0x201049(0x19e)]===_0x201049(0x21c)){console[_0x201049(0x1ce)](_0x201049(0x1db)+_0x4cfe64+',\x20index\x20'+_0x36b371+_0x201049(0x226));return;}let _0x3c1434=_0x5b3fb0['type'],_0x43cccb=_0x3c1434===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x942aa4,_0x25c6d0;if(_0x3c1434===ENEMY1_TYPE)_0x942aa4=ENEMY1_WIDTH,_0x25c6d0=ENEMY1_HEIGHT;else _0x3c1434===ENEMY3_TYPE?(_0x942aa4=BOSS_WIDTH,_0x25c6d0=BOSS_HEIGHT):(_0x942aa4=ENEMY_WIDTH,_0x25c6d0=ENEMY_HEIGHT);let _0x56387d,_0x3f7d3f;try{const {x:_0x488d7b,y:_0x1875ef}=getCurrentGridSlotPosition(_0x5b3fb0[_0x201049(0x200)],_0x5b3fb0[_0x201049(0x19e)],_0x942aa4);_0x56387d=_0x488d7b,_0x3f7d3f=_0x1875ef;}catch(_0x8f874e){console[_0x201049(0x1ce)](_0x201049(0x173)+_0x5b3fb0[_0x201049(0x193)]+'\x20at\x20['+_0x5b3fb0[_0x201049(0x200)]+','+_0x5b3fb0['gridCol']+']',_0x8f874e),_0x56387d=gameCanvas?.[_0x201049(0x1bc)]/0x2||0xc8,_0x3f7d3f=ENEMY_TOP_MARGIN+_0x5b3fb0[_0x201049(0x200)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x2f823c={'x':_0x56387d,'y':_0x3f7d3f,'width':_0x942aa4,'height':_0x25c6d0,'targetGridX':_0x56387d,'targetGridY':_0x3f7d3f,'speed':0x0,'state':_0x201049(0x182),'gridRow':_0x5b3fb0['gridRow'],'gridCol':_0x5b3fb0[_0x201049(0x19e)],'type':_0x3c1434,'health':_0x43cccb,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x4cfe64,'squadronEnemyIndex':_0x36b371,'id':_0x201049(0x1a6)+_0x4cfe64+'-'+_0x36b371+'-'+Date[_0x201049(0x207)]()+'-'+Math[_0x201049(0x137)]()[_0x201049(0x181)](0x24)[_0x201049(0x162)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x201049(0x1fd),'hasCapturedShip':_0x3c1434===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x3c1434===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x201049(0x177)](_0x2f823c),_0x401b4e++;}catch(_0x1f2238){console[_0x201049(0x1ce)](_0x201049(0x1a7)+_0x4cfe64+_0x201049(0x14d)+_0x36b371+'):',_0x1f2238);}})):console['warn'](_0x754869(0x1dd)+_0x4cfe64+_0x754869(0x176)),squadronCompletionStatus[_0x4cfe64]={'completed':_0x119755,'total':_0x119755};}),totalEnemiesScheduledForWave=_0x401b4e,enemiesSpawnedThisWave=_0x401b4e,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&playSound(gridBackgroundSound,!![]),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x31b605(0x207)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![];}function scheduleEntranceFlightWave(){const _0x519697=_0x49db;if(isFullGridWave||isChallengingStage){console[_0x519697(0x154)](_0x519697(0x225)+level+_0x519697(0x220)+isFullGridWave+_0x519697(0x1ed)+isChallengingStage+_0x519697(0x15d)),isEntrancePhaseActive=![];return;}if(!currentWaveDefinition||currentWaveDefinition['length']===0x0){console[_0x519697(0x154)](_0x519697(0x201)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}const _0x3876ab=normalWaveEntrancePaths;if(Object[_0x519697(0x1ee)](_0x3876ab)['length']===0x0){console['error'](_0x519697(0x1b7)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0x519697(0x149)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,currentWaveDefinition[_0x519697(0x149)](_0x29d7eb=>totalEnemiesScheduledForWave+=_0x29d7eb[_0x519697(0x1ad)][_0x519697(0x211)]),enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={},isEntrancePhaseActive=!![],currentWaveDefinition[_0x519697(0x149)]((_0x508216,_0x164c9e)=>{const _0x3892ea=_0x519697;squadronCompletionStatus[_0x164c9e]={'completed':0x0,'total':_0x508216[_0x3892ea(0x1ad)]?.[_0x3892ea(0x211)]||0x0,'hasFiredPostLanding':![]};const _0x16c352=_0x164c9e*NORMAL_WAVE_SQUADRON_INTERVAL;squadronEntranceFiringStatus[_0x164c9e]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x508216,_0x164c9e,_0x16c352);});}function checkAndScheduleNextSquadron(_0x24f88c){}function resetJustReturnedFlags(_0x4fd3c4){const _0x1de753=_0x49db;enemies[_0x1de753(0x149)](_0x483586=>{const _0x225304=_0x1de753;let _0x178d2b=![];if(_0x4fd3c4 instanceof Set)_0x178d2b=_0x4fd3c4[_0x225304(0x208)](_0x483586['id']);else typeof _0x4fd3c4===_0x225304(0x174)&&(_0x178d2b=_0x483586['id']===_0x4fd3c4);_0x483586&&_0x483586[_0x225304(0x1f7)]==='in_grid'&&_0x483586[_0x225304(0x178)]&&!_0x178d2b&&(_0x483586[_0x225304(0x178)]=![]);});}function generateAttackPath(_0x227c39){const _0x1187b4=_0x49db;try{if(!_0x227c39||!gameCanvas)return[];const _0x3af1bb=_0x227c39[_0x1187b4(0x193)]===ENEMY3_TYPE?BOSS_WIDTH:_0x227c39[_0x1187b4(0x193)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x5619fe=_0x227c39[_0x1187b4(0x193)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x227c39[_0x1187b4(0x193)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x596609=_0x3af1bb*0.5,_0x5d6171=gameCanvas[_0x1187b4(0x1bc)],_0x511f5f=gameCanvas[_0x1187b4(0x20a)];let _0x576b31=[];const _0x2e88ac={'x':_0x227c39['x'],'y':_0x227c39['y']},_0x8dda16=Math[_0x1187b4(0x158)](_0x511f5f*0.06,_0x5619fe*1.8),_0x5ca20c=Math[_0x1187b4(0x158)](_0x5d6171*0.04,_0x3af1bb*1.2),_0x36b357=_0x227c39['x']+_0x3af1bb/0x2<_0x5d6171/0x2?0x1:-0x1,_0x50311d={'x':_0x2e88ac['x']-_0x36b357*_0x5ca20c*0.6,'y':_0x2e88ac['y']-_0x8dda16};_0x50311d['x']=Math[_0x1187b4(0x1c9)](_0x596609,Math[_0x1187b4(0x158)](_0x5d6171-_0x596609-_0x3af1bb,_0x50311d['x'])),_0x50311d['y']=Math[_0x1187b4(0x1c9)](_0x596609,_0x50311d['y']);const _0x39ed30={'x':_0x2e88ac['x']+_0x36b357*_0x5ca20c*0.1,'y':_0x2e88ac['y']-_0x8dda16*1.4},_0x24aed8={'x':_0x50311d['x']+_0x36b357*_0x5ca20c*0.3,'y':_0x2e88ac['y']-_0x8dda16*1.5},_0x437ffc={'p0':_0x2e88ac,'p1':_0x39ed30,'p2':_0x24aed8,'p3':_0x50311d};_0x576b31[_0x1187b4(0x177)](_0x437ffc);const _0x5757dc=_0x50311d,_0x4669ae=_0x511f5f*0.45,_0x5bd237=_0x5d6171*0.22,_0x58f029=_0x511f5f*0.28,_0x22751a=0.5,_0x15e3b6=0.6,_0x24090b=_0x511f5f*0.85,_0x4ab125=Math[_0x1187b4(0x1d1)](Math[_0x1187b4(0x137)]()*0x3);let _0x2134a0=[];if(_0x4ab125===0x0){const _0x2e4c05=_0x4669ae+Math[_0x1187b4(0x137)]()*_0x511f5f*0.1,_0x2f9e26=_0x5bd237+Math[_0x1187b4(0x137)]()*_0x5d6171*0.08,_0x505771=_0x58f029+Math['random']()*_0x511f5f*0.08,_0x23fc48=_0x5757dc['x']+_0x36b357*_0x2f9e26*0.5,_0x5c1020=Math[_0x1187b4(0x158)](_0x24090b,_0x5757dc['y']+_0x2e4c05),_0x5c4927=_0x23fc48+_0x36b357*_0x2f9e26*0.5,_0x4be7ac=Math[_0x1187b4(0x1c9)](_0x5757dc['y']+0x14,_0x5c1020-_0x505771),_0x4aac52=_0x5c4927-_0x36b357*_0x2f9e26*0.9,_0x3df4c5=Math[_0x1187b4(0x1c9)](_0x5757dc['y']+0x28,_0x4be7ac+_0x505771*0.6),_0x3d0ca2=_0x4aac52-_0x36b357*_0x2f9e26*0.3,_0x58e296=_0x511f5f+_0x5619fe*0x2,_0x20f2ce=Math[_0x1187b4(0x1c9)](_0x596609,Math[_0x1187b4(0x158)](_0x5d6171-_0x596609-_0x3af1bb,_0x23fc48)),_0x3e86eb=Math[_0x1187b4(0x1c9)](_0x596609,Math[_0x1187b4(0x158)](_0x5d6171-_0x596609-_0x3af1bb,_0x5c4927)),_0x2fba42=Math[_0x1187b4(0x1c9)](_0x596609,Math[_0x1187b4(0x158)](_0x5d6171-_0x596609-_0x3af1bb,_0x4aac52)),_0x1e875f={'x':_0x5757dc['x'],'y':_0x5757dc['y']+_0x2e4c05*_0x15e3b6*0.5},_0x3a004f={'x':_0x20f2ce-_0x36b357*_0x2f9e26*_0x22751a,'y':_0x5c1020},_0x5ac03e={'x':_0x20f2ce,'y':_0x5c1020},_0x5e5e28={'x':_0x20f2ce+_0x36b357*_0x2f9e26*_0x22751a,'y':_0x5c1020},_0x2cf54c={'x':_0x3e86eb,'y':_0x4be7ac+_0x505771*_0x15e3b6},_0xaded9b={'x':_0x3e86eb,'y':_0x4be7ac},_0x2d981b={'x':_0x3e86eb,'y':_0x4be7ac-_0x505771*_0x15e3b6*0.5},_0x57e7c6={'x':_0x2fba42+_0x36b357*_0x2f9e26*_0x22751a,'y':_0x3df4c5},_0x531994={'x':_0x2fba42,'y':_0x3df4c5},_0x19862e={'x':_0x531994['x'],'y':_0x531994['y']+_0x511f5f*0.1},_0x4366f1={'x':_0x3d0ca2,'y':_0x58e296-_0x511f5f*0.2},_0x4f20ec={'x':_0x3d0ca2,'y':_0x58e296};_0x2134a0=[{'p0':_0x5757dc,'p1':_0x1e875f,'p2':_0x3a004f,'p3':_0x5ac03e},{'p0':_0x5ac03e,'p1':_0x5e5e28,'p2':_0x2cf54c,'p3':_0xaded9b},{'p0':_0xaded9b,'p1':_0x2d981b,'p2':_0x57e7c6,'p3':_0x531994},{'p0':_0x531994,'p1':_0x19862e,'p2':_0x4366f1,'p3':_0x4f20ec}];}else{if(_0x4ab125===0x1){const _0x20f822=_0x4669ae*0.8+Math['random']()*_0x511f5f*0.1,_0x3bf0a2=_0x5bd237*1.2+Math[_0x1187b4(0x137)]()*_0x5d6171*0.1,_0x5f97fd=_0x58f029*0.7+Math[_0x1187b4(0x137)]()*_0x511f5f*0.1,_0x1e0b69=_0x5757dc['x']+_0x36b357*_0x3bf0a2*0.4,_0x53bd78=Math['min'](_0x24090b-_0x5f97fd*0.5,_0x5757dc['y']+_0x20f822*0.6),_0x12dff4=_0x1e0b69+_0x36b357*_0x3bf0a2*0.6,_0x345382=Math['min'](_0x24090b,_0x53bd78+_0x5f97fd),_0x439913=_0x12dff4-_0x36b357*_0x3bf0a2*0.5,_0x41e622=_0x511f5f+_0x5619fe*0x2,_0x267d51=Math['max'](_0x596609,Math['min'](_0x5d6171-_0x596609-_0x3af1bb,_0x1e0b69)),_0x4c6be1=Math['max'](_0x596609,Math[_0x1187b4(0x158)](_0x5d6171-_0x596609-_0x3af1bb,_0x12dff4)),_0x29e265={'x':_0x5757dc['x']-_0x36b357*_0x3bf0a2*0.1,'y':_0x5757dc['y']+_0x20f822*0.3},_0x5c16c0={'x':_0x267d51-_0x36b357*_0x3bf0a2*_0x22751a*0.8,'y':_0x53bd78+_0x5f97fd*_0x15e3b6*0.4},_0x16818f={'x':_0x267d51,'y':_0x53bd78},_0xc99691={'x':_0x267d51+_0x36b357*_0x3bf0a2*_0x22751a*0.8,'y':_0x53bd78-_0x5f97fd*_0x15e3b6*0.4},_0x1d1604={'x':_0x4c6be1+_0x36b357*_0x3bf0a2*_0x22751a*0.6,'y':_0x345382+_0x5f97fd*_0x15e3b6*0.5},_0x57ca7a={'x':_0x4c6be1,'y':_0x345382},_0x470cbe={'x':_0x4c6be1-_0x36b357*_0x3bf0a2*0.2,'y':_0x345382+_0x511f5f*0.1},_0x3d2f7b={'x':_0x439913,'y':_0x41e622-_0x511f5f*0.3},_0x370ced={'x':_0x439913,'y':_0x41e622};_0x2134a0=[{'p0':_0x5757dc,'p1':_0x29e265,'p2':_0x5c16c0,'p3':_0x16818f},{'p0':_0x16818f,'p1':_0xc99691,'p2':_0x1d1604,'p3':_0x57ca7a},{'p0':_0x57ca7a,'p1':_0x470cbe,'p2':_0x3d2f7b,'p3':_0x370ced}];}else{const _0x3a4346=_0x4669ae*0.6+Math[_0x1187b4(0x137)]()*_0x511f5f*0.05,_0x102608=_0x5bd237*0.7+Math['random']()*_0x5d6171*0.05,_0x3d60a4=_0x58f029*0.6+Math[_0x1187b4(0x137)]()*_0x511f5f*0.05,_0x896c6b=_0x3d60a4*1.5,_0x38779d=_0x5757dc['x']+_0x36b357*_0x102608*0.5,_0x27c4e9=Math[_0x1187b4(0x158)](_0x24090b-_0x896c6b,_0x5757dc['y']+_0x3a4346),_0x5b61d3=_0x38779d+_0x36b357*_0x102608*0.5,_0x31ba4a=_0x27c4e9+_0x3d60a4,_0x49978c=_0x5b61d3-_0x36b357*_0x102608*0.8,_0x3b7ed0=Math[_0x1187b4(0x158)](_0x24090b,_0x31ba4a+_0x896c6b*0.7),_0x5c32b9=_0x49978c+_0x36b357*_0x102608*0.4,_0x6c4539=_0x3b7ed0+_0x3d60a4*0.8,_0x29acdf=_0x5c32b9,_0x8ec15f=_0x511f5f+_0x5619fe*0x2,_0x34473f=Math['max'](_0x596609,Math[_0x1187b4(0x158)](_0x5d6171-_0x596609-_0x3af1bb,_0x38779d)),_0x80a00d=Math[_0x1187b4(0x1c9)](_0x596609,Math[_0x1187b4(0x158)](_0x5d6171-_0x596609-_0x3af1bb,_0x5b61d3)),_0x4a6d31=Math[_0x1187b4(0x1c9)](_0x596609,Math[_0x1187b4(0x158)](_0x5d6171-_0x596609-_0x3af1bb,_0x49978c)),_0xf37d75=Math[_0x1187b4(0x1c9)](_0x596609,Math[_0x1187b4(0x158)](_0x5d6171-_0x596609-_0x3af1bb,_0x5c32b9)),_0x3717e7={'x':_0x5757dc['x'],'y':_0x5757dc['y']+_0x3a4346*0.5},_0x46d759={'x':_0x34473f-_0x36b357*_0x102608*_0x22751a,'y':_0x27c4e9+_0x3d60a4*_0x15e3b6*0.3},_0x73873b={'x':_0x34473f,'y':_0x27c4e9},_0xbf2291={'x':_0x34473f+_0x36b357*_0x102608*_0x22751a,'y':_0x27c4e9-_0x3d60a4*_0x15e3b6*0.3},_0x5d2a2a={'x':_0x80a00d+_0x36b357*_0x102608*_0x22751a,'y':_0x31ba4a+_0x3d60a4*_0x15e3b6*0.5},_0xacb133={'x':_0x80a00d,'y':_0x31ba4a},_0x463c87={'x':_0x80a00d-_0x36b357*_0x102608*_0x22751a,'y':_0x31ba4a-_0x3d60a4*_0x15e3b6*0.5},_0xa10dd2={'x':_0x4a6d31-_0x36b357*_0x102608*_0x22751a,'y':_0x3b7ed0+_0x3d60a4*_0x15e3b6*0.4},_0x2c2b30={'x':_0x4a6d31,'y':_0x3b7ed0},_0x3ccf57={'x':_0x4a6d31+_0x36b357*_0x102608*_0x22751a,'y':_0x3b7ed0-_0x3d60a4*_0x15e3b6*0.4},_0x14307e={'x':_0xf37d75+_0x36b357*_0x102608*_0x22751a,'y':_0x6c4539+_0x3d60a4*_0x15e3b6*0.6},_0x1f0749={'x':_0xf37d75,'y':_0x6c4539},_0x2eee07={'x':_0xf37d75-_0x36b357*_0x102608*0.1,'y':_0x6c4539+_0x511f5f*0.05},_0x2f1c2c={'x':_0x29acdf,'y':_0x8ec15f-_0x511f5f*0.2},_0x54c768={'x':_0x29acdf,'y':_0x8ec15f};_0x2134a0=[{'p0':_0x5757dc,'p1':_0x3717e7,'p2':_0x46d759,'p3':_0x73873b},{'p0':_0x73873b,'p1':_0xbf2291,'p2':_0x5d2a2a,'p3':_0xacb133},{'p0':_0xacb133,'p1':_0x463c87,'p2':_0xa10dd2,'p3':_0x2c2b30},{'p0':_0x2c2b30,'p1':_0x3ccf57,'p2':_0x14307e,'p3':_0x1f0749},{'p0':_0x1f0749,'p1':_0x2eee07,'p2':_0x2f1c2c,'p3':_0x54c768}];}}return _0x576b31[_0x1187b4(0x177)](..._0x2134a0),_0x576b31;}catch(_0x45f18d){return console[_0x1187b4(0x1ce)](_0x1187b4(0x18f)+_0x227c39?.['id']+':',_0x45f18d),[];}}function _0x3005(){const _0x599580=['\x20in\x20returning','Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20','\x20following\x20invalid\x20path\x20','\x20for\x20MUST\x20DIVE\x20(Normal\x20attack).','abs','capturing','hasFired','challenging_stage','filter','attackType','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','string','particles','\x20has\x20invalid\x20enemy\x20data.','push','justReturned','\x22\x20became\x20empty\x20after\x20enemy\x20path\x20validation.\x20Removing.','\x20attacking,\x20index\x20','every','Error\x20in\x20triggerImmediateCaptureDive:','preparing_attack','174392gjKFXs','returning','newButtonStates','toString','in_grid',':\x20Enemy\x20entrancePathId\x20\x22','\x20to\x20reset\x20state/rotation.','indexOf','scheduledStartTime','Entrance\x20Wave\x20(Level\x20','following_bezier_path',')\x20during\x20shift:','Error\x20in\x20findAndDetachEnemy:','health','\x20out\x20of\x20bounds\x20(','CS_LoopAttack_TL','pathSegmentIndex','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','Onbekend\x20wave\x20patroon\x20index\x20',').\x20Throwing\x20error.','some','type','includes','destroyed','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','\x20(Entrance\x201):\x20Basis\x20patroon\x200\x20is\x20ongeldig\x20of\x20leeg!','\x20in\x20moving_to_grid','Error\x20updating\x20explosions:','attackGroupId','hasCapturedShip','287vAelyF','!\x20Returning.','gridCol','left','showing_capture_message','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20','\x22\x20has\x20no\x20valid\x20enemies\x20array.\x20Removing.','Cannot\x20reposition\x20ship\x20Y\x20-\x20ship\x20or\x20canvas\x20not\x20ready.','Error\x20starting\x20attack\x20for\x20','velocityY','enemy-grid-','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','round','capturedShipDimensions','duration','Wave\x20','full_grid','enemies','Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20','single','CS_LoopAttack_BL','attacking','capturedShipX','targetY','[Capture\x20Message\x20End]\x20Could\x20not\x20find\x20Boss\x20','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','pathId','CRITICAL:\x20Failed\x20to\x20define\x20Normal\x20Wave\x20entrance\x20paths!','targetGridY','!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!','\x20(Entrance\x202):\x20Basis\x20patroon\x201\x20is\x20ongeldig\x20of\x20leeg!','velocityX','width','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','find','CS\x20Enemy\x20','entrance_flight_1','returnLogDone','[findAndDetachEnemy\x20-\x20PRIORITY]\x20Ship\x20captured.\x20Selecting\x20Boss\x20',',\x20Pattern\x20','attackPathT','FATAL\x20Error\x20in\x20moveEntities:','squadronEnemyIndex','max','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','firstEnemyId','boss_loop_left','!\x20Moving\x20to\x20grid.','error','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','sqrt','floor','\x20(Full\x20Grid):\x20Basis\x20patroon\x200\x20is\x20ongeldig\x20of\x20leeg!','isArray','targetGridX','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','speed','splice','[Capture\x20Message\x20End]\x20Boss\x20','creationTime','object','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','number','Full\x20Grid:\x20Squadron\x20',':\x20Squadron\x20pathId\x20\x22','size','hasOwnProperty','boss_loop_right','1975080hFfuQT','\x20at\x20[','attackFormationOffsetX','captureAnimationRotation','\x20definition\x20failed.\x20Transitioning\x20immediately.','\x20invalid!\x20Skipping.','\x20has\x20invalid\x20segment\x20','1293975QGvmHS','entrance_flight_2','\x20after\x20attack:','findIndex',',\x20isCS:\x20','keys','FATAL\x20Error\x20in\x20resetWave:','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20',')!\x20Returning.','stack','capturedShipY','attack-','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','state',',\x20index\x20','58329FHcmDg','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','hasFiredPostLanding','!\x20Removing.','normal','CS_LoopAttack_TR','Invalid\x20start\x20segment\x20for\x20path\x20','gridRow','Attempted\x20to\x20schedule\x20entrance\x20flight\x20wave\x20without\x20valid\x20definition.','capturePrepareTimeout','switch_player',',\x20Path\x20','map','isDamaged','now','has','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','height','right','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','\x20(invalid\x20attack\x20index):','lifetime','\x20voor\x20level\x20','Invalid\x20start\x20segment\x20for\x20active\x20path\x20','length','21TFUFKI','rotation','attackPathSegmentIndex','Enemy\x20','moving_to_grid','shoot','),\x20index\x20','CS:\x20Path\x20','completed','Error\x20creating\x20player\x20bullet(s):','undefined','\x20(state:\x20','function',')\x20for\x20',',\x20isFullGrid:\x20','targetX','.\x20Skipping\x20attack.','atan2','capturedShipLastFiredTime','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','.\x20Skipping.','following_entrance_path','CS_LoopAttack_BR','CS_HorizontalFlyByR','1297998begwkN','preparing_capture','\x20(invalid\x20attack\x20segment):','show_results','sort','\x22\x20does\x20not\x20exist\x20in\x20normalWaveEntrancePaths!\x20Removing\x20squadron.','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','tintProgress','\x20(Path\x20','random','109948beZGcN','entrancePathId','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','canFireThisDive','Error\x20updating\x20floating\x20scores:','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','stringify','\x20invalid\x20or\x20not\x20found\x20in\x20normalWaveEntrancePaths!\x20Skipping\x20squadron.','initialCaptureAnimationY','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','squadronId','total','captureStartTime','CRITICAL:\x20Required\x20CS\x20path\x20\x22','FATAL\x20Error\x20in\x20resetGame:','unknown','forEach','Error\x20deep\x20copying\x20selected\x20pattern\x200\x20for\x20Entrance\x201:','\x20out\x20of\x20bounds!\x20Removing.','\x22\x20invalid\x20or\x20missing\x20in\x20normalWaveEntrancePaths!\x20Removing\x20enemy.',',\x20Idx\x20','cos','3620arXfrA','pathT',')!\x20Cannot\x20validate\x20paths.','pause','):\x20Path\x20','warn','541891rsvnFk','\x20(Sq\x20','diving_to_capture_position','min','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','alpha','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','parse',').\x20Skipping.','diveStartTime','Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.','slice','getGamepads','substring','[Player\x20GO\x20Delay\x20End]\x20Invalid\x20next\x20action:','lastFiredTime','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','sin','attackPathSegments','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20'];_0x3005=function(){return _0x599580;};return _0x3005();}function handleEnemyHit(_0x948897){const _0x499e1e=_0x49db;if(!_0x948897)return{'destroyed':![],'pointsAwarded':0x0};const _0x5615a6=Date[_0x499e1e(0x207)]();let _0x5b7524=0x0,_0x5bcdf1=![],_0x3d1383=_0x948897['isDamaged'],_0x59f537=null;const _0x29ae75=_0x948897[_0x499e1e(0x193)]===ENEMY3_TYPE?BOSS_WIDTH:_0x948897[_0x499e1e(0x193)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x9e8cee=_0x948897['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x948897[_0x499e1e(0x193)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x187e4c=_0x948897[_0x499e1e(0x193)]===ENEMY3_TYPE&&_0x948897[_0x499e1e(0x19b)],_0x90f2c3=_0x948897[_0x499e1e(0x193)]===ENEMY3_TYPE&&_0x948897[_0x499e1e(0x1a9)],_0x49658e=_0x948897['x']+_0x29ae75/0x2,_0x30d1f8=_0x948897['y']+_0x9e8cee*0.2;createHitSparks(_0x49658e,_0x30d1f8),_0x948897[_0x499e1e(0x18b)]--;_0x948897[_0x499e1e(0x193)]===ENEMY3_TYPE&&(_0x948897[_0x499e1e(0x206)]=_0x948897[_0x499e1e(0x18b)]<ENEMY3_MAX_HITS);if(_0x948897[_0x499e1e(0x18b)]<=0x0){_0x5bcdf1=!![];if(_0x187e4c&&_0x90f2c3){if(_0x948897['capturedShipDimensions']){const _0x3f95a5=_0x948897[_0x499e1e(0x1a9)][_0x499e1e(0x1bc)],_0x5134c4=_0x948897[_0x499e1e(0x1a9)][_0x499e1e(0x20a)],_0xab33f6=_0x948897['x']+(_0x29ae75-_0x3f95a5)/0x2+CAPTURED_SHIP_OFFSET_X,_0x59909c=_0x948897['y']+CAPTURED_SHIP_OFFSET_Y,_0x121b9b=fallingShips[_0x499e1e(0x192)](_0x333a53=>Math[_0x499e1e(0x16d)](_0x333a53['x']-_0xab33f6)<0x1&&Math[_0x499e1e(0x16d)](_0x333a53['y']-_0x59909c)<0x1);!_0x121b9b&&fallingShips[_0x499e1e(0x177)]({'x':_0xab33f6,'y':_0x59909c,'width':_0x3f95a5,'height':_0x5134c4,'creationTime':_0x5615a6,'tintProgress':0x1,'rotation':0x0});}else console[_0x499e1e(0x1ce)]('[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!');_0x948897[_0x499e1e(0x19b)]=![],_0x948897[_0x499e1e(0x1a9)]=null;}else _0x187e4c&&!_0x90f2c3&&(console[_0x499e1e(0x1ce)](_0x499e1e(0x168)+_0x948897['id']+_0x499e1e(0x196)),_0x948897[_0x499e1e(0x19b)]=![],_0x948897[_0x499e1e(0x1a9)]=null);if(isChallengingStage){let _0x153de6=0x64;const _0x2a0d25=csLastHitTime;csLastHitTime=_0x5615a6,csLastChainHitPosition={'x':_0x948897['x'],'y':_0x948897['y']},csCurrentChainHits>0x0&&_0x5615a6-_0x2a0d25<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x153de6*=0x2),_0x5b7524=_0x153de6,csCurrentChainScore+=_0x5b7524,scoreEarnedThisCS+=_0x5b7524,challengingStageEnemiesHit++,_0x59f537=explosionSound;}else{if(_0x948897['state']===_0x499e1e(0x182))_0x5b7524=_0x948897[_0x499e1e(0x193)]===ENEMY1_TYPE?0x32:_0x948897[_0x499e1e(0x193)]===ENEMY2_TYPE?0x50:0x0,_0x948897[_0x499e1e(0x193)]===ENEMY3_TYPE&&(_0x5b7524=0x96),_0x59f537=explosionSound;else{_0x5b7524=_0x948897[_0x499e1e(0x193)]===ENEMY1_TYPE?0x64:_0x948897[_0x499e1e(0x193)]===ENEMY2_TYPE?0xa0:0x0;if(_0x948897[_0x499e1e(0x193)]===ENEMY3_TYPE){if(_0x187e4c){const _0x15cca7=[0x3e8,0x5dc,0x7d0,0xbb8];_0x5b7524=_0x15cca7[Math[_0x499e1e(0x1d1)](Math['random']()*_0x15cca7[_0x499e1e(0x211)])],_0x59f537=bossHit2Sound;}else _0x3d1383?(_0x5b7524=0x190,_0x59f537=bossHit2Sound):(_0x5b7524=0x0,_0x59f537=explosionSound);}else _0x59f537=explosionSound;if(_0x5bcdf1&&_0x5b7524>0x0){const _0x2bdf24=normalWaveLastHitTime;normalWaveLastHitTime=_0x5615a6,normalWaveLastChainHitPosition={'x':_0x948897['x'],'y':_0x948897['y']};normalWaveLastChainHitPosition&&_0x5615a6-_0x2bdf24<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x1c7e6b=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x5792ba=Math[_0x499e1e(0x158)](_0x1c7e6b[_0x499e1e(0x211)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0xe9967e=_0x1c7e6b[_0x5792ba];_0x5b7524+=_0xe9967e,normalWaveCurrentChainScore+=_0xe9967e;}}}}if(_0x5b7524>0x0){const _0x4bed9f=score;score+=_0x5b7524;if(!isManualControl||currentPlayer===0x1||!isTwoPlayerMode){player1Score=score;if(_0x5bcdf1)player1EnemiesHit++;}else{player2Score=score;if(_0x5bcdf1)player2EnemiesHit++;}const _0x1f062=score>=highScore&&_0x4bed9f<highScore;highScore=Math[_0x499e1e(0x1c9)](highScore,score);let _0x55ff07=![],_0x5aaf83=null;if(!isManualControl)_0x55ff07=player1TriggeredHighScoreSound,_0x5aaf83=()=>{player1TriggeredHighScoreSound=!![];};else isTwoPlayerMode?currentPlayer===0x1?(_0x55ff07=player1TriggeredHighScoreSound,_0x5aaf83=()=>{player1TriggeredHighScoreSound=!![];}):(_0x55ff07=player2TriggeredHighScoreSound,_0x5aaf83=()=>{player2TriggeredHighScoreSound=!![];}):(_0x55ff07=player1TriggeredHighScoreSound,_0x5aaf83=()=>{player1TriggeredHighScoreSound=!![];});if(_0x1f062&&!_0x55ff07){if(_0x5aaf83)_0x5aaf83();playSound(hiScoreSound);}checkAndAwardExtraLife();const _0x1e8a4b=_0x948897[_0x499e1e(0x1f7)]==='in_grid'||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x499e1e(0x177)]({'text':_0x5b7524[_0x499e1e(0x181)](),'x':_0x948897['x']+_0x29ae75/0x2,'y':_0x948897['y'],'color':_0x1e8a4b,'creationTime':_0x5615a6,'displayStartTime':_0x5615a6+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x948897['x']+_0x29ae75/0x2,_0x948897['y']+_0x9e8cee/0x2);_0x948897['id']===capturingBossId&&stopSound(captureSound);if(_0x948897[_0x499e1e(0x1f7)]===_0x499e1e(0x1b1)||_0x948897[_0x499e1e(0x1f7)]===_0x499e1e(0x227)||_0x948897[_0x499e1e(0x1f7)]===_0x499e1e(0x157)||_0x948897[_0x499e1e(0x1f7)]===_0x499e1e(0x188)||_0x948897[_0x499e1e(0x1f7)]==='returning'||_0x948897[_0x499e1e(0x1f7)]==='showing_capture_message'){if(_0x948897[_0x499e1e(0x193)]===ENEMY3_TYPE)stopSound(bossGalagaDiveSound);else stopSound(butterflyDiveSound);}enemies['length']===0x1&&enemies[0x0]['id']===_0x948897['id']&&isGridSoundPlaying&&stopSound(gridBackgroundSound);}else _0x5bcdf1=![],_0x948897[_0x499e1e(0x193)]===ENEMY3_TYPE?(_0x59f537=bossHit1Sound,_0x5b7524=0x0):_0x5b7524=0x0;return _0x59f537&&playSound(_0x59f537),{'destroyed':_0x5bcdf1,'pointsAwarded':_0x5b7524};}function createHitSparks(_0x149de8,_0x4c2b4b){const _0x193cb6=_0x49db;if(!gameCtx)return;const _0x275a53=Date[_0x193cb6(0x207)]();for(let _0x939c38=0x0;_0x939c38<HIT_SPARK_COUNT;_0x939c38++){const _0x5860b0=Math[_0x193cb6(0x137)]()*Math['PI']*0x2,_0x2300e0=HIT_SPARK_SPEED*(0.7+Math[_0x193cb6(0x137)]()*0.6),_0x128837=HIT_SPARK_LIFETIME*(0.8+Math[_0x193cb6(0x137)]()*0.4);hitSparks[_0x193cb6(0x177)]({'x':_0x149de8,'y':_0x4c2b4b,'vx':Math[_0x193cb6(0x14e)](_0x5860b0)*_0x2300e0,'vy':Math[_0x193cb6(0x166)](_0x5860b0)*_0x2300e0,'creationTime':_0x275a53,'lifetime':_0x128837,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x2f04b5=_0x49db,_0x18e479=Date['now']();for(let _0xc8fb98=hitSparks[_0x2f04b5(0x211)]-0x1;_0xc8fb98>=0x0;_0xc8fb98--){const _0x4b0d4a=hitSparks[_0xc8fb98],_0x3d3d72=_0x18e479-_0x4b0d4a[_0x2f04b5(0x1d9)];_0x3d3d72>=_0x4b0d4a['lifetime']?hitSparks[_0x2f04b5(0x1d7)](_0xc8fb98,0x1):(_0x4b0d4a['vy']+=HIT_SPARK_GRAVITY,_0x4b0d4a['x']+=_0x4b0d4a['vx'],_0x4b0d4a['y']+=_0x4b0d4a['vy'],_0x4b0d4a[_0x2f04b5(0x15a)]=Math[_0x2f04b5(0x1c9)](0x0,0x1-_0x3d3d72/_0x4b0d4a[_0x2f04b5(0x20e)]));}}function moveEntities(){const _0x5c8997=_0x49db;if(isPaused)return;try{if(ship&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isWaitingForRespawn){let _0x9ca5b9=ship['width'];isDualShipActive&&(_0x9ca5b9+=DUAL_SHIP_OFFSET_X);let _0x40a89f=ship['x'];if(isManualControl){let _0x1e92b4=![],_0x23e998=![];currentPlayer===0x1||!isTwoPlayerMode?(_0x1e92b4=leftPressed,_0x23e998=rightPressed):(_0x1e92b4=p2LeftPressed,_0x23e998=p2RightPressed);if(_0x1e92b4&&ship['x']>0x0)_0x40a89f=ship['x']-ship[_0x5c8997(0x1d6)];else _0x23e998&&ship['x']<gameCanvas[_0x5c8997(0x1bc)]-_0x9ca5b9&&(_0x40a89f=ship['x']+ship['speed']);ship['x']=Math[_0x5c8997(0x1c9)](0x0,Math[_0x5c8997(0x158)](gameCanvas[_0x5c8997(0x1bc)]-_0x9ca5b9,_0x40a89f)),ship[_0x5c8997(0x221)]=ship['x'];}else{if(typeof smoothedShipX!=='undefined'){const _0x49c8f1=0.1,_0x575844=1.2;smoothedShipX+=(ship[_0x5c8997(0x221)]-smoothedShipX)*AI_SMOOTHING_FACTOR_MOVE;const _0x4054ed=smoothedShipX-ship['x'],_0x4b8c21=ship[_0x5c8997(0x1d6)]*_0x575844;let _0x27935c=0x0;if(Math['abs'](_0x4054ed)>_0x49c8f1){const _0x1f6fe1=isChallengingStage?CS_AI_MOVE_FRACTION:NORMAL_MOVE_FRACTION;_0x27935c=_0x4054ed*_0x1f6fe1,_0x27935c=Math['max'](-_0x4b8c21,Math['min'](_0x4b8c21,_0x27935c)),Math[_0x5c8997(0x16d)](_0x27935c)>Math[_0x5c8997(0x16d)](_0x4054ed)&&(_0x27935c=_0x4054ed),ship['x']+=_0x27935c,ship['x']=Math[_0x5c8997(0x1c9)](0x0,Math[_0x5c8997(0x158)](gameCanvas[_0x5c8997(0x1bc)]-_0x9ca5b9,ship['x']));}}else ship['x']=Math[_0x5c8997(0x1c9)](0x0,Math[_0x5c8997(0x158)](gameCanvas['width']-_0x9ca5b9,ship['targetX']));}}const _0x2ee986=Date[_0x5c8997(0x207)]();for(let _0x4b7972=bullets['length']-0x1;_0x4b7972>=0x0;_0x4b7972--){const _0x17929c=bullets[_0x4b7972];_0x17929c?(_0x17929c['y']-=_0x17929c[_0x5c8997(0x1d6)],_0x17929c['y']+PLAYER_BULLET_HEIGHT<0x0&&bullets[_0x5c8997(0x1d7)](_0x4b7972,0x1)):bullets[_0x5c8997(0x1d7)](_0x4b7972,0x1);}for(let _0x2716cf=enemyBullets['length']-0x1;_0x2716cf>=0x0;_0x2716cf--){const _0x2919e5=enemyBullets[_0x2716cf];if(!_0x2919e5){enemyBullets[_0x5c8997(0x1d7)](_0x2716cf,0x1);continue;}_0x2919e5['x']+=_0x2919e5['vx'],_0x2919e5['y']+=_0x2919e5['vy'],(_0x2919e5['y']>gameCanvas['height']||_0x2919e5['y']<-ENEMY_BULLET_HEIGHT||_0x2919e5['x']<-ENEMY_BULLET_WIDTH||_0x2919e5['x']>gameCanvas[_0x5c8997(0x1bc)])&&enemyBullets[_0x5c8997(0x1d7)](_0x2716cf,0x1);}for(let _0x5d99be=fallingShips[_0x5c8997(0x211)]-0x1;_0x5d99be>=0x0;_0x5d99be--){const _0x8680fc=fallingShips[_0x5d99be];if(!_0x8680fc){fallingShips[_0x5c8997(0x1d7)](_0x5d99be,0x1);continue;}_0x8680fc['y']+=FALLING_SHIP_SPEED;const _0x363302=_0x2ee986-_0x8680fc[_0x5c8997(0x1d9)];typeof _0x8680fc[_0x5c8997(0x135)]===_0x5c8997(0x1dc)?_0x8680fc[_0x5c8997(0x135)]=Math[_0x5c8997(0x1c9)](0x0,0x1-_0x363302/FALLING_SHIP_FADE_DURATION_MS):_0x8680fc[_0x5c8997(0x135)]=0x0;if(typeof _0x8680fc[_0x5c8997(0x213)]===_0x5c8997(0x1dc)){const _0x863d20=Math[_0x5c8997(0x158)](0x1,_0x363302/FALLING_SHIP_ROTATION_DURATION_MS);_0x8680fc[_0x5c8997(0x213)]=_0x863d20*0x2*(0x2*Math['PI']);}else _0x8680fc[_0x5c8997(0x213)]=0x0;if(ship&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x8680fc['y']+_0x8680fc[_0x5c8997(0x20a)]>=gameCanvas[_0x5c8997(0x20a)]-AUTO_DOCK_THRESHOLD){fallingShips[_0x5c8997(0x1d7)](_0x5d99be,0x1),isDualShipActive=!![];currentPlayer===0x1?player1IsDualShipActive=!![]:player2IsDualShipActive=!![];playSound(dualShipSound);continue;}_0x8680fc['y']>gameCanvas[_0x5c8997(0x20a)]+_0x8680fc['height']&&fallingShips[_0x5c8997(0x1d7)](_0x5d99be,0x1);}let _0x1ac671=0x0;const _0x14c50e=enemies[_0x5c8997(0x192)](_0x4f8bf7=>_0x4f8bf7?.[_0x5c8997(0x1f7)]===_0x5c8997(0x182)),_0x26b834=!isChallengingStage&&!isWaveTransitioning&&_0x14c50e&&!isShowingPlayerGameOverMessage;if(_0x26b834){!isGridSoundPlaying&&playSound(gridBackgroundSound,!![]);const _0x117530=enemies[_0x5c8997(0x171)](_0x2d764e=>_0x2d764e?.['state']==='in_grid');if(_0x117530[_0x5c8997(0x211)]>0x0){let _0x1a4b17=gameCanvas['width'],_0x126c45=0x0;_0x117530[_0x5c8997(0x149)](_0x341c29=>{const _0x4f61fa=_0x5c8997;_0x341c29&&(_0x1a4b17=Math[_0x4f61fa(0x158)](_0x1a4b17,_0x341c29['x']),_0x126c45=Math['max'](_0x126c45,_0x341c29['x']+_0x341c29[_0x4f61fa(0x1bc)]));});const _0x208732=gameCanvas[_0x5c8997(0x1bc)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x3b3710=gameCanvas['width']*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x126c45>=_0x3b3710)gridMoveDirection=-0x1;else gridMoveDirection===-0x1&&_0x1a4b17<=_0x208732&&(gridMoveDirection=0x1);const _0x1a24b5=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x1ac671=_0x1a24b5*gridMoveDirection,currentGridOffsetX+=_0x1ac671,enemies[_0x5c8997(0x149)](_0x53cb34=>{const _0x41c3a8=_0x5c8997;if(_0x53cb34&&(_0x53cb34[_0x41c3a8(0x1f7)]===_0x41c3a8(0x17f)||_0x53cb34['state']==='in_grid'||_0x53cb34['state']==='moving_to_grid'))try{const _0x59d005=_0x53cb34['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x53cb34[_0x41c3a8(0x193)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x1b8ddb,y:_0x42bf82}=getCurrentGridSlotPosition(_0x53cb34[_0x41c3a8(0x200)],_0x53cb34[_0x41c3a8(0x19e)],_0x59d005);_0x53cb34['targetGridX']=_0x1b8ddb,_0x53cb34[_0x41c3a8(0x1b8)]=_0x42bf82;}catch(_0x5ca4ab){console[_0x41c3a8(0x1ce)](_0x41c3a8(0x1fa)+_0x53cb34?.['id']+_0x41c3a8(0x21d)+_0x53cb34?.[_0x41c3a8(0x1f7)]+_0x41c3a8(0x189),_0x5ca4ab);}});}}else isGridSoundPlaying&&stopSound(gridBackgroundSound),_0x1ac671=0x0;for(let _0x567e1f=enemies[_0x5c8997(0x211)]-0x1;_0x567e1f>=0x0;_0x567e1f--){let _0x4f1bab=enemies[_0x567e1f];if(!_0x4f1bab)continue;const _0x3dddb5=_0x4f1bab['id'];if(_0x4f1bab[_0x5c8997(0x202)]&&_0x4f1bab[_0x5c8997(0x1f7)]!==_0x5c8997(0x22b)){clearTimeout(_0x4f1bab[_0x5c8997(0x202)]);const _0x38ca09=enemySpawnTimeouts[_0x5c8997(0x185)](_0x4f1bab[_0x5c8997(0x202)]);if(_0x38ca09>-0x1)enemySpawnTimeouts[_0x5c8997(0x1d7)](_0x38ca09,0x1);_0x4f1bab['capturePrepareTimeout']=null;}const _0x10ee78=_0x4f1bab[_0x5c8997(0x193)]===ENEMY3_TYPE?BOSS_WIDTH:_0x4f1bab[_0x5c8997(0x193)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x2790c1=_0x4f1bab[_0x5c8997(0x193)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x4f1bab[_0x5c8997(0x193)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x4f1bab[_0x5c8997(0x1f7)]){case _0x5c8997(0x188):{break;}case _0x5c8997(0x227):{break;}case _0x5c8997(0x216):{break;}case _0x5c8997(0x182):{break;}case _0x5c8997(0x17d):{break;}case'preparing_capture':{break;}case _0x5c8997(0x157):{break;}case'capturing':{break;}case'showing_capture_message':{break;}case'attacking':{break;}case _0x5c8997(0x17f):{break;}}if(_0x4f1bab&&!isShowingPlayerGameOverMessage&&!(isShipCaptured&&_0x4f1bab['state']===_0x5c8997(0x16e))){const _0x6b9ad3={'x':0x0,'y':0x0,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT},_0x14d01e={'x':_0x4f1bab['x'],'y':_0x4f1bab['y'],'width':_0x10ee78,'height':_0x2790c1};for(let _0x393f30=bullets['length']-0x1;_0x393f30>=0x0;_0x393f30--){const _0x3daa54=bullets[_0x393f30];if(!_0x3daa54)continue;_0x6b9ad3['x']=_0x3daa54['x'],_0x6b9ad3['y']=_0x3daa54['y'];if(checkCollision(_0x6b9ad3,_0x14d01e)){const _0x1d57ca=handleEnemyHit(_0x4f1bab);bullets[_0x5c8997(0x1d7)](_0x393f30,0x1);if(_0x1d57ca[_0x5c8997(0x195)]){enemies[_0x5c8997(0x1d7)](_0x567e1f,0x1),_0x4f1bab=null;break;}}}}if(_0x4f1bab&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!isShowingPlayerGameOverMessage&&!isInvincible){const _0x84f187=[_0x5c8997(0x1b1),_0x5c8997(0x227),_0x5c8997(0x188),_0x5c8997(0x157)];if(_0x84f187[_0x5c8997(0x194)](_0x4f1bab[_0x5c8997(0x1f7)])){const _0x30727e={'x':_0x4f1bab['x'],'y':_0x4f1bab['y'],'width':_0x10ee78,'height':_0x2790c1},_0x33637d={'x':ship['x'],'y':ship['y'],'width':ship[_0x5c8997(0x1bc)],'height':ship[_0x5c8997(0x20a)]},_0x313792=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x5c8997(0x1bc)],'height':ship['height']}:null;let _0x4833ad=![],_0x3c5371=![];if(checkCollision(_0x30727e,_0x33637d))_0x4833ad=!![],_0x3c5371=![];else _0x313792&&checkCollision(_0x30727e,_0x313792)&&(_0x4833ad=!![],_0x3c5371=!![]);if(_0x4833ad){createExplosion(_0x4f1bab['x']+_0x10ee78/0x2,_0x4f1bab['y']+_0x2790c1/0x2),playSound(lostLifeSound),enemies[_0x5c8997(0x1d7)](_0x567e1f,0x1),_0x4f1bab=null;if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x3c5371?createExplosion(_0x313792['x']+ship[_0x5c8997(0x1bc)]/0x2,_0x313792['y']+ship[_0x5c8997(0x20a)]/0x2):createExplosion(_0x33637d['x']+ship['width']/0x2,_0x33637d['y']+ship[_0x5c8997(0x20a)]/0x2),isInvincible=!![],invincibilityEndTime=_0x2ee986+INVINCIBILITY_DURATION_MS;}else{playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x2ee986+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console['error'](_0x5c8997(0x1a3));if(playerLives<=0x0){const _0x33e037=currentPlayer;if(_0x33e037===0x1)player1Lives=0x0;if(_0x33e037===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x2ee986,playerWhoIsGameOver=_0x33e037;const _0x3ecb7c=_0x33e037===0x1?0x2:0x1,_0x4b4443=_0x3ecb7c===0x1?player1Lives:player2Lives;_0x4b4443>0x0?nextActionAfterPlayerGameOver=_0x5c8997(0x203):nextActionAfterPlayerGameOver=_0x5c8997(0x22d),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}continue;}}}}if(ship&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isWaitingForRespawn&&!isInvincible){const _0x19251d={'x':ship['x'],'y':ship['y'],'width':ship[_0x5c8997(0x1bc)],'height':ship[_0x5c8997(0x20a)]},_0x2ec9ae=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x5c8997(0x1bc)],'height':ship[_0x5c8997(0x20a)]}:null;for(let _0x1e338d=enemyBullets[_0x5c8997(0x211)]-0x1;_0x1e338d>=0x0;_0x1e338d--){const _0x2e4529=enemyBullets[_0x1e338d];if(!_0x2e4529){enemyBullets[_0x5c8997(0x1d7)](_0x1e338d,0x1);continue;}const _0x5a0a4b={'x':_0x2e4529['x'],'y':_0x2e4529['y'],'width':_0x2e4529[_0x5c8997(0x1bc)],'height':_0x2e4529[_0x5c8997(0x20a)]};let _0xacdebd=checkCollision(_0x19251d,_0x5a0a4b),_0x4bd2f9=0x0;!_0xacdebd&&_0x2ec9ae&&checkCollision(_0x2ec9ae,_0x5a0a4b)&&(_0xacdebd=!![],_0x4bd2f9=0x1);if(_0xacdebd){enemyBullets[_0x5c8997(0x1d7)](_0x1e338d,0x1);if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x4bd2f9===0x1?createExplosion(_0x2ec9ae['x']+ship[_0x5c8997(0x1bc)]/0x2,_0x2ec9ae['y']+ship[_0x5c8997(0x20a)]/0x2):createExplosion(_0x19251d['x']+ship['width']/0x2,_0x19251d['y']+ship[_0x5c8997(0x20a)]/0x2),playSound(lostLifeSound),isInvincible=!![],invincibilityEndTime=_0x2ee986+INVINCIBILITY_DURATION_MS;}else{playerLives--,playSound(lostLifeSound),createExplosion(ship['x']+ship['width']/0x2,ship['y']+ship[_0x5c8997(0x20a)]/0x2),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x2ee986+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x5c8997(0x20a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x5c8997(0x1ce)]('Cannot\x20reposition\x20ship\x20Y\x20-\x20ship\x20or\x20canvas\x20not\x20ready.');if(playerLives<=0x0){const _0x2b5fcd=currentPlayer;if(_0x2b5fcd===0x1)player1Lives=0x0;if(_0x2b5fcd===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x2ee986,playerWhoIsGameOver=_0x2b5fcd;const _0x1c6d2c=_0x2b5fcd===0x1?0x2:0x1,_0x1c799a=_0x1c6d2c===0x1?player1Lives:player2Lives;_0x1c799a>0x0?nextActionAfterPlayerGameOver='switch_player':nextActionAfterPlayerGameOver='show_results',bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}if(ship&&!isShipCaptured&&!isWaitingForRespawn&&!isDualShipActive&&fallingShips[_0x5c8997(0x211)]>0x0&&!isInvincible){const _0x40a167={'x':ship['x'],'y':ship['y'],'width':ship[_0x5c8997(0x1bc)],'height':ship[_0x5c8997(0x20a)]};for(let _0x1d7f20=fallingShips[_0x5c8997(0x211)]-0x1;_0x1d7f20>=0x0;_0x1d7f20--){const _0x4f8567=fallingShips[_0x1d7f20];if(!_0x4f8567)continue;const _0x1612bc={'x':_0x4f8567['x'],'y':_0x4f8567['y'],'width':_0x4f8567[_0x5c8997(0x1bc)],'height':_0x4f8567[_0x5c8997(0x20a)]};if(checkCollision(_0x40a167,_0x1612bc)){fallingShips[_0x5c8997(0x1d7)](_0x1d7f20,0x1),isDualShipActive=!![];if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];playSound(dualShipSound);break;}}}updateHitSparks();}catch(_0x48d8e3){console['error'](_0x5c8997(0x1c7),_0x48d8e3,_0x48d8e3['stack']),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState==='function')showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert('Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.');}}function _0x49db(_0xc45d7a,_0x5665fd){const _0x300595=_0x3005();return _0x49db=function(_0x49db87,_0x5466cd){_0x49db87=_0x49db87-0x133;let _0xe6feb8=_0x300595[_0x49db87];return _0xe6feb8;},_0x49db(_0xc45d7a,_0x5665fd);}function switchPlayerTurn(){const _0x3c6389=_0x49db;if(!isTwoPlayerMode)return![];stopSound(hiScoreSound),highScore=Math[_0x3c6389(0x1c9)](highScore,score);currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive):(player2Score=score,player2IsDualShipActive=isDualShipActive);const _0x2f1483=currentPlayer===0x1?0x2:0x1,_0x178530=_0x2f1483===0x1?player1Lives:player2Lives;if(_0x178530<=0x0){const _0x2c101c=currentPlayer===0x1?player1Lives:player2Lives;return _0x2c101c<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x2f1483,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],captureBeamActive=![],capturingBossId=null,isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0xecf1e3=_0x49db;if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x159bc2=enemies[_0xecf1e3(0x171)](_0x596ded=>_0x596ded&&_0x596ded['state']===_0xecf1e3(0x182));if(_0x159bc2['length']===0x0)return;const _0x342541=Date[_0xecf1e3(0x207)](),_0x277e28=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x342541-lastGridFireCheckTime<_0x277e28)return;lastGridFireCheckTime=_0x342541;const _0x265c2e=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x259e7f=Math[_0xecf1e3(0x1a8)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x572cc3=0x0;_0x159bc2['sort'](()=>Math[_0xecf1e3(0x137)]()-0.5);for(const _0x5c5b59 of _0x159bc2){if(_0x572cc3>=_0x259e7f)break;if(_0x5c5b59[_0xecf1e3(0x193)]===ENEMY2_TYPE||_0x5c5b59['type']===ENEMY3_TYPE){if(_0x5c5b59['type']===ENEMY3_TYPE&&_0x5c5b59[_0xecf1e3(0x19b)])continue;Math[_0xecf1e3(0x137)]()<_0x265c2e&&(createBulletSimple(_0x5c5b59)&&(playSound(enemyShootSound),_0x5c5b59['lastFiredTime']=_0x342541,_0x572cc3++));}}}function firePlayerBullet(_0x34179f=![]){const _0x24cafd=_0x49db;let _0x1d1b4f=_0x34179f?0x1:currentPlayer,_0x4b7967=selectedFiringMode==='single',_0xcacc73=!_0x34179f&&isTwoPlayerMode&&currentPlayer===0x2;if(isPaused||!isInGameState||playerLives<=0x0||gameOverSequenceStartTime>0x0||!ship||isShipCaptured||isWaitingForRespawn||isShowingIntro||showReadyMessage||isCsCompletionDelayActive||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showCSClearMessage||isShowingPlayerGameOverMessage)return![];try{const _0x48352b=ship['y'];let _0x2c74d3=0x0;if(isDualShipActive){const _0x4c502a=ship['x']+ship[_0x24cafd(0x1bc)]/0x2,_0x31746c=ship['x']+DUAL_SHIP_OFFSET_X+ship[_0x24cafd(0x1bc)]/0x2,_0x50879e=_0x4c502a-PLAYER_BULLET_WIDTH/0x2,_0x20969b=_0x31746c-PLAYER_BULLET_WIDTH/0x2;bullets[_0x24cafd(0x177)]({'x':_0x50879e,'y':_0x48352b,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),bullets['push']({'x':_0x20969b,'y':_0x48352b,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),_0x2c74d3=0x2;}else{const _0x2cf8d6=ship['x']+ship[_0x24cafd(0x1bc)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x24cafd(0x177)]({'x':_0x2cf8d6,'y':_0x48352b,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),_0x2c74d3=0x1;}playSound(playerShootSound);if(_0x1d1b4f===0x1||_0x34179f)player1ShotsFired+=_0x2c74d3;else _0x1d1b4f===0x2&&(player2ShotsFired+=_0x2c74d3);return!![];}catch(_0x3d8545){return console[_0x24cafd(0x1ce)](_0x24cafd(0x21b),_0x3d8545),![];}}function handlePlayerInput(){const _0x32198=_0x49db;try{const _0xaee299=Date[_0x32198(0x207)](),_0x263120=selectedFiringMode===_0x32198(0x1af);if(isPaused||!isManualControl||playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isWaitingForRespawn||isShipCaptured||isShowingCaptureMessage){leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],isTouchFiringActive=![];return;}let _0x412eea=![],_0x10b9cc=![],_0x4a8bf3=![],_0x532e4f=![],_0x5a979c=![],_0x564452=![],_0x3d9b67=![],_0x4746d9=![];if(connectedGamepadIndex!==null){const _0x4edb01=navigator[_0x32198(0x161)]();if(_0x4edb01?.[connectedGamepadIndex]){const _0x34cd94=_0x4edb01[connectedGamepadIndex],_0x3626ce=processSingleController(_0x34cd94,previousGameButtonStates);_0x412eea=_0x3626ce[_0x32198(0x19f)],_0x10b9cc=_0x3626ce[_0x32198(0x20b)],_0x4a8bf3=_0x3626ce[_0x32198(0x217)],_0x4746d9=_0x3626ce[_0x32198(0x152)],_0x3d9b67=_0x3626ce['back'],previousGameButtonStates=_0x3626ce['newButtonStates'];}else{if(previousGameButtonStates['length']>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates[_0x32198(0x211)]>0x0)previousGameButtonStates=[];}if(isTwoPlayerMode&&connectedGamepadIndexP2!==null){const _0x1ea5e4=navigator[_0x32198(0x161)]();if(_0x1ea5e4?.[connectedGamepadIndexP2]){const _0x307a8e=_0x1ea5e4[connectedGamepadIndexP2],_0x3f9c9d=processSingleController(_0x307a8e,previousGameButtonStatesP2);_0x532e4f=_0x3f9c9d[_0x32198(0x19f)],_0x5a979c=_0x3f9c9d[_0x32198(0x20b)],_0x564452=_0x3f9c9d['shoot'],previousGameButtonStatesP2=_0x3f9c9d[_0x32198(0x180)];}else{if(previousGameButtonStatesP2[_0x32198(0x211)]>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2[_0x32198(0x211)]>0x0)previousGameButtonStatesP2=[];}if(_0x4746d9){togglePause();return;}if(_0x3d9b67){stopGameAndShowMenu();return;}let _0x58bf51=keyboardP1LeftDown,_0x58b255=keyboardP1RightDown,_0x37408a=keyboardP1ShootDown,_0x4114dc=keyboardP2LeftDown,_0x155754=keyboardP2RightDown,_0x1146d6=keyboardP2ShootDown,_0x396754=_0x37408a||_0x4a8bf3,_0x2e6db9=![];const _0xb75788=isTwoPlayerMode&&connectedGamepadIndexP2===null&&connectedGamepadIndex!==null;isTwoPlayerMode&&(_0x2e6db9=_0x1146d6||_0x564452||_0xb75788&&_0x4a8bf3);let _0x170ef6=![];isTouchFiringActive&&!_0x263120&&(_0xaee299-playerLastShotTime>=SHOOT_COOLDOWN&&(firePlayerBullet(![])&&(playerLastShotTime=_0xaee299,_0x170ef6=!![],p1JustFiredSingle=![],p2JustFiredSingle=![],touchJustFiredSingle=![])));leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];let _0x43e742=![],_0x56f57d=![];if(currentPlayer===0x1||!isTwoPlayerMode){leftPressed=_0x58bf51||_0x412eea,rightPressed=_0x58b255||_0x10b9cc;if(!_0x170ef6){const _0x4db98a=_0x396754&&!p1FireInputWasDown,_0x331074=!_0x396754&&p1FireInputWasDown;_0x263120?(_0x4db98a&&!p1JustFiredSingle&&(_0x43e742=!![]),_0x331074&&(p1JustFiredSingle=![])):_0x396754&&_0xaee299-playerLastShotTime>=SHOOT_COOLDOWN&&(_0x43e742=!![]);}shootPressed=_0x43e742;}else{if(isTwoPlayerMode&&currentPlayer===0x2){p2LeftPressed=_0x4114dc||_0x532e4f||_0xb75788&&_0x412eea,p2RightPressed=_0x155754||_0x5a979c||_0xb75788&&_0x10b9cc;if(!_0x170ef6){const _0x169b24=_0x2e6db9&&!p2FireInputWasDown,_0xeff99b=!_0x2e6db9&&p2FireInputWasDown,_0x7cfeb8=_0xb75788&&(!_0x4a8bf3&&(previousGameButtonStates[PS5_BUTTON_CROSS]??![]));_0x263120?(_0x169b24&&!p2JustFiredSingle&&(_0x56f57d=!![]),(_0xeff99b||_0x7cfeb8)&&(p2JustFiredSingle=![])):_0x2e6db9&&_0xaee299-playerLastShotTime>=SHOOT_COOLDOWN&&(_0x56f57d=!![]);}p2ShootPressed=_0x56f57d;}}if(!_0x170ef6&&(_0x43e742||_0x56f57d)){if(firePlayerBullet(![])){playerLastShotTime=_0xaee299,_0x170ef6=!![];if(_0x263120){if(_0x43e742)p1JustFiredSingle=!![];if(_0x56f57d)p2JustFiredSingle=!![];}}}p1FireInputWasDown=_0x396754,p2FireInputWasDown=_0x2e6db9;}catch(_0x70c42d){console[_0x32198(0x1ce)]('Error\x20handling\x20player\x20input:',_0x70c42d),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isTouchFiringActive=![];}}function aiControl(){const _0x40bc1b=_0x49db;try{if(isPaused||isManualControl||playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isShipCaptured||isWaitingForRespawn){if(ship)ship[_0x40bc1b(0x221)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=undefined;return;}smoothedShipX===undefined&&(smoothedShipX=ship['x']);const _0x2956a1=Date['now'](),_0x3b3016=gameCanvas['width'],_0x316229=gameCanvas[_0x40bc1b(0x20a)];let _0x2b932e=ship[_0x40bc1b(0x1bc)];isDualShipActive&&(_0x2b932e=DUAL_SHIP_OFFSET_X+ship[_0x40bc1b(0x1bc)]);const _0x5e983f=ship['x']+_0x2b932e/0x2,_0x4538e8=ship['y'],_0x572baf=_0x3b3016/0x2;let _0x21e28c;isDualShipActive?_0x21e28c=_0x572baf-_0x2b932e/0x2:_0x21e28c=_0x572baf-ship[_0x40bc1b(0x1bc)]/0x2;const _0x42609e=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive;let _0x38aa17=smoothedShipX,_0x72cb76=![],_0x4c1834=![],_0x224728=smoothedShipX,_0x288ab2=null,_0x28c65f=![];aiNeedsStabilization&&!_0x42609e&&(aiStabilizationEndTime=_0x2956a1+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],smoothedShipX=ship['x']);if(_0x2956a1<aiStabilizationEndTime&&!_0x42609e)_0x38aa17=_0x21e28c;else{_0x4c1834=![],_0x224728=smoothedShipX;if(!isInvincible){let _0x494718=[];const _0x43fc2c=isChallengingStage?FINAL_DODGE_LOOKAHEAD*0.8:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD:FINAL_DODGE_LOOKAHEAD,_0x5229f8=isChallengingStage?FINAL_DODGE_BUFFER_BASE*0.8:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER:FINAL_DODGE_BUFFER_BASE,_0x5c1174={'x':ship['x']-_0x5229f8/0x2,'y':ship['y']-_0x43fc2c,'width':_0x2b932e+_0x5229f8,'height':_0x43fc2c+ship['height']};for(const _0x5eea1f of enemyBullets){if(_0x5eea1f&&_0x5eea1f['y']+_0x5eea1f[_0x40bc1b(0x20a)]>0x0&&_0x5eea1f['y']<_0x316229){const _0x1b5a2c={'x':_0x5eea1f['x'],'y':_0x5eea1f['y'],'width':_0x5eea1f[_0x40bc1b(0x1bc)],'height':_0x5eea1f[_0x40bc1b(0x20a)]};checkCollision(_0x5c1174,_0x1b5a2c)&&_0x494718[_0x40bc1b(0x177)](_0x5eea1f);}}if(_0x494718[_0x40bc1b(0x211)]>0x0){_0x4c1834=!![];let _0x19af53=_0x3b3016,_0x985c74=0x0,_0x449006=Infinity;_0x494718[_0x40bc1b(0x149)](_0x3578df=>{const _0x334054=_0x40bc1b;_0x19af53=Math[_0x334054(0x158)](_0x19af53,_0x3578df['x']),_0x985c74=Math[_0x334054(0x1c9)](_0x985c74,_0x3578df['x']+_0x3578df[_0x334054(0x1bc)]),_0x449006=Math[_0x334054(0x158)](_0x449006,_0x4538e8-(_0x3578df['y']+_0x3578df[_0x334054(0x20a)]));});const _0x34df83=(_0x19af53+_0x985c74)/0x2,_0x37d066=_0x5e983f<_0x34df83?-0x1:0x1,_0x346f72=0x1-Math['min'](0x1,Math[_0x40bc1b(0x1c9)](0x0,_0x449006)/_0x43fc2c),_0x15daa8=isChallengingStage?1.6:isEntrancePhaseActive?2.2:1.8,_0x44c70f=isChallengingStage?1.3:isEntrancePhaseActive?1.8:1.5,_0xeee66=Math[_0x40bc1b(0x1c9)](0x0,_0x494718[_0x40bc1b(0x211)]-0x1)*_0x2b932e*0.3,_0x3b386b=_0x2b932e*(_0x15daa8+_0x346f72*_0x44c70f)+_0xeee66;_0x224728=smoothedShipX+_0x37d066*_0x3b386b;}if(!_0x4c1834&&!isChallengingStage&&!isFullGridWave){let _0x29a05b=![],_0x4f95a0=Infinity;for(const _0x2bc4df of enemies){if(_0x2bc4df&&_0x2bc4df['type']===ENEMY3_TYPE&&_0x2bc4df[_0x40bc1b(0x1f7)]===_0x40bc1b(0x157)&&_0x2bc4df['targetX']!=null){const _0x5581f8=AI_COLLISION_LOOKAHEAD*1.5,_0x4e4cd5=FINAL_DODGE_BUFFER_BASE*1.8,_0x226856=0.2,_0x2c372c=_0x2bc4df['x']+(_0x2bc4df[_0x40bc1b(0x221)]-_0x2bc4df['x'])*_0x226856,_0x1c1e34={'x':_0x2c372c,'y':_0x2bc4df['y'],'width':_0x2bc4df[_0x40bc1b(0x1bc)],'height':_0x2bc4df['height']},_0x2c06fc={'x':ship['x']-_0x4e4cd5/0x2,'y':ship['y']-_0x5581f8,'width':_0x2b932e+_0x4e4cd5,'height':_0x5581f8+ship[_0x40bc1b(0x20a)]};if(checkCollision(_0x2c06fc,_0x1c1e34)){const _0x4ea3a7=_0x4538e8-(_0x2bc4df['y']+_0x2bc4df[_0x40bc1b(0x20a)]);if(_0x4ea3a7<_0x4f95a0){_0x4f95a0=_0x4ea3a7,_0x4c1834=!![],_0x29a05b=!![];const _0x524658=_0x2bc4df['targetX']+_0x2bc4df[_0x40bc1b(0x1bc)]/0x2,_0x501192=_0x3b3016/0x2,_0x3295da=_0x524658<_0x501192?0x1:-0x1,_0x44d620=0x1-Math['min'](0x1,Math[_0x40bc1b(0x1c9)](0x0,_0x4ea3a7)/_0x5581f8),_0x578fbe=_0x2b932e*(2.5+_0x44d620*0x2);_0x224728=smoothedShipX+_0x3295da*_0x578fbe;}}}}}if(!_0x4c1834){const _0xb54053=AI_COLLISION_LOOKAHEAD,_0x18347a=NORMAL_WAVE_ATTACKING_DODGE_BUFFER_MULTIPLIER,_0x433c74=BEE_DODGE_BUFFER_HORIZONTAL_FACTOR;let _0x47ff8b=Infinity;for(const _0x30588a of enemies){if(_0x30588a&&_0x30588a[_0x40bc1b(0x1f7)]==='attacking'&&_0x30588a['y']+_0x30588a[_0x40bc1b(0x20a)]>0x0&&_0x30588a['y']<_0x316229){let _0x42c3ef=FINAL_DODGE_BUFFER_BASE*_0x18347a;_0x30588a[_0x40bc1b(0x193)]===ENEMY1_TYPE&&(_0x42c3ef*=_0x433c74);const _0x7788be={'x':ship['x']-_0x42c3ef/0x2,'y':ship['y']-_0xb54053,'width':_0x2b932e+_0x42c3ef,'height':_0xb54053+ship[_0x40bc1b(0x20a)]},_0x292e56={'x':_0x30588a['x'],'y':_0x30588a['y'],'width':_0x30588a[_0x40bc1b(0x1bc)],'height':_0x30588a[_0x40bc1b(0x20a)]};if(checkCollision(_0x7788be,_0x292e56)){const _0x51a135=_0x4538e8-(_0x30588a['y']+_0x30588a[_0x40bc1b(0x20a)]);if(_0x51a135<_0x47ff8b){_0x47ff8b=_0x51a135,_0x4c1834=!![];const _0x3e374c=_0x30588a['x']+_0x30588a[_0x40bc1b(0x1bc)]/0x2,_0x12546d=_0x5e983f<_0x3e374c?-0x1:0x1,_0x155c04=0x1-Math[_0x40bc1b(0x158)](0x1,Math['max'](0x0,_0x51a135)/_0xb54053),_0x4d1778=_0x2b932e*(0x2+_0x155c04*1.8);_0x224728=smoothedShipX+_0x12546d*_0x4d1778;}}}}}if(!_0x4c1834&&!isFullGridWave){const _0x28066e=AI_COLLISION_LOOKAHEAD;let _0x29aaee=Infinity;for(const _0xc0af32 of enemies){const _0x44e511=_0xc0af32&&(_0xc0af32[_0x40bc1b(0x1f7)]===_0x40bc1b(0x227)||_0xc0af32[_0x40bc1b(0x1f7)]===_0x40bc1b(0x17f));if(_0x44e511&&_0xc0af32['y']+_0xc0af32[_0x40bc1b(0x20a)]>0x0&&_0xc0af32['y']<_0x316229){let _0x18042c=FINAL_DODGE_BUFFER_BASE;_0xc0af32['type']===ENEMY1_TYPE&&(_0x18042c*=BEE_DODGE_BUFFER_HORIZONTAL_FACTOR);const _0x450e96={'x':ship['x']-_0x18042c/0x2,'y':ship['y']-_0x28066e,'width':_0x2b932e+_0x18042c,'height':_0x28066e+ship[_0x40bc1b(0x20a)]},_0x215089={'x':_0xc0af32['x'],'y':_0xc0af32['y'],'width':_0xc0af32[_0x40bc1b(0x1bc)],'height':_0xc0af32[_0x40bc1b(0x20a)]};if(checkCollision(_0x450e96,_0x215089)){const _0x1e2a0b=_0x4538e8-(_0xc0af32['y']+_0xc0af32[_0x40bc1b(0x20a)]);if(_0x1e2a0b<_0x29aaee){_0x29aaee=_0x1e2a0b,_0x4c1834=!![];const _0x16e2dd=_0xc0af32['x']+_0xc0af32['width']/0x2,_0x1061dd=_0x5e983f<_0x16e2dd?-0x1:0x1,_0x4702c4=0x1-Math[_0x40bc1b(0x158)](0x1,Math['max'](0x0,_0x1e2a0b)/_0x28066e),_0x2810e6=_0x2b932e*(0x2+_0x4702c4*1.8);_0x224728=smoothedShipX+_0x1061dd*_0x2810e6;}}}}}}if(_0x4c1834&&!isInvincible){const _0x2b2a55=Math['max'](AI_ANTI_CORNER_BUFFER,Math[_0x40bc1b(0x158)](_0x3b3016-_0x2b932e-AI_ANTI_CORNER_BUFFER,_0x224728));_0x38aa17=_0x2b2a55,_0x288ab2=null,_0x72cb76=![];}else{if(fallingShips[_0x40bc1b(0x211)]>0x0&&!isShipCaptured&&!isWaitingForRespawn){const _0x52e7bf=fallingShips[0x0];if(_0x52e7bf){const _0x55d9ec=_0x52e7bf['x']+_0x52e7bf['width']/0x2;_0x38aa17=_0x55d9ec-_0x2b932e/0x2,_0x38aa17=Math[_0x40bc1b(0x1c9)](AI_EDGE_BUFFER,Math[_0x40bc1b(0x158)](_0x3b3016-_0x2b932e-AI_EDGE_BUFFER,_0x38aa17)),_0x288ab2=null;let _0x42d067=-Infinity,_0x391746=null;for(const _0x16e49a of enemies){if(_0x16e49a&&_0x16e49a['y']<_0x4538e8){const _0x327a89=_0x16e49a['x']+_0x16e49a['width']/0x2,_0x3e90b4=Math[_0x40bc1b(0x16d)](_0x327a89-_0x5e983f),_0x4834c9=_0x4538e8-(_0x16e49a['y']+_0x16e49a[_0x40bc1b(0x20a)]);if(_0x3e90b4<_0x2b932e*1.5&&_0x4834c9>0x0){const _0xdfa32a=_0x316229-_0x16e49a['y']-_0x3e90b4*0x2-_0x4834c9;_0xdfa32a>_0x42d067&&(_0x42d067=_0xdfa32a,_0x391746=_0x16e49a);}}}if(_0x391746){let _0x2e3cc8=!![];const _0x3b9751={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x2b932e+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship[_0x40bc1b(0x20a)]};for(const _0x1cd7a4 of enemyBullets){if(_0x1cd7a4&&_0x1cd7a4['y']+_0x1cd7a4[_0x40bc1b(0x20a)]>0x0&&_0x1cd7a4['y']<_0x316229){const _0x371244={'x':_0x1cd7a4['x'],'y':_0x1cd7a4['y'],'width':_0x1cd7a4['width'],'height':_0x1cd7a4[_0x40bc1b(0x20a)]};if(checkCollision(_0x3b9751,_0x371244)){_0x2e3cc8=![];break;}}}_0x2e3cc8&&!(_0x391746[_0x40bc1b(0x193)]===ENEMY3_TYPE&&_0x391746['state']==='preparing_capture')&&(_0x72cb76=!![],_0x288ab2=_0x391746);}}}else{let _0xf1c3b8=![],_0x556fed=null;if(!isFullGridWave&&!isManualControl&&captureBeamActive&&capturingBossId&&playerLives>0x1&&!isShipCaptured&&!isInvincible){_0x556fed=enemies[_0x40bc1b(0x1c0)](_0x18f290=>_0x18f290['id']===capturingBossId);if(_0x556fed&&_0x556fed['state']===_0x40bc1b(0x16e)){_0xf1c3b8=!![];const _0x4bde83=_0x2956a1-_0x556fed[_0x40bc1b(0x145)];if(_0x4bde83>=AI_CAPTURE_WAIT_DURATION_MS){_0x28c65f=!![];const _0x3f7b7f=_0x556fed['x']+_0x556fed['width']/0x2;_0x38aa17=_0x3f7b7f-_0x2b932e/0x2,_0x288ab2=null,_0x72cb76=![];}}}if(!_0x28c65f){_0x288ab2=null;if(isEntrancePhaseActive&&!isChallengingStage&&!isFullGridWave){_0x38aa17=_0x21e28c;let _0x370fc1=-Infinity,_0x4100c4=null;for(const _0x6b70f8 of enemies){if(_0x6b70f8&&(_0x6b70f8[_0x40bc1b(0x1f7)]===_0x40bc1b(0x227)||_0x6b70f8[_0x40bc1b(0x1f7)]===_0x40bc1b(0x216))&&_0x6b70f8['y']<_0x4538e8){const _0x565912=_0x6b70f8['x']+_0x6b70f8[_0x40bc1b(0x1bc)]/0x2,_0x3a0130=_0x6b70f8['y']+_0x6b70f8[_0x40bc1b(0x20a)]/0x2,_0x388d73=_0x565912-_0x5e983f,_0x2c3d89=_0x4538e8-_0x3a0130,_0x1360eb=Math['sqrt'](_0x388d73*_0x388d73+_0x2c3d89*_0x2c3d89),_0x39fbde=Math[_0x40bc1b(0x1c9)](0x0,_0x2b932e*1.5-Math[_0x40bc1b(0x16d)](_0x388d73)),_0x1a0782=(_0x316229-_0x6b70f8['y'])*1.5+_0x39fbde-_0x1360eb*0.5;_0x1a0782>_0x370fc1&&(_0x370fc1=_0x1a0782,_0x4100c4=_0x6b70f8);}}if(_0x4100c4){_0x288ab2=_0x4100c4;const _0x3e46a3=_0x288ab2['x']+_0x288ab2[_0x40bc1b(0x1bc)]/0x2,_0x45c0c4=Math[_0x40bc1b(0x16d)](_0x5e983f-_0x3e46a3),_0xdfb812=_0x2b932e*ENTRANCE_SHOOT_ALIGNMENT_FACTOR;let _0x1b9191=!![];const _0x21e352={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x2b932e+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship[_0x40bc1b(0x20a)]};for(const _0x479764 of enemyBullets){if(_0x479764&&_0x479764['y']+_0x479764[_0x40bc1b(0x20a)]>0x0&&_0x479764['y']<_0x316229){const _0x1e3c07={'x':_0x479764['x'],'y':_0x479764['y'],'width':_0x479764['width'],'height':_0x479764[_0x40bc1b(0x20a)]};if(checkCollision(_0x21e352,_0x1e3c07)){_0x1b9191=![];break;}}}_0x1b9191&&_0x45c0c4<_0xdfb812&&((isDualShipActive||_0x288ab2['type']!==ENEMY3_TYPE||captureAttemptMadeThisLevel||isShipCaptured)&&(_0x72cb76=!![]));}}else{if(isChallengingStage){let _0x2cffc8=Infinity;_0x288ab2=null;for(const _0x1f9197 of enemies){if(_0x1f9197&&_0x1f9197[_0x40bc1b(0x1f7)]===_0x40bc1b(0x188)&&_0x1f9197['y']<_0x4538e8){const _0x33e256=_0x1f9197['x']+_0x1f9197['width']/0x2,_0x4afdd8=Math['abs'](_0x33e256-_0x5e983f),_0x5dee36=(0x1-Math[_0x40bc1b(0x158)](0x1,_0x1f9197['y']/_0x4538e8))*0x2,_0x5edcf8=_0x4afdd8/_0x3b3016*0.5,_0x55efd5=_0x5dee36+_0x5edcf8;_0x55efd5<_0x2cffc8&&(_0x2cffc8=_0x55efd5,_0x288ab2=_0x1f9197);}}let _0x202ecd=_0x5e983f;if(_0x288ab2){const _0x40d433=_0x288ab2['x']+_0x288ab2[_0x40bc1b(0x1bc)]/0x2,_0x5d41d1=_0x288ab2['y']+_0x288ab2[_0x40bc1b(0x20a)]/0x2,_0x2b0957=_0x4538e8-_0x5d41d1;let _0x25869f=_0x40d433;const _0x537d1a=_0x288ab2[_0x40bc1b(0x143)]===0x2||_0x288ab2[_0x40bc1b(0x143)]===0x3;if(!_0x537d1a&&_0x2b0957>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x4dbc59=Math['min'](MAX_PREDICTION_TIME_CS,_0x2b0957/PLAYER_BULLET_SPEED),_0x4f396a=0.4,_0x2016f7=(_0x288ab2[_0x40bc1b(0x1bb)]||0x0)*_0x4dbc59;_0x25869f=_0x40d433+_0x2016f7*_0x4f396a,_0x25869f=Math[_0x40bc1b(0x1c9)](_0x288ab2[_0x40bc1b(0x1bc)]/0x2,Math[_0x40bc1b(0x158)](_0x3b3016-_0x288ab2['width']/0x2,_0x25869f));}_0x202ecd=_0x25869f,_0x38aa17=_0x202ecd-_0x2b932e/0x2,_0x38aa17=Math[_0x40bc1b(0x1c9)](AI_EDGE_BUFFER,Math['min'](_0x3b3016-_0x2b932e-AI_EDGE_BUFFER,_0x38aa17));const _0x3b0408=_0x2b932e*1.5,_0x284430=Math[_0x40bc1b(0x16d)](_0x5e983f-_0x202ecd);_0x284430<_0x3b0408&&(_0x72cb76=!![]);}else{const _0x37e038=Math[_0x40bc1b(0x166)](_0x2956a1/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE*0.5;_0x38aa17=_0x21e28c+_0x37e038,_0x38aa17=Math[_0x40bc1b(0x1c9)](AI_EDGE_BUFFER,Math['min'](_0x3b3016-_0x2b932e-AI_EDGE_BUFFER,_0x38aa17));}}else{let _0x52645a=-Infinity;_0x288ab2=null;const _0x21bf65=_0xf1c3b8&&!_0x28c65f;for(const _0x9057ce of enemies){if(!_0x9057ce)continue;if(_0x21bf65&&_0x9057ce['id']===capturingBossId)continue;let _0x41a1d9=![],_0x10e696=0x0;switch(_0x9057ce[_0x40bc1b(0x1f7)]){case _0x40bc1b(0x182):_0x41a1d9=!![],_0x10e696=_0x21bf65?0x4e20:0x4650;break;case _0x40bc1b(0x216):case _0x40bc1b(0x17f):_0x41a1d9=!![],_0x10e696=0x2328;break;case _0x40bc1b(0x17d):_0x41a1d9=!![],_0x10e696=0x1b58;break;case'attacking':_0x41a1d9=!![],_0x10e696=0x1770;break;case _0x40bc1b(0x22b):_0x41a1d9=!![],_0x10e696=0x61a8;break;}if(_0x41a1d9){let _0x88179=_0x10e696,_0x137ef1=_0x9057ce[_0x40bc1b(0x206)]&&_0x9057ce[_0x40bc1b(0x193)]===ENEMY3_TYPE?0x1388:0x0,_0x18d041=(_0x316229-_0x9057ce['y'])*0x2,_0x1d0235=Math['max'](0x0,_0x2b932e*0x1-Math[_0x40bc1b(0x16d)](_0x9057ce['x']+_0x9057ce[_0x40bc1b(0x1bc)]/0x2-_0x5e983f))*0x1;_0x88179+=_0x18d041+_0x137ef1+_0x1d0235,_0x88179>_0x52645a&&(_0x52645a=_0x88179,_0x288ab2=_0x9057ce);}}let _0x4e331f=_0x21e28c+_0x2b932e/0x2;if(_0x288ab2){const _0xcbc241=_0x288ab2['x']+_0x288ab2['width']/0x2,_0x420535=_0x288ab2['y']+_0x288ab2[_0x40bc1b(0x20a)]/0x2,_0x1095e5=_0x4538e8-_0x420535;let _0x492cba=_0xcbc241;if(_0x288ab2['state']!==_0x40bc1b(0x182)&&_0x288ab2[_0x40bc1b(0x1f7)]!==_0x40bc1b(0x22b)){if(_0x1095e5>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x54f644=Math[_0x40bc1b(0x158)](MAX_PREDICTION_TIME,_0x1095e5/PLAYER_BULLET_SPEED);let _0x5b2308=_0xcbc241+(_0x288ab2[_0x40bc1b(0x1bb)]||0x0)*_0x54f644;_0x492cba=Math[_0x40bc1b(0x1c9)](_0x288ab2['width']/0x2,Math[_0x40bc1b(0x158)](_0x3b3016-_0x288ab2[_0x40bc1b(0x1bc)]/0x2,_0x5b2308));}}_0x4e331f=_0x492cba,_0x38aa17=_0x4e331f-_0x2b932e/0x2;if(_0x288ab2[_0x40bc1b(0x1f7)]===_0x40bc1b(0x182)||_0x288ab2['state']===_0x40bc1b(0x22b))_0x38aa17=Math['max'](AI_EDGE_BUFFER,Math['min'](_0x3b3016-_0x2b932e-AI_EDGE_BUFFER,_0x38aa17));else{const _0x3d2a04=_0x3b3016*0.6/0x2,_0x31d9a7=_0x572baf-_0x3d2a04,_0x36222c=_0x572baf+_0x3d2a04-_0x2b932e;_0x38aa17=Math[_0x40bc1b(0x1c9)](_0x31d9a7,Math['min'](_0x36222c,_0x38aa17)),_0x38aa17=Math[_0x40bc1b(0x1c9)](AI_EDGE_BUFFER,Math[_0x40bc1b(0x158)](_0x3b3016-_0x2b932e-AI_EDGE_BUFFER,_0x38aa17));}let _0x1dee6e=![],_0x1a92fe=Math[_0x40bc1b(0x16d)](_0x5e983f-_0x4e331f),_0x5c87a9=_0x288ab2[_0x40bc1b(0x1f7)]===_0x40bc1b(0x182)||_0x288ab2[_0x40bc1b(0x1f7)]==='preparing_capture'?_0x2b932e*GRID_SHOOT_ALIGNMENT_FACTOR:_0x2b932e*FINAL_SHOOT_ALIGNMENT_THRESHOLD;const _0x481314=ship['x']<AI_EDGE_BUFFER*AI_EDGE_SHOOT_BUFFER_FACTOR,_0x5716ff=ship['x']>_0x3b3016-_0x2b932e-AI_EDGE_SHOOT_BUFFER_FACTOR,_0x1ac690=_0x4e331f>_0x3b3016*AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR,_0x596727=_0x4e331f<_0x3b3016*(0x1-AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR);(_0x481314&&_0x1ac690||_0x5716ff&&_0x596727)&&(_0x1dee6e=!![]);if(!_0x1dee6e&&_0x1a92fe<_0x5c87a9){let _0x37c748=![];if(_0x288ab2['state']!==_0x40bc1b(0x182)&&_0x288ab2[_0x40bc1b(0x1f7)]!=='preparing_capture')for(const _0x15257d of enemies){if(!_0x15257d||_0x15257d===_0x288ab2)continue;if(_0x21bf65&&_0x15257d['id']===capturingBossId)continue;if(_0x15257d['y']<_0x4538e8&&_0x15257d['y']+_0x15257d[_0x40bc1b(0x20a)]>_0x288ab2['y']){const _0x4c2784=_0x15257d['x']-AI_SHOT_CLEARANCE_BUFFER,_0x166db7=_0x15257d['x']+_0x15257d[_0x40bc1b(0x1bc)]+AI_SHOT_CLEARANCE_BUFFER;if(_0x4e331f>_0x4c2784&&_0x4e331f<_0x166db7){_0x37c748=!![];break;}}}!_0x37c748&&((!_0x21bf65||_0x288ab2['id']!==capturingBossId)&&(_0x72cb76=!![]));}}else{const _0x40418a=Math[_0x40bc1b(0x166)](_0x2956a1/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE;_0x38aa17=_0x21e28c+_0x40418a,_0x38aa17=Math[_0x40bc1b(0x1c9)](AI_EDGE_BUFFER,Math['min'](_0x3b3016-_0x2b932e-AI_EDGE_BUFFER,_0x38aa17));}}}}}}}ship[_0x40bc1b(0x221)]=_0x38aa17;if(_0x72cb76&&!_0x4c1834&&!_0x28c65f){let _0x20d6f1=!![];!isChallengingStage&&(_0x20d6f1=_0x2956a1>=aiCanShootTime),_0x20d6f1&&_0x2956a1-aiLastShotTime>=AI_SHOOT_COOLDOWN&&(firePlayerBullet(!![])&&(aiLastShotTime=_0x2956a1));}}catch(_0x253115){console['error']('Error\x20in\x20aiControl:',_0x253115,_0x253115['stack']);if(ship)ship[_0x40bc1b(0x221)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=undefined;}}function findAndDetachEnemy(){const _0x9cef31=_0x49db;try{if(!isFullGridWave&&isShipCaptured){const _0x3c13a5=enemies[_0x9cef31(0x1c0)](_0x1c239d=>_0x1c239d&&_0x1c239d[_0x9cef31(0x193)]===ENEMY3_TYPE&&_0x1c239d[_0x9cef31(0x19b)]&&_0x1c239d[_0x9cef31(0x1f7)]===_0x9cef31(0x182));if(_0x3c13a5){console['log'](_0x9cef31(0x1c4)+_0x3c13a5['id']+_0x9cef31(0x16c)),_0x3c13a5['justReturned']=!![],_0x3c13a5[_0x9cef31(0x172)]='normal';const _0x4c5bdb=new Set([_0x3c13a5['id']]);return resetJustReturnedFlags(_0x4c5bdb),[_0x3c13a5];}}if(isEntrancePhaseActive)return null;let _0x194b4f=enemies[_0x9cef31(0x171)](_0x39da6f=>_0x39da6f&&_0x39da6f['state']===_0x9cef31(0x182)&&!_0x39da6f[_0x9cef31(0x178)]);if(_0x194b4f[_0x9cef31(0x211)]===0x0){_0x194b4f=enemies[_0x9cef31(0x171)](_0x1694c7=>_0x1694c7&&_0x1694c7[_0x9cef31(0x1f7)]===_0x9cef31(0x182));if(_0x194b4f['length']===0x0)return null;}if(_0x194b4f['length']===0x0)return null;_0x194b4f[_0x9cef31(0x22e)]((_0x731ec5,_0x4eab06)=>(_0x4eab06[_0x9cef31(0x200)]||0x0)-(_0x731ec5[_0x9cef31(0x200)]||0x0));const _0x4e421e=_0x194b4f[_0x9cef31(0x211)]<=0x3;let _0x36adb1=[];const _0x1bc962=_0x9cef31(0x1fd);gridJustCompleted&&(gridJustCompleted=![]);let _0x178958=![];if(level>0x1&&!_0x4e421e&&_0x194b4f['length']>=0x3){const _0x115f54=_0x194b4f[_0x9cef31(0x171)](_0x1825ef=>_0x1825ef[_0x9cef31(0x193)]===ENEMY3_TYPE&&!_0x1825ef[_0x9cef31(0x19b)]);for(const _0x2096e7 of _0x115f54){const _0x4b2704=_0x194b4f[_0x9cef31(0x1c0)](_0x4c9c3f=>_0x4c9c3f[_0x9cef31(0x193)]===ENEMY2_TYPE&&_0x4c9c3f['gridRow']===_0x2096e7[_0x9cef31(0x200)]&&_0x4c9c3f['gridCol']===_0x2096e7[_0x9cef31(0x19e)]-0x1),_0x5e9257=_0x194b4f[_0x9cef31(0x1c0)](_0x17a39e=>_0x17a39e['type']===ENEMY2_TYPE&&_0x17a39e[_0x9cef31(0x200)]===_0x2096e7[_0x9cef31(0x200)]&&_0x17a39e[_0x9cef31(0x19e)]===_0x2096e7[_0x9cef31(0x19e)]+0x1);if(_0x4b2704&&_0x5e9257){_0x36adb1=[_0x2096e7,_0x4b2704,_0x5e9257],_0x178958=!![];break;}}}if(!_0x178958&&!_0x4e421e){const _0x408daf=_0x194b4f['filter'](_0x5720a6=>_0x5720a6[_0x9cef31(0x193)]===ENEMY1_TYPE),_0x13c009=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x408daf[_0x9cef31(0x211)]>=0x2&&Math[_0x9cef31(0x137)]()<_0x13c009){const _0x141d08=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x42177d=_0x408daf[_0x9cef31(0x211)]>=0x3&&Math[_0x9cef31(0x137)]()<_0x141d08?0x3:0x2;let _0x3337f6=![];_0x408daf[_0x9cef31(0x22e)](()=>Math[_0x9cef31(0x137)]()-0.5);for(let _0xa89fd5=0x0;_0xa89fd5<_0x408daf[_0x9cef31(0x211)];_0xa89fd5++){const _0x1fbb5d=_0x408daf[_0xa89fd5];let _0x369fb3=[_0x1fbb5d];const _0x241ffe=_0x408daf[_0x9cef31(0x171)](_0x5a3e9e=>_0x5a3e9e['id']!==_0x1fbb5d['id']&&_0x5a3e9e[_0x9cef31(0x200)]===_0x1fbb5d[_0x9cef31(0x200)]);_0x241ffe[_0x9cef31(0x22e)]((_0x587deb,_0xf397e8)=>Math[_0x9cef31(0x16d)](_0x587deb[_0x9cef31(0x19e)]-_0x1fbb5d[_0x9cef31(0x19e)])-Math[_0x9cef31(0x16d)](_0xf397e8[_0x9cef31(0x19e)]-_0x1fbb5d[_0x9cef31(0x19e)]));for(let _0xe1840c=0x0;_0xe1840c<_0x241ffe[_0x9cef31(0x211)]&&_0x369fb3[_0x9cef31(0x211)]<_0x42177d;_0xe1840c++){_0x369fb3[_0x9cef31(0x177)](_0x241ffe[_0xe1840c]);}if(_0x369fb3['length']===_0x42177d){_0x36adb1=_0x369fb3,_0x178958=!![],_0x3337f6=!![];break;}}!_0x3337f6&&_0x408daf[_0x9cef31(0x211)]>=_0x42177d&&(_0x36adb1=_0x408daf[_0x9cef31(0x160)](0x0,_0x42177d),_0x178958=!![]);}}if(!_0x178958&&!_0x4e421e){const _0x41af4c=_0x194b4f[_0x9cef31(0x171)](_0x59665b=>_0x59665b[_0x9cef31(0x193)]===ENEMY2_TYPE),_0x126b3a=0.2;if(_0x41af4c[_0x9cef31(0x211)]>=0x2&&Math['random']()<_0x126b3a){const _0x518920=0x2;let _0x2f0303=![];_0x41af4c[_0x9cef31(0x22e)](()=>Math['random']()-0.5);for(let _0x410085=0x0;_0x410085<_0x41af4c['length'];_0x410085++){const _0x35c7a=_0x41af4c[_0x410085];let _0x16dd12=[_0x35c7a];const _0x5c69dc=_0x41af4c[_0x9cef31(0x171)](_0x4d6305=>_0x4d6305['id']!==_0x35c7a['id']&&_0x4d6305[_0x9cef31(0x200)]===_0x35c7a[_0x9cef31(0x200)]);_0x5c69dc[_0x9cef31(0x22e)]((_0x515b28,_0x24c4fa)=>Math[_0x9cef31(0x16d)](_0x515b28[_0x9cef31(0x19e)]-_0x35c7a[_0x9cef31(0x19e)])-Math['abs'](_0x24c4fa[_0x9cef31(0x19e)]-_0x35c7a[_0x9cef31(0x19e)]));for(let _0xd852ca=0x0;_0xd852ca<_0x5c69dc[_0x9cef31(0x211)]&&_0x16dd12[_0x9cef31(0x211)]<_0x518920;_0xd852ca++){_0x16dd12[_0x9cef31(0x177)](_0x5c69dc[_0xd852ca]);}if(_0x16dd12['length']===_0x518920){_0x36adb1=_0x16dd12,_0x178958=!![],_0x2f0303=!![];break;}}!_0x2f0303&&_0x41af4c[_0x9cef31(0x211)]>=_0x518920&&(_0x36adb1=_0x41af4c[_0x9cef31(0x160)](0x0,_0x518920),_0x178958=!![]);}}if(!_0x178958&&_0x194b4f['length']>0x0){const _0x303466=_0x194b4f[0x0];_0x36adb1['push'](_0x303466);if(_0x194b4f[_0x9cef31(0x211)]>0x1&&!_0x4e421e&&Math[_0x9cef31(0x137)]()<0.2){const _0x4d4f99=_0x194b4f[_0x9cef31(0x1c0)](_0x5ba390=>_0x5ba390['id']!==_0x303466['id']&&_0x5ba390['gridRow']===_0x303466['gridRow']&&_0x5ba390[_0x9cef31(0x19e)]===_0x303466[_0x9cef31(0x19e)]-0x1),_0x5924c9=_0x194b4f[_0x9cef31(0x1c0)](_0x162e9e=>_0x162e9e['id']!==_0x303466['id']&&_0x162e9e[_0x9cef31(0x200)]===_0x303466[_0x9cef31(0x200)]&&_0x162e9e[_0x9cef31(0x19e)]===_0x303466['gridCol']+0x1),_0x5c7faa=_0x4d4f99||_0x5924c9;if(_0x5c7faa){const _0x44f0ff=_0x303466[_0x9cef31(0x193)]===ENEMY3_TYPE&&_0x5c7faa[_0x9cef31(0x193)]===ENEMY3_TYPE;!_0x44f0ff&&_0x36adb1[_0x9cef31(0x177)](_0x5c7faa);}}_0x178958=!![];}if(_0x36adb1[_0x9cef31(0x211)]>0x0){_0x36adb1=_0x36adb1['filter'](_0x74c648=>_0x74c648);if(_0x36adb1['length']===0x0)return null;_0x36adb1[_0x9cef31(0x149)](_0x3cbe19=>{const _0xc947ab=_0x9cef31;_0x3cbe19&&(_0x3cbe19[_0xc947ab(0x178)]=!![],_0x3cbe19[_0xc947ab(0x172)]=_0x1bc962);});const _0x19667e=new Set(_0x36adb1[_0x9cef31(0x205)](_0x3dc076=>_0x3dc076['id']));return resetJustReturnedFlags(_0x19667e),_0x36adb1;}return null;}catch(_0x26f072){return console[_0x9cef31(0x1ce)](_0x9cef31(0x18a),_0x26f072),null;}}function triggerImmediateCaptureDive(){const _0x232fc3=_0x49db;try{if(playerLives<=0x1||isChallengingStage||isShipCaptured||isDualShipActive||captureAttemptMadeThisLevel)return;const _0x131dea=enemies[_0x232fc3(0x171)](_0x4a9da7=>_0x4a9da7&&_0x4a9da7[_0x232fc3(0x1f7)]==='in_grid'&&_0x4a9da7[_0x232fc3(0x193)]===ENEMY3_TYPE&&!_0x4a9da7[_0x232fc3(0x19b)]);if(_0x131dea[_0x232fc3(0x211)]>0x0){const _0x367b43=_0x131dea[Math[_0x232fc3(0x1d1)](Math['random']()*_0x131dea[_0x232fc3(0x211)])],_0x5f07d7=Date[_0x232fc3(0x207)]();captureAttemptMadeThisLevel=!![],_0x367b43[_0x232fc3(0x178)]=!![];const _0x22a652=new Set([_0x367b43['id']]);resetJustReturnedFlags(_0x22a652);const _0x21ff5d=Math[_0x232fc3(0x137)]()<0.5?_0x232fc3(0x19f):_0x232fc3(0x20b),_0x425f60=_0x21ff5d==='left'?gameCanvas[_0x232fc3(0x1bc)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas['width']*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x27c80e=gameCanvas[_0x232fc3(0x20a)]*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0x367b43['state']=_0x232fc3(0x22b),_0x367b43[_0x232fc3(0x221)]=_0x425f60,_0x367b43[_0x232fc3(0x1b3)]=_0x27c80e,_0x367b43[_0x232fc3(0x15e)]=_0x5f07d7,playSound(bossGalagaDiveSound);const _0x49f320=_0x367b43['id'];_0x367b43[_0x232fc3(0x202)]=setTimeout(()=>{const _0x2426f3=_0x232fc3,_0x1bfb95=enemies['find'](_0x564aef=>_0x564aef?.['id']===_0x49f320);_0x1bfb95&&_0x1bfb95[_0x2426f3(0x1f7)]===_0x2426f3(0x22b)&&(_0x1bfb95[_0x2426f3(0x1f7)]=_0x2426f3(0x157));if(_0x1bfb95)_0x1bfb95['capturePrepareTimeout']=null;const _0x1933e4=enemySpawnTimeouts[_0x2426f3(0x1ec)](_0x3040f6=>_0x3040f6===_0x367b43[_0x2426f3(0x202)]);if(_0x1933e4>-0x1)enemySpawnTimeouts['splice'](_0x1933e4,0x1);},0x12c),enemySpawnTimeouts['push'](_0x367b43['capturePrepareTimeout']);}}catch(_0x483515){console['error'](_0x232fc3(0x17c),_0x483515);}}function resetJustReturnedFlags(_0x3ff32f){const _0x491c53=_0x49db;enemies[_0x491c53(0x149)](_0x2ae46a=>{const _0x299187=_0x491c53;let _0xbb55ac=![];if(_0x3ff32f instanceof Set)_0xbb55ac=_0x3ff32f[_0x299187(0x208)](_0x2ae46a['id']);else typeof _0x3ff32f==='string'&&(_0xbb55ac=_0x2ae46a['id']===_0x3ff32f);_0x2ae46a&&_0x2ae46a['state']==='in_grid'&&_0x2ae46a['justReturned']&&!_0xbb55ac&&(_0x2ae46a[_0x299187(0x178)]=![]);});}function updateFloatingScores(){const _0x3421b9=_0x49db;if(isPaused)return;try{const _0x517c3c=Date[_0x3421b9(0x207)]();floatingScores=floatingScores['filter'](_0x43cd31=>_0x517c3c-_0x43cd31[_0x3421b9(0x1d9)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x303e00){console[_0x3421b9(0x1ce)](_0x3421b9(0x13c),_0x303e00),floatingScores=[];}}function updateExplosions(){const _0x20f27f=_0x49db;if(isPaused)return;try{const _0x2c9604=Date['now']();for(let _0x2d9470=explosions[_0x20f27f(0x211)]-0x1;_0x2d9470>=0x0;_0x2d9470--){const _0x22be17=explosions[_0x2d9470],_0x419ff0=_0x2c9604-_0x22be17[_0x20f27f(0x1d9)];if(_0x419ff0>_0x22be17[_0x20f27f(0x1aa)]){explosions[_0x20f27f(0x1d7)](_0x2d9470,0x1);continue;}_0x22be17[_0x20f27f(0x175)]['forEach'](_0x458fda=>{const _0x5d74b8=_0x20f27f;_0x458fda['x']+=_0x458fda['vx'],_0x458fda['y']+=_0x458fda['vy'],_0x458fda[_0x5d74b8(0x15a)]=Math[_0x5d74b8(0x1c9)](0x0,0x1-_0x419ff0/_0x22be17[_0x5d74b8(0x1aa)]*EXPLOSION_FADE_SPEED);});}}catch(_0x275d99){console[_0x20f27f(0x1ce)](_0x20f27f(0x199),_0x275d99),explosions=[];}}function moveEntities(){const _0x932b5f=_0x49db;if(isPaused)return;try{if(ship&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isWaitingForRespawn){let _0x4b7c0b=ship['width'];isDualShipActive&&(_0x4b7c0b+=DUAL_SHIP_OFFSET_X);let _0x5c42ce=ship['x'];if(isManualControl){let _0x1147e1=![],_0x3d2b42=![];currentPlayer===0x1||!isTwoPlayerMode?(_0x1147e1=leftPressed,_0x3d2b42=rightPressed):(_0x1147e1=p2LeftPressed,_0x3d2b42=p2RightPressed);if(_0x1147e1&&ship['x']>0x0)_0x5c42ce=ship['x']-ship[_0x932b5f(0x1d6)];else _0x3d2b42&&ship['x']<gameCanvas[_0x932b5f(0x1bc)]-_0x4b7c0b&&(_0x5c42ce=ship['x']+ship[_0x932b5f(0x1d6)]);ship['x']=Math[_0x932b5f(0x1c9)](0x0,Math[_0x932b5f(0x158)](gameCanvas[_0x932b5f(0x1bc)]-_0x4b7c0b,_0x5c42ce)),ship[_0x932b5f(0x221)]=ship['x'];}else{if(typeof smoothedShipX!==_0x932b5f(0x21c)){const _0x46d98c=0.1,_0x5f21b6=1.2;smoothedShipX+=(ship[_0x932b5f(0x221)]-smoothedShipX)*AI_SMOOTHING_FACTOR_MOVE;const _0x4506b2=smoothedShipX-ship['x'],_0x3822e7=ship[_0x932b5f(0x1d6)]*_0x5f21b6;let _0x399928=0x0;if(Math['abs'](_0x4506b2)>_0x46d98c){const _0xbe5859=isChallengingStage?CS_AI_MOVE_FRACTION:NORMAL_MOVE_FRACTION;_0x399928=_0x4506b2*_0xbe5859,_0x399928=Math[_0x932b5f(0x1c9)](-_0x3822e7,Math[_0x932b5f(0x158)](_0x3822e7,_0x399928)),Math[_0x932b5f(0x16d)](_0x399928)>Math[_0x932b5f(0x16d)](_0x4506b2)&&(_0x399928=_0x4506b2),ship['x']+=_0x399928,ship['x']=Math['max'](0x0,Math[_0x932b5f(0x158)](gameCanvas[_0x932b5f(0x1bc)]-_0x4b7c0b,ship['x']));}}else ship['x']=Math[_0x932b5f(0x1c9)](0x0,Math[_0x932b5f(0x158)](gameCanvas['width']-_0x4b7c0b,ship[_0x932b5f(0x221)]));}}const _0x41c9a9=Date['now']();for(let _0x3cc991=bullets['length']-0x1;_0x3cc991>=0x0;_0x3cc991--){const _0x5d64ff=bullets[_0x3cc991];_0x5d64ff?(_0x5d64ff['y']-=_0x5d64ff[_0x932b5f(0x1d6)],_0x5d64ff['y']+PLAYER_BULLET_HEIGHT<0x0&&bullets[_0x932b5f(0x1d7)](_0x3cc991,0x1)):bullets['splice'](_0x3cc991,0x1);}for(let _0x159e68=enemyBullets[_0x932b5f(0x211)]-0x1;_0x159e68>=0x0;_0x159e68--){const _0xbae284=enemyBullets[_0x159e68];if(!_0xbae284){enemyBullets['splice'](_0x159e68,0x1);continue;}_0xbae284['x']+=_0xbae284['vx'],_0xbae284['y']+=_0xbae284['vy'],(_0xbae284['y']>gameCanvas[_0x932b5f(0x20a)]||_0xbae284['y']<-ENEMY_BULLET_HEIGHT||_0xbae284['x']<-ENEMY_BULLET_WIDTH||_0xbae284['x']>gameCanvas[_0x932b5f(0x1bc)])&&enemyBullets[_0x932b5f(0x1d7)](_0x159e68,0x1);}for(let _0x1dec8a=fallingShips[_0x932b5f(0x211)]-0x1;_0x1dec8a>=0x0;_0x1dec8a--){const _0x385274=fallingShips[_0x1dec8a];if(!_0x385274){fallingShips[_0x932b5f(0x1d7)](_0x1dec8a,0x1);continue;}_0x385274['y']+=FALLING_SHIP_SPEED;const _0x428e4d=_0x41c9a9-_0x385274[_0x932b5f(0x1d9)];typeof _0x385274[_0x932b5f(0x135)]===_0x932b5f(0x1dc)?_0x385274['tintProgress']=Math[_0x932b5f(0x1c9)](0x0,0x1-_0x428e4d/FALLING_SHIP_FADE_DURATION_MS):_0x385274['tintProgress']=0x0;if(typeof _0x385274[_0x932b5f(0x213)]==='number'){const _0x2babde=Math[_0x932b5f(0x158)](0x1,_0x428e4d/FALLING_SHIP_ROTATION_DURATION_MS);_0x385274['rotation']=_0x2babde*0x2*(0x2*Math['PI']);}else _0x385274[_0x932b5f(0x213)]=0x0;if(ship&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x385274['y']+_0x385274[_0x932b5f(0x20a)]>=gameCanvas[_0x932b5f(0x20a)]-AUTO_DOCK_THRESHOLD){fallingShips[_0x932b5f(0x1d7)](_0x1dec8a,0x1),isDualShipActive=!![];currentPlayer===0x1?player1IsDualShipActive=!![]:player2IsDualShipActive=!![];playSound(dualShipSound);continue;}_0x385274['y']>gameCanvas[_0x932b5f(0x20a)]+_0x385274[_0x932b5f(0x20a)]&&fallingShips[_0x932b5f(0x1d7)](_0x1dec8a,0x1);}let _0x358511=0x0;const _0x15854d=enemies['some'](_0x202c0e=>_0x202c0e?.[_0x932b5f(0x1f7)]===_0x932b5f(0x182)),_0x348287=!isChallengingStage&&!isWaveTransitioning&&_0x15854d&&!isShowingPlayerGameOverMessage;if(_0x348287){!isGridSoundPlaying&&playSound(gridBackgroundSound,!![]);const _0x544317=enemies[_0x932b5f(0x171)](_0x2003dc=>_0x2003dc?.[_0x932b5f(0x1f7)]===_0x932b5f(0x182));if(_0x544317[_0x932b5f(0x211)]>0x0){let _0xc679a=gameCanvas[_0x932b5f(0x1bc)],_0x418211=0x0;_0x544317[_0x932b5f(0x149)](_0x2e5f70=>{const _0x2508d9=_0x932b5f;_0x2e5f70&&(_0xc679a=Math['min'](_0xc679a,_0x2e5f70['x']),_0x418211=Math[_0x2508d9(0x1c9)](_0x418211,_0x2e5f70['x']+_0x2e5f70[_0x2508d9(0x1bc)]));});const _0x5aef61=gameCanvas[_0x932b5f(0x1bc)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0xb973fc=gameCanvas['width']*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x418211>=_0xb973fc)gridMoveDirection=-0x1;else gridMoveDirection===-0x1&&_0xc679a<=_0x5aef61&&(gridMoveDirection=0x1);const _0x2d886f=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x358511=_0x2d886f*gridMoveDirection,currentGridOffsetX+=_0x358511,enemies[_0x932b5f(0x149)](_0xd6b53d=>{const _0x1555bb=_0x932b5f;if(_0xd6b53d&&(_0xd6b53d[_0x1555bb(0x1f7)]===_0x1555bb(0x17f)||_0xd6b53d[_0x1555bb(0x1f7)]===_0x1555bb(0x182)||_0xd6b53d['state']==='moving_to_grid'))try{const _0x46b624=_0xd6b53d[_0x1555bb(0x193)]===ENEMY3_TYPE?BOSS_WIDTH:_0xd6b53d[_0x1555bb(0x193)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x4d8fa4,y:_0x16f269}=getCurrentGridSlotPosition(_0xd6b53d[_0x1555bb(0x200)],_0xd6b53d['gridCol'],_0x46b624);_0xd6b53d[_0x1555bb(0x1d4)]=_0x4d8fa4,_0xd6b53d[_0x1555bb(0x1b8)]=_0x16f269;}catch(_0x47d89c){console[_0x1555bb(0x1ce)](_0x1555bb(0x1fa)+_0xd6b53d?.['id']+_0x1555bb(0x21d)+_0xd6b53d?.[_0x1555bb(0x1f7)]+_0x1555bb(0x189),_0x47d89c);}});}}else isGridSoundPlaying&&!isChallengingStage&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]),_0x358511=0x0;for(let _0x6c1e56=enemies[_0x932b5f(0x211)]-0x1;_0x6c1e56>=0x0;_0x6c1e56--){let _0x3fde02=enemies[_0x6c1e56];if(!_0x3fde02)continue;const _0x1d5509=_0x3fde02['id'];if(_0x3fde02[_0x932b5f(0x202)]&&_0x3fde02[_0x932b5f(0x1f7)]!==_0x932b5f(0x22b)){clearTimeout(_0x3fde02['capturePrepareTimeout']);const _0x292671=enemySpawnTimeouts['indexOf'](_0x3fde02[_0x932b5f(0x202)]);if(_0x292671>-0x1)enemySpawnTimeouts[_0x932b5f(0x1d7)](_0x292671,0x1);_0x3fde02[_0x932b5f(0x202)]=null;}const _0x4ed591=_0x3fde02['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x3fde02[_0x932b5f(0x193)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x20a694=_0x3fde02[_0x932b5f(0x193)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x3fde02[_0x932b5f(0x193)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x3fde02['state']){case'following_bezier_path':{if(isEntrancePhaseActive&&!isChallengingStage)break;const _0x510b3a=challengingStagePaths[_0x3fde02[_0x932b5f(0x139)]];if(!_0x510b3a||_0x510b3a['length']===0x0){console[_0x932b5f(0x1ce)](_0x932b5f(0x1c1)+_0x1d5509+_0x932b5f(0x16b)+_0x3fde02[_0x932b5f(0x139)]+'!\x20Removing.'),enemies[_0x932b5f(0x1d7)](_0x6c1e56,0x1);continue;}if(_0x3fde02['pathSegmentIndex']>=_0x510b3a[_0x932b5f(0x211)]){console['warn'](_0x932b5f(0x1c1)+_0x1d5509+'\x20path\x20index\x20'+_0x3fde02[_0x932b5f(0x18e)]+_0x932b5f(0x14b)),enemies[_0x932b5f(0x1d7)](_0x6c1e56,0x1);continue;}const _0x3488c7=_0x510b3a[_0x3fde02['pathSegmentIndex']];if(!_0x3488c7?.['p0']){console[_0x932b5f(0x1ce)]('CS\x20Enemy\x20'+_0x1d5509+_0x932b5f(0x1e8)+_0x3fde02[_0x932b5f(0x18e)]+_0x932b5f(0x1fc)),enemies['splice'](_0x6c1e56,0x1);continue;}const _0x1612d6=_0x3fde02['pathSpeedMultiplier']||0x1,_0x507fdf=CS_ENTRANCE_PATH_SPEED*_0x1612d6;_0x3fde02[_0x932b5f(0x150)]+=_0x507fdf;let _0x3dd2f1,_0x2829d4;const _0x461d77=_0x3fde02['x'],_0x46040a=_0x3fde02['y'];if(_0x3fde02['pathT']>=0x1){_0x3dd2f1=calculateBezierPoint(0x1,_0x3488c7['p0']['x'],_0x3488c7['p1']['x'],_0x3488c7['p2']['x'],_0x3488c7['p3']['x']),_0x2829d4=calculateBezierPoint(0x1,_0x3488c7['p0']['y'],_0x3488c7['p1']['y'],_0x3488c7['p2']['y'],_0x3488c7['p3']['y']),_0x3fde02['pathT']=0x0,_0x3fde02['pathSegmentIndex']++;if(_0x3fde02['pathSegmentIndex']>=_0x510b3a[_0x932b5f(0x211)]){enemies['splice'](_0x6c1e56,0x1);continue;}}else _0x3dd2f1=calculateBezierPoint(_0x3fde02[_0x932b5f(0x150)],_0x3488c7['p0']['x'],_0x3488c7['p1']['x'],_0x3488c7['p2']['x'],_0x3488c7['p3']['x']),_0x2829d4=calculateBezierPoint(_0x3fde02[_0x932b5f(0x150)],_0x3488c7['p0']['y'],_0x3488c7['p1']['y'],_0x3488c7['p2']['y'],_0x3488c7['p3']['y']);_0x3fde02[_0x932b5f(0x1bb)]=_0x3dd2f1-_0x461d77,_0x3fde02[_0x932b5f(0x1a5)]=_0x2829d4-_0x46040a,_0x3fde02['x']=_0x3dd2f1,_0x3fde02['y']=_0x2829d4;const _0x4ce534=Math['max'](_0x4ed591,_0x20a694)*2.5;let _0x1db8d8=_0x3fde02['y']>gameCanvas[_0x932b5f(0x20a)]+_0x4ce534||_0x3fde02['y']<-_0x4ce534||_0x3fde02['x']<-_0x4ce534||_0x3fde02['x']>gameCanvas[_0x932b5f(0x1bc)]+_0x4ce534;if(_0x1db8d8&&_0x3fde02[_0x932b5f(0x18e)]>0x0){enemies[_0x932b5f(0x1d7)](_0x6c1e56,0x1);continue;}break;}case _0x932b5f(0x227):{if(isChallengingStage)break;const _0x47eb92=normalWaveEntrancePaths[_0x3fde02[_0x932b5f(0x139)]];if(!_0x47eb92||_0x47eb92[_0x932b5f(0x211)]===0x0){console['error'](_0x932b5f(0x215)+_0x1d5509+_0x932b5f(0x16b)+_0x3fde02[_0x932b5f(0x139)]+'!\x20Moving\x20to\x20grid.'),_0x3fde02[_0x932b5f(0x1f7)]=_0x932b5f(0x216);break;}if(_0x3fde02['pathSegmentIndex']>=_0x47eb92['length']){_0x3fde02['state']=_0x932b5f(0x216);break;}const _0x1dac2e=_0x47eb92[_0x3fde02[_0x932b5f(0x18e)]];if(!_0x1dac2e?.['p0']){console[_0x932b5f(0x1ce)](_0x932b5f(0x215)+_0x1d5509+_0x932b5f(0x1e8)+_0x3fde02['pathSegmentIndex']+_0x932b5f(0x1cd)),_0x3fde02[_0x932b5f(0x1f7)]='moving_to_grid';break;}let _0x3a1e68=0x1;(_0x3fde02[_0x932b5f(0x139)]===_0x932b5f(0x1cc)||_0x3fde02[_0x932b5f(0x139)]===_0x932b5f(0x1e1))&&(_0x3a1e68=BOSS_LOOP_ENTRANCE_PATH_SPEED/NORMAL_ENTRANCE_PATH_SPEED);const _0x35f300=NORMAL_ENTRANCE_PATH_SPEED*_0x3a1e68;_0x3fde02[_0x932b5f(0x150)]+=_0x35f300;let _0x4766e1,_0x2ab1d0;const _0x41a881=_0x3fde02['x'],_0x3bd083=_0x3fde02['y'];_0x3fde02['pathT']>=0x1?(_0x4766e1=calculateBezierPoint(0x1,_0x1dac2e['p0']['x'],_0x1dac2e['p1']['x'],_0x1dac2e['p2']['x'],_0x1dac2e['p3']['x']),_0x2ab1d0=calculateBezierPoint(0x1,_0x1dac2e['p0']['y'],_0x1dac2e['p1']['y'],_0x1dac2e['p2']['y'],_0x1dac2e['p3']['y']),_0x3fde02[_0x932b5f(0x150)]=0x0,_0x3fde02[_0x932b5f(0x18e)]++,_0x3fde02[_0x932b5f(0x18e)]>=_0x47eb92[_0x932b5f(0x211)]&&(_0x3fde02[_0x932b5f(0x1f7)]=_0x932b5f(0x216),_0x3fde02['x']=_0x4766e1,_0x3fde02['y']=_0x2ab1d0)):(_0x4766e1=calculateBezierPoint(_0x3fde02[_0x932b5f(0x150)],_0x1dac2e['p0']['x'],_0x1dac2e['p1']['x'],_0x1dac2e['p2']['x'],_0x1dac2e['p3']['x']),_0x2ab1d0=calculateBezierPoint(_0x3fde02['pathT'],_0x1dac2e['p0']['y'],_0x1dac2e['p1']['y'],_0x1dac2e['p2']['y'],_0x1dac2e['p3']['y']));if(_0x3fde02[_0x932b5f(0x1f7)]===_0x932b5f(0x227)){let _0x2d2550=_0x4766e1;const _0xab97c7=currentWavePatternIndex===0x1&&(_0x3fde02['squadronId']===0x2||_0x3fde02[_0x932b5f(0x143)]===0x3),_0x3589ec=typeof _0x3fde02[_0x932b5f(0x1c8)]===_0x932b5f(0x1dc)&&_0x3fde02[_0x932b5f(0x1c8)]%0x2!==0x0;if(_0xab97c7&&_0x3589ec){let _0x54ac11=0x1;_0x3fde02[_0x932b5f(0x139)]&&_0x3fde02['entrancePathId']['toLowerCase']()[_0x932b5f(0x194)]('left')&&(_0x54ac11=-0x1);const _0x1ead6a=_0x4ed591/0x2+ENTRANCE_PAIR_HORIZONTAL_GAP/0x2;_0x2d2550=_0x4766e1+_0x1ead6a*_0x54ac11;}_0x3fde02[_0x932b5f(0x1bb)]=_0x2d2550-_0x41a881,_0x3fde02[_0x932b5f(0x1a5)]=_0x2ab1d0-_0x3bd083,_0x3fde02['x']=_0x2d2550,_0x3fde02['y']=_0x2ab1d0;}break;}case'moving_to_grid':{if(_0x3fde02[_0x932b5f(0x1d4)]==null||_0x3fde02[_0x932b5f(0x1b8)]==null){console['warn']('Enemy\x20'+_0x1d5509+_0x932b5f(0x159));try{const {x:_0x5211a6,y:_0x2f59fc}=getCurrentGridSlotPosition(_0x3fde02[_0x932b5f(0x200)],_0x3fde02[_0x932b5f(0x19e)],_0x4ed591);_0x3fde02[_0x932b5f(0x1d4)]=_0x5211a6,_0x3fde02[_0x932b5f(0x1b8)]=_0x2f59fc;}catch(_0x5cc4b0){console[_0x932b5f(0x1ce)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x1d5509+_0x932b5f(0x198),_0x5cc4b0),_0x3fde02[_0x932b5f(0x1f7)]=_0x932b5f(0x182),_0x3fde02['x']=gameCanvas[_0x932b5f(0x1bc)]/0x2,_0x3fde02['y']=ENEMY_TOP_MARGIN;break;}}const _0x32207b=_0x3fde02[_0x932b5f(0x1d4)],_0x2fb6e8=_0x3fde02[_0x932b5f(0x1b8)],_0x28047a=_0x32207b-_0x3fde02['x'],_0x8623ff=_0x2fb6e8-_0x3fde02['y'],_0x4d86d5=Math[_0x932b5f(0x1d0)](_0x28047a*_0x28047a+_0x8623ff*_0x8623ff),_0x32ed91=ENTRANCE_SPEED*1.2,_0x163a8e=_0x32ed91*0.5;if(_0x4d86d5>_0x163a8e)_0x3fde02[_0x932b5f(0x1bb)]=_0x28047a/_0x4d86d5*_0x32ed91,_0x3fde02[_0x932b5f(0x1a5)]=_0x8623ff/_0x4d86d5*_0x32ed91,_0x3fde02['x']+=_0x3fde02[_0x932b5f(0x1bb)],_0x3fde02['y']+=_0x3fde02[_0x932b5f(0x1a5)];else{_0x3fde02['x']=_0x32207b,_0x3fde02['y']=_0x2fb6e8,_0x3fde02[_0x932b5f(0x1bb)]=0x0,_0x3fde02[_0x932b5f(0x1a5)]=0x0;const _0x58b9e2=_0x3fde02['state'];_0x3fde02['state']=_0x932b5f(0x182),_0x3fde02[_0x932b5f(0x178)]=![];!isGridSoundPlaying&&!isChallengingStage&&playSound(gridBackgroundSound,!![]);GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x41c9a9,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date[_0x932b5f(0x207)](),firstEnemyLanded=!![]);if(_0x58b9e2==='moving_to_grid'&&!isChallengingStage&&!isFullGridWave&&_0x3fde02[_0x932b5f(0x143)]!==undefined){const _0x548521=_0x3fde02[_0x932b5f(0x143)],_0x2d7f89=squadronCompletionStatus[_0x548521];if(_0x2d7f89&&!_0x2d7f89[_0x932b5f(0x1fb)]){const _0x500f8e=enemies[_0x932b5f(0x17b)](_0x1a6445=>{const _0x3f2c00=_0x932b5f;if(_0x1a6445&&_0x1a6445['squadronId']===_0x548521)return _0x1a6445[_0x3f2c00(0x1f7)]===_0x3f2c00(0x182)||!enemies[_0x3f2c00(0x192)](_0x4faa36=>_0x4faa36['id']===_0x1a6445['id']);return!![];});if(_0x500f8e){_0x2d7f89[_0x932b5f(0x1fb)]=!![];const _0x56ffe6=enemies[_0x932b5f(0x171)](_0x2d4bba=>_0x2d4bba&&_0x2d4bba['squadronId']===_0x548521&&_0x2d4bba[_0x932b5f(0x1f7)]===_0x932b5f(0x182)&&(_0x2d4bba[_0x932b5f(0x193)]===ENEMY2_TYPE||_0x2d4bba['type']===ENEMY3_TYPE)&&!(_0x2d4bba[_0x932b5f(0x193)]===ENEMY3_TYPE&&_0x2d4bba[_0x932b5f(0x19b)]));if(_0x56ffe6['length']>0x0){const _0x14922f=_0x56ffe6[Math[_0x932b5f(0x1d1)](Math[_0x932b5f(0x137)]()*_0x56ffe6['length'])],_0x27edb2=_0x14922f['id'],_0x121924=0xc8+Math[_0x932b5f(0x137)]()*0x190,_0x274f62=setTimeout(()=>{const _0x23f3c5=_0x932b5f;try{const _0x47922b=enemySpawnTimeouts['indexOf'](_0x274f62);if(_0x47922b>-0x1)enemySpawnTimeouts[_0x23f3c5(0x1d7)](_0x47922b,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x520eea=enemies[_0x23f3c5(0x1c0)](_0x1218da=>_0x1218da&&_0x1218da['id']===_0x27edb2);_0x520eea&&_0x520eea[_0x23f3c5(0x1f7)]===_0x23f3c5(0x182)&&(createBulletSimple(_0x520eea)&&(playSound(enemyShootSound),_0x520eea[_0x23f3c5(0x164)]=Date[_0x23f3c5(0x207)]()));}catch(_0x5263b2){console[_0x23f3c5(0x1ce)]('Error\x20during\x20post-landing\x20fire\x20for\x20'+_0x27edb2+':',_0x5263b2);}},_0x121924);enemySpawnTimeouts['push'](_0x274f62);}}}}}break;}case _0x932b5f(0x182):{try{const _0x1d56ec=_0x3fde02['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x3fde02[_0x932b5f(0x193)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0xeafdf3,y:_0x2bfecd}=getCurrentGridSlotPosition(_0x3fde02[_0x932b5f(0x200)],_0x3fde02[_0x932b5f(0x19e)],_0x1d56ec);typeof _0xeafdf3===_0x932b5f(0x1dc)&&!isNaN(_0xeafdf3)&&(_0x3fde02['x']=_0xeafdf3),typeof _0x2bfecd===_0x932b5f(0x1dc)&&!isNaN(_0x2bfecd)&&(_0x3fde02['y']=_0x2bfecd),_0x3fde02[_0x932b5f(0x1d4)]=_0xeafdf3,_0x3fde02[_0x932b5f(0x1b8)]=_0x2bfecd;}catch(_0x590e99){console[_0x932b5f(0x1ce)](_0x932b5f(0x142)+_0x3fde02['id']+':',_0x590e99);}_0x3fde02[_0x932b5f(0x1bb)]=_0x348287?_0x358511:0x0,_0x3fde02['velocityY']=0x0;_0x3fde02['type']===ENEMY3_TYPE&&_0x3fde02[_0x932b5f(0x19b)]&&_0x3fde02[_0x932b5f(0x1a9)]&&(_0x3fde02['capturedShipX']=_0x3fde02['x']+CAPTURED_SHIP_OFFSET_X,_0x3fde02[_0x932b5f(0x1f3)]=_0x3fde02['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x932b5f(0x17d):{_0x3fde02[_0x932b5f(0x1bb)]=0x0,_0x3fde02['velocityY']=0x0;break;}case _0x932b5f(0x22b):{_0x3fde02['velocityX']=0x0,_0x3fde02[_0x932b5f(0x1a5)]=0x0;break;}case _0x932b5f(0x157):{if(isShipCaptured){_0x3fde02[_0x932b5f(0x1f7)]='returning';try{const {x:_0x24503e,y:_0x210ed5}=getCurrentGridSlotPosition(_0x3fde02[_0x932b5f(0x200)],_0x3fde02[_0x932b5f(0x19e)],_0x4ed591);_0x3fde02['targetGridX']=_0x24503e,_0x3fde02['targetGridY']=_0x210ed5;}catch(_0x6ae91d){console[_0x932b5f(0x1ce)](_0x932b5f(0x13a)+_0x3fde02['id']+':',_0x6ae91d),_0x3fde02['targetGridX']=gameCanvas['width']/0x2,_0x3fde02[_0x932b5f(0x1b8)]=ENEMY_TOP_MARGIN;}break;}const _0x3cba75=_0x3fde02[_0x932b5f(0x221)],_0x2c3346=_0x3fde02['targetY'];if(_0x3cba75==null||_0x2c3346==null){console[_0x932b5f(0x1ce)]('Boss\x20'+_0x3fde02['id']+_0x932b5f(0x13d)),_0x3fde02['state']='returning';try{const {x:_0x299e40,y:_0x593380}=getCurrentGridSlotPosition(_0x3fde02[_0x932b5f(0x200)],_0x3fde02[_0x932b5f(0x19e)],_0x4ed591);_0x3fde02[_0x932b5f(0x1d4)]=_0x299e40,_0x3fde02[_0x932b5f(0x1b8)]=_0x593380;}catch(_0x331996){console[_0x932b5f(0x1ce)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x3fde02['id']+':',_0x331996),_0x3fde02['targetGridX']=gameCanvas['width']/0x2,_0x3fde02['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0xbfad37=_0x3cba75-_0x3fde02['x'],_0x2656ab=_0x2c3346-_0x3fde02['y'],_0x9f715e=Math['sqrt'](_0xbfad37*_0xbfad37+_0x2656ab*_0x2656ab),_0x34c925=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x460219=_0x34c925*0.6;_0x9f715e>_0x460219?(_0x3fde02[_0x932b5f(0x1bb)]=_0xbfad37/_0x9f715e*_0x34c925,_0x3fde02['velocityY']=_0x2656ab/_0x9f715e*_0x34c925,_0x3fde02['x']+=_0x3fde02[_0x932b5f(0x1bb)],_0x3fde02['y']+=_0x3fde02[_0x932b5f(0x1a5)]):(_0x3fde02['x']=_0x3cba75,_0x3fde02['y']=_0x2c3346,_0x3fde02['velocityX']=0x0,_0x3fde02[_0x932b5f(0x1a5)]=0x0,_0x3fde02[_0x932b5f(0x1f7)]=_0x932b5f(0x16e),_0x3fde02[_0x932b5f(0x145)]=_0x41c9a9,capturingBossId=_0x3fde02['id'],captureBeamActive=!![],captureBeamSource={'x':_0x3fde02['x']+_0x4ed591/0x2,'y':_0x3fde02['y']+_0x20a694},captureBeamTargetY=_0x3fde02['y'],captureBeamProgress=0x0,playSound(captureSound));break;}case'capturing':{_0x3fde02[_0x932b5f(0x1bb)]=0x0,_0x3fde02[_0x932b5f(0x1a5)]=0x0;if(isShipCaptured&&_0x3fde02['id']!==capturedBossIdWithMessage){captureBeamActive=![];if(capturingBossId===_0x3fde02['id'])capturingBossId=null;_0x3fde02[_0x932b5f(0x1f7)]=_0x932b5f(0x17f),stopSound(captureSound);try{const {x:_0x12ede0,y:_0x2fd6fb}=getCurrentGridSlotPosition(_0x3fde02[_0x932b5f(0x200)],_0x3fde02[_0x932b5f(0x19e)],_0x4ed591);_0x3fde02[_0x932b5f(0x1d4)]=_0x12ede0,_0x3fde02[_0x932b5f(0x1b8)]=_0x2fd6fb;}catch(_0x2adc07){console[_0x932b5f(0x1ce)](_0x932b5f(0x13a)+_0x3fde02['id']+':',_0x2adc07),_0x3fde02[_0x932b5f(0x1d4)]=gameCanvas['width']/0x2,_0x3fde02[_0x932b5f(0x1b8)]=ENEMY_TOP_MARGIN;}break;}const _0x16880f=_0x41c9a9-_0x3fde02[_0x932b5f(0x145)],_0x21effe=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x436970=CAPTURE_BEAM_DURATION_MS;if(_0x16880f<_0x21effe)captureBeamProgress=_0x16880f/_0x21effe;else{if(_0x16880f<_0x436970-_0x21effe)captureBeamProgress=0x1;else{if(_0x16880f<_0x436970)captureBeamProgress=0x1-(_0x16880f-(_0x436970-_0x21effe))/_0x21effe;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(captureSound),_0x3fde02[_0x932b5f(0x1f7)]=_0x932b5f(0x1b1),_0x3fde02[_0x932b5f(0x167)]=generateAttackPath(_0x3fde02),_0x3fde02[_0x932b5f(0x214)]=0x0,_0x3fde02[_0x932b5f(0x1c6)]=0x0,_0x3fde02[_0x932b5f(0x1d6)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x3fde02[_0x932b5f(0x164)]=0x0,_0x3fde02['canFireThisDive']=!![],_0x3fde02[_0x932b5f(0x1e4)]=0x0,_0x3fde02[_0x932b5f(0x19a)]=null;break;}}}captureBeamProgress=Math[_0x932b5f(0x1c9)](0x0,Math[_0x932b5f(0x158)](0x1,captureBeamProgress));if(ship&&captureBeamActive&&captureBeamProgress>=0.95&&!isShipCaptured&&!isInvincible){const _0x252e70=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x30871c=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x53522b=_0x3fde02['x']+_0x4ed591/0x2,_0xf5c675=_0x3fde02['y']+_0x20a694,_0x465499=gameCanvas[_0x932b5f(0x20a)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x4ccb96=Math['max'](_0x252e70,_0x30871c),_0x1512c1=_0x53522b-_0x4ccb96/0x2,_0x325a22=_0xf5c675,_0x4073b4=_0x465499-_0xf5c675;if(_0x4073b4>0x0){const _0x5b3af7={'x':_0x1512c1,'y':_0x325a22,'width':_0x4ccb96,'height':_0x4073b4},_0x36a2b6={'x':ship['x'],'y':ship['y'],'width':ship[_0x932b5f(0x1bc)],'height':ship[_0x932b5f(0x20a)]};if(checkCollision(_0x36a2b6,_0x5b3af7)){isShipCaptured=!![],_0x3fde02[_0x932b5f(0x1a9)]={'width':ship[_0x932b5f(0x1bc)],'height':ship[_0x932b5f(0x20a)]},_0x3fde02[_0x932b5f(0x19b)]=!![],stopSound(captureSound),_0x3fde02['state']=_0x932b5f(0x1a0),_0x3fde02[_0x932b5f(0x1d4)]=null,_0x3fde02[_0x932b5f(0x1b8)]=null,_0x3fde02['initialCaptureAnimationY']=ship['y'],_0x3fde02[_0x932b5f(0x1e5)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x41c9a9,capturedBossIdWithMessage=_0x3fde02['id'],playSound(shipCapturedSound);const _0x4bd850=currentPlayer;playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];if(playerLives<=0x0){if(_0x4bd850===0x1)player1Lives=0x0;if(_0x4bd850===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x41c9a9,playerWhoIsGameOver=_0x4bd850;const _0x556b0e=_0x4bd850===0x1?0x2:0x1,_0x4197a6=_0x556b0e===0x1?player1Lives:player2Lives;_0x4197a6>0x0?nextActionAfterPlayerGameOver='switch_player':nextActionAfterPlayerGameOver=_0x932b5f(0x22d);bullets=[],enemyBullets=[],explosions=[],fallingShips=[],isDualShipActive=![];if(_0x4bd850===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(_0x4bd850===0x1)player1Lives=playerLives;else player2Lives=playerLives;}ship&&gameCanvas&&(ship['y']=gameCanvas[_0x932b5f(0x20a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])),(!isManualControl||isTwoPlayerMode)&&(forceCenterShipNextReset=!![]),isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x41c9a9+INVINCIBILITY_DURATION_MS;}}}else console[_0x932b5f(0x154)]('Beam\x20collision\x20box\x20has\x20invalid\x20height:',_0x4073b4);}break;}case'showing_capture_message':{_0x3fde02[_0x932b5f(0x1bb)]=0x0,_0x3fde02[_0x932b5f(0x1a5)]=0x0;if(_0x3fde02[_0x932b5f(0x19b)]&&_0x3fde02[_0x932b5f(0x1a9)]&&typeof _0x3fde02[_0x932b5f(0x140)]===_0x932b5f(0x1dc)){const _0x265d34=_0x41c9a9-captureMessageStartTime,_0x4ca18f=Math[_0x932b5f(0x158)](0x1,_0x265d34/CAPTURE_MESSAGE_DURATION),_0x3d6b6a=_0x3fde02['y']+CAPTURED_SHIP_OFFSET_Y,_0x30ceb9=_0x3fde02[_0x932b5f(0x140)];_0x3fde02[_0x932b5f(0x1f3)]=_0x30ceb9+(_0x3d6b6a-_0x30ceb9)*_0x4ca18f,_0x3fde02['capturedShipX']=_0x3fde02['x']+CAPTURED_SHIP_OFFSET_X;}else _0x3fde02[_0x932b5f(0x1b2)]=_0x3fde02['x']+CAPTURED_SHIP_OFFSET_X,_0x3fde02[_0x932b5f(0x1f3)]=_0x3fde02['y']+CAPTURED_SHIP_OFFSET_Y;break;}case _0x932b5f(0x1b1):{if(isEntrancePhaseActive)break;const _0x53e171=_0x3fde02[_0x932b5f(0x167)],_0x769884=3.8;if(!_0x53e171||_0x53e171[_0x932b5f(0x211)]===0x0){console['error'](_0x932b5f(0x215)+_0x1d5509+'\x20attacking\x20without\x20path!\x20Returning.'),_0x3fde02[_0x932b5f(0x1f7)]=_0x932b5f(0x17f);try{const {x:_0x13d525,y:_0x8ccf9}=getCurrentGridSlotPosition(_0x3fde02[_0x932b5f(0x200)],_0x3fde02[_0x932b5f(0x19e)],_0x4ed591);_0x3fde02[_0x932b5f(0x1d4)]=_0x13d525,_0x3fde02[_0x932b5f(0x1b8)]=_0x8ccf9;}catch(_0x48d2cc){console[_0x932b5f(0x1ce)](_0x932b5f(0x1cf)+_0x1d5509+'\x20(no\x20attack\x20path):',_0x48d2cc),_0x3fde02[_0x932b5f(0x1d4)]=gameCanvas[_0x932b5f(0x1bc)]/0x2,_0x3fde02[_0x932b5f(0x1b8)]=ENEMY_TOP_MARGIN;}break;}if(_0x3fde02[_0x932b5f(0x214)]>=_0x53e171['length']){console[_0x932b5f(0x154)](_0x932b5f(0x215)+_0x1d5509+_0x932b5f(0x17a)+_0x3fde02[_0x932b5f(0x214)]+_0x932b5f(0x18c)+_0x53e171[_0x932b5f(0x211)]+_0x932b5f(0x1f1)),_0x3fde02[_0x932b5f(0x1f7)]=_0x932b5f(0x17f);try{const {x:_0x2cacac,y:_0x19c48d}=getCurrentGridSlotPosition(_0x3fde02[_0x932b5f(0x200)],_0x3fde02[_0x932b5f(0x19e)],_0x4ed591);_0x3fde02[_0x932b5f(0x1d4)]=_0x2cacac,_0x3fde02[_0x932b5f(0x1b8)]=_0x19c48d;}catch(_0x55e249){console['error'](_0x932b5f(0x1cf)+_0x1d5509+_0x932b5f(0x20d),_0x55e249),_0x3fde02[_0x932b5f(0x1d4)]=gameCanvas[_0x932b5f(0x1bc)]/0x2,_0x3fde02[_0x932b5f(0x1b8)]=ENEMY_TOP_MARGIN;}break;}const _0x13db96=_0x53e171[_0x3fde02[_0x932b5f(0x214)]];if(!_0x13db96||!_0x13db96['p0']||!_0x13db96['p1']||!_0x13db96['p2']||!_0x13db96['p3']){console[_0x932b5f(0x1ce)](_0x932b5f(0x215)+_0x1d5509+'\x20attacking,\x20invalid\x20segment\x20'+_0x3fde02['attackPathSegmentIndex']+_0x932b5f(0x19d)),_0x3fde02['state']=_0x932b5f(0x17f);try{const {x:_0x429543,y:_0x5227f4}=getCurrentGridSlotPosition(_0x3fde02[_0x932b5f(0x200)],_0x3fde02[_0x932b5f(0x19e)],_0x4ed591);_0x3fde02[_0x932b5f(0x1d4)]=_0x429543,_0x3fde02[_0x932b5f(0x1b8)]=_0x5227f4;}catch(_0x379ed7){console[_0x932b5f(0x1ce)](_0x932b5f(0x1cf)+_0x1d5509+_0x932b5f(0x22c),_0x379ed7),_0x3fde02['targetGridX']=gameCanvas[_0x932b5f(0x1bc)]/0x2,_0x3fde02[_0x932b5f(0x1b8)]=ENEMY_TOP_MARGIN;}break;}const _0x7dd34=_0x3fde02[_0x932b5f(0x1d6)]/0x3e8*_0x769884;_0x3fde02['attackPathT']+=_0x7dd34;let _0x4443a1,_0x165c6f;const _0x3178e4=_0x3fde02['x'],_0x1970ab=_0x3fde02['y'];if(_0x3fde02['attackPathT']>=0x1){try{_0x4443a1=calculateBezierPoint(0x1,_0x13db96['p0']['x'],_0x13db96['p1']['x'],_0x13db96['p2']['x'],_0x13db96['p3']['x']),_0x165c6f=calculateBezierPoint(0x1,_0x13db96['p0']['y'],_0x13db96['p1']['y'],_0x13db96['p2']['y'],_0x13db96['p3']['y']);}catch(_0x2a011e){console[_0x932b5f(0x1ce)](_0x932b5f(0x15b)+_0x3fde02['id']+':',_0x2a011e),_0x4443a1=_0x3fde02['x'],_0x165c6f=_0x3fde02['y'],_0x3fde02[_0x932b5f(0x1f7)]=_0x932b5f(0x17f);try{const {x:_0x3d332a,y:_0x34bae8}=getCurrentGridSlotPosition(_0x3fde02[_0x932b5f(0x200)],_0x3fde02['gridCol'],_0x4ed591);_0x3fde02[_0x932b5f(0x1d4)]=_0x3d332a,_0x3fde02[_0x932b5f(0x1b8)]=_0x34bae8;}catch(_0x5d042d){console['error'](_0x932b5f(0x1bd)+_0x3fde02['id']+':',_0x5d042d),_0x3fde02['targetGridX']=gameCanvas[_0x932b5f(0x1bc)]/0x2,_0x3fde02[_0x932b5f(0x1b8)]=ENEMY_TOP_MARGIN;}break;}_0x3fde02[_0x932b5f(0x1c6)]=0x0,_0x3fde02[_0x932b5f(0x214)]++;if(_0x3fde02[_0x932b5f(0x214)]>=_0x53e171[_0x932b5f(0x211)]){_0x3fde02[_0x932b5f(0x1f7)]=_0x932b5f(0x17f),_0x3fde02['lastFiredTime']=0x0,_0x3fde02[_0x932b5f(0x1e4)]=0x0,_0x3fde02[_0x932b5f(0x19a)]=null;try{const {x:_0x199fc,y:_0xa98044}=getCurrentGridSlotPosition(_0x3fde02[_0x932b5f(0x200)],_0x3fde02[_0x932b5f(0x19e)],_0x4ed591);_0x3fde02['targetGridX']=_0x199fc,_0x3fde02['targetGridY']=_0xa98044;}catch(_0x5409cf){console[_0x932b5f(0x1ce)](_0x932b5f(0x1cf)+_0x1d5509+_0x932b5f(0x1eb),_0x5409cf),_0x3fde02[_0x932b5f(0x1d4)]=gameCanvas[_0x932b5f(0x1bc)]/0x2,_0x3fde02[_0x932b5f(0x1b8)]=ENEMY_TOP_MARGIN;}}else{const _0x1f420a=_0x53e171[_0x3fde02['attackPathSegmentIndex']];if(!_0x1f420a?.['p0']){console[_0x932b5f(0x1ce)](_0x932b5f(0x215)+_0x1d5509+_0x932b5f(0x165)+_0x3fde02[_0x932b5f(0x214)]+'!\x20Returning.'),_0x4443a1=_0x3fde02['x'],_0x165c6f=_0x3fde02['y'],_0x3fde02[_0x932b5f(0x1f7)]='returning';try{const {x:_0x1b8b73,y:_0xeac86e}=getCurrentGridSlotPosition(_0x3fde02['gridRow'],_0x3fde02[_0x932b5f(0x19e)],_0x4ed591);_0x3fde02['targetGridX']=_0x1b8b73,_0x3fde02[_0x932b5f(0x1b8)]=_0xeac86e;}catch(_0x56d4d6){console[_0x932b5f(0x1ce)](_0x932b5f(0x1d5)+_0x3fde02['id']+':',_0x56d4d6),_0x3fde02[_0x932b5f(0x1d4)]=gameCanvas[_0x932b5f(0x1bc)]/0x2,_0x3fde02[_0x932b5f(0x1b8)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x4443a1=calculateBezierPoint(_0x3fde02[_0x932b5f(0x1c6)],_0x13db96['p0']['x'],_0x13db96['p1']['x'],_0x13db96['p2']['x'],_0x13db96['p3']['x']),_0x165c6f=calculateBezierPoint(_0x3fde02[_0x932b5f(0x1c6)],_0x13db96['p0']['y'],_0x13db96['p1']['y'],_0x13db96['p2']['y'],_0x13db96['p3']['y']);}catch(_0x166195){console['error']('Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20'+_0x3fde02['id']+':',_0x166195),_0x4443a1=_0x3fde02['x'],_0x165c6f=_0x3fde02['y'],_0x3fde02[_0x932b5f(0x1f7)]=_0x932b5f(0x17f);try{const {x:_0x5eecc8,y:_0x53d02a}=getCurrentGridSlotPosition(_0x3fde02[_0x932b5f(0x200)],_0x3fde02['gridCol'],_0x4ed591);_0x3fde02[_0x932b5f(0x1d4)]=_0x5eecc8,_0x3fde02[_0x932b5f(0x1b8)]=_0x53d02a;}catch(_0x59dc9b){console[_0x932b5f(0x1ce)]('Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20'+_0x3fde02['id']+':',_0x59dc9b),_0x3fde02[_0x932b5f(0x1d4)]=gameCanvas[_0x932b5f(0x1bc)]/0x2,_0x3fde02['targetGridY']=ENEMY_TOP_MARGIN;}break;}if(_0x3fde02&&_0x3fde02[_0x932b5f(0x1f7)]===_0x932b5f(0x1b1)){const _0x3763f8=_0x3fde02[_0x932b5f(0x1e4)]||0x0,_0x11116d=_0x4443a1+_0x3763f8,_0x5a16e4=_0x165c6f;_0x3fde02[_0x932b5f(0x1bb)]=_0x11116d-_0x3178e4,_0x3fde02[_0x932b5f(0x1a5)]=_0x5a16e4-_0x1970ab,_0x3fde02['x']=_0x11116d,_0x3fde02['y']=_0x5a16e4;if(_0x3fde02['y']>gameCanvas[_0x932b5f(0x20a)]+_0x20a694*1.5){_0x3fde02[_0x932b5f(0x1f7)]=_0x932b5f(0x17f),_0x3fde02[_0x932b5f(0x214)]=0x0,_0x3fde02[_0x932b5f(0x1c6)]=0x0,_0x3fde02['lastFiredTime']=0x0,_0x3fde02['attackFormationOffsetX']=0x0,_0x3fde02[_0x932b5f(0x19a)]=null,_0x3fde02['y']=-_0x20a694*(1.1+Math[_0x932b5f(0x137)]()*0.4),_0x3fde02['x']=Math[_0x932b5f(0x137)]()*(gameCanvas[_0x932b5f(0x1bc)]-_0x4ed591),_0x3fde02[_0x932b5f(0x1bb)]=0x0,_0x3fde02['velocityY']=0x0;try{const {x:_0x5dc5a5,y:_0x383118}=getCurrentGridSlotPosition(_0x3fde02[_0x932b5f(0x200)],_0x3fde02[_0x932b5f(0x19e)],_0x4ed591);_0x3fde02[_0x932b5f(0x1d4)]=_0x5dc5a5,_0x3fde02['targetGridY']=_0x383118;}catch(_0x3888d8){console['error'](_0x932b5f(0x1cf)+_0x1d5509+'\x20off\x20screen:',_0x3888d8),_0x3fde02[_0x932b5f(0x1d4)]=gameCanvas['width']/0x2,_0x3fde02['targetGridY']=ENEMY_TOP_MARGIN;}}}break;}case _0x932b5f(0x17f):{if(isEntrancePhaseActive)break;if(_0x3fde02[_0x932b5f(0x1d4)]==null||_0x3fde02[_0x932b5f(0x1b8)]==null){console['warn'](_0x932b5f(0x215)+_0x1d5509+_0x932b5f(0x1bf));try{const {x:_0x176c7f,y:_0x39919c}=getCurrentGridSlotPosition(_0x3fde02[_0x932b5f(0x200)],_0x3fde02['gridCol'],_0x4ed591);_0x3fde02[_0x932b5f(0x1d4)]=_0x176c7f,_0x3fde02['targetGridY']=_0x39919c;}catch(_0x390527){console[_0x932b5f(0x1ce)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x1d5509+_0x932b5f(0x169),_0x390527),_0x3fde02[_0x932b5f(0x1f7)]=_0x932b5f(0x182),_0x3fde02['x']=gameCanvas[_0x932b5f(0x1bc)]/0x2,_0x3fde02['y']=ENEMY_TOP_MARGIN;break;}}const _0x2200bd=_0x3fde02[_0x932b5f(0x1d4)],_0x950260=_0x3fde02['targetGridY'],_0x20f204=_0x2200bd-_0x3fde02['x'],_0x29c979=_0x950260-_0x3fde02['y'],_0x4040dd=Math[_0x932b5f(0x1d0)](_0x20f204*_0x20f204+_0x29c979*_0x29c979),_0x211b1c=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x9f1041=BASE_RETURN_SPEED*_0x211b1c,_0x4c4d5d=_0x9f1041*0.5;_0x4040dd>_0x4c4d5d?(_0x3fde02[_0x932b5f(0x1bb)]=_0x20f204/_0x4040dd*_0x9f1041,_0x3fde02[_0x932b5f(0x1a5)]=_0x29c979/_0x4040dd*_0x9f1041,_0x3fde02['x']+=_0x3fde02[_0x932b5f(0x1bb)],_0x3fde02['y']+=_0x3fde02[_0x932b5f(0x1a5)]):(_0x3fde02['x']=_0x2200bd,_0x3fde02['y']=_0x950260,_0x3fde02[_0x932b5f(0x1bb)]=0x0,_0x3fde02['velocityY']=0x0,_0x3fde02[_0x932b5f(0x1f7)]='in_grid',_0x3fde02[_0x932b5f(0x178)]=!![],_0x3fde02[_0x932b5f(0x1e4)]=0x0,_0x3fde02[_0x932b5f(0x19a)]=null,_0x3fde02['hasOwnProperty'](_0x932b5f(0x1c3))&&delete _0x3fde02[_0x932b5f(0x1c3)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)));break;}}if(_0x3fde02&&!isShowingPlayerGameOverMessage&&!(isShipCaptured&&_0x3fde02['state']===_0x932b5f(0x16e))){const _0x27128e={'x':0x0,'y':0x0,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT},_0x5d89f1={'x':_0x3fde02['x'],'y':_0x3fde02['y'],'width':_0x4ed591,'height':_0x20a694};for(let _0xa19aa4=bullets['length']-0x1;_0xa19aa4>=0x0;_0xa19aa4--){const _0x2b5cd3=bullets[_0xa19aa4];if(!_0x2b5cd3)continue;_0x27128e['x']=_0x2b5cd3['x'],_0x27128e['y']=_0x2b5cd3['y'];if(checkCollision(_0x27128e,_0x5d89f1)){const _0x395438=handleEnemyHit(_0x3fde02);bullets['splice'](_0xa19aa4,0x1);if(_0x395438[_0x932b5f(0x195)]){enemies['splice'](_0x6c1e56,0x1),_0x3fde02=null;break;}}}}if(_0x3fde02&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!isShowingPlayerGameOverMessage&&!isInvincible){const _0x18b464=['attacking',_0x932b5f(0x227),'following_bezier_path',_0x932b5f(0x157)];if(_0x18b464[_0x932b5f(0x194)](_0x3fde02[_0x932b5f(0x1f7)])){const _0x26473a={'x':_0x3fde02['x'],'y':_0x3fde02['y'],'width':_0x4ed591,'height':_0x20a694},_0x475d25={'x':ship['x'],'y':ship['y'],'width':ship[_0x932b5f(0x1bc)],'height':ship[_0x932b5f(0x20a)]},_0x385b23=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x932b5f(0x1bc)],'height':ship[_0x932b5f(0x20a)]}:null;let _0x3f9068=![],_0x157981=![];if(checkCollision(_0x26473a,_0x475d25))_0x3f9068=!![],_0x157981=![];else _0x385b23&&checkCollision(_0x26473a,_0x385b23)&&(_0x3f9068=!![],_0x157981=!![]);if(_0x3f9068){createExplosion(_0x3fde02['x']+_0x4ed591/0x2,_0x3fde02['y']+_0x20a694/0x2),playSound(lostLifeSound),enemies['splice'](_0x6c1e56,0x1),_0x3fde02=null;if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x157981?createExplosion(_0x385b23['x']+ship[_0x932b5f(0x1bc)]/0x2,_0x385b23['y']+ship[_0x932b5f(0x20a)]/0x2):createExplosion(_0x475d25['x']+ship[_0x932b5f(0x1bc)]/0x2,_0x475d25['y']+ship[_0x932b5f(0x20a)]/0x2),isInvincible=!![],invincibilityEndTime=_0x41c9a9+INVINCIBILITY_DURATION_MS;}else{playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x41c9a9+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x932b5f(0x20a)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x932b5f(0x1ce)](_0x932b5f(0x1a3));if(playerLives<=0x0){const _0x1f8b29=currentPlayer;if(_0x1f8b29===0x1)player1Lives=0x0;if(_0x1f8b29===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x41c9a9,playerWhoIsGameOver=_0x1f8b29;const _0x5817ad=_0x1f8b29===0x1?0x2:0x1,_0x21f130=_0x5817ad===0x1?player1Lives:player2Lives;_0x21f130>0x0?nextActionAfterPlayerGameOver=_0x932b5f(0x203):nextActionAfterPlayerGameOver=_0x932b5f(0x22d),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}continue;}}}}if(ship&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isWaitingForRespawn&&!isInvincible){const _0x3694ac={'x':ship['x'],'y':ship['y'],'width':ship[_0x932b5f(0x1bc)],'height':ship['height']},_0x5248c8=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship['width'],'height':ship['height']}:null;for(let _0x3cab52=enemyBullets[_0x932b5f(0x211)]-0x1;_0x3cab52>=0x0;_0x3cab52--){const _0x237c3b=enemyBullets[_0x3cab52];if(!_0x237c3b){enemyBullets[_0x932b5f(0x1d7)](_0x3cab52,0x1);continue;}const _0x55a21f={'x':_0x237c3b['x'],'y':_0x237c3b['y'],'width':_0x237c3b['width'],'height':_0x237c3b[_0x932b5f(0x20a)]};let _0x2af1ad=checkCollision(_0x3694ac,_0x55a21f),_0x476738=0x0;!_0x2af1ad&&_0x5248c8&&checkCollision(_0x5248c8,_0x55a21f)&&(_0x2af1ad=!![],_0x476738=0x1);if(_0x2af1ad){enemyBullets[_0x932b5f(0x1d7)](_0x3cab52,0x1);if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x476738===0x1?createExplosion(_0x5248c8['x']+ship[_0x932b5f(0x1bc)]/0x2,_0x5248c8['y']+ship[_0x932b5f(0x20a)]/0x2):createExplosion(_0x3694ac['x']+ship[_0x932b5f(0x1bc)]/0x2,_0x3694ac['y']+ship[_0x932b5f(0x20a)]/0x2),playSound(lostLifeSound),isInvincible=!![],invincibilityEndTime=_0x41c9a9+INVINCIBILITY_DURATION_MS;}else{playerLives--,playSound(lostLifeSound),createExplosion(ship['x']+ship[_0x932b5f(0x1bc)]/0x2,ship['y']+ship['height']/0x2),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x41c9a9+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console['error'](_0x932b5f(0x1a3));if(playerLives<=0x0){const _0x5d4430=currentPlayer;if(_0x5d4430===0x1)player1Lives=0x0;if(_0x5d4430===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x41c9a9,playerWhoIsGameOver=_0x5d4430;const _0x47a2af=_0x5d4430===0x1?0x2:0x1,_0x39f2bf=_0x47a2af===0x1?player1Lives:player2Lives;_0x39f2bf>0x0?nextActionAfterPlayerGameOver=_0x932b5f(0x203):nextActionAfterPlayerGameOver=_0x932b5f(0x22d),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}if(ship&&!isShipCaptured&&!isWaitingForRespawn&&!isDualShipActive&&fallingShips[_0x932b5f(0x211)]>0x0&&!isInvincible){const _0x1344b9={'x':ship['x'],'y':ship['y'],'width':ship[_0x932b5f(0x1bc)],'height':ship['height']};for(let _0x2da3e4=fallingShips['length']-0x1;_0x2da3e4>=0x0;_0x2da3e4--){const _0x3e5ce9=fallingShips[_0x2da3e4];if(!_0x3e5ce9)continue;const _0x296dc5={'x':_0x3e5ce9['x'],'y':_0x3e5ce9['y'],'width':_0x3e5ce9[_0x932b5f(0x1bc)],'height':_0x3e5ce9[_0x932b5f(0x20a)]};if(checkCollision(_0x1344b9,_0x296dc5)){fallingShips[_0x932b5f(0x1d7)](_0x2da3e4,0x1),isDualShipActive=!![];if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];playSound(dualShipSound);break;}}}updateHitSparks();}catch(_0x126e40){console[_0x932b5f(0x1ce)]('FATAL\x20Error\x20in\x20moveEntities:',_0x126e40,_0x126e40[_0x932b5f(0x1f2)]),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x932b5f(0x21e))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x932b5f(0x141));}}function switchPlayerTurn(){const _0x1e31df=_0x49db;if(!isTwoPlayerMode)return![];stopSound(hiScoreSound),highScore=Math[_0x1e31df(0x1c9)](highScore,score);currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive):(player2Score=score,player2IsDualShipActive=isDualShipActive);const _0x44efea=currentPlayer===0x1?0x2:0x1,_0x2ec64a=_0x44efea===0x1?player1Lives:player2Lives;if(_0x2ec64a<=0x0){const _0x6d5e7=currentPlayer===0x1?player1Lives:player2Lives;return _0x6d5e7<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x44efea,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],captureBeamActive=![],capturingBossId=null,isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x300965=_0x49db;if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x9ff4ba=enemies['filter'](_0x33ffe4=>_0x33ffe4&&_0x33ffe4[_0x300965(0x1f7)]===_0x300965(0x182));if(_0x9ff4ba['length']===0x0)return;const _0x338bb2=Date['now'](),_0x47c082=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x338bb2-lastGridFireCheckTime<_0x47c082)return;lastGridFireCheckTime=_0x338bb2;const _0x93316e=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x5648d6=Math[_0x300965(0x1a8)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x3b81c7=0x0;_0x9ff4ba['sort'](()=>Math[_0x300965(0x137)]()-0.5);for(const _0x3e5df8 of _0x9ff4ba){if(_0x3b81c7>=_0x5648d6)break;if(_0x3e5df8['type']===ENEMY2_TYPE||_0x3e5df8[_0x300965(0x193)]===ENEMY3_TYPE){if(_0x3e5df8[_0x300965(0x193)]===ENEMY3_TYPE&&_0x3e5df8['hasCapturedShip'])continue;Math[_0x300965(0x137)]()<_0x93316e&&(createBulletSimple(_0x3e5df8)&&(playSound(enemyShootSound),_0x3e5df8[_0x300965(0x164)]=_0x338bb2,_0x3b81c7++));}}}function runSingleGameUpdate(_0x4c40f5){const _0x50d43d=_0x49db;try{const _0x11a2b1=Date[_0x50d43d(0x207)]();if(isManualControl&&connectedGamepadIndex!==null&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isPaused&&!isShipCaptured){const _0x36b15e=navigator[_0x50d43d(0x161)]();if(_0x36b15e?.[connectedGamepadIndex]){const _0x372570=_0x36b15e[connectedGamepadIndex],_0xb6600b=processSingleController(_0x372570,previousButtonStates);previousButtonStates=_0xb6600b[_0x50d43d(0x180)];if(_0xb6600b['back']){stopGameAndShowMenu();return;}}else{if(previousButtonStates[_0x50d43d(0x211)]>0x0)previousButtonStates=[];}}else{if(connectedGamepadIndex===null){if(previousButtonStates[_0x50d43d(0x211)]>0x0)previousButtonStates=[];}}if(connectedGamepadIndexP2===null){if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}if(isPaused){renderGame();return;}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode){if(_0x11a2b1-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![];if(nextActionAfterPlayerGameOver===_0x50d43d(0x203)){if(switchPlayerTurn()){let _0x3ff1dd=level;playerWhoIsGameOver===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,_0x3ff1dd=level),currentPlayer===0x1?player1MaxLevelReached=Math[_0x50d43d(0x1c9)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x50d43d(0x1c9)](player2MaxLevelReached,level),resetWave();}else triggerFinalGameOverSequence();}else nextActionAfterPlayerGameOver===_0x50d43d(0x22d)?triggerFinalGameOverSequence():(console[_0x50d43d(0x1ce)](_0x50d43d(0x163),nextActionAfterPlayerGameOver),triggerFinalGameOverSequence());renderGame();return;}else{renderGame();return;}}if(isShowingCaptureMessage){const _0x3eb6e4=enemies[_0x50d43d(0x1c0)](_0x38e652=>_0x38e652['id']===capturedBossIdWithMessage);if(_0x3eb6e4&&_0x3eb6e4[_0x50d43d(0x1f7)]===_0x50d43d(0x1a0)){const _0x4f4f22=_0x11a2b1-captureMessageStartTime,_0x22a520=Math[_0x50d43d(0x158)](0x1,_0x4f4f22/CAPTURE_MESSAGE_DURATION);_0x3eb6e4[_0x50d43d(0x1e5)]=_0x22a520*0x2*(0x2*Math['PI']);}else _0x3eb6e4&&(_0x3eb6e4[_0x50d43d(0x1e5)]=0x0);if(_0x11a2b1-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],stopSound(shipCapturedSound),captureBeamActive=![],capturingBossId=null;if(_0x3eb6e4&&_0x3eb6e4['state']==='showing_capture_message'){_0x3eb6e4['state']='returning',_0x3eb6e4['captureAnimationRotation']=0x0;try{const _0x1242b9=_0x3eb6e4['type']===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x422aaa,y:_0x51ef89}=getCurrentGridSlotPosition(_0x3eb6e4['gridRow'],_0x3eb6e4[_0x50d43d(0x19e)],_0x1242b9);_0x3eb6e4[_0x50d43d(0x1d4)]=_0x422aaa,_0x3eb6e4['targetGridY']=_0x51ef89;}catch(_0x24ddb7){console['error']('[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x3eb6e4['id']+':',_0x24ddb7),_0x3eb6e4[_0x50d43d(0x1d4)]=gameCanvas['width']/0x2,_0x3eb6e4[_0x50d43d(0x1b8)]=ENEMY_TOP_MARGIN;}}else _0x3eb6e4?(console[_0x50d43d(0x154)](_0x50d43d(0x1d8)+capturedBossIdWithMessage+'\x20state\x20changed\x20unexpectedly.\x20Resetting\x20rotation.'),_0x3eb6e4[_0x50d43d(0x1e5)]=0x0):console[_0x50d43d(0x154)](_0x50d43d(0x1b4)+capturedBossIdWithMessage+_0x50d43d(0x184));capturedBossIdWithMessage=null;}isInGameState&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(moveEntities(),updateExplosions(),updateFloatingScores());renderGame();return;}!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(!isManualControl&&isInGameState&&playerLives>0x0&&aiControl(),isInGameState&&isManualControl&&playerLives>0x0&&handlePlayerInput());isInGameState&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&!isShowingCaptureMessage&&(moveEntities(),updateExplosions(),updateFloatingScores());isInvincible&&_0x11a2b1>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0);if(isCsCompletionDelayActive&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(_0x11a2b1-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY){isCsCompletionDelayActive=![];csCompletionResultIsPerfect?(playSound(csPerfectSound),showCsHitsMessage=!![],csHitsMessageStartTime=_0x11a2b1):(playSound(csClearSound),showCSClearMessage=!![],csClearMessageStartTime=_0x11a2b1);renderGame();return;}else{renderGame();return;}}let _0x180e2f=![],_0x418c06=![];if(!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(showCsHitsMessage)Date['now']()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION&&(showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x11a2b1),_0x418c06=!![];else{if(showPerfectMessage)Date['now']()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION&&(showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x11a2b1),_0x418c06=!![];else{if(showCsBonusScoreMessage)Date['now']()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION&&(showCsBonusScoreMessage=![],_0x180e2f=!![]),_0x418c06=!![];else{if(showCSClearMessage)Date[_0x50d43d(0x207)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]),Date[_0x50d43d(0x207)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]),Date[_0x50d43d(0x207)]()-csClearMessageStartTime>=CS_CLEAR_DELAY&&(showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x180e2f=!![]),_0x418c06=!![];else showExtraLifeMessage&&(Date['now']()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![],_0x180e2f=!![]),_0x418c06=!![]);}}}}if(_0x418c06){renderGame();return;}if(isShowingIntro&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){let _0x1eb595=![];const _0x188255=_0x11a2b1-introDisplayStartTime,_0x449971=0xbb8,_0x8f62df=INTRO_DURATION_PER_STEP;if(introStep===0x1)isTwoPlayerMode&&!playerIntroSoundPlayed&&(playSound(levelUpSound),playerIntroSoundPlayed=!![]),level===0x1&&currentPlayer===0x1&&!playerIntroSoundPlayed&&(playSound(startSound),playerIntroSoundPlayed=!![]);else{if(introStep===0x2)!isTwoPlayerMode&&level>0x1&&!isChallengingStage&&!stageIntroSoundPlayed&&(playSound(levelUpSound),stageIntroSoundPlayed=!![]);else introStep===0x3&&(!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]));}if(introStep===0x1){let _0x100733=isTwoPlayerMode?_0x449971:_0x8f62df;if(level===0x1&&!isTwoPlayerMode)_0x100733=_0x8f62df;_0x188255>=_0x100733&&(isChallengingStage?introStep=0x3:introStep=0x2,introDisplayStartTime=_0x11a2b1);}else{if(introStep===0x2){const _0x2c9f54=_0x8f62df;_0x188255>=_0x2c9f54&&(_0x1eb595=!![]);}else introStep===0x3&&(_0x188255>=_0x8f62df&&(_0x1eb595=!![]));}if(_0x1eb595){isShowingIntro=![],introStep=0x0;!isChallengingStage?aiCanShootTime=Date['now']()+0xbb8:aiCanShootTime=0x0;if(isChallengingStage)startChallengingStageSequence();else{currentWaveDefinition=generateWaveDefinition(level);if(currentWaveDefinition&&currentWaveDefinition[_0x50d43d(0x211)]>0x0)isFullGridWave?startFullGridWave():scheduleEntranceFlightWave();else{console[_0x50d43d(0x154)](_0x50d43d(0x1ab)+level+_0x50d43d(0x1e6)),isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![];const _0x40811c=0x64;setTimeout(()=>{const _0x50f7f3=_0x50d43d;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x50f7f3(0x21e)&&(playerLives>0x0?resetWave():triggerFinalGameOverSequence());},_0x40811c);}}}renderGame();return;}gameJustStarted&&(gameJustStarted=![]);if(!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&playerLives>0x0){const _0x3218c3=enemies[_0x50d43d(0x192)](_0x460282=>_0x460282?.[_0x50d43d(0x1f7)]===_0x50d43d(0x182));if(_0x3218c3&&isGridBreathingActive){const _0x29cff1=_0x11a2b1-gridBreathStartTime,_0x30621d=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x4885e6=_0x29cff1%_0x30621d;currentGridBreathFactor=(Math[_0x50d43d(0x166)](_0x4885e6/_0x30621d*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x3218c3&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x3218c3&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x11a2b1,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x2f6e0f=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x5200e3=enemies[_0x50d43d(0x192)](_0x3166ce=>_0x3166ce?.[_0x50d43d(0x1f7)]==='following_entrance_path'||_0x3166ce?.[_0x50d43d(0x1f7)]==='moving_to_grid'||_0x3166ce?.['state']===_0x50d43d(0x188));if(totalEnemiesScheduledForWave>0x0&&_0x2f6e0f&&!_0x5200e3){const _0x295bd4=isEntrancePhaseActive;isEntrancePhaseActive=![],_0x295bd4&&(stopSound(entranceSound),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0x50d43d(0x149)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![],!isChallengingStage&&typeof triggerImmediateCaptureDive===_0x50d43d(0x21e)&&triggerImmediateCaptureDive());}}!isChallengingStage&&!isShowingIntro&&!isPaused&&!isWaveTransitioning&&triggerGridFiring();if(!isWaveTransitioning&&playerLives>0x0&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x30c07b=enemies[_0x50d43d(0x211)]===0x0,_0x18fd5b=fallingShips[_0x50d43d(0x211)]===0x0,_0x3ddc85=![];isChallengingStage?_0x30c07b&&!isEntrancePhaseActive&&(_0x3ddc85=!![]):_0x30c07b&&!isEntrancePhaseActive&&_0x18fd5b&&(_0x3ddc85=!![]);if(_0x3ddc85){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);!isManualControl&&ship&&gameCanvas?.['width']>0x0&&(ship['x']=Math['round'](gameCanvas['width']/0x2-ship['width']/0x2),ship['targetX']=ship['x']);isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);bullets=[],enemyBullets=[],explosions=[],enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,floatingScores=[];const _0x98f1dc=currentPlayer;isTwoPlayerMode&&_0x98f1dc===0x1&&(player1CompletedLevel=level);let _0x201fe7;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,isCsCompletionDelayActive=!![],csCompletionDelayStartTime=_0x11a2b1;if(csCompletionResultIsPerfect){const _0x4a2484=score;score+=0x2710,highScore=Math[_0x50d43d(0x1c9)](highScore,score);let _0x129be8=![],_0x44aee1=null;if(!isManualControl)_0x129be8=player1TriggeredHighScoreSound,_0x44aee1=()=>{player1TriggeredHighScoreSound=!![];};else isTwoPlayerMode?currentPlayer===0x1?(_0x129be8=player1TriggeredHighScoreSound,_0x44aee1=()=>{player1TriggeredHighScoreSound=!![];}):(_0x129be8=player2TriggeredHighScoreSound,_0x44aee1=()=>{player2TriggeredHighScoreSound=!![];}):(_0x129be8=player1TriggeredHighScoreSound,_0x44aee1=()=>{player1TriggeredHighScoreSound=!![];});if(!_0x129be8&&score>highScore-0x2710){if(_0x44aee1)_0x44aee1();playSound(hiScoreSound);}if(currentPlayer===0x1)player1Score=score;else player2Score=score;checkAndAwardExtraLife(),_0x201fe7=CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else checkAndAwardExtraLife(),_0x201fe7=CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x201fe7+=0x64;}else playSound(waveUpSound),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,_0x201fe7=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x383a18=_0x50d43d;let _0x5819e1=![],_0x5be60e=currentPlayer;if(isTwoPlayerMode){if(currentPlayer===0x1)player1Score=score;else player2Score=score;const _0xf47c8a=switchPlayerTurn();_0xf47c8a?(_0x5be60e=currentPlayer,_0x98f1dc===0x2&&player1CompletedLevel===level?(_0x5819e1=!![],player1CompletedLevel=-0x1):_0x5819e1=![]):(_0x5be60e=_0x98f1dc,_0x5819e1=!![],player1CompletedLevel=-0x1);}else _0x5be60e=0x1,_0x5819e1=!![];_0x5819e1&&level++;const _0x41407a=_0x5be60e===0x1?player1Lives:player2Lives;_0x41407a>0x0?(_0x5be60e===0x1?player1MaxLevelReached=Math[_0x383a18(0x1c9)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x383a18(0x1c9)](player2MaxLevelReached,level),resetWave()):(console[_0x383a18(0x1ce)]('Error:\x20Tried\x20to\x20start\x20wave\x20for\x20player\x20with\x200\x20lives.\x20Triggering\x20Game\x20Over.'),triggerFinalGameOverSequence());},_0x201fe7),renderGame();return;}if(!isChallengingStage){if(enemies[_0x50d43d(0x211)]>0x0){let _0x65d5af=null;const _0x5c3fde=enemies['filter'](_0x10139f=>_0x10139f?.['state']==='in_grid'),_0x3e528f=_0x5c3fde[_0x50d43d(0x211)]<=0x3,_0x6206bf=Math[_0x50d43d(0x1c9)](0x1,Math['min'](level,LEVEL_CAP_FOR_SCALING)),_0x5d3eb6=0x1068,_0x30b685=0x320,_0x53df9d=(_0x6206bf-0x1)*((_0x5d3eb6-_0x30b685)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x50956c=Math[_0x50d43d(0x1c9)](_0x30b685,_0x5d3eb6-_0x53df9d),_0x594f07=Math[_0x50d43d(0x1a8)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x1d231e=enemies['filter'](_0x393336=>_0x393336?.[_0x50d43d(0x1f7)]===_0x50d43d(0x1b1)||_0x393336?.[_0x50d43d(0x1f7)]===_0x50d43d(0x17d))[_0x50d43d(0x211)];if(_0x3e528f||_0x11a2b1-lastEnemyDetachTime>_0x50956c&&_0x5c3fde[_0x50d43d(0x211)]>0x0&&_0x1d231e<_0x594f07){_0x65d5af=findAndDetachEnemy();if(_0x65d5af&&_0x65d5af[_0x50d43d(0x211)]>0x0){const _0x2504b9=_0x65d5af[_0x50d43d(0x205)](_0x1b34cc=>enemies[_0x50d43d(0x1c0)](_0x1b53c4=>_0x1b53c4?.['id']===_0x1b34cc['id']))[_0x50d43d(0x171)](_0x48a76d=>_0x48a76d&&_0x48a76d['state']===_0x50d43d(0x182));if(_0x2504b9[_0x50d43d(0x211)]>0x0){const _0x36f930=_0x2504b9[0x0],_0x12deb1=_0x36f930['attackType'];!_0x3e528f&&(lastEnemyDetachTime=_0x11a2b1);if(_0x12deb1===_0x50d43d(0x1fd)){const _0x3f8230=generateAttackPath(_0x36f930);if(_0x3f8230&&_0x3f8230[_0x50d43d(0x211)]>0x0){_0x2504b9[_0x50d43d(0x211)]===0x3&&_0x36f930[_0x50d43d(0x193)]===ENEMY3_TYPE&&level!==0x1&&playSound(tripleAttackSound);let _0x4dde3f=[..._0x2504b9];const _0x27acd0=_0x4dde3f[_0x50d43d(0x211)];if(_0x27acd0>0x1){let _0x11525b=null,_0x2b63d5=[];_0x4dde3f[_0x50d43d(0x149)](_0x2287f2=>{const _0x140935=_0x50d43d;if(_0x2287f2['type']===ENEMY3_TYPE)_0x11525b=_0x2287f2;else _0x2b63d5[_0x140935(0x177)](_0x2287f2);});_0x11525b&&level!==0x1&&_0x27acd0===0x3&&_0x2b63d5[_0x50d43d(0x211)]===0x2?_0x4dde3f=[_0x2b63d5[0x0],_0x11525b,_0x2b63d5[0x1]]:_0x4dde3f[_0x50d43d(0x22e)]((_0x628403,_0x3cbcf9)=>(_0x628403?.[_0x50d43d(0x19e)]??0x0)-(_0x3cbcf9?.[_0x50d43d(0x19e)]??0x0));const _0x21ea51=0x5;let _0x2c362d=0x0;_0x4dde3f=_0x4dde3f['filter'](_0x1cb92c=>_0x1cb92c&&typeof _0x1cb92c[_0x50d43d(0x1bc)]===_0x50d43d(0x1dc));const _0x13f7f9=_0x4dde3f['length'];for(let _0xda3703=0x0;_0xda3703<_0x13f7f9;_0xda3703++){_0x2c362d+=_0x4dde3f[_0xda3703][_0x50d43d(0x1bc)];if(_0xda3703<_0x13f7f9-0x1)_0x2c362d+=_0x21ea51;}const _0x3cb6a5=-_0x2c362d/0x2;let _0x406390=_0x3cb6a5;for(let _0x4e59d7=0x0;_0x4e59d7<_0x13f7f9;_0x4e59d7++){const _0x2d93ea=_0x4dde3f[_0x4e59d7];_0x2d93ea[_0x50d43d(0x1e4)]=_0x406390+_0x2d93ea[_0x50d43d(0x1bc)]/0x2,_0x406390+=_0x2d93ea[_0x50d43d(0x1bc)]+_0x21ea51;}}else _0x4dde3f[_0x50d43d(0x149)](_0x1030f6=>_0x1030f6[_0x50d43d(0x1e4)]=0x0);const _0x3ccbc7=_0x50d43d(0x1f4)+_0x36f930['id']+'-'+_0x11a2b1;_0x4dde3f['forEach'](_0x56747d=>{if(_0x56747d)_0x56747d['attackGroupId']=_0x3ccbc7;});let _0x4337a4=![],_0x2e32f8=GROUP_FIRE_BURST_DELAY;if(_0x36f930[_0x50d43d(0x193)]===ENEMY2_TYPE||_0x36f930[_0x50d43d(0x193)]===ENEMY3_TYPE)_0x4337a4=!![],_0x36f930[_0x50d43d(0x193)]===ENEMY2_TYPE&&_0x27acd0===0x1&&(_0x2e32f8=SOLO_BUTTERFLY_FIRE_DELAY);else _0x36f930['type']===ENEMY1_TYPE&&(_0x4337a4=!![]);_0x3e528f&&level>0x1&&(_0x4337a4=![]),_0x4337a4&&_0x4dde3f[_0x50d43d(0x149)](_0x2dd207=>{const _0x38f01f=_0x50d43d,_0x2a48f0=_0x2dd207&&!(_0x2dd207[_0x38f01f(0x193)]===ENEMY3_TYPE&&_0x2dd207['hasCapturedShip']);_0x2a48f0&&fireEnemyBurst(_0x2dd207['id'],'attacking',_0x2e32f8);}),_0x4dde3f[_0x50d43d(0x149)]((_0x7c9cb8,_0x16c1e9)=>{const _0x3cfcdf=_0x50d43d;_0x7c9cb8&&_0x7c9cb8[_0x3cfcdf(0x1f7)]===_0x3cfcdf(0x182)&&(_0x7c9cb8[_0x3cfcdf(0x1f7)]='preparing_attack',_0x7c9cb8[_0x3cfcdf(0x178)]=![],_0x7c9cb8[_0x3cfcdf(0x1bb)]=0x0,_0x7c9cb8['velocityY']=0x0,_0x7c9cb8[_0x3cfcdf(0x13b)]=![],setTimeout(()=>{const _0x1ce3ad=_0x3cfcdf;if(isPaused)return;const _0x34eb1e=enemies['find'](_0x38f750=>_0x38f750?.['id']===_0x7c9cb8['id']);if(_0x34eb1e&&_0x34eb1e[_0x1ce3ad(0x1f7)]===_0x1ce3ad(0x17d))try{const _0x4dc4dd=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x43199c=0x1;if(_0x34eb1e[_0x1ce3ad(0x193)]===ENEMY1_TYPE)_0x43199c=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x34eb1e[_0x1ce3ad(0x193)]===ENEMY2_TYPE)_0x43199c=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x34eb1e[_0x1ce3ad(0x193)]===ENEMY3_TYPE)_0x43199c=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x7c9cb8['type']===ENEMY3_TYPE)playSound(bossGalagaDiveSound);else playSound(butterflyDiveSound);_0x34eb1e['state']=_0x1ce3ad(0x1b1),_0x34eb1e[_0x1ce3ad(0x167)]=_0x3f8230,_0x34eb1e[_0x1ce3ad(0x214)]=0x0,_0x34eb1e['attackPathT']=0x0,_0x34eb1e[_0x1ce3ad(0x1d6)]=_0x4dc4dd*_0x43199c,_0x34eb1e[_0x1ce3ad(0x164)]=0x0,_0x34eb1e['canFireThisDive']=!![];}catch(_0x2209cb){console[_0x1ce3ad(0x1ce)](_0x1ce3ad(0x1a4)+_0x7c9cb8['id']+':',_0x2209cb);}},_0x16c1e9*GROUP_DETACH_DELAY_MS));});}else console[_0x50d43d(0x154)]('[DEBUG\x20Attack\x20Path\x20Failed]\x20Could\x20not\x20generate\x20path\x20for\x20leader\x20'+_0x36f930?.['id']+_0x50d43d(0x222)),_0x65d5af[_0x50d43d(0x149)](_0x47df45=>{if(_0x47df45)_0x47df45['justReturned']=![];});}}}}}}enemies[_0x50d43d(0x149)](_0x46c2f4=>{const _0x3ce941=_0x50d43d;if(_0x46c2f4&&_0x46c2f4['type']===ENEMY3_TYPE&&_0x46c2f4[_0x3ce941(0x19b)]&&_0x46c2f4[_0x3ce941(0x1f7)]===_0x3ce941(0x1b1)&&_0x46c2f4[_0x3ce941(0x1a9)]&&typeof _0x46c2f4['capturedShipLastFiredTime']==='number'){if(_0x11a2b1-_0x46c2f4[_0x3ce941(0x224)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x322ddf=_0x46c2f4['x']+_0x46c2f4[_0x3ce941(0x1bc)]/0x2,_0x54879d=_0x46c2f4['y']+_0x46c2f4[_0x3ce941(0x20a)]+_0x46c2f4['capturedShipDimensions']['height']*0.5,_0x568bfe={'x':_0x322ddf,'y':_0x54879d};createBulletSimple(_0x46c2f4,_0x568bfe)&&(_0x46c2f4[_0x3ce941(0x224)]=_0x11a2b1,playSound(playerShootSound));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x4cd26a=_0x11a2b1-gameOverSequenceStartTime,_0x58365e=_0x4cd26a>=GAME_OVER_DURATION;_0x58365e&&!isShowingResultsScreen&&(isShowingResultsScreen=!![],stopSound(gameOverSound),playSound(resultsMusicSound,!![]));}}renderGame();}catch(_0x290f35){console[_0x50d43d(0x1ce)](_0x50d43d(0x1b9),_0x290f35,_0x290f35[_0x50d43d(0x1f2)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x50d43d(0x20c)),stopAllGameSounds(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x50d43d(0x21e)&&showMenuState();}catch(_0x245cc4){console[_0x50d43d(0x1ce)](_0x50d43d(0x1f5),_0x245cc4);}}}function checkAndAwardExtraLife(){const _0x1022bb=_0x49db;try{let _0x574edb;!isManualControl||!isTwoPlayerMode?_0x574edb=player1LifeThresholdsMet:_0x574edb=currentPlayer===0x1?player1LifeThresholdsMet:player2LifeThresholdsMet;let _0x3dade6=![];while(!![]){let _0x152f87=![],_0x44e53f=-0x1;const _0x496083=_0x574edb[_0x1022bb(0x1df)];_0x496083===0x0?_0x44e53f=EXTRA_LIFE_THRESHOLD_1:_0x44e53f=EXTRA_LIFE_THRESHOLD_2+(_0x496083-0x1)*RECURRING_EXTRA_LIFE_INTERVAL;if(_0x44e53f!==-0x1&&score>=_0x44e53f&&!_0x574edb['has'](_0x44e53f)){playerLives++,_0x574edb['add'](_0x44e53f),_0x3dade6=!![],_0x152f87=!![];if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}}if(!_0x152f87)break;}_0x3dade6&&!showExtraLifeMessage&&(showExtraLifeMessage=!![],extraLifeMessageStartTime=Date['now'](),playSound(extraLifeSound));}catch(_0x2096a4){console['error']('Error\x20checking/awarding\x20extra\x20life:',_0x2096a4);}}function triggerFinalGameOverSequence(){const _0x407065=_0x49db;if(isInGameState&&gameOverSequenceStartTime===0x0){isPaused=![],isShowingDemoText=![],isShowingIntro=![],isWaveTransitioning=![],showCsHitsMessage=![],showExtraLifeMessage=![],showPerfectMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showReadyMessage=![],showCsBonusScoreMessage=![],isShowingPlayerGameOverMessage=![],isEntrancePhaseActive=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![];isManualControl&&saveHighScore();stopSound(gridBackgroundSound),stopSound(menuMusicSound),stopSound(resultsMusicSound),stopSound(captureSound),stopSound(entranceSound),isGridSoundPlaying=![];const _0x5ad0e6=Date[_0x407065(0x207)]();!isTwoPlayerMode?(playSound(gameOverSound),gameOverSequenceStartTime=_0x5ad0e6):(gameOverSequenceStartTime=_0x5ad0e6-GAME_OVER_DURATION,playSound(resultsMusicSound,!![]),isShowingResultsScreen=!![]),bullets=[],enemyBullets=[],explosions=[],fallingShips=[],isDualShipActive=![],previousButtonStates=[],previousGameButtonStates=[],previousGameButtonStatesP2=[];}}function triggerGameOver(){triggerFinalGameOverSequence();}