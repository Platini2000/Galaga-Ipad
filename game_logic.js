(function(_0x19e85a,_0x4e2ddd){const _0x32fe1d=_0x3e36,_0x44381d=_0x19e85a();while(!![]){try{const _0x4125c4=-parseInt(_0x32fe1d(0x24e))/0x1+-parseInt(_0x32fe1d(0x1e7))/0x2*(-parseInt(_0x32fe1d(0x212))/0x3)+-parseInt(_0x32fe1d(0x210))/0x4+-parseInt(_0x32fe1d(0x198))/0x5*(parseInt(_0x32fe1d(0x1a6))/0x6)+parseInt(_0x32fe1d(0x1aa))/0x7*(parseInt(_0x32fe1d(0x20c))/0x8)+-parseInt(_0x32fe1d(0x1ce))/0x9*(parseInt(_0x32fe1d(0x289))/0xa)+parseInt(_0x32fe1d(0x187))/0xb*(parseInt(_0x32fe1d(0x1c7))/0xc);if(_0x4125c4===_0x4e2ddd)break;else _0x44381d['push'](_0x44381d['shift']());}catch(_0x85094e){_0x44381d['push'](_0x44381d['shift']());}}}(_0x3606,0x38ff7));let currentWavePatternIndex=-0x1,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined;function resetGame(){const _0x595bbe=_0x3e36;try{level=0x1,currentWavePatternIndex=-0x1,isPaused=![],isShowingIntro=![],introStep=0x0,isWaveTransitioning=![],isGridSoundPlaying=![],isEntrancePhaseActive=![],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,enemySpawnTimeouts[_0x595bbe(0x1bc)](clearTimeout),enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],gameOverSequenceStartTime=0x0,gameStartTime=0x0,stopAllGameSounds(),player1CompletedLevel=-0x1,forceCenterShipNextReset=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,player1Score=0x0,player2Score=0x0,player1Lives=0x3,player2Lives=0x3,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,lastGridFireCheckTime=0x0,firstEnemyLanded=![],player1LifeThresholdsMet=new Set(),player2LifeThresholdsMet=new Set(),currentPlayer=0x1,score=player1Score,playerLives=player1Lives,player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],scoreEarnedThisCS=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],isTouching=![],touchCurrentX=0x0,touchStartX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],isTouchFiringActive=![],resetAllMessages(),explosions=[],isChallengingStage=![],challengingStageEnemiesHit=0x0,isShowingResultsScreen=![],currentWaveDefinition=null,isFullGridWave=![],hitSparks=[],resetWave();}catch(_0xb73e6b){console['error'](_0x595bbe(0x282),_0xb73e6b),isWaveTransitioning=![],isGridSoundPlaying=![],isEntrancePhaseActive=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],currentWavePatternIndex=-0x1,player1CompletedLevel=-0x1,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,resetAllMessages(),forceCenterShipNextReset=![],player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isFullGridWave=![],hitSparks=[],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],player1LifeThresholdsMet=new Set(),player2LifeThresholdsMet=new Set(),playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],isTouching=![],touchCurrentX=0x0,touchStartX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],isTouchFiringActive=![];typeof enemySpawnTimeouts!==_0x595bbe(0x24a)&&Array['isArray'](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x595bbe(0x1bc)](clearTimeout);enemySpawnTimeouts=[];if(typeof showMenuState===_0x595bbe(0x213))showMenuState();}}function resetAllMessages(){showCsHitsMessage=![],csHitsMessageStartTime=0x0,showPerfectMessage=![],perfectMessageStartTime=0x0,showCsBonusScoreMessage=![],csBonusScoreMessageStartTime=0x0,showCSClearMessage=![],csClearMessageStartTime=0x0,showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,showReadyMessage=![],readyMessageStartTime=0x0,readyForNextWave=![],readyForNextWaveReset=![];}function stopAllGameSounds(){const _0x5d3993=_0x3e36;if(typeof playingLoopSources===_0x5d3993(0x1d2)&&playingLoopSources!==null){const _0x357cf2=Object[_0x5d3993(0x1ef)](playingLoopSources);_0x357cf2['forEach'](_0x4677ea=>{stopSound(_0x4677ea);});}isGridSoundPlaying=![],stopSound(captureSound),stopSound(entranceSound);}function getWaveType(_0x6b2e16){const _0x23c723=_0x3e36,_0x5e7914=(_0x6b2e16-0x1)%0x4;switch(_0x5e7914){case 0x0:return _0x23c723(0x285);case 0x1:return _0x23c723(0x278);case 0x2:return'challenging_stage';case 0x3:return _0x23c723(0x1dd);default:console[_0x23c723(0x216)]('Onbekend\x20wave\x20patroon\x20index\x20'+_0x5e7914+_0x23c723(0x276)+_0x6b2e16);return _0x23c723(0x1be);}}function generateWaveDefinition(_0x34db8d){const _0x4ad1a0=_0x3e36;let _0x4157c1=[];currentWavePatternIndex=-0x1;const _0x5c90c6=getWaveType(_0x34db8d);if(typeof waveEntrancePatterns===_0x4ad1a0(0x24a)||!Array[_0x4ad1a0(0x1de)](waveEntrancePatterns)||waveEntrancePatterns[_0x4ad1a0(0x1f5)]<0x2)return console['error'](_0x4ad1a0(0x211)+_0x34db8d+')!'),[];if(_0x5c90c6===_0x4ad1a0(0x24f))_0x4157c1=[];else{if(_0x5c90c6===_0x4ad1a0(0x285)){currentWavePatternIndex=0x0;const _0x1692ef=waveEntrancePatterns[0x0];if(!_0x1692ef||_0x1692ef['length']===0x0)console[_0x4ad1a0(0x216)](_0x4ad1a0(0x1b2)+_0x34db8d+'\x20(Full\x20Grid):\x20Basis\x20patroon\x200\x20is\x20ongeldig\x20of\x20leeg!'),_0x4157c1=[];else try{_0x4157c1=JSON[_0x4ad1a0(0x288)](JSON[_0x4ad1a0(0x245)](_0x1692ef),(_0x254241,_0x6f023e)=>{const _0x52089d=_0x4ad1a0;return _0x6f023e&&typeof _0x6f023e===_0x52089d(0x1d2)&&_0x6f023e[_0x52089d(0x24b)]===ENEMY3_TYPE&&typeof _0x6f023e[_0x52089d(0x1ff)]==='undefined'&&(_0x6f023e[_0x52089d(0x1ff)]=![]),_0x6f023e;});}catch(_0x536317){console[_0x4ad1a0(0x216)](_0x4ad1a0(0x191),_0x536317),_0x4157c1=[];}}else{if(_0x5c90c6==='entrance_flight_1'){currentWavePatternIndex=0x0;const _0x5d73aa=waveEntrancePatterns[0x0];if(!_0x5d73aa||_0x5d73aa[_0x4ad1a0(0x1f5)]===0x0)console['error']('Wave\x20'+_0x34db8d+_0x4ad1a0(0x18d)),_0x4157c1=[];else try{_0x4157c1=JSON[_0x4ad1a0(0x288)](JSON[_0x4ad1a0(0x245)](_0x5d73aa),(_0x16cef6,_0x504fdf)=>{const _0x2f010b=_0x4ad1a0;return _0x504fdf&&typeof _0x504fdf===_0x2f010b(0x1d2)&&_0x504fdf[_0x2f010b(0x24b)]===ENEMY3_TYPE&&typeof _0x504fdf[_0x2f010b(0x1ff)]===_0x2f010b(0x24a)&&(_0x504fdf[_0x2f010b(0x1ff)]=![]),_0x504fdf;});}catch(_0x378ddb){console['error'](_0x4ad1a0(0x1ee),_0x378ddb),_0x4157c1=[];}}else{if(_0x5c90c6===_0x4ad1a0(0x1dd)){currentWavePatternIndex=0x1;const _0x551055=waveEntrancePatterns[0x1];if(!_0x551055||_0x551055[_0x4ad1a0(0x1f5)]===0x0)console[_0x4ad1a0(0x216)](_0x4ad1a0(0x1b2)+_0x34db8d+_0x4ad1a0(0x246)),_0x4157c1=[];else try{_0x4157c1=JSON['parse'](JSON[_0x4ad1a0(0x245)](_0x551055),(_0x43d25c,_0x177956)=>{const _0x338304=_0x4ad1a0;return _0x177956&&typeof _0x177956===_0x338304(0x1d2)&&_0x177956[_0x338304(0x24b)]===ENEMY3_TYPE&&typeof _0x177956[_0x338304(0x1ff)]===_0x338304(0x24a)&&(_0x177956[_0x338304(0x1ff)]=![]),_0x177956;});}catch(_0x55226e){console['error'](_0x4ad1a0(0x1e5),_0x55226e),_0x4157c1=[];}}else _0x4157c1=[];}}}if(_0x5c90c6!==_0x4ad1a0(0x24f)){if(typeof normalWaveEntrancePaths==='undefined'||Object[_0x4ad1a0(0x1ef)](normalWaveEntrancePaths)[_0x4ad1a0(0x1f5)]===0x0)return console['error'](_0x4ad1a0(0x1c3)+_0x34db8d+_0x4ad1a0(0x203)),_0x4157c1;for(let _0x1b0267=_0x4157c1['length']-0x1;_0x1b0267>=0x0;_0x1b0267--){const _0x7e5e0f=_0x4157c1[_0x1b0267];if(!normalWaveEntrancePaths?.[_0x7e5e0f[_0x4ad1a0(0x18a)]]){console[_0x4ad1a0(0x249)](_0x4ad1a0(0x1b2)+_0x34db8d+_0x4ad1a0(0x253)+currentWavePatternIndex+_0x4ad1a0(0x27e)+_0x7e5e0f[_0x4ad1a0(0x18a)]+_0x4ad1a0(0x252)),_0x4157c1[_0x4ad1a0(0x1e2)](_0x1b0267,0x1);continue;}if(_0x7e5e0f[_0x4ad1a0(0x1dc)]&&Array[_0x4ad1a0(0x1de)](_0x7e5e0f[_0x4ad1a0(0x1dc)])){for(let _0x3ba4ab=_0x7e5e0f['enemies'][_0x4ad1a0(0x1f5)]-0x1;_0x3ba4ab>=0x0;_0x3ba4ab--){const _0x1fc813=_0x7e5e0f[_0x4ad1a0(0x1dc)][_0x3ba4ab];(!_0x1fc813||!normalWaveEntrancePaths?.[_0x1fc813[_0x4ad1a0(0x24c)]])&&(console[_0x4ad1a0(0x249)](_0x4ad1a0(0x1b2)+_0x34db8d+',\x20Pattern\x20'+currentWavePatternIndex+_0x4ad1a0(0x20d)+_0x7e5e0f[_0x4ad1a0(0x18a)]+_0x4ad1a0(0x27d)+_0x1fc813?.[_0x4ad1a0(0x24c)]+_0x4ad1a0(0x26b)),_0x7e5e0f[_0x4ad1a0(0x1dc)][_0x4ad1a0(0x1e2)](_0x3ba4ab,0x1)),_0x1fc813&&_0x1fc813[_0x4ad1a0(0x24b)]===ENEMY3_TYPE&&typeof _0x1fc813[_0x4ad1a0(0x1ff)]==='undefined'&&(_0x1fc813[_0x4ad1a0(0x1ff)]=![]);}_0x7e5e0f['enemies']['length']===0x0&&(console['warn'](_0x4ad1a0(0x1b2)+_0x34db8d+_0x4ad1a0(0x253)+currentWavePatternIndex+':\x20Squadron\x20\x22'+_0x7e5e0f[_0x4ad1a0(0x18a)]+'\x22\x20became\x20empty\x20after\x20enemy\x20path\x20validation.\x20Removing.'),_0x4157c1[_0x4ad1a0(0x1e2)](_0x1b0267,0x1));}else console['warn']('Wave\x20'+_0x34db8d+_0x4ad1a0(0x253)+currentWavePatternIndex+_0x4ad1a0(0x1cd)+_0x7e5e0f[_0x4ad1a0(0x18a)]+'\x22\x20has\x20no\x20valid\x20enemies\x20array.\x20Removing.'),_0x4157c1['splice'](_0x1b0267,0x1);}}return _0x4157c1;}function resetWave(){const _0x4c3aab=_0x3e36;stopAllGameSounds(),isWaveTransitioning=![],isGridSoundPlaying=![],scoreEarnedThisCS=0x0,resetAllMessages(),isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],isTouching=![],touchCurrentX=0x0,touchStartX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],isTouchFiringActive=![];const _0x5daec5=player1Score,_0x2154e0=player2Score;_0x5daec5<highScore&&(player1TriggeredHighScoreSound=![]);_0x2154e0<highScore&&(player2TriggeredHighScoreSound=![]);bullets=[],enemyBullets=[],enemies=[],explosions=[],gridMoveDirection=0x1,lastEnemyDetachTime=0x0,currentGridOffsetX=0x0,isEntrancePhaseActive=![],currentWaveDefinition=null,currentWavePatternIndex=-0x1,enemySpawnTimeouts[_0x4c3aab(0x1bc)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,hitSparks=[],isFullGridWave=![],isChallengingStage=![];try{const _0x1f69f1=getWaveType(level);isChallengingStage=_0x1f69f1===_0x4c3aab(0x24f),isFullGridWave=_0x1f69f1===_0x4c3aab(0x285),challengingStageEnemiesHit=0x0,isShowingIntro=!![],introDisplayStartTime=Date[_0x4c3aab(0x1f9)]();if(isChallengingStage)isTwoPlayerMode?introStep=0x1:introStep=0x3;else{if(isFullGridWave){if(isTwoPlayerMode)introStep=0x1;else level===0x1?introStep=0x1:introStep=0x2;}else isTwoPlayerMode?introStep=0x1:introStep=0x2;}level===0x1&&currentPlayer===0x1&&playSound(startSound),gameCanvas?.[_0x4c3aab(0x227)]>0x0&&ship?(ship['y']=gameCanvas[_0x4c3aab(0x23d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,(!isManualControl||forceCenterShipNextReset)&&(isDualShipActive?ship['x']=gameCanvas['width']/0x2-ship[_0x4c3aab(0x227)]:ship['x']=gameCanvas['width']/0x2-ship[_0x4c3aab(0x227)]/0x2,ship[_0x4c3aab(0x23e)]=ship['x'],smoothedShipX=ship['x'],aiNeedsStabilization=!![])):console[_0x4c3aab(0x249)]('Canvas/ship\x20not\x20ready\x20in\x20resetWave.'),forceCenterShipNextReset=![];}catch(_0x5b1a0d){console['error'](_0x4c3aab(0x26d),_0x5b1a0d),isWaveTransitioning=![],isGridSoundPlaying=![],isShowingIntro=![],introStep=0x0,isChallengingStage=![],isFullGridWave=![],resetAllMessages(),isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],currentWavePatternIndex=-0x1,squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,forceCenterShipNextReset=![],isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,hitSparks=[],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],isTouching=![],touchCurrentX=0x0,touchStartX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],isTouchFiringActive=![];typeof enemySpawnTimeouts!=='undefined'&&Array[_0x4c3aab(0x1de)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x4c3aab(0x1bc)](clearTimeout);enemySpawnTimeouts=[];if(typeof showMenuState===_0x4c3aab(0x213))showMenuState();}}const createBulletSimple=(_0x4e1444,_0x2caa5a=null)=>{const _0x380044=_0x3e36;if(!_0x4e1444||playerLives<=0x0||!isInGameState||!ship||isShipCaptured)return![];const _0x33cb9a=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0xd80e80=_0x2caa5a?_0x2caa5a['x']:_0x4e1444['x']+_0x4e1444[_0x380044(0x227)]/0x2,_0x466a85=_0x2caa5a?_0x2caa5a['y']:_0x4e1444['y']+_0x4e1444[_0x380044(0x23d)]/0x2;let _0xdee771=0x0,_0x261437=_0x33cb9a;const _0x388a90=ship['x']+ship[_0x380044(0x227)]/0x2-_0xd80e80,_0x376866=ship['y']+ship[_0x380044(0x23d)]/0x2-_0x466a85,_0x40a0bd=Math[_0x380044(0x286)](_0x388a90*_0x388a90+_0x376866*_0x376866);if(_0x40a0bd>0x0){let _0x5dd50d=0x0;!isChallengingStage&&(_0x5dd50d=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x5a0bcb=Math[_0x380044(0x1b7)](_0x376866,_0x388a90);return _0xdee771=Math[_0x380044(0x1d9)](_0x5a0bcb)*_0x33cb9a*_0x5dd50d,_0x261437=Math['sqrt'](_0x33cb9a**0x2-_0xdee771**0x2),_0x261437=Math[_0x380044(0x206)](_0x33cb9a*(0x1-_0x5dd50d)*0.5,_0x261437),_0x376866<0x0&&(_0x261437=Math[_0x380044(0x22c)](_0x261437)),enemyBullets[_0x380044(0x20a)]({'x':_0xd80e80-ENEMY_BULLET_WIDTH/0x2,'y':_0x466a85,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0xdee771,'vy':_0x261437,'type':_0x4e1444['type']}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x25f154,_0x5c6ec3,_0x11808a){const _0x195a71=_0x3e36;if(isFullGridWave||isChallengingStage){if(_0x25f154?.['enemies']?.[_0x195a71(0x1f5)]>0x0){enemiesSpawnedThisWave+=_0x25f154['enemies'][_0x195a71(0x1f5)];if(squadronCompletionStatus[_0x5c6ec3])squadronCompletionStatus[_0x5c6ec3]['completed']=squadronCompletionStatus[_0x5c6ec3][_0x195a71(0x275)];}return![];}const _0x540275=normalWaveEntrancePaths,_0x507e19=_0x25f154[_0x195a71(0x18a)],_0x28c84e=_0x540275[_0x507e19];if(!_0x28c84e||_0x28c84e[_0x195a71(0x1f5)]===0x0){console[_0x195a71(0x216)]('Entrance\x20Wave\x20(Level\x20'+level+_0x195a71(0x204)+_0x507e19+_0x195a71(0x22a)+_0x5c6ec3+_0x195a71(0x1f1));if(_0x25f154?.[_0x195a71(0x1dc)]?.['length']>0x0){enemiesSpawnedThisWave+=_0x25f154[_0x195a71(0x1dc)][_0x195a71(0x1f5)];if(squadronCompletionStatus[_0x5c6ec3])squadronCompletionStatus[_0x5c6ec3][_0x195a71(0x23f)]=squadronCompletionStatus[_0x5c6ec3][_0x195a71(0x275)];}return![];}const _0x450da4=setTimeout(()=>{const _0x66523f=_0x195a71,_0x150cdc=enemySpawnTimeouts[_0x66523f(0x241)](_0x450da4);if(_0x150cdc>-0x1)enemySpawnTimeouts['splice'](_0x150cdc,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||playerLives<=0x0||isShipCaptured||isFullGridWave){if(_0x25f154?.['enemies']?.[_0x66523f(0x1f5)]>0x0){enemiesSpawnedThisWave+=_0x25f154[_0x66523f(0x1dc)][_0x66523f(0x1f5)];if(squadronCompletionStatus[_0x5c6ec3])squadronCompletionStatus[_0x5c6ec3][_0x66523f(0x23f)]=squadronCompletionStatus[_0x5c6ec3]['total'];}return;}try{!squadronEntranceFiringStatus[_0x5c6ec3]&&(squadronEntranceFiringStatus[_0x5c6ec3]={});squadronEntranceFiringStatus[_0x5c6ec3][_0x66523f(0x19c)]=Date[_0x66523f(0x1f9)]()+_0x11808a,squadronEntranceFiringStatus[_0x5c6ec3][_0x66523f(0x1b4)]=![],squadronEntranceFiringStatus[_0x5c6ec3]['firstEnemyId']=null;const _0x29cedc=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x2dfa0a=_0x29cedc*0x2,_0x86ff4a=0x1;let _0x2ada4f=0x0;_0x25f154['enemies'][_0x66523f(0x1bc)]((_0x3705c2,_0x12e02d)=>{const _0x328637=_0x66523f;_0x2ada4f++;if(!_0x3705c2||!_0x3705c2[_0x328637(0x24b)]||typeof _0x3705c2[_0x328637(0x184)]===_0x328637(0x24a)||typeof _0x3705c2[_0x328637(0x1f0)]===_0x328637(0x24a)||!_0x3705c2[_0x328637(0x24c)]){console[_0x328637(0x216)](_0x328637(0x19d)+_0x5c6ec3+'\x20(Path\x20'+_0x507e19+_0x328637(0x234)+_0x12e02d+'.\x20Skipping.'),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x5c6ec3]&&squadronCompletionStatus[_0x5c6ec3][_0x328637(0x23f)]++;return;}const _0x3df68a=_0x3705c2[_0x328637(0x24c)],_0x17fc8c=_0x540275[_0x3df68a];if(!_0x17fc8c||_0x17fc8c[_0x328637(0x1f5)]===0x0){}const _0x41919a=_0x17fc8c&&_0x17fc8c['length']>0x0?_0x17fc8c:_0x28c84e,_0xcb0c74=_0x17fc8c&&_0x17fc8c[_0x328637(0x1f5)]>0x0?_0x3df68a:_0x507e19;let _0x4a12a4=0x0;const _0x358702=getWaveType(level),_0x2e90a0=_0x358702===_0x328637(0x1dd)&&(_0x5c6ec3===0x2||_0x5c6ec3===0x3);if(_0x2e90a0){const _0x3bf15b=Math['floor'](_0x12e02d/0x2);_0x12e02d%0x2===0x0?_0x4a12a4=_0x3bf15b*_0x2dfa0a:_0x4a12a4=_0x3bf15b*_0x2dfa0a+_0x86ff4a;}else _0x4a12a4=_0x12e02d*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x32e4a4=setTimeout(()=>{const _0x328891=_0x328637,_0x37f73b=enemySpawnTimeouts['indexOf'](_0x32e4a4);if(_0x37f73b>-0x1)enemySpawnTimeouts[_0x328891(0x1e2)](_0x37f73b,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||playerLives<=0x0||isShipCaptured||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x5c6ec3]&&squadronCompletionStatus[_0x5c6ec3][_0x328891(0x23f)]++;return;}try{let _0x17d6b0=_0x3705c2[_0x328891(0x24b)],_0x41bb1c=_0x17d6b0===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x47608f,_0x56e036;if(_0x17d6b0===ENEMY1_TYPE)_0x47608f=ENEMY1_WIDTH,_0x56e036=ENEMY1_HEIGHT;else _0x17d6b0===ENEMY3_TYPE?(_0x47608f=BOSS_WIDTH,_0x56e036=BOSS_HEIGHT):(_0x47608f=ENEMY_WIDTH,_0x56e036=ENEMY_HEIGHT);let _0xc3e90e=0x0,_0x25460e=0x0;if(_0x41919a&&_0x41919a[0x0]?.['p0'])_0xc3e90e=_0x41919a[0x0]['p0']['x'],_0x25460e=_0x41919a[0x0]['p0']['y'];else{console['error']('Invalid\x20start\x20segment\x20for\x20active\x20path\x20'+_0xcb0c74+_0x328891(0x194)+_0x5c6ec3+',\x20Enemy\x20'+_0x12e02d+_0x328891(0x22b));throw new Error(_0x328891(0x23c)+_0xcb0c74);}let _0x521ed0,_0x3aef33;try{const {x:_0x5e5ab0,y:_0xeba2f7}=getCurrentGridSlotPosition(_0x3705c2[_0x328891(0x184)],_0x3705c2[_0x328891(0x1f0)],_0x47608f);_0x521ed0=_0x5e5ab0,_0x3aef33=_0xeba2f7;}catch(_0x56fbdb){console[_0x328891(0x216)](_0x328891(0x232)+_0x3705c2[_0x328891(0x24b)]+_0x328891(0x251)+_0x3705c2['gridRow']+','+_0x3705c2['gridCol']+']',_0x56fbdb),_0x521ed0=gameCanvas?.['width']/0x2||0xc8,_0x3aef33=ENEMY_TOP_MARGIN+_0x3705c2[_0x328891(0x184)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x56647a=0x0;const _0x1e2446=_0x2e90a0,_0x248289=_0x1e2446&&_0x12e02d%0x2!==0x0;_0x248289?_0x56647a=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x56647a=-_0x12e02d*PATH_T_OFFSET_PER_ENEMY;const _0x365ea9={'x':_0xc3e90e,'y':_0x25460e,'width':_0x47608f,'height':_0x56e036,'targetGridX':_0x521ed0,'targetGridY':_0x3aef33,'speed':0x0,'state':_0x328891(0x1fc),'gridRow':_0x3705c2['gridRow'],'gridCol':_0x3705c2[_0x328891(0x1f0)],'type':_0x17d6b0,'health':_0x41bb1c,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0xcb0c74,'pathSegmentIndex':0x0,'pathT':_0x56647a,'squadronId':_0x5c6ec3,'squadronEnemyIndex':_0x12e02d,'id':_0x328891(0x26f)+_0x5c6ec3+'-'+_0x12e02d+'-'+Date[_0x328891(0x1f9)]()+'-'+Math[_0x328891(0x244)]()[_0x328891(0x25e)](0x24)[_0x328891(0x1ab)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x328891(0x27b),'hasCapturedShip':_0x17d6b0===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x17d6b0===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x328891(0x20a)](_0x365ea9),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x5c6ec3]&&squadronCompletionStatus[_0x5c6ec3][_0x328891(0x23f)]++,_0x12e02d===0x0&&(squadronEntranceFiringStatus[_0x5c6ec3]&&(squadronEntranceFiringStatus[_0x5c6ec3][_0x328891(0x1bf)]=_0x365ea9['id']));}catch(_0x2b8e9d){console[_0x328891(0x216)](_0x328891(0x186)+_0x5c6ec3+_0x328891(0x25f)+_0x12e02d+_0x328891(0x248)+_0x507e19+'):',_0x2b8e9d),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x5c6ec3]&&squadronCompletionStatus[_0x5c6ec3][_0x328891(0x23f)]++;}},_0x4a12a4);enemySpawnTimeouts[_0x328637(0x20a)](_0x32e4a4);});const _0x4c6328=setTimeout(()=>{const _0x317dbf=_0x66523f,_0x540707=enemySpawnTimeouts[_0x317dbf(0x241)](_0x4c6328);if(_0x540707>-0x1)enemySpawnTimeouts[_0x317dbf(0x1e2)](_0x540707,0x1);const _0x261c7b=squadronEntranceFiringStatus[_0x5c6ec3],_0x1759c8=_0x261c7b?_0x261c7b[_0x317dbf(0x1bf)]:null;if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured||isFullGridWave||!_0x1759c8)return;const _0x231503=enemies[_0x317dbf(0x22f)](_0x423b11=>_0x423b11&&_0x423b11['id']===_0x1759c8);_0x231503&&((_0x231503[_0x317dbf(0x27f)]===_0x317dbf(0x1fc)||_0x231503[_0x317dbf(0x27f)]===_0x317dbf(0x1cb)||_0x231503[_0x317dbf(0x27f)]===_0x317dbf(0x1a3))&&fireFixedEnemyBurst(_0x1759c8,null,0x0,0x3));},ENTRANCE_SQUADRON_FIRE_DELAY_MS);enemySpawnTimeouts['push'](_0x4c6328);}catch(_0x1cfcb4){console[_0x66523f(0x216)](_0x66523f(0x280)+_0x5c6ec3+'\x20(Path\x20'+_0x507e19+'):',_0x1cfcb4),_0x25f154?.[_0x66523f(0x1dc)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x25f154[_0x66523f(0x1dc)]['length'],squadronCompletionStatus[_0x5c6ec3]&&(squadronCompletionStatus[_0x5c6ec3]['completed']=squadronCompletionStatus[_0x5c6ec3][_0x66523f(0x275)]));}},_0x11808a);return enemySpawnTimeouts[_0x195a71(0x20a)](_0x450da4),!![];};function startChallengingStageSequence(){const _0x117bc7=_0x3e36;isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0x117bc7(0x1bc)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0x117bc7(0x1ef)](challengingStagePaths)[_0x117bc7(0x1f5)]===0x0&&defineChallengingStagePaths();if(Object[_0x117bc7(0x1ef)](challengingStagePaths)[_0x117bc7(0x1f5)]===0x0){console['error'](_0x117bc7(0x1a9)),isWaveTransitioning=!![],setTimeout(()=>{const _0x1ee9ad=_0x117bc7;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x1ee9ad(0x213)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x2b3b91=['CS3_DiveLoopL_Sharp',_0x117bc7(0x240),_0x117bc7(0x1f4),_0x117bc7(0x250)],_0x3a80c8=[_0x117bc7(0x18b),_0x117bc7(0x1fd),_0x117bc7(0x271),_0x117bc7(0x1c2)],_0x321b3a=[..._0x2b3b91,..._0x3a80c8];for(const _0x2b84ba of _0x321b3a){if(!challengingStagePaths[_0x117bc7(0x258)](_0x2b84ba)){console[_0x117bc7(0x216)](_0x117bc7(0x18e)+_0x2b84ba+_0x117bc7(0x195)),isWaveTransitioning=!![],setTimeout(()=>{const _0x168358=_0x117bc7;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x168358(0x213)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x27d99a=[..._0x2b3b91],_0x2a4b4a=[..._0x3a80c8]['sort'](()=>Math[_0x117bc7(0x244)]()-0.5);_0x27d99a[_0x117bc7(0x20a)](..._0x2a4b4a),currentWaveDefinition=[];for(let _0xe49f09=0x0;_0xe49f09<CHALLENGING_STAGE_SQUADRON_COUNT;_0xe49f09++){const _0xaae5f3=_0x27d99a[_0xe49f09%_0x27d99a['length']],_0x19fe7d={'pathId':_0xaae5f3,'enemies':[]};for(let _0x4c8f0e=0x0;_0x4c8f0e<CHALLENGING_STAGE_SQUADRON_SIZE;_0x4c8f0e++){let _0x2c511a=_0x4c8f0e<Math[_0x117bc7(0x1a7)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x19fe7d['enemies'][_0x117bc7(0x20a)]({'type':_0x2c511a,'entrancePathId':_0xaae5f3});}currentWaveDefinition[_0x117bc7(0x20a)](_0x19fe7d);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x117bc7(0x1f5)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x2ead4b=0x0;const _0x44df7e=-0x1c,_0x2162e8=Math[_0x117bc7(0x1a7)](Math[_0x117bc7(0x206)](0x0,level-0x3)/0x4)+0x1,_0x516797=scaleValue(_0x2162e8,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition['forEach']((_0x5e34c4,_0x4dbda6)=>{const _0x58b2c1=_0x117bc7;let _0x5cf74d=0x0;if(_0x4dbda6<=0x1)_0x5cf74d=0x0;else _0x4dbda6<=0x3?_0x5cf74d=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x5cf74d=(_0x4dbda6-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x173a40=_0x516797;(_0x4dbda6===0x2||_0x4dbda6===0x3)&&(_0x173a40*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x216e1e=setTimeout(()=>{const _0x295e5e=_0x3e36,_0x3b7a2e=enemySpawnTimeouts[_0x295e5e(0x241)](_0x216e1e);if(_0x3b7a2e>-0x1)enemySpawnTimeouts[_0x295e5e(0x1e2)](_0x3b7a2e,0x1);if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&playerLives>0x0)try{const _0x5da550=_0x5e34c4['pathId'],_0x36337c=challengingStagePaths,_0x4c9138=_0x36337c[_0x5da550];if(!_0x4c9138||_0x4c9138['length']===0x0){console['error'](_0x295e5e(0x1ec)+_0x5da550+_0x295e5e(0x22a)+_0x4dbda6+_0x295e5e(0x1f6)),enemiesSpawnedThisWave+=_0x5e34c4[_0x295e5e(0x1dc)][_0x295e5e(0x1f5)];return;}let _0x169bc8=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x4dbda6>=0x2&&_0x4dbda6<=0x3)_0x169bc8=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x4dbda6>=0x4&&(_0x169bc8=CS_LOOP_ATTACK_SPAWN_DELAY);let _0xddab84=0x0;_0x5e34c4['enemies'][_0x295e5e(0x1bc)]((_0x57f665,_0xa383f6)=>{const _0x2f9381=_0x295e5e;_0xddab84++;if(!_0x57f665||!_0x57f665[_0x2f9381(0x24b)]){console[_0x2f9381(0x216)](_0x2f9381(0x1a2)+_0x4dbda6+',\x20index\x20'+_0xa383f6+_0x2f9381(0x219)),enemiesSpawnedThisWave++;return;}const _0x422dd5=_0xa383f6*_0x169bc8,_0x200798=setTimeout(()=>{const _0x1851d8=_0x2f9381,_0x2e05b2=enemySpawnTimeouts[_0x1851d8(0x241)](_0x200798);if(_0x2e05b2>-0x1)enemySpawnTimeouts[_0x1851d8(0x1e2)](_0x2e05b2,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||playerLives<=0x0){enemiesSpawnedThisWave++;return;}try{let _0x45c9ea=_0x57f665['type'],_0x11fa3b=_0x45c9ea===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0xfecc10,_0x470cb1;if(_0x45c9ea===ENEMY1_TYPE)_0xfecc10=ENEMY1_WIDTH,_0x470cb1=ENEMY1_HEIGHT;else _0x45c9ea===ENEMY3_TYPE?(_0xfecc10=BOSS_WIDTH,_0x470cb1=BOSS_HEIGHT):(_0xfecc10=ENEMY_WIDTH,_0x470cb1=ENEMY_HEIGHT);let _0x57c4b1=0x0,_0x4aa1b4=0x0;if(_0x4c9138[0x0]?.['p0'])_0x57c4b1=_0x4c9138[0x0]['p0']['x'],_0x4aa1b4=_0x4c9138[0x0]['p0']['y'];else throw new Error(_0x1851d8(0x1b5)+_0x5da550);(_0x4dbda6===0x0||_0x4dbda6===0x1)&&(_0x57c4b1+=_0x44df7e);const _0x196b2d=-_0xa383f6*PATH_T_OFFSET_PER_ENEMY,_0x313ab6={'x':_0x57c4b1,'y':_0x4aa1b4,'width':_0xfecc10,'height':_0x470cb1,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x1851d8(0x27a),'gridRow':-0x1,'gridCol':-0x1,'type':_0x45c9ea,'health':_0x11fa3b,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x5da550,'pathSegmentIndex':0x0,'pathT':_0x196b2d,'squadronId':_0x4dbda6,'id':_0x1851d8(0x274)+_0x4dbda6+'-'+_0xa383f6+'-'+Date['now']()+'-'+Math['random']()[_0x1851d8(0x25e)](0x24)[_0x1851d8(0x1ab)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x1851d8(0x27b),'hasCapturedShip':_0x45c9ea===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x45c9ea===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x173a40};enemies[_0x1851d8(0x20a)](_0x313ab6),enemiesSpawnedThisWave++;}catch(_0x1afc14){console['error'](_0x1851d8(0x214)+_0x4dbda6+_0x1851d8(0x25f)+_0xa383f6+_0x1851d8(0x248)+_0x5da550+'):',_0x1afc14),enemiesSpawnedThisWave++;}},_0x422dd5);enemySpawnTimeouts[_0x2f9381(0x20a)](_0x200798),_0x2ead4b++;});}catch(_0x5653e2){console[_0x295e5e(0x216)](_0x295e5e(0x220)+_0x4dbda6+':',_0x5653e2),enemiesSpawnedThisWave+=_0x5e34c4[_0x295e5e(0x1dc)]['length'];}else _0x5e34c4?.[_0x295e5e(0x1dc)]?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x5e34c4['enemies'][_0x295e5e(0x1f5)]);},_0x5cf74d);enemySpawnTimeouts[_0x58b2c1(0x20a)](_0x216e1e);});}else console[_0x117bc7(0x249)](_0x117bc7(0x202)),isWaveTransitioning=!![],setTimeout(()=>{const _0x2438df=_0x117bc7;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x2438df(0x213)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x3a5d8b,_0x7fc5e1,_0x2ac641){const _0x5a7a3e=_0x3e36;if(!_0x3a5d8b||isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x35e6dc=Math['round'](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0xb24e98=0x0;_0xb24e98<_0x35e6dc;_0xb24e98++){const _0x50f305=_0x2ac641+_0xb24e98*ENTRANCE_FIRE_BURST_DELAY_MS,_0x7e2f15=setTimeout(()=>{const _0x516f3a=_0x3e36;try{const _0x36bebc=enemySpawnTimeouts[_0x516f3a(0x241)](_0x7e2f15);_0x36bebc>-0x1&&enemySpawnTimeouts[_0x516f3a(0x1e2)](_0x36bebc,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x1bb8b5=enemies[_0x516f3a(0x22f)](_0xf7ea5c=>_0xf7ea5c&&_0xf7ea5c['id']===_0x3a5d8b);_0x1bb8b5&&_0x1bb8b5[_0x516f3a(0x27f)]===_0x7fc5e1&&(createBulletSimple(_0x1bb8b5)&&(_0xb24e98===0x0&&playSound(enemyShootSound),_0x1bb8b5[_0x516f3a(0x1e1)]=Date[_0x516f3a(0x1f9)]()));}catch(_0x193c82){console[_0x516f3a(0x216)](_0x516f3a(0x196)+(_0xb24e98+0x1)+'/'+_0x35e6dc+_0x516f3a(0x1bb)+_0x3a5d8b+':',_0x193c82);}},_0x50f305);enemySpawnTimeouts[_0x5a7a3e(0x20a)](_0x7e2f15);}}function fireFixedEnemyBurst(_0x468de7,_0x2bfc74,_0xed7539,_0x13851e){const _0x58aa4a=_0x3e36;if(!_0x468de7||isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured||_0x13851e<=0x0)return;for(let _0x2fb2f9=0x0;_0x2fb2f9<_0x13851e;_0x2fb2f9++){const _0x31c564=_0xed7539+_0x2fb2f9*ENTRANCE_FIRE_BURST_DELAY_MS,_0x5af7af=setTimeout(()=>{const _0x4f886d=_0x3e36;try{const _0x1ddb37=enemySpawnTimeouts[_0x4f886d(0x241)](_0x5af7af);_0x1ddb37>-0x1&&enemySpawnTimeouts[_0x4f886d(0x1e2)](_0x1ddb37,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x859a90=enemies[_0x4f886d(0x22f)](_0x3a6478=>_0x3a6478&&_0x3a6478['id']===_0x468de7);_0x859a90&&((_0x2bfc74===null||_0x859a90[_0x4f886d(0x27f)]===_0x2bfc74)&&(createBulletSimple(_0x859a90)&&(_0x2fb2f9===0x0&&playSound(enemyShootSound),_0x859a90['lastFiredTime']=Date[_0x4f886d(0x1f9)]())));}catch(_0x487bab){console[_0x4f886d(0x216)]('Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x2fb2f9+0x1)+'/'+_0x13851e+_0x4f886d(0x1bb)+_0x468de7+':',_0x487bab);}},_0x31c564);enemySpawnTimeouts[_0x58aa4a(0x20a)](_0x5af7af);}}function startFullGridWave(){const _0x315825=_0x3e36;if(!currentWaveDefinition||currentWaveDefinition[_0x315825(0x1f5)]===0x0||!isFullGridWave){console[_0x315825(0x216)](_0x315825(0x237)),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(entranceSound),enemySpawnTimeouts[_0x315825(0x1bc)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x5c058e=0x0;currentWaveDefinition['forEach']((_0x27f0ac,_0x3a2287)=>{const _0x341074=_0x315825;let _0x5deb27=0x0;_0x27f0ac&&_0x27f0ac['enemies']&&Array['isArray'](_0x27f0ac['enemies'])?(_0x5deb27=_0x27f0ac[_0x341074(0x1dc)][_0x341074(0x1f5)],_0x27f0ac[_0x341074(0x1dc)][_0x341074(0x1bc)]((_0x336a06,_0xb755d)=>{const _0x45c8d4=_0x341074;try{if(!_0x336a06||!_0x336a06[_0x45c8d4(0x24b)]||typeof _0x336a06[_0x45c8d4(0x184)]==='undefined'||typeof _0x336a06[_0x45c8d4(0x1f0)]===_0x45c8d4(0x24a)){console[_0x45c8d4(0x216)]('Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20'+_0x3a2287+_0x45c8d4(0x287)+_0xb755d+'.\x20Skipping.');return;}let _0x463751=_0x336a06[_0x45c8d4(0x24b)],_0x19de5a=_0x463751===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x26d519,_0x40c0a1;if(_0x463751===ENEMY1_TYPE)_0x26d519=ENEMY1_WIDTH,_0x40c0a1=ENEMY1_HEIGHT;else _0x463751===ENEMY3_TYPE?(_0x26d519=BOSS_WIDTH,_0x40c0a1=BOSS_HEIGHT):(_0x26d519=ENEMY_WIDTH,_0x40c0a1=ENEMY_HEIGHT);let _0x4bccaf,_0x13d24e;try{const {x:_0x222913,y:_0x7b9e6d}=getCurrentGridSlotPosition(_0x336a06[_0x45c8d4(0x184)],_0x336a06['gridCol'],_0x26d519);_0x4bccaf=_0x222913,_0x13d24e=_0x7b9e6d;}catch(_0x538985){console[_0x45c8d4(0x216)](_0x45c8d4(0x268)+_0x336a06['type']+_0x45c8d4(0x251)+_0x336a06[_0x45c8d4(0x184)]+','+_0x336a06['gridCol']+']',_0x538985),_0x4bccaf=gameCanvas?.['width']/0x2||0xc8,_0x13d24e=ENEMY_TOP_MARGIN+_0x336a06[_0x45c8d4(0x184)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0xb393cb={'x':_0x4bccaf,'y':_0x13d24e,'width':_0x26d519,'height':_0x40c0a1,'targetGridX':_0x4bccaf,'targetGridY':_0x13d24e,'speed':0x0,'state':_0x45c8d4(0x1a3),'gridRow':_0x336a06[_0x45c8d4(0x184)],'gridCol':_0x336a06[_0x45c8d4(0x1f0)],'type':_0x463751,'health':_0x19de5a,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x3a2287,'squadronEnemyIndex':_0xb755d,'id':_0x45c8d4(0x1fa)+_0x3a2287+'-'+_0xb755d+'-'+Date['now']()+'-'+Math['random']()['toString'](0x24)['substring'](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x45c8d4(0x27b),'hasCapturedShip':_0x463751===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x463751===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x45c8d4(0x20a)](_0xb393cb),_0x5c058e++;}catch(_0x408977){console[_0x45c8d4(0x216)](_0x45c8d4(0x21c)+_0x3a2287+_0x45c8d4(0x25f)+_0xb755d+'):',_0x408977);}})):console[_0x341074(0x249)](_0x341074(0x269)+_0x3a2287+_0x341074(0x21d)),squadronCompletionStatus[_0x3a2287]={'completed':_0x5deb27,'total':_0x5deb27};}),totalEnemiesScheduledForWave=_0x5c058e,enemiesSpawnedThisWave=_0x5c058e,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&playSound(gridBackgroundSound,!![]),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date['now'](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x315825(0x1f9)](),firstEnemyLanded=!![];}function scheduleEntranceFlightWave(){const _0x5bdb9e=_0x3e36;if(isFullGridWave||isChallengingStage){console[_0x5bdb9e(0x249)]('[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20'+level+_0x5bdb9e(0x231)+isFullGridWave+_0x5bdb9e(0x24d)+isChallengingStage+_0x5bdb9e(0x1d6)),isEntrancePhaseActive=![];return;}if(!currentWaveDefinition||currentWaveDefinition[_0x5bdb9e(0x1f5)]===0x0){console[_0x5bdb9e(0x249)](_0x5bdb9e(0x22e)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}const _0x25d6d8=normalWaveEntrancePaths;if(Object[_0x5bdb9e(0x1ef)](_0x25d6d8)['length']===0x0){console['error']('CRITICAL:\x20Failed\x20to\x20define\x20Normal\x20Wave\x20entrance\x20paths!'),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,currentWaveDefinition[_0x5bdb9e(0x1bc)](_0x235e16=>totalEnemiesScheduledForWave+=_0x235e16[_0x5bdb9e(0x1dc)][_0x5bdb9e(0x1f5)]),enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={},isEntrancePhaseActive=!![],currentWaveDefinition[_0x5bdb9e(0x1bc)]((_0xfd9575,_0x4f407c)=>{const _0x15425f=_0x5bdb9e;squadronCompletionStatus[_0x4f407c]={'completed':0x0,'total':_0xfd9575[_0x15425f(0x1dc)]?.[_0x15425f(0x1f5)]||0x0,'hasFiredPostLanding':![]};const _0x20580f=_0x4f407c*NORMAL_WAVE_SQUADRON_INTERVAL;squadronEntranceFiringStatus[_0x4f407c]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0xfd9575,_0x4f407c,_0x20580f);});}function checkAndScheduleNextSquadron(_0x140a56){}function resetJustReturnedFlags(_0x1c0643){const _0x1d7ce6=_0x3e36;enemies[_0x1d7ce6(0x1bc)](_0x3cf44b=>{const _0x132d19=_0x1d7ce6;let _0x2827e5=![];if(_0x1c0643 instanceof Set)_0x2827e5=_0x1c0643[_0x132d19(0x25c)](_0x3cf44b['id']);else typeof _0x1c0643==='string'&&(_0x2827e5=_0x3cf44b['id']===_0x1c0643);_0x3cf44b&&_0x3cf44b[_0x132d19(0x27f)]===_0x132d19(0x1a3)&&_0x3cf44b['justReturned']&&!_0x2827e5&&(_0x3cf44b[_0x132d19(0x1db)]=![]);});}function generateAttackPath(_0x5b5a91){const _0x3bfb05=_0x3e36;try{if(!_0x5b5a91||!gameCanvas)return[];const _0x4131b3=_0x5b5a91[_0x3bfb05(0x24b)]===ENEMY3_TYPE?BOSS_WIDTH:_0x5b5a91[_0x3bfb05(0x24b)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x311f61=_0x5b5a91[_0x3bfb05(0x24b)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x5b5a91['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x16a84d=_0x4131b3*0.5,_0x345a2f=gameCanvas[_0x3bfb05(0x227)],_0xe5c714=gameCanvas[_0x3bfb05(0x23d)];let _0x7739ba=[];const _0x221893={'x':_0x5b5a91['x'],'y':_0x5b5a91['y']},_0x4a6c93=Math[_0x3bfb05(0x26c)](_0xe5c714*0.06,_0x311f61*1.8),_0xf522a8=Math[_0x3bfb05(0x26c)](_0x345a2f*0.04,_0x4131b3*1.2),_0x565782=_0x5b5a91['x']+_0x4131b3/0x2<_0x345a2f/0x2?0x1:-0x1,_0x27960b={'x':_0x221893['x']-_0x565782*_0xf522a8*0.6,'y':_0x221893['y']-_0x4a6c93};_0x27960b['x']=Math['max'](_0x16a84d,Math[_0x3bfb05(0x26c)](_0x345a2f-_0x16a84d-_0x4131b3,_0x27960b['x'])),_0x27960b['y']=Math['max'](_0x16a84d,_0x27960b['y']);const _0x358966={'x':_0x221893['x']+_0x565782*_0xf522a8*0.1,'y':_0x221893['y']-_0x4a6c93*1.4},_0x5661cd={'x':_0x27960b['x']+_0x565782*_0xf522a8*0.3,'y':_0x221893['y']-_0x4a6c93*1.5},_0x5ba607={'p0':_0x221893,'p1':_0x358966,'p2':_0x5661cd,'p3':_0x27960b};_0x7739ba['push'](_0x5ba607);const _0x225b52=_0x27960b,_0x4ab1b2=_0xe5c714*0.45,_0x52e2cb=_0x345a2f*0.22,_0x119126=_0xe5c714*0.28,_0x427a71=0.5,_0x5184d0=0.6,_0x5264c8=_0xe5c714*0.85,_0x393932=Math['floor'](Math[_0x3bfb05(0x244)]()*0x3);let _0x53b345=[];if(_0x393932===0x0){const _0x159fa3=_0x4ab1b2+Math[_0x3bfb05(0x244)]()*_0xe5c714*0.1,_0x2cd7e7=_0x52e2cb+Math[_0x3bfb05(0x244)]()*_0x345a2f*0.08,_0x3e9ee3=_0x119126+Math[_0x3bfb05(0x244)]()*_0xe5c714*0.08,_0x1d3102=_0x225b52['x']+_0x565782*_0x2cd7e7*0.5,_0x9d43b=Math['min'](_0x5264c8,_0x225b52['y']+_0x159fa3),_0x525a00=_0x1d3102+_0x565782*_0x2cd7e7*0.5,_0x1f33ab=Math[_0x3bfb05(0x206)](_0x225b52['y']+0x14,_0x9d43b-_0x3e9ee3),_0xb12b4c=_0x525a00-_0x565782*_0x2cd7e7*0.9,_0x3b5d90=Math[_0x3bfb05(0x206)](_0x225b52['y']+0x28,_0x1f33ab+_0x3e9ee3*0.6),_0x4f3259=_0xb12b4c-_0x565782*_0x2cd7e7*0.3,_0x42dead=_0xe5c714+_0x311f61*0x2,_0x54df79=Math[_0x3bfb05(0x206)](_0x16a84d,Math[_0x3bfb05(0x26c)](_0x345a2f-_0x16a84d-_0x4131b3,_0x1d3102)),_0x465b5a=Math['max'](_0x16a84d,Math[_0x3bfb05(0x26c)](_0x345a2f-_0x16a84d-_0x4131b3,_0x525a00)),_0x596f1e=Math[_0x3bfb05(0x206)](_0x16a84d,Math[_0x3bfb05(0x26c)](_0x345a2f-_0x16a84d-_0x4131b3,_0xb12b4c)),_0x4d4e1b={'x':_0x225b52['x'],'y':_0x225b52['y']+_0x159fa3*_0x5184d0*0.5},_0x28de69={'x':_0x54df79-_0x565782*_0x2cd7e7*_0x427a71,'y':_0x9d43b},_0x1ec1d7={'x':_0x54df79,'y':_0x9d43b},_0x42fefd={'x':_0x54df79+_0x565782*_0x2cd7e7*_0x427a71,'y':_0x9d43b},_0x4cab2c={'x':_0x465b5a,'y':_0x1f33ab+_0x3e9ee3*_0x5184d0},_0x5ce4d7={'x':_0x465b5a,'y':_0x1f33ab},_0x44b17c={'x':_0x465b5a,'y':_0x1f33ab-_0x3e9ee3*_0x5184d0*0.5},_0x4f462f={'x':_0x596f1e+_0x565782*_0x2cd7e7*_0x427a71,'y':_0x3b5d90},_0x22e90e={'x':_0x596f1e,'y':_0x3b5d90},_0x10e0f5={'x':_0x22e90e['x'],'y':_0x22e90e['y']+_0xe5c714*0.1},_0x20dbc5={'x':_0x4f3259,'y':_0x42dead-_0xe5c714*0.2},_0x200624={'x':_0x4f3259,'y':_0x42dead};_0x53b345=[{'p0':_0x225b52,'p1':_0x4d4e1b,'p2':_0x28de69,'p3':_0x1ec1d7},{'p0':_0x1ec1d7,'p1':_0x42fefd,'p2':_0x4cab2c,'p3':_0x5ce4d7},{'p0':_0x5ce4d7,'p1':_0x44b17c,'p2':_0x4f462f,'p3':_0x22e90e},{'p0':_0x22e90e,'p1':_0x10e0f5,'p2':_0x20dbc5,'p3':_0x200624}];}else{if(_0x393932===0x1){const _0x471b17=_0x4ab1b2*0.8+Math['random']()*_0xe5c714*0.1,_0x50ce48=_0x52e2cb*1.2+Math['random']()*_0x345a2f*0.1,_0x231da8=_0x119126*0.7+Math[_0x3bfb05(0x244)]()*_0xe5c714*0.1,_0x1ec410=_0x225b52['x']+_0x565782*_0x50ce48*0.4,_0x2c4e19=Math[_0x3bfb05(0x26c)](_0x5264c8-_0x231da8*0.5,_0x225b52['y']+_0x471b17*0.6),_0x1399fc=_0x1ec410+_0x565782*_0x50ce48*0.6,_0x5e8450=Math['min'](_0x5264c8,_0x2c4e19+_0x231da8),_0xa69fcc=_0x1399fc-_0x565782*_0x50ce48*0.5,_0x9a903f=_0xe5c714+_0x311f61*0x2,_0x296242=Math['max'](_0x16a84d,Math[_0x3bfb05(0x26c)](_0x345a2f-_0x16a84d-_0x4131b3,_0x1ec410)),_0x574398=Math['max'](_0x16a84d,Math[_0x3bfb05(0x26c)](_0x345a2f-_0x16a84d-_0x4131b3,_0x1399fc)),_0x17f15f={'x':_0x225b52['x']-_0x565782*_0x50ce48*0.1,'y':_0x225b52['y']+_0x471b17*0.3},_0x1d17eb={'x':_0x296242-_0x565782*_0x50ce48*_0x427a71*0.8,'y':_0x2c4e19+_0x231da8*_0x5184d0*0.4},_0x3cf1d0={'x':_0x296242,'y':_0x2c4e19},_0x3e4077={'x':_0x296242+_0x565782*_0x50ce48*_0x427a71*0.8,'y':_0x2c4e19-_0x231da8*_0x5184d0*0.4},_0x387c8d={'x':_0x574398+_0x565782*_0x50ce48*_0x427a71*0.6,'y':_0x5e8450+_0x231da8*_0x5184d0*0.5},_0x21eb33={'x':_0x574398,'y':_0x5e8450},_0xb09b20={'x':_0x574398-_0x565782*_0x50ce48*0.2,'y':_0x5e8450+_0xe5c714*0.1},_0x4c7391={'x':_0xa69fcc,'y':_0x9a903f-_0xe5c714*0.3},_0x163328={'x':_0xa69fcc,'y':_0x9a903f};_0x53b345=[{'p0':_0x225b52,'p1':_0x17f15f,'p2':_0x1d17eb,'p3':_0x3cf1d0},{'p0':_0x3cf1d0,'p1':_0x3e4077,'p2':_0x387c8d,'p3':_0x21eb33},{'p0':_0x21eb33,'p1':_0xb09b20,'p2':_0x4c7391,'p3':_0x163328}];}else{const _0x46340f=_0x4ab1b2*0.6+Math[_0x3bfb05(0x244)]()*_0xe5c714*0.05,_0x56867e=_0x52e2cb*0.7+Math['random']()*_0x345a2f*0.05,_0x47c745=_0x119126*0.6+Math[_0x3bfb05(0x244)]()*_0xe5c714*0.05,_0x1eb262=_0x47c745*1.5,_0x5a1ac7=_0x225b52['x']+_0x565782*_0x56867e*0.5,_0xfed5f2=Math[_0x3bfb05(0x26c)](_0x5264c8-_0x1eb262,_0x225b52['y']+_0x46340f),_0x4504b1=_0x5a1ac7+_0x565782*_0x56867e*0.5,_0x33d91e=_0xfed5f2+_0x47c745,_0x298ce6=_0x4504b1-_0x565782*_0x56867e*0.8,_0xfcfbc1=Math[_0x3bfb05(0x26c)](_0x5264c8,_0x33d91e+_0x1eb262*0.7),_0x5b9c1a=_0x298ce6+_0x565782*_0x56867e*0.4,_0x39b841=_0xfcfbc1+_0x47c745*0.8,_0x3ea12f=_0x5b9c1a,_0x433790=_0xe5c714+_0x311f61*0x2,_0x366dbd=Math[_0x3bfb05(0x206)](_0x16a84d,Math[_0x3bfb05(0x26c)](_0x345a2f-_0x16a84d-_0x4131b3,_0x5a1ac7)),_0x5e4119=Math['max'](_0x16a84d,Math[_0x3bfb05(0x26c)](_0x345a2f-_0x16a84d-_0x4131b3,_0x4504b1)),_0x53f4f7=Math[_0x3bfb05(0x206)](_0x16a84d,Math[_0x3bfb05(0x26c)](_0x345a2f-_0x16a84d-_0x4131b3,_0x298ce6)),_0x1c72d3=Math[_0x3bfb05(0x206)](_0x16a84d,Math[_0x3bfb05(0x26c)](_0x345a2f-_0x16a84d-_0x4131b3,_0x5b9c1a)),_0x340883={'x':_0x225b52['x'],'y':_0x225b52['y']+_0x46340f*0.5},_0x2dfd9d={'x':_0x366dbd-_0x565782*_0x56867e*_0x427a71,'y':_0xfed5f2+_0x47c745*_0x5184d0*0.3},_0x4b4241={'x':_0x366dbd,'y':_0xfed5f2},_0x3d5569={'x':_0x366dbd+_0x565782*_0x56867e*_0x427a71,'y':_0xfed5f2-_0x47c745*_0x5184d0*0.3},_0x5c168b={'x':_0x5e4119+_0x565782*_0x56867e*_0x427a71,'y':_0x33d91e+_0x47c745*_0x5184d0*0.5},_0xaf5741={'x':_0x5e4119,'y':_0x33d91e},_0x330e82={'x':_0x5e4119-_0x565782*_0x56867e*_0x427a71,'y':_0x33d91e-_0x47c745*_0x5184d0*0.5},_0x5ba597={'x':_0x53f4f7-_0x565782*_0x56867e*_0x427a71,'y':_0xfcfbc1+_0x47c745*_0x5184d0*0.4},_0x4b284e={'x':_0x53f4f7,'y':_0xfcfbc1},_0x326765={'x':_0x53f4f7+_0x565782*_0x56867e*_0x427a71,'y':_0xfcfbc1-_0x47c745*_0x5184d0*0.4},_0x2a591f={'x':_0x1c72d3+_0x565782*_0x56867e*_0x427a71,'y':_0x39b841+_0x47c745*_0x5184d0*0.6},_0x5d437f={'x':_0x1c72d3,'y':_0x39b841},_0x4ee49b={'x':_0x1c72d3-_0x565782*_0x56867e*0.1,'y':_0x39b841+_0xe5c714*0.05},_0x44c05a={'x':_0x3ea12f,'y':_0x433790-_0xe5c714*0.2},_0x3b2c6d={'x':_0x3ea12f,'y':_0x433790};_0x53b345=[{'p0':_0x225b52,'p1':_0x340883,'p2':_0x2dfd9d,'p3':_0x4b4241},{'p0':_0x4b4241,'p1':_0x3d5569,'p2':_0x5c168b,'p3':_0xaf5741},{'p0':_0xaf5741,'p1':_0x330e82,'p2':_0x5ba597,'p3':_0x4b284e},{'p0':_0x4b284e,'p1':_0x326765,'p2':_0x2a591f,'p3':_0x5d437f},{'p0':_0x5d437f,'p1':_0x4ee49b,'p2':_0x44c05a,'p3':_0x3b2c6d}];}}return _0x7739ba['push'](..._0x53b345),_0x7739ba;}catch(_0x2194dc){return console['error'](_0x3bfb05(0x226)+_0x5b5a91?.['id']+':',_0x2194dc),[];}}function handleEnemyHit(_0x57d82b){const _0x32dd10=_0x3e36;if(!_0x57d82b)return{'destroyed':![],'pointsAwarded':0x0};const _0x16721a=Date[_0x32dd10(0x1f9)]();let _0x10e4e3=0x0,_0x21b394=![],_0x4b4a38=_0x57d82b[_0x32dd10(0x189)],_0x204789=null;const _0x22ab71=_0x57d82b[_0x32dd10(0x24b)]===ENEMY3_TYPE?BOSS_WIDTH:_0x57d82b[_0x32dd10(0x24b)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x38ffd9=_0x57d82b[_0x32dd10(0x24b)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x57d82b['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0xbcb41e=_0x57d82b[_0x32dd10(0x24b)]===ENEMY3_TYPE&&_0x57d82b[_0x32dd10(0x1ff)],_0x23de30=_0x57d82b['type']===ENEMY3_TYPE&&_0x57d82b[_0x32dd10(0x1a0)],_0x2ff3f2=_0x57d82b['x']+_0x22ab71/0x2,_0x4c64bb=_0x57d82b['y']+_0x38ffd9*0.2;createHitSparks(_0x2ff3f2,_0x4c64bb),_0x57d82b[_0x32dd10(0x1d3)]--;_0x57d82b[_0x32dd10(0x24b)]===ENEMY3_TYPE&&(_0x57d82b[_0x32dd10(0x189)]=_0x57d82b['health']<ENEMY3_MAX_HITS);if(_0x57d82b[_0x32dd10(0x1d3)]<=0x0){_0x21b394=!![];if(_0xbcb41e&&_0x23de30){if(_0x57d82b[_0x32dd10(0x1a0)]){const _0x455579=_0x57d82b[_0x32dd10(0x1a0)]['width'],_0x448c47=_0x57d82b[_0x32dd10(0x1a0)][_0x32dd10(0x23d)],_0xd30755=_0x57d82b['x']+(_0x22ab71-_0x455579)/0x2+CAPTURED_SHIP_OFFSET_X,_0x26f710=_0x57d82b['y']+CAPTURED_SHIP_OFFSET_Y,_0x5119be=fallingShips[_0x32dd10(0x205)](_0x3329ca=>Math[_0x32dd10(0x22c)](_0x3329ca['x']-_0xd30755)<0x1&&Math[_0x32dd10(0x22c)](_0x3329ca['y']-_0x26f710)<0x1);!_0x5119be&&fallingShips[_0x32dd10(0x20a)]({'x':_0xd30755,'y':_0x26f710,'width':_0x455579,'height':_0x448c47,'creationTime':_0x16721a,'tintProgress':0x1,'rotation':0x0});}else console['error'](_0x32dd10(0x1d4));_0x57d82b[_0x32dd10(0x1ff)]=![],_0x57d82b[_0x32dd10(0x1a0)]=null;}else _0xbcb41e&&!_0x23de30&&(console[_0x32dd10(0x216)](_0x32dd10(0x1ae)+_0x57d82b['id']+'\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.'),_0x57d82b[_0x32dd10(0x1ff)]=![],_0x57d82b[_0x32dd10(0x1a0)]=null);if(isChallengingStage){let _0x281d47=0x64;const _0xb26477=csLastHitTime;csLastHitTime=_0x16721a,csLastChainHitPosition={'x':_0x57d82b['x'],'y':_0x57d82b['y']},csCurrentChainHits>0x0&&_0x16721a-_0xb26477<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x281d47*=0x2),_0x10e4e3=_0x281d47,csCurrentChainScore+=_0x10e4e3,scoreEarnedThisCS+=_0x10e4e3,challengingStageEnemiesHit++,_0x204789=explosionSound;}else{if(_0x57d82b[_0x32dd10(0x27f)]===_0x32dd10(0x1a3))_0x10e4e3=_0x57d82b[_0x32dd10(0x24b)]===ENEMY1_TYPE?0x32:_0x57d82b[_0x32dd10(0x24b)]===ENEMY2_TYPE?0x50:0x0,_0x57d82b['type']===ENEMY3_TYPE&&(_0x10e4e3=0x96),_0x204789=explosionSound;else{_0x10e4e3=_0x57d82b[_0x32dd10(0x24b)]===ENEMY1_TYPE?0x64:_0x57d82b[_0x32dd10(0x24b)]===ENEMY2_TYPE?0xa0:0x0;if(_0x57d82b['type']===ENEMY3_TYPE){if(_0xbcb41e){const _0x38984b=[0x3e8,0x5dc,0x7d0,0xbb8];_0x10e4e3=_0x38984b[Math['floor'](Math['random']()*_0x38984b['length'])],_0x204789=bossHit2Sound;}else _0x4b4a38?(_0x10e4e3=0x190,_0x204789=bossHit2Sound):(_0x10e4e3=0x0,_0x204789=explosionSound);}else _0x204789=explosionSound;if(_0x21b394&&_0x10e4e3>0x0){const _0x90d49d=normalWaveLastHitTime;normalWaveLastHitTime=_0x16721a,normalWaveLastChainHitPosition={'x':_0x57d82b['x'],'y':_0x57d82b['y']};normalWaveLastChainHitPosition&&_0x16721a-_0x90d49d<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x8ea64b=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x32cea9=Math[_0x32dd10(0x26c)](_0x8ea64b[_0x32dd10(0x1f5)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x3e1a2b=_0x8ea64b[_0x32cea9];_0x10e4e3+=_0x3e1a2b,normalWaveCurrentChainScore+=_0x3e1a2b;}}}}if(_0x10e4e3>0x0){const _0x1d0afd=score;score+=_0x10e4e3;if(!isManualControl||currentPlayer===0x1||!isTwoPlayerMode){player1Score=score;if(_0x21b394)player1EnemiesHit++;}else{player2Score=score;if(_0x21b394)player2EnemiesHit++;}const _0x6dd8a5=score>=highScore&&_0x1d0afd<highScore;highScore=Math['max'](highScore,score);let _0x2749af=![],_0x200f65=null;if(!isManualControl)_0x2749af=player1TriggeredHighScoreSound,_0x200f65=()=>{player1TriggeredHighScoreSound=!![];};else isTwoPlayerMode?currentPlayer===0x1?(_0x2749af=player1TriggeredHighScoreSound,_0x200f65=()=>{player1TriggeredHighScoreSound=!![];}):(_0x2749af=player2TriggeredHighScoreSound,_0x200f65=()=>{player2TriggeredHighScoreSound=!![];}):(_0x2749af=player1TriggeredHighScoreSound,_0x200f65=()=>{player1TriggeredHighScoreSound=!![];});if(_0x6dd8a5&&!_0x2749af){if(_0x200f65)_0x200f65();playSound(hiScoreSound);}checkAndAwardExtraLife();const _0x22b4a7=_0x57d82b['state']===_0x32dd10(0x1a3)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x32dd10(0x20a)]({'text':_0x10e4e3[_0x32dd10(0x25e)](),'x':_0x57d82b['x']+_0x22ab71/0x2,'y':_0x57d82b['y'],'color':_0x22b4a7,'creationTime':_0x16721a,'displayStartTime':_0x16721a+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x57d82b['x']+_0x22ab71/0x2,_0x57d82b['y']+_0x38ffd9/0x2);_0x57d82b['id']===capturingBossId&&stopSound(captureSound);if(_0x57d82b[_0x32dd10(0x27f)]===_0x32dd10(0x208)||_0x57d82b[_0x32dd10(0x27f)]===_0x32dd10(0x1fc)||_0x57d82b[_0x32dd10(0x27f)]===_0x32dd10(0x228)||_0x57d82b[_0x32dd10(0x27f)]===_0x32dd10(0x27a)||_0x57d82b[_0x32dd10(0x27f)]===_0x32dd10(0x1b0)||_0x57d82b[_0x32dd10(0x27f)]==='showing_capture_message'){if(_0x57d82b[_0x32dd10(0x24b)]===ENEMY3_TYPE)stopSound(bossGalagaDiveSound);else stopSound(butterflyDiveSound);}enemies[_0x32dd10(0x1f5)]===0x1&&enemies[0x0]['id']===_0x57d82b['id']&&isGridSoundPlaying&&stopSound(gridBackgroundSound);}else _0x21b394=![],_0x57d82b[_0x32dd10(0x24b)]===ENEMY3_TYPE?(_0x204789=bossHit1Sound,_0x10e4e3=0x0):_0x10e4e3=0x0;return _0x204789&&playSound(_0x204789),{'destroyed':_0x21b394,'pointsAwarded':_0x10e4e3};}function createHitSparks(_0x5062f7,_0x516d64){const _0x23260c=_0x3e36;if(!gameCtx)return;const _0x951e7b=Date[_0x23260c(0x1f9)]();for(let _0x4278a2=0x0;_0x4278a2<HIT_SPARK_COUNT;_0x4278a2++){const _0x5bf41e=Math['random']()*Math['PI']*0x2,_0x523f88=HIT_SPARK_SPEED*(0.7+Math['random']()*0.6),_0x3b880b=HIT_SPARK_LIFETIME*(0.8+Math[_0x23260c(0x244)]()*0.4);hitSparks[_0x23260c(0x20a)]({'x':_0x5062f7,'y':_0x516d64,'vx':Math[_0x23260c(0x1d9)](_0x5bf41e)*_0x523f88,'vy':Math[_0x23260c(0x1d1)](_0x5bf41e)*_0x523f88,'creationTime':_0x951e7b,'lifetime':_0x3b880b,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x41e36c=_0x3e36,_0x373a89=Date['now']();for(let _0x2c9557=hitSparks[_0x41e36c(0x1f5)]-0x1;_0x2c9557>=0x0;_0x2c9557--){const _0x2d3d6e=hitSparks[_0x2c9557],_0x294793=_0x373a89-_0x2d3d6e['creationTime'];_0x294793>=_0x2d3d6e['lifetime']?hitSparks['splice'](_0x2c9557,0x1):(_0x2d3d6e['vy']+=HIT_SPARK_GRAVITY,_0x2d3d6e['x']+=_0x2d3d6e['vx'],_0x2d3d6e['y']+=_0x2d3d6e['vy'],_0x2d3d6e[_0x41e36c(0x23b)]=Math[_0x41e36c(0x206)](0x0,0x1-_0x294793/_0x2d3d6e['lifetime']));}}function moveEntities(){const _0xeea232=_0x3e36;if(isPaused)return;try{if(ship&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isWaitingForRespawn){let _0x5da3b2=ship['width'];isDualShipActive&&(_0x5da3b2+=DUAL_SHIP_OFFSET_X);let _0x2181e8=ship['x'];if(isManualControl){let _0x3ef1ad=![],_0x43fcba=![];currentPlayer===0x1||!isTwoPlayerMode?(_0x3ef1ad=leftPressed,_0x43fcba=rightPressed):(_0x3ef1ad=p2LeftPressed,_0x43fcba=p2RightPressed);if(_0x3ef1ad&&ship['x']>0x0)_0x2181e8=ship['x']-ship[_0xeea232(0x223)];else _0x43fcba&&ship['x']<gameCanvas[_0xeea232(0x227)]-_0x5da3b2&&(_0x2181e8=ship['x']+ship[_0xeea232(0x223)]);ship['x']=Math[_0xeea232(0x206)](0x0,Math[_0xeea232(0x26c)](gameCanvas[_0xeea232(0x227)]-_0x5da3b2,_0x2181e8)),ship[_0xeea232(0x23e)]=ship['x'];}else{if(typeof smoothedShipX!=='undefined'){const _0x59fd7c=0.1,_0x411a25=1.2;smoothedShipX+=(ship[_0xeea232(0x23e)]-smoothedShipX)*AI_SMOOTHING_FACTOR_MOVE;const _0x419768=smoothedShipX-ship['x'],_0x1f52e7=ship[_0xeea232(0x223)]*_0x411a25;let _0x11e357=0x0;if(Math[_0xeea232(0x22c)](_0x419768)>_0x59fd7c){const _0x626888=isChallengingStage?CS_AI_MOVE_FRACTION:NORMAL_MOVE_FRACTION;_0x11e357=_0x419768*_0x626888,_0x11e357=Math[_0xeea232(0x206)](-_0x1f52e7,Math[_0xeea232(0x26c)](_0x1f52e7,_0x11e357)),Math[_0xeea232(0x22c)](_0x11e357)>Math[_0xeea232(0x22c)](_0x419768)&&(_0x11e357=_0x419768),ship['x']+=_0x11e357,ship['x']=Math['max'](0x0,Math['min'](gameCanvas[_0xeea232(0x227)]-_0x5da3b2,ship['x']));}}else ship['x']=Math[_0xeea232(0x206)](0x0,Math[_0xeea232(0x26c)](gameCanvas[_0xeea232(0x227)]-_0x5da3b2,ship[_0xeea232(0x23e)]));}}const _0x889538=Date['now']();for(let _0x13904e=bullets[_0xeea232(0x1f5)]-0x1;_0x13904e>=0x0;_0x13904e--){const _0x1e151b=bullets[_0x13904e];_0x1e151b?(_0x1e151b['y']-=_0x1e151b[_0xeea232(0x223)],_0x1e151b['y']+PLAYER_BULLET_HEIGHT<0x0&&bullets[_0xeea232(0x1e2)](_0x13904e,0x1)):bullets['splice'](_0x13904e,0x1);}for(let _0x19970f=enemyBullets[_0xeea232(0x1f5)]-0x1;_0x19970f>=0x0;_0x19970f--){const _0x2b4c97=enemyBullets[_0x19970f];if(!_0x2b4c97){enemyBullets[_0xeea232(0x1e2)](_0x19970f,0x1);continue;}_0x2b4c97['x']+=_0x2b4c97['vx'],_0x2b4c97['y']+=_0x2b4c97['vy'],(_0x2b4c97['y']>gameCanvas[_0xeea232(0x23d)]||_0x2b4c97['y']<-ENEMY_BULLET_HEIGHT||_0x2b4c97['x']<-ENEMY_BULLET_WIDTH||_0x2b4c97['x']>gameCanvas[_0xeea232(0x227)])&&enemyBullets[_0xeea232(0x1e2)](_0x19970f,0x1);}for(let _0x28bd3c=fallingShips[_0xeea232(0x1f5)]-0x1;_0x28bd3c>=0x0;_0x28bd3c--){const _0x206439=fallingShips[_0x28bd3c];if(!_0x206439){fallingShips['splice'](_0x28bd3c,0x1);continue;}_0x206439['y']+=FALLING_SHIP_SPEED;const _0x2e8b2a=_0x889538-_0x206439['creationTime'];typeof _0x206439[_0xeea232(0x1b9)]===_0xeea232(0x21b)?_0x206439[_0xeea232(0x1b9)]=Math[_0xeea232(0x206)](0x0,0x1-_0x2e8b2a/FALLING_SHIP_FADE_DURATION_MS):_0x206439[_0xeea232(0x1b9)]=0x0;if(typeof _0x206439[_0xeea232(0x1c8)]===_0xeea232(0x21b)){const _0x2913fa=Math[_0xeea232(0x26c)](0x1,_0x2e8b2a/FALLING_SHIP_ROTATION_DURATION_MS);_0x206439[_0xeea232(0x1c8)]=_0x2913fa*0x2*(0x2*Math['PI']);}else _0x206439['rotation']=0x0;if(ship&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x206439['y']+_0x206439[_0xeea232(0x23d)]>=gameCanvas['height']-AUTO_DOCK_THRESHOLD){fallingShips[_0xeea232(0x1e2)](_0x28bd3c,0x1),isDualShipActive=!![];currentPlayer===0x1?player1IsDualShipActive=!![]:player2IsDualShipActive=!![];playSound(dualShipSound);continue;}_0x206439['y']>gameCanvas['height']+_0x206439[_0xeea232(0x23d)]&&fallingShips['splice'](_0x28bd3c,0x1);}let _0x23a265=0x0;const _0x45aa65=enemies[_0xeea232(0x205)](_0x115000=>_0x115000?.[_0xeea232(0x27f)]===_0xeea232(0x1a3)),_0x4525e3=!isChallengingStage&&!isWaveTransitioning&&_0x45aa65&&!isShowingPlayerGameOverMessage;if(_0x4525e3){!isGridSoundPlaying&&playSound(gridBackgroundSound,!![]);const _0x5cfbde=enemies[_0xeea232(0x1f3)](_0x57d659=>_0x57d659?.['state']==='in_grid');if(_0x5cfbde[_0xeea232(0x1f5)]>0x0){let _0x50c7eb=gameCanvas['width'],_0x218566=0x0;_0x5cfbde[_0xeea232(0x1bc)](_0x4d4385=>{_0x4d4385&&(_0x50c7eb=Math['min'](_0x50c7eb,_0x4d4385['x']),_0x218566=Math['max'](_0x218566,_0x4d4385['x']+_0x4d4385['width']));});const _0x56e3c7=gameCanvas[_0xeea232(0x227)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x3e8e61=gameCanvas['width']*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x218566>=_0x3e8e61)gridMoveDirection=-0x1;else gridMoveDirection===-0x1&&_0x50c7eb<=_0x56e3c7&&(gridMoveDirection=0x1);const _0x1842e4=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x23a265=_0x1842e4*gridMoveDirection,currentGridOffsetX+=_0x23a265,enemies[_0xeea232(0x1bc)](_0x1578c9=>{const _0x517e1b=_0xeea232;if(_0x1578c9&&(_0x1578c9['state']===_0x517e1b(0x1b0)||_0x1578c9[_0x517e1b(0x27f)]==='in_grid'||_0x1578c9['state']==='moving_to_grid'))try{const _0x599063=_0x1578c9[_0x517e1b(0x24b)]===ENEMY3_TYPE?BOSS_WIDTH:_0x1578c9[_0x517e1b(0x24b)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x49d0f5,y:_0x41bcca}=getCurrentGridSlotPosition(_0x1578c9[_0x517e1b(0x184)],_0x1578c9[_0x517e1b(0x1f0)],_0x599063);_0x1578c9['targetGridX']=_0x49d0f5,_0x1578c9[_0x517e1b(0x1e0)]=_0x41bcca;}catch(_0x1c254c){console[_0x517e1b(0x216)](_0x517e1b(0x266)+_0x1578c9?.['id']+'\x20(state:\x20'+_0x1578c9?.[_0x517e1b(0x27f)]+')\x20during\x20shift:',_0x1c254c);}});}}else isGridSoundPlaying&&stopSound(gridBackgroundSound),_0x23a265=0x0;for(let _0x3c4926=enemies[_0xeea232(0x1f5)]-0x1;_0x3c4926>=0x0;_0x3c4926--){let _0xc82ba5=enemies[_0x3c4926];if(!_0xc82ba5)continue;const _0x2cc545=_0xc82ba5['id'];if(_0xc82ba5[_0xeea232(0x262)]&&_0xc82ba5[_0xeea232(0x27f)]!==_0xeea232(0x1eb)){clearTimeout(_0xc82ba5[_0xeea232(0x262)]);const _0x24ef05=enemySpawnTimeouts[_0xeea232(0x241)](_0xc82ba5[_0xeea232(0x262)]);if(_0x24ef05>-0x1)enemySpawnTimeouts[_0xeea232(0x1e2)](_0x24ef05,0x1);_0xc82ba5['capturePrepareTimeout']=null;}const _0x3c4288=_0xc82ba5[_0xeea232(0x24b)]===ENEMY3_TYPE?BOSS_WIDTH:_0xc82ba5[_0xeea232(0x24b)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0xca2787=_0xc82ba5['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0xc82ba5[_0xeea232(0x24b)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0xc82ba5[_0xeea232(0x27f)]){case _0xeea232(0x27a):{break;}case _0xeea232(0x1fc):{break;}case _0xeea232(0x1cb):{break;}case _0xeea232(0x1a3):{break;}case _0xeea232(0x20b):{break;}case _0xeea232(0x1eb):{break;}case _0xeea232(0x228):{break;}case _0xeea232(0x22d):{break;}case _0xeea232(0x25b):{break;}case _0xeea232(0x208):{break;}case'returning':{break;}}if(_0xc82ba5&&!isShowingPlayerGameOverMessage&&!(isShipCaptured&&_0xc82ba5['state']==='capturing')){const _0x411f85={'x':0x0,'y':0x0,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT},_0x3928bc={'x':_0xc82ba5['x'],'y':_0xc82ba5['y'],'width':_0x3c4288,'height':_0xca2787};for(let _0x4cdce7=bullets[_0xeea232(0x1f5)]-0x1;_0x4cdce7>=0x0;_0x4cdce7--){const _0x166495=bullets[_0x4cdce7];if(!_0x166495)continue;_0x411f85['x']=_0x166495['x'],_0x411f85['y']=_0x166495['y'];if(checkCollision(_0x411f85,_0x3928bc)){const _0x1a594e=handleEnemyHit(_0xc82ba5);bullets[_0xeea232(0x1e2)](_0x4cdce7,0x1);if(_0x1a594e['destroyed']){enemies['splice'](_0x3c4926,0x1),_0xc82ba5=null;break;}}}}if(_0xc82ba5&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!isShowingPlayerGameOverMessage&&!isInvincible){const _0xd70bde=[_0xeea232(0x208),'following_entrance_path',_0xeea232(0x27a),_0xeea232(0x228)];if(_0xd70bde[_0xeea232(0x1ac)](_0xc82ba5[_0xeea232(0x27f)])){const _0x540911={'x':_0xc82ba5['x'],'y':_0xc82ba5['y'],'width':_0x3c4288,'height':_0xca2787},_0x454e93={'x':ship['x'],'y':ship['y'],'width':ship[_0xeea232(0x227)],'height':ship[_0xeea232(0x23d)]},_0x49a669=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0xeea232(0x227)],'height':ship['height']}:null;let _0x5aad3c=![],_0xea8754=![];if(checkCollision(_0x540911,_0x454e93))_0x5aad3c=!![],_0xea8754=![];else _0x49a669&&checkCollision(_0x540911,_0x49a669)&&(_0x5aad3c=!![],_0xea8754=!![]);if(_0x5aad3c){createExplosion(_0xc82ba5['x']+_0x3c4288/0x2,_0xc82ba5['y']+_0xca2787/0x2),playSound(lostLifeSound),enemies['splice'](_0x3c4926,0x1),_0xc82ba5=null;if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0xea8754?createExplosion(_0x49a669['x']+ship['width']/0x2,_0x49a669['y']+ship[_0xeea232(0x23d)]/0x2):createExplosion(_0x454e93['x']+ship['width']/0x2,_0x454e93['y']+ship['height']/0x2),isInvincible=!![],invincibilityEndTime=_0x889538+INVINCIBILITY_DURATION_MS;}else{playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x889538+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0xeea232(0x23d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0xeea232(0x216)](_0xeea232(0x221));if(playerLives<=0x0){const _0x18545e=currentPlayer;if(_0x18545e===0x1)player1Lives=0x0;if(_0x18545e===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x889538,playerWhoIsGameOver=_0x18545e;const _0x278b81=_0x18545e===0x1?0x2:0x1,_0xcfd788=_0x278b81===0x1?player1Lives:player2Lives;_0xcfd788>0x0?nextActionAfterPlayerGameOver=_0xeea232(0x1f7):nextActionAfterPlayerGameOver='show_results',bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}continue;}}}}if(ship&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isWaitingForRespawn&&!isInvincible){const _0x235a59={'x':ship['x'],'y':ship['y'],'width':ship[_0xeea232(0x227)],'height':ship[_0xeea232(0x23d)]},_0x3b1b67=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0xeea232(0x227)],'height':ship[_0xeea232(0x23d)]}:null;for(let _0x4c4fef=enemyBullets[_0xeea232(0x1f5)]-0x1;_0x4c4fef>=0x0;_0x4c4fef--){const _0x1933fb=enemyBullets[_0x4c4fef];if(!_0x1933fb){enemyBullets['splice'](_0x4c4fef,0x1);continue;}const _0x3b55cd={'x':_0x1933fb['x'],'y':_0x1933fb['y'],'width':_0x1933fb[_0xeea232(0x227)],'height':_0x1933fb[_0xeea232(0x23d)]};let _0x3d9116=checkCollision(_0x235a59,_0x3b55cd),_0x59957d=0x0;!_0x3d9116&&_0x3b1b67&&checkCollision(_0x3b1b67,_0x3b55cd)&&(_0x3d9116=!![],_0x59957d=0x1);if(_0x3d9116){enemyBullets[_0xeea232(0x1e2)](_0x4c4fef,0x1);if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x59957d===0x1?createExplosion(_0x3b1b67['x']+ship[_0xeea232(0x227)]/0x2,_0x3b1b67['y']+ship[_0xeea232(0x23d)]/0x2):createExplosion(_0x235a59['x']+ship[_0xeea232(0x227)]/0x2,_0x235a59['y']+ship[_0xeea232(0x23d)]/0x2),playSound(lostLifeSound),isInvincible=!![],invincibilityEndTime=_0x889538+INVINCIBILITY_DURATION_MS;}else{playerLives--,playSound(lostLifeSound),createExplosion(ship['x']+ship['width']/0x2,ship['y']+ship[_0xeea232(0x23d)]/0x2),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x889538+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0xeea232(0x23d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0xeea232(0x216)](_0xeea232(0x221));if(playerLives<=0x0){const _0x1cb0c5=currentPlayer;if(_0x1cb0c5===0x1)player1Lives=0x0;if(_0x1cb0c5===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x889538,playerWhoIsGameOver=_0x1cb0c5;const _0x9bf5fe=_0x1cb0c5===0x1?0x2:0x1,_0x1f632f=_0x9bf5fe===0x1?player1Lives:player2Lives;_0x1f632f>0x0?nextActionAfterPlayerGameOver=_0xeea232(0x1f7):nextActionAfterPlayerGameOver='show_results',bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}if(ship&&!isShipCaptured&&!isWaitingForRespawn&&!isDualShipActive&&fallingShips['length']>0x0&&!isInvincible){const _0x494c0e={'x':ship['x'],'y':ship['y'],'width':ship[_0xeea232(0x227)],'height':ship[_0xeea232(0x23d)]};for(let _0x1c5845=fallingShips['length']-0x1;_0x1c5845>=0x0;_0x1c5845--){const _0xd5098e=fallingShips[_0x1c5845];if(!_0xd5098e)continue;const _0x55b1f5={'x':_0xd5098e['x'],'y':_0xd5098e['y'],'width':_0xd5098e[_0xeea232(0x227)],'height':_0xd5098e[_0xeea232(0x23d)]};if(checkCollision(_0x494c0e,_0x55b1f5)){fallingShips[_0xeea232(0x1e2)](_0x1c5845,0x1),isDualShipActive=!![];if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];playSound(dualShipSound);break;}}}updateHitSparks();}catch(_0x520e25){console[_0xeea232(0x216)](_0xeea232(0x19b),_0x520e25,_0x520e25['stack']),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0xeea232(0x213))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0xeea232(0x270));}}function switchPlayerTurn(){if(!isTwoPlayerMode)return![];stopSound(hiScoreSound),highScore=Math['max'](highScore,score);currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive):(player2Score=score,player2IsDualShipActive=isDualShipActive);const _0x43feac=currentPlayer===0x1?0x2:0x1,_0x13373c=_0x43feac===0x1?player1Lives:player2Lives;if(_0x13373c<=0x0){const _0x28a5cc=currentPlayer===0x1?player1Lives:player2Lives;return _0x28a5cc<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x43feac,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],captureBeamActive=![],capturingBossId=null,isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x45c2d4=_0x3e36;if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0xefbd04=enemies[_0x45c2d4(0x1f3)](_0x249055=>_0x249055&&_0x249055[_0x45c2d4(0x27f)]===_0x45c2d4(0x1a3));if(_0xefbd04[_0x45c2d4(0x1f5)]===0x0)return;const _0x305795=Date['now'](),_0x200940=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x305795-lastGridFireCheckTime<_0x200940)return;lastGridFireCheckTime=_0x305795;const _0x1603f6=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x5cbad0=Math[_0x45c2d4(0x197)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x3c58c3=0x0;_0xefbd04['sort'](()=>Math[_0x45c2d4(0x244)]()-0.5);for(const _0xf120ce of _0xefbd04){if(_0x3c58c3>=_0x5cbad0)break;if(_0xf120ce[_0x45c2d4(0x24b)]===ENEMY2_TYPE||_0xf120ce[_0x45c2d4(0x24b)]===ENEMY3_TYPE){if(_0xf120ce[_0x45c2d4(0x24b)]===ENEMY3_TYPE&&_0xf120ce[_0x45c2d4(0x1ff)])continue;Math[_0x45c2d4(0x244)]()<_0x1603f6&&(createBulletSimple(_0xf120ce)&&(playSound(enemyShootSound),_0xf120ce[_0x45c2d4(0x1e1)]=_0x305795,_0x3c58c3++));}}}function _0x3e36(_0x34d3ef,_0x58c7db){const _0x3606bc=_0x3606();return _0x3e36=function(_0x3e36b7,_0x122128){_0x3e36b7=_0x3e36b7-0x184;let _0x455a9e=_0x3606bc[_0x3e36b7];return _0x455a9e;},_0x3e36(_0x34d3ef,_0x58c7db);}function firePlayerBullet(_0x2280d3=![]){const _0x433c99=_0x3e36;let _0x159e5c=_0x2280d3?0x1:currentPlayer,_0x32fcfa=selectedFiringMode===_0x433c99(0x277),_0x415d32=!_0x2280d3&&isTwoPlayerMode&&currentPlayer===0x2;if(isPaused||!isInGameState||playerLives<=0x0||gameOverSequenceStartTime>0x0||!ship||isShipCaptured||isWaitingForRespawn||isShowingIntro||showReadyMessage||isCsCompletionDelayActive||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showCSClearMessage||isShowingPlayerGameOverMessage)return![];try{const _0x3b326c=ship['y'];let _0x5460b5=0x0;if(isDualShipActive){const _0x346b23=ship['x']+ship[_0x433c99(0x227)]/0x2,_0x4d2561=ship['x']+DUAL_SHIP_OFFSET_X+ship['width']/0x2,_0x36309a=_0x346b23-PLAYER_BULLET_WIDTH/0x2,_0x5e3b0a=_0x4d2561-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x36309a,'y':_0x3b326c,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),bullets[_0x433c99(0x20a)]({'x':_0x5e3b0a,'y':_0x3b326c,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),_0x5460b5=0x2;}else{const _0x40397c=ship['x']+ship[_0x433c99(0x227)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x433c99(0x20a)]({'x':_0x40397c,'y':_0x3b326c,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),_0x5460b5=0x1;}playSound(playerShootSound);if(_0x159e5c===0x1||_0x2280d3)player1ShotsFired+=_0x5460b5;else _0x159e5c===0x2&&(player2ShotsFired+=_0x5460b5);return!![];}catch(_0x5ca2de){return console[_0x433c99(0x216)](_0x433c99(0x1c9),_0x5ca2de),![];}}function handlePlayerInput(){const _0x3498ee=_0x3e36;try{const _0x3af812=Date['now'](),_0x757b99=selectedFiringMode===_0x3498ee(0x277);if(isPaused||!isManualControl||playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isWaitingForRespawn||isShipCaptured||isShowingCaptureMessage){leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],isTouchFiringActive=![];return;}let _0x16cf8f=![],_0x2bb838=![],_0x228fb6=![],_0x379279=![],_0x331bff=![],_0x21cff5=![],_0x47281e=![],_0x4e5a6a=![];if(connectedGamepadIndex!==null){const _0x4e0db7=navigator['getGamepads']();if(_0x4e0db7?.[connectedGamepadIndex]){const _0x283a4b=_0x4e0db7[connectedGamepadIndex],_0x207bef=processSingleController(_0x283a4b,previousGameButtonStates);_0x16cf8f=_0x207bef['left'],_0x2bb838=_0x207bef['right'],_0x228fb6=_0x207bef[_0x3498ee(0x255)],_0x4e5a6a=_0x207bef['pause'],_0x47281e=_0x207bef[_0x3498ee(0x18c)],previousGameButtonStates=_0x207bef['newButtonStates'];}else{if(previousGameButtonStates[_0x3498ee(0x1f5)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates[_0x3498ee(0x1f5)]>0x0)previousGameButtonStates=[];}if(isTwoPlayerMode&&connectedGamepadIndexP2!==null){const _0x4be502=navigator[_0x3498ee(0x267)]();if(_0x4be502?.[connectedGamepadIndexP2]){const _0xae1a28=_0x4be502[connectedGamepadIndexP2],_0x1d51c3=processSingleController(_0xae1a28,previousGameButtonStatesP2);_0x379279=_0x1d51c3['left'],_0x331bff=_0x1d51c3['right'],_0x21cff5=_0x1d51c3[_0x3498ee(0x255)],previousGameButtonStatesP2=_0x1d51c3[_0x3498ee(0x1e9)];}else{if(previousGameButtonStatesP2[_0x3498ee(0x1f5)]>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2[_0x3498ee(0x1f5)]>0x0)previousGameButtonStatesP2=[];}if(_0x4e5a6a){togglePause();return;}if(_0x47281e){stopGameAndShowMenu();return;}let _0x1a4e52=keyboardP1LeftDown,_0x3c0c6d=keyboardP1RightDown,_0x3c18a3=keyboardP1ShootDown,_0x5cd2cd=keyboardP2LeftDown,_0x143ebc=keyboardP2RightDown,_0x15d4c2=keyboardP2ShootDown,_0x5023c8=_0x3c18a3||_0x228fb6,_0x5b0014=![];const _0x37d54e=isTwoPlayerMode&&connectedGamepadIndexP2===null&&connectedGamepadIndex!==null;isTwoPlayerMode&&(_0x5b0014=_0x15d4c2||_0x21cff5||_0x37d54e&&_0x228fb6);let _0x5e433e=![];isTouchFiringActive&&!_0x757b99&&(_0x3af812-playerLastShotTime>=SHOOT_COOLDOWN&&(firePlayerBullet(![])&&(playerLastShotTime=_0x3af812,_0x5e433e=!![],p1JustFiredSingle=![],p2JustFiredSingle=![],touchJustFiredSingle=![])));leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];let _0x5068c5=![],_0x1e96a1=![];if(currentPlayer===0x1||!isTwoPlayerMode){leftPressed=_0x1a4e52||_0x16cf8f,rightPressed=_0x3c0c6d||_0x2bb838;if(!_0x5e433e){const _0xc37ca1=_0x5023c8&&!p1FireInputWasDown,_0xb6ae38=!_0x5023c8&&p1FireInputWasDown;_0x757b99?(_0xc37ca1&&!p1JustFiredSingle&&(_0x5068c5=!![]),_0xb6ae38&&(p1JustFiredSingle=![])):_0x5023c8&&_0x3af812-playerLastShotTime>=SHOOT_COOLDOWN&&(_0x5068c5=!![]);}shootPressed=_0x5068c5;}else{if(isTwoPlayerMode&&currentPlayer===0x2){p2LeftPressed=_0x5cd2cd||_0x379279||_0x37d54e&&_0x16cf8f,p2RightPressed=_0x143ebc||_0x331bff||_0x37d54e&&_0x2bb838;if(!_0x5e433e){const _0x5a7b70=_0x5b0014&&!p2FireInputWasDown,_0x146437=!_0x5b0014&&p2FireInputWasDown,_0x5b07f9=_0x37d54e&&(!_0x228fb6&&(previousGameButtonStates[PS5_BUTTON_CROSS]??![]));_0x757b99?(_0x5a7b70&&!p2JustFiredSingle&&(_0x1e96a1=!![]),(_0x146437||_0x5b07f9)&&(p2JustFiredSingle=![])):_0x5b0014&&_0x3af812-playerLastShotTime>=SHOOT_COOLDOWN&&(_0x1e96a1=!![]);}p2ShootPressed=_0x1e96a1;}}if(!_0x5e433e&&(_0x5068c5||_0x1e96a1)){if(firePlayerBullet(![])){playerLastShotTime=_0x3af812,_0x5e433e=!![];if(_0x757b99){if(_0x5068c5)p1JustFiredSingle=!![];if(_0x1e96a1)p2JustFiredSingle=!![];}}}p1FireInputWasDown=_0x5023c8,p2FireInputWasDown=_0x5b0014;}catch(_0x1f5508){console['error'](_0x3498ee(0x1ba),_0x1f5508),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isTouchFiringActive=![];}}function aiControl(){const _0x80a495=_0x3e36;try{if(isPaused||isManualControl||playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isShipCaptured||isWaitingForRespawn){if(ship)ship[_0x80a495(0x23e)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=undefined;return;}smoothedShipX===undefined&&(smoothedShipX=ship['x']);const _0x2cf378=Date[_0x80a495(0x1f9)](),_0x2b1c47=gameCanvas[_0x80a495(0x227)],_0x1882e4=gameCanvas['height'];let _0x29125b=ship[_0x80a495(0x227)];isDualShipActive&&(_0x29125b=DUAL_SHIP_OFFSET_X+ship[_0x80a495(0x227)]);const _0x1dca91=ship['x']+_0x29125b/0x2,_0x37f3ca=ship['y'],_0x2a4dbd=_0x2b1c47/0x2;let _0x1fe59d;isDualShipActive?_0x1fe59d=_0x2a4dbd-_0x29125b/0x2:_0x1fe59d=_0x2a4dbd-ship[_0x80a495(0x227)]/0x2;const _0x7c0fd7=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive;let _0x51bb9b=smoothedShipX,_0xede6c2=![],_0x354686=![],_0x32a481=smoothedShipX,_0xe6191b=null,_0x2a5c82=![];aiNeedsStabilization&&!_0x7c0fd7&&(aiStabilizationEndTime=_0x2cf378+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],smoothedShipX=ship['x']);if(_0x2cf378<aiStabilizationEndTime&&!_0x7c0fd7)_0x51bb9b=_0x1fe59d;else{_0x354686=![],_0x32a481=smoothedShipX;if(!isInvincible){let _0x5e1237=[];const _0x3a755d=isChallengingStage?FINAL_DODGE_LOOKAHEAD*0.8:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD:FINAL_DODGE_LOOKAHEAD,_0x201cd6=isChallengingStage?FINAL_DODGE_BUFFER_BASE*0.8:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER:FINAL_DODGE_BUFFER_BASE,_0x25858e={'x':ship['x']-_0x201cd6/0x2,'y':ship['y']-_0x3a755d,'width':_0x29125b+_0x201cd6,'height':_0x3a755d+ship[_0x80a495(0x23d)]};for(const _0x274576 of enemyBullets){if(_0x274576&&_0x274576['y']+_0x274576[_0x80a495(0x23d)]>0x0&&_0x274576['y']<_0x1882e4){const _0x4ba3a7={'x':_0x274576['x'],'y':_0x274576['y'],'width':_0x274576[_0x80a495(0x227)],'height':_0x274576[_0x80a495(0x23d)]};checkCollision(_0x25858e,_0x4ba3a7)&&_0x5e1237[_0x80a495(0x20a)](_0x274576);}}if(_0x5e1237[_0x80a495(0x1f5)]>0x0){_0x354686=!![];let _0x57a5b7=_0x2b1c47,_0x1e0e39=0x0,_0x322c95=Infinity;_0x5e1237[_0x80a495(0x1bc)](_0x45fd07=>{const _0x22afe7=_0x80a495;_0x57a5b7=Math['min'](_0x57a5b7,_0x45fd07['x']),_0x1e0e39=Math[_0x22afe7(0x206)](_0x1e0e39,_0x45fd07['x']+_0x45fd07[_0x22afe7(0x227)]),_0x322c95=Math[_0x22afe7(0x26c)](_0x322c95,_0x37f3ca-(_0x45fd07['y']+_0x45fd07[_0x22afe7(0x23d)]));});const _0x185ef5=(_0x57a5b7+_0x1e0e39)/0x2,_0x22509c=_0x1dca91<_0x185ef5?-0x1:0x1,_0x2987a2=0x1-Math[_0x80a495(0x26c)](0x1,Math[_0x80a495(0x206)](0x0,_0x322c95)/_0x3a755d),_0x1d18bb=isChallengingStage?1.6:isEntrancePhaseActive?2.2:1.8,_0x30f89a=isChallengingStage?1.3:isEntrancePhaseActive?1.8:1.5,_0x7fbed8=Math[_0x80a495(0x206)](0x0,_0x5e1237[_0x80a495(0x1f5)]-0x1)*_0x29125b*0.3,_0x42eda5=_0x29125b*(_0x1d18bb+_0x2987a2*_0x30f89a)+_0x7fbed8;_0x32a481=smoothedShipX+_0x22509c*_0x42eda5;}if(!_0x354686&&!isChallengingStage&&!isFullGridWave){let _0x55d9c0=![],_0x5207c7=Infinity;for(const _0x828bbb of enemies){if(_0x828bbb&&_0x828bbb['type']===ENEMY3_TYPE&&_0x828bbb[_0x80a495(0x27f)]==='diving_to_capture_position'&&_0x828bbb[_0x80a495(0x23e)]!=null){const _0x4a979e=AI_COLLISION_LOOKAHEAD*1.5,_0x4c4e9d=FINAL_DODGE_BUFFER_BASE*1.8,_0x4aa52c=0.2,_0x415b07=_0x828bbb['x']+(_0x828bbb[_0x80a495(0x23e)]-_0x828bbb['x'])*_0x4aa52c,_0x4151c8={'x':_0x415b07,'y':_0x828bbb['y'],'width':_0x828bbb[_0x80a495(0x227)],'height':_0x828bbb[_0x80a495(0x23d)]},_0x1208a4={'x':ship['x']-_0x4c4e9d/0x2,'y':ship['y']-_0x4a979e,'width':_0x29125b+_0x4c4e9d,'height':_0x4a979e+ship[_0x80a495(0x23d)]};if(checkCollision(_0x1208a4,_0x4151c8)){const _0x10e9f7=_0x37f3ca-(_0x828bbb['y']+_0x828bbb[_0x80a495(0x23d)]);if(_0x10e9f7<_0x5207c7){_0x5207c7=_0x10e9f7,_0x354686=!![],_0x55d9c0=!![];const _0x190eb0=_0x828bbb['targetX']+_0x828bbb['width']/0x2,_0x490f9f=_0x2b1c47/0x2,_0x9d1aa2=_0x190eb0<_0x490f9f?0x1:-0x1,_0x4a1541=0x1-Math[_0x80a495(0x26c)](0x1,Math[_0x80a495(0x206)](0x0,_0x10e9f7)/_0x4a979e),_0x1697ee=_0x29125b*(2.5+_0x4a1541*0x2);_0x32a481=smoothedShipX+_0x9d1aa2*_0x1697ee;}}}}}if(!_0x354686){const _0x2fb379=AI_COLLISION_LOOKAHEAD,_0x732ec0=NORMAL_WAVE_ATTACKING_DODGE_BUFFER_MULTIPLIER,_0x4b9aab=BEE_DODGE_BUFFER_HORIZONTAL_FACTOR;let _0x4e8fd0=Infinity;for(const _0x12bd63 of enemies){if(_0x12bd63&&_0x12bd63['state']==='attacking'&&_0x12bd63['y']+_0x12bd63['height']>0x0&&_0x12bd63['y']<_0x1882e4){let _0x11992f=FINAL_DODGE_BUFFER_BASE*_0x732ec0;_0x12bd63[_0x80a495(0x24b)]===ENEMY1_TYPE&&(_0x11992f*=_0x4b9aab);const _0x246dc1={'x':ship['x']-_0x11992f/0x2,'y':ship['y']-_0x2fb379,'width':_0x29125b+_0x11992f,'height':_0x2fb379+ship['height']},_0x49de8a={'x':_0x12bd63['x'],'y':_0x12bd63['y'],'width':_0x12bd63[_0x80a495(0x227)],'height':_0x12bd63[_0x80a495(0x23d)]};if(checkCollision(_0x246dc1,_0x49de8a)){const _0x5e2969=_0x37f3ca-(_0x12bd63['y']+_0x12bd63[_0x80a495(0x23d)]);if(_0x5e2969<_0x4e8fd0){_0x4e8fd0=_0x5e2969,_0x354686=!![];const _0x207dfa=_0x12bd63['x']+_0x12bd63[_0x80a495(0x227)]/0x2,_0x5b2035=_0x1dca91<_0x207dfa?-0x1:0x1,_0x21b575=0x1-Math[_0x80a495(0x26c)](0x1,Math[_0x80a495(0x206)](0x0,_0x5e2969)/_0x2fb379),_0x501270=_0x29125b*(0x2+_0x21b575*1.8);_0x32a481=smoothedShipX+_0x5b2035*_0x501270;}}}}}if(!_0x354686&&!isFullGridWave){const _0x44c8b4=AI_COLLISION_LOOKAHEAD;let _0x2d4be4=Infinity;for(const _0x48dee2 of enemies){const _0x5f0b7a=_0x48dee2&&(_0x48dee2[_0x80a495(0x27f)]===_0x80a495(0x1fc)||_0x48dee2[_0x80a495(0x27f)]===_0x80a495(0x1b0));if(_0x5f0b7a&&_0x48dee2['y']+_0x48dee2[_0x80a495(0x23d)]>0x0&&_0x48dee2['y']<_0x1882e4){let _0x22a851=FINAL_DODGE_BUFFER_BASE;_0x48dee2['type']===ENEMY1_TYPE&&(_0x22a851*=BEE_DODGE_BUFFER_HORIZONTAL_FACTOR);const _0x3d207b={'x':ship['x']-_0x22a851/0x2,'y':ship['y']-_0x44c8b4,'width':_0x29125b+_0x22a851,'height':_0x44c8b4+ship[_0x80a495(0x23d)]},_0x4ed3d4={'x':_0x48dee2['x'],'y':_0x48dee2['y'],'width':_0x48dee2[_0x80a495(0x227)],'height':_0x48dee2[_0x80a495(0x23d)]};if(checkCollision(_0x3d207b,_0x4ed3d4)){const _0x482e3e=_0x37f3ca-(_0x48dee2['y']+_0x48dee2[_0x80a495(0x23d)]);if(_0x482e3e<_0x2d4be4){_0x2d4be4=_0x482e3e,_0x354686=!![];const _0x413eee=_0x48dee2['x']+_0x48dee2[_0x80a495(0x227)]/0x2,_0x2328df=_0x1dca91<_0x413eee?-0x1:0x1,_0x344679=0x1-Math['min'](0x1,Math[_0x80a495(0x206)](0x0,_0x482e3e)/_0x44c8b4),_0x53c54d=_0x29125b*(0x2+_0x344679*1.8);_0x32a481=smoothedShipX+_0x2328df*_0x53c54d;}}}}}}if(_0x354686&&!isInvincible){const _0x28857b=Math[_0x80a495(0x206)](AI_ANTI_CORNER_BUFFER,Math[_0x80a495(0x26c)](_0x2b1c47-_0x29125b-AI_ANTI_CORNER_BUFFER,_0x32a481));_0x51bb9b=_0x28857b,_0xe6191b=null,_0xede6c2=![];}else{if(fallingShips[_0x80a495(0x1f5)]>0x0&&!isShipCaptured&&!isWaitingForRespawn){const _0x444b8f=fallingShips[0x0];if(_0x444b8f){const _0x359d28=_0x444b8f['x']+_0x444b8f[_0x80a495(0x227)]/0x2;_0x51bb9b=_0x359d28-_0x29125b/0x2,_0x51bb9b=Math[_0x80a495(0x206)](AI_EDGE_BUFFER,Math[_0x80a495(0x26c)](_0x2b1c47-_0x29125b-AI_EDGE_BUFFER,_0x51bb9b)),_0xe6191b=null;let _0xf7dd39=-Infinity,_0xc6f06=null;for(const _0x302b9e of enemies){if(_0x302b9e&&_0x302b9e['y']<_0x37f3ca){const _0x299879=_0x302b9e['x']+_0x302b9e[_0x80a495(0x227)]/0x2,_0x4d9fae=Math[_0x80a495(0x22c)](_0x299879-_0x1dca91),_0x4479f0=_0x37f3ca-(_0x302b9e['y']+_0x302b9e[_0x80a495(0x23d)]);if(_0x4d9fae<_0x29125b*1.5&&_0x4479f0>0x0){const _0x40ef1c=_0x1882e4-_0x302b9e['y']-_0x4d9fae*0x2-_0x4479f0;_0x40ef1c>_0xf7dd39&&(_0xf7dd39=_0x40ef1c,_0xc6f06=_0x302b9e);}}}if(_0xc6f06){let _0xd797f3=!![];const _0x28a94d={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x29125b+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship[_0x80a495(0x23d)]};for(const _0x32c828 of enemyBullets){if(_0x32c828&&_0x32c828['y']+_0x32c828['height']>0x0&&_0x32c828['y']<_0x1882e4){const _0x3509c9={'x':_0x32c828['x'],'y':_0x32c828['y'],'width':_0x32c828['width'],'height':_0x32c828[_0x80a495(0x23d)]};if(checkCollision(_0x28a94d,_0x3509c9)){_0xd797f3=![];break;}}}_0xd797f3&&!(_0xc6f06[_0x80a495(0x24b)]===ENEMY3_TYPE&&_0xc6f06[_0x80a495(0x27f)]===_0x80a495(0x1eb))&&(_0xede6c2=!![],_0xe6191b=_0xc6f06);}}}else{let _0xa72c41=![],_0x1960a6=null;if(!isFullGridWave&&!isManualControl&&captureBeamActive&&capturingBossId&&playerLives>0x1&&!isShipCaptured&&!isInvincible){_0x1960a6=enemies['find'](_0x37101d=>_0x37101d['id']===capturingBossId);if(_0x1960a6&&_0x1960a6[_0x80a495(0x27f)]===_0x80a495(0x22d)){_0xa72c41=!![];const _0x1503cb=_0x2cf378-_0x1960a6[_0x80a495(0x23a)];if(_0x1503cb>=AI_CAPTURE_WAIT_DURATION_MS){_0x2a5c82=!![];const _0x3a083a=_0x1960a6['x']+_0x1960a6[_0x80a495(0x227)]/0x2;_0x51bb9b=_0x3a083a-_0x29125b/0x2,_0xe6191b=null,_0xede6c2=![];}}}if(!_0x2a5c82){_0xe6191b=null;if(isEntrancePhaseActive&&!isChallengingStage&&!isFullGridWave){_0x51bb9b=_0x1fe59d;let _0x3a5cf3=-Infinity,_0x26de82=null;for(const _0x5c8996 of enemies){if(_0x5c8996&&(_0x5c8996[_0x80a495(0x27f)]===_0x80a495(0x1fc)||_0x5c8996[_0x80a495(0x27f)]===_0x80a495(0x1cb))&&_0x5c8996['y']<_0x37f3ca){const _0x3dd38b=_0x5c8996['x']+_0x5c8996['width']/0x2,_0x7ff336=_0x5c8996['y']+_0x5c8996['height']/0x2,_0x5c99e7=_0x3dd38b-_0x1dca91,_0x167a53=_0x37f3ca-_0x7ff336,_0x1c22d2=Math[_0x80a495(0x286)](_0x5c99e7*_0x5c99e7+_0x167a53*_0x167a53),_0x2e9da9=Math[_0x80a495(0x206)](0x0,_0x29125b*1.5-Math['abs'](_0x5c99e7)),_0x4dd6b8=(_0x1882e4-_0x5c8996['y'])*1.5+_0x2e9da9-_0x1c22d2*0.5;_0x4dd6b8>_0x3a5cf3&&(_0x3a5cf3=_0x4dd6b8,_0x26de82=_0x5c8996);}}if(_0x26de82){_0xe6191b=_0x26de82;const _0x9a709e=_0xe6191b['x']+_0xe6191b[_0x80a495(0x227)]/0x2,_0x557ea2=Math[_0x80a495(0x22c)](_0x1dca91-_0x9a709e),_0x2ad8c9=_0x29125b*ENTRANCE_SHOOT_ALIGNMENT_FACTOR;let _0x3ee961=!![];const _0xd159f={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x29125b+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship['height']};for(const _0x14201b of enemyBullets){if(_0x14201b&&_0x14201b['y']+_0x14201b[_0x80a495(0x23d)]>0x0&&_0x14201b['y']<_0x1882e4){const _0x1a5e6a={'x':_0x14201b['x'],'y':_0x14201b['y'],'width':_0x14201b[_0x80a495(0x227)],'height':_0x14201b[_0x80a495(0x23d)]};if(checkCollision(_0xd159f,_0x1a5e6a)){_0x3ee961=![];break;}}}_0x3ee961&&_0x557ea2<_0x2ad8c9&&((isDualShipActive||_0xe6191b[_0x80a495(0x24b)]!==ENEMY3_TYPE||captureAttemptMadeThisLevel||isShipCaptured)&&(_0xede6c2=!![]));}}else{if(isChallengingStage){let _0x4eb756=Infinity;_0xe6191b=null;for(const _0x8bdec1 of enemies){if(_0x8bdec1&&_0x8bdec1[_0x80a495(0x27f)]===_0x80a495(0x27a)&&_0x8bdec1['y']<_0x37f3ca){const _0x3748d6=_0x8bdec1['x']+_0x8bdec1[_0x80a495(0x227)]/0x2,_0x1aa307=Math['abs'](_0x3748d6-_0x1dca91),_0x3900dc=(0x1-Math[_0x80a495(0x26c)](0x1,_0x8bdec1['y']/_0x37f3ca))*0x2,_0x19d84f=_0x1aa307/_0x2b1c47*0.5,_0x4ed797=_0x3900dc+_0x19d84f;_0x4ed797<_0x4eb756&&(_0x4eb756=_0x4ed797,_0xe6191b=_0x8bdec1);}}let _0x2761e8=_0x1dca91;if(_0xe6191b){const _0x20ab45=_0xe6191b['x']+_0xe6191b[_0x80a495(0x227)]/0x2,_0x227499=_0xe6191b['y']+_0xe6191b['height']/0x2,_0x119825=_0x37f3ca-_0x227499;let _0x5435f1=_0x20ab45;const _0x4a6e8a=_0xe6191b['squadronId']===0x2||_0xe6191b[_0x80a495(0x215)]===0x3;if(!_0x4a6e8a&&_0x119825>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x348d5f=Math[_0x80a495(0x26c)](MAX_PREDICTION_TIME_CS,_0x119825/PLAYER_BULLET_SPEED),_0x411ea8=0.4,_0x38ad34=(_0xe6191b['velocityX']||0x0)*_0x348d5f;_0x5435f1=_0x20ab45+_0x38ad34*_0x411ea8,_0x5435f1=Math[_0x80a495(0x206)](_0xe6191b[_0x80a495(0x227)]/0x2,Math['min'](_0x2b1c47-_0xe6191b[_0x80a495(0x227)]/0x2,_0x5435f1));}_0x2761e8=_0x5435f1,_0x51bb9b=_0x2761e8-_0x29125b/0x2,_0x51bb9b=Math[_0x80a495(0x206)](AI_EDGE_BUFFER,Math[_0x80a495(0x26c)](_0x2b1c47-_0x29125b-AI_EDGE_BUFFER,_0x51bb9b));const _0x40fbfe=_0x29125b*1.5,_0x2971c2=Math['abs'](_0x1dca91-_0x2761e8);_0x2971c2<_0x40fbfe&&(_0xede6c2=!![]);}else{const _0x41b36d=Math[_0x80a495(0x1d1)](_0x2cf378/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE*0.5;_0x51bb9b=_0x1fe59d+_0x41b36d,_0x51bb9b=Math[_0x80a495(0x206)](AI_EDGE_BUFFER,Math[_0x80a495(0x26c)](_0x2b1c47-_0x29125b-AI_EDGE_BUFFER,_0x51bb9b));}}else{let _0x4a612c=-Infinity;_0xe6191b=null;const _0x524dc7=_0xa72c41&&!_0x2a5c82;for(const _0x2b655a of enemies){if(!_0x2b655a)continue;if(_0x524dc7&&_0x2b655a['id']===capturingBossId)continue;let _0x5cc1b0=![],_0x1d4945=0x0;switch(_0x2b655a['state']){case'in_grid':_0x5cc1b0=!![],_0x1d4945=_0x524dc7?0x4e20:0x4650;break;case'moving_to_grid':case'returning':_0x5cc1b0=!![],_0x1d4945=0x2328;break;case _0x80a495(0x20b):_0x5cc1b0=!![],_0x1d4945=0x1b58;break;case _0x80a495(0x208):_0x5cc1b0=!![],_0x1d4945=0x1770;break;case'preparing_capture':_0x5cc1b0=!![],_0x1d4945=0x61a8;break;}if(_0x5cc1b0){let _0xf26286=_0x1d4945,_0x16e745=_0x2b655a['isDamaged']&&_0x2b655a['type']===ENEMY3_TYPE?0x1388:0x0,_0x46b156=(_0x1882e4-_0x2b655a['y'])*0x2,_0x2568ca=Math[_0x80a495(0x206)](0x0,_0x29125b*0x1-Math[_0x80a495(0x22c)](_0x2b655a['x']+_0x2b655a[_0x80a495(0x227)]/0x2-_0x1dca91))*0x1;_0xf26286+=_0x46b156+_0x16e745+_0x2568ca,_0xf26286>_0x4a612c&&(_0x4a612c=_0xf26286,_0xe6191b=_0x2b655a);}}let _0x999686=_0x1fe59d+_0x29125b/0x2;if(_0xe6191b){const _0x5c5054=_0xe6191b['x']+_0xe6191b[_0x80a495(0x227)]/0x2,_0x4a38f3=_0xe6191b['y']+_0xe6191b[_0x80a495(0x23d)]/0x2,_0x39f669=_0x37f3ca-_0x4a38f3;let _0x467265=_0x5c5054;if(_0xe6191b[_0x80a495(0x27f)]!==_0x80a495(0x1a3)&&_0xe6191b[_0x80a495(0x27f)]!==_0x80a495(0x1eb)){if(_0x39f669>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x5f96a=Math[_0x80a495(0x26c)](MAX_PREDICTION_TIME,_0x39f669/PLAYER_BULLET_SPEED);let _0x129d2d=_0x5c5054+(_0xe6191b[_0x80a495(0x256)]||0x0)*_0x5f96a;_0x467265=Math['max'](_0xe6191b[_0x80a495(0x227)]/0x2,Math['min'](_0x2b1c47-_0xe6191b[_0x80a495(0x227)]/0x2,_0x129d2d));}}_0x999686=_0x467265,_0x51bb9b=_0x999686-_0x29125b/0x2;if(_0xe6191b['state']===_0x80a495(0x1a3)||_0xe6191b[_0x80a495(0x27f)]===_0x80a495(0x1eb))_0x51bb9b=Math['max'](AI_EDGE_BUFFER,Math[_0x80a495(0x26c)](_0x2b1c47-_0x29125b-AI_EDGE_BUFFER,_0x51bb9b));else{const _0x5b437e=_0x2b1c47*0.6/0x2,_0x3c6f37=_0x2a4dbd-_0x5b437e,_0x1d1865=_0x2a4dbd+_0x5b437e-_0x29125b;_0x51bb9b=Math[_0x80a495(0x206)](_0x3c6f37,Math[_0x80a495(0x26c)](_0x1d1865,_0x51bb9b)),_0x51bb9b=Math[_0x80a495(0x206)](AI_EDGE_BUFFER,Math[_0x80a495(0x26c)](_0x2b1c47-_0x29125b-AI_EDGE_BUFFER,_0x51bb9b));}let _0x48e79c=![],_0x480a69=Math[_0x80a495(0x22c)](_0x1dca91-_0x999686),_0x58ca3d=_0xe6191b[_0x80a495(0x27f)]===_0x80a495(0x1a3)||_0xe6191b['state']==='preparing_capture'?_0x29125b*GRID_SHOOT_ALIGNMENT_FACTOR:_0x29125b*FINAL_SHOOT_ALIGNMENT_THRESHOLD;const _0x4b16c8=ship['x']<AI_EDGE_BUFFER*AI_EDGE_SHOOT_BUFFER_FACTOR,_0xd3c87b=ship['x']>_0x2b1c47-_0x29125b-AI_EDGE_SHOOT_BUFFER_FACTOR,_0xa2c91=_0x999686>_0x2b1c47*AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR,_0x16774f=_0x999686<_0x2b1c47*(0x1-AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR);(_0x4b16c8&&_0xa2c91||_0xd3c87b&&_0x16774f)&&(_0x48e79c=!![]);if(!_0x48e79c&&_0x480a69<_0x58ca3d){let _0x3a1787=![];if(_0xe6191b['state']!==_0x80a495(0x1a3)&&_0xe6191b[_0x80a495(0x27f)]!==_0x80a495(0x1eb))for(const _0x4626d4 of enemies){if(!_0x4626d4||_0x4626d4===_0xe6191b)continue;if(_0x524dc7&&_0x4626d4['id']===capturingBossId)continue;if(_0x4626d4['y']<_0x37f3ca&&_0x4626d4['y']+_0x4626d4[_0x80a495(0x23d)]>_0xe6191b['y']){const _0x28e97c=_0x4626d4['x']-AI_SHOT_CLEARANCE_BUFFER,_0x32dd59=_0x4626d4['x']+_0x4626d4[_0x80a495(0x227)]+AI_SHOT_CLEARANCE_BUFFER;if(_0x999686>_0x28e97c&&_0x999686<_0x32dd59){_0x3a1787=!![];break;}}}!_0x3a1787&&((!_0x524dc7||_0xe6191b['id']!==capturingBossId)&&(_0xede6c2=!![]));}}else{const _0x38a509=Math[_0x80a495(0x1d1)](_0x2cf378/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE;_0x51bb9b=_0x1fe59d+_0x38a509,_0x51bb9b=Math['max'](AI_EDGE_BUFFER,Math['min'](_0x2b1c47-_0x29125b-AI_EDGE_BUFFER,_0x51bb9b));}}}}}}}ship[_0x80a495(0x23e)]=_0x51bb9b;if(_0xede6c2&&!_0x354686&&!_0x2a5c82){let _0x1a5450=!![];!isChallengingStage&&(_0x1a5450=_0x2cf378>=aiCanShootTime),_0x1a5450&&_0x2cf378-aiLastShotTime>=AI_SHOOT_COOLDOWN&&(firePlayerBullet(!![])&&(aiLastShotTime=_0x2cf378));}}catch(_0xcc1bf3){console[_0x80a495(0x216)]('Error\x20in\x20aiControl:',_0xcc1bf3,_0xcc1bf3[_0x80a495(0x1e8)]);if(ship)ship['targetX']=ship['x'];aiNeedsStabilization=!![],smoothedShipX=undefined;}}function findAndDetachEnemy(){const _0x16b93c=_0x3e36;try{if(!isFullGridWave&&isShipCaptured){const _0x5f54e3=enemies[_0x16b93c(0x22f)](_0x33cd5d=>_0x33cd5d&&_0x33cd5d['type']===ENEMY3_TYPE&&_0x33cd5d['hasCapturedShip']&&_0x33cd5d[_0x16b93c(0x27f)]===_0x16b93c(0x1a3));if(_0x5f54e3){console[_0x16b93c(0x230)](_0x16b93c(0x25a)+_0x5f54e3['id']+_0x16b93c(0x265)),_0x5f54e3['justReturned']=!![],_0x5f54e3[_0x16b93c(0x185)]=_0x16b93c(0x27b);const _0x3ee7b1=new Set([_0x5f54e3['id']]);return resetJustReturnedFlags(_0x3ee7b1),[_0x5f54e3];}}if(isEntrancePhaseActive)return null;let _0x5c3667=enemies[_0x16b93c(0x1f3)](_0x11fd5d=>_0x11fd5d&&_0x11fd5d[_0x16b93c(0x27f)]==='in_grid'&&!_0x11fd5d[_0x16b93c(0x1db)]);if(_0x5c3667['length']===0x0){_0x5c3667=enemies[_0x16b93c(0x1f3)](_0x8fff9d=>_0x8fff9d&&_0x8fff9d[_0x16b93c(0x27f)]===_0x16b93c(0x1a3));if(_0x5c3667[_0x16b93c(0x1f5)]===0x0)return null;}if(_0x5c3667[_0x16b93c(0x1f5)]===0x0)return null;_0x5c3667['sort']((_0x3fe201,_0x33f033)=>(_0x33f033['gridRow']||0x0)-(_0x3fe201[_0x16b93c(0x184)]||0x0));const _0x21c805=_0x5c3667[_0x16b93c(0x1f5)]<=0x3;let _0x369e13=[];const _0x4ca7ab=_0x16b93c(0x27b);gridJustCompleted&&(gridJustCompleted=![]);let _0xfddb8e=![];if(level>0x1&&!_0x21c805&&_0x5c3667['length']>=0x3){const _0x377b5b=_0x5c3667[_0x16b93c(0x1f3)](_0x2981c4=>_0x2981c4[_0x16b93c(0x24b)]===ENEMY3_TYPE&&!_0x2981c4[_0x16b93c(0x1ff)]);for(const _0x15d416 of _0x377b5b){const _0x2c49f5=_0x5c3667[_0x16b93c(0x22f)](_0x24b0d0=>_0x24b0d0['type']===ENEMY2_TYPE&&_0x24b0d0['gridRow']===_0x15d416[_0x16b93c(0x184)]&&_0x24b0d0[_0x16b93c(0x1f0)]===_0x15d416[_0x16b93c(0x1f0)]-0x1),_0x371b45=_0x5c3667[_0x16b93c(0x22f)](_0x5400a2=>_0x5400a2[_0x16b93c(0x24b)]===ENEMY2_TYPE&&_0x5400a2[_0x16b93c(0x184)]===_0x15d416[_0x16b93c(0x184)]&&_0x5400a2[_0x16b93c(0x1f0)]===_0x15d416[_0x16b93c(0x1f0)]+0x1);if(_0x2c49f5&&_0x371b45){_0x369e13=[_0x15d416,_0x2c49f5,_0x371b45],_0xfddb8e=!![];break;}}}if(!_0xfddb8e&&!_0x21c805){const _0x47d2ea=_0x5c3667[_0x16b93c(0x1f3)](_0x339cb0=>_0x339cb0[_0x16b93c(0x24b)]===ENEMY1_TYPE),_0x271283=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x47d2ea[_0x16b93c(0x1f5)]>=0x2&&Math[_0x16b93c(0x244)]()<_0x271283){const _0xd8ed53=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x5ad01e=_0x47d2ea[_0x16b93c(0x1f5)]>=0x3&&Math[_0x16b93c(0x244)]()<_0xd8ed53?0x3:0x2;let _0x2b62e2=![];_0x47d2ea[_0x16b93c(0x261)](()=>Math[_0x16b93c(0x244)]()-0.5);for(let _0x2ff53e=0x0;_0x2ff53e<_0x47d2ea[_0x16b93c(0x1f5)];_0x2ff53e++){const _0x496964=_0x47d2ea[_0x2ff53e];let _0x50eb16=[_0x496964];const _0x5e3555=_0x47d2ea[_0x16b93c(0x1f3)](_0x5152ef=>_0x5152ef['id']!==_0x496964['id']&&_0x5152ef[_0x16b93c(0x184)]===_0x496964[_0x16b93c(0x184)]);_0x5e3555[_0x16b93c(0x261)]((_0x407061,_0x1b2873)=>Math[_0x16b93c(0x22c)](_0x407061['gridCol']-_0x496964['gridCol'])-Math['abs'](_0x1b2873[_0x16b93c(0x1f0)]-_0x496964['gridCol']));for(let _0x5ed230=0x0;_0x5ed230<_0x5e3555[_0x16b93c(0x1f5)]&&_0x50eb16[_0x16b93c(0x1f5)]<_0x5ad01e;_0x5ed230++){_0x50eb16['push'](_0x5e3555[_0x5ed230]);}if(_0x50eb16[_0x16b93c(0x1f5)]===_0x5ad01e){_0x369e13=_0x50eb16,_0xfddb8e=!![],_0x2b62e2=!![];break;}}!_0x2b62e2&&_0x47d2ea[_0x16b93c(0x1f5)]>=_0x5ad01e&&(_0x369e13=_0x47d2ea[_0x16b93c(0x260)](0x0,_0x5ad01e),_0xfddb8e=!![]);}}if(!_0xfddb8e&&!_0x21c805){const _0x3ddc25=_0x5c3667[_0x16b93c(0x1f3)](_0x53af51=>_0x53af51[_0x16b93c(0x24b)]===ENEMY2_TYPE),_0x192a56=0.2;if(_0x3ddc25[_0x16b93c(0x1f5)]>=0x2&&Math[_0x16b93c(0x244)]()<_0x192a56){const _0x2f395a=0x2;let _0x17d0c6=![];_0x3ddc25[_0x16b93c(0x261)](()=>Math[_0x16b93c(0x244)]()-0.5);for(let _0x239ea3=0x0;_0x239ea3<_0x3ddc25[_0x16b93c(0x1f5)];_0x239ea3++){const _0xd0ea33=_0x3ddc25[_0x239ea3];let _0x2ee145=[_0xd0ea33];const _0x55d976=_0x3ddc25[_0x16b93c(0x1f3)](_0x881f99=>_0x881f99['id']!==_0xd0ea33['id']&&_0x881f99['gridRow']===_0xd0ea33['gridRow']);_0x55d976[_0x16b93c(0x261)]((_0x45e7b8,_0x24d6f9)=>Math[_0x16b93c(0x22c)](_0x45e7b8[_0x16b93c(0x1f0)]-_0xd0ea33['gridCol'])-Math['abs'](_0x24d6f9['gridCol']-_0xd0ea33[_0x16b93c(0x1f0)]));for(let _0x474397=0x0;_0x474397<_0x55d976[_0x16b93c(0x1f5)]&&_0x2ee145['length']<_0x2f395a;_0x474397++){_0x2ee145[_0x16b93c(0x20a)](_0x55d976[_0x474397]);}if(_0x2ee145[_0x16b93c(0x1f5)]===_0x2f395a){_0x369e13=_0x2ee145,_0xfddb8e=!![],_0x17d0c6=!![];break;}}!_0x17d0c6&&_0x3ddc25['length']>=_0x2f395a&&(_0x369e13=_0x3ddc25['slice'](0x0,_0x2f395a),_0xfddb8e=!![]);}}if(!_0xfddb8e&&_0x5c3667[_0x16b93c(0x1f5)]>0x0){const _0x351d1d=_0x5c3667[0x0];_0x369e13[_0x16b93c(0x20a)](_0x351d1d);if(_0x5c3667[_0x16b93c(0x1f5)]>0x1&&!_0x21c805&&Math[_0x16b93c(0x244)]()<0.2){const _0x3735db=_0x5c3667[_0x16b93c(0x22f)](_0x7f8722=>_0x7f8722['id']!==_0x351d1d['id']&&_0x7f8722['gridRow']===_0x351d1d[_0x16b93c(0x184)]&&_0x7f8722[_0x16b93c(0x1f0)]===_0x351d1d['gridCol']-0x1),_0x4b9547=_0x5c3667[_0x16b93c(0x22f)](_0x31eb39=>_0x31eb39['id']!==_0x351d1d['id']&&_0x31eb39[_0x16b93c(0x184)]===_0x351d1d[_0x16b93c(0x184)]&&_0x31eb39[_0x16b93c(0x1f0)]===_0x351d1d[_0x16b93c(0x1f0)]+0x1),_0xc8988e=_0x3735db||_0x4b9547;if(_0xc8988e){const _0x409ddc=_0x351d1d[_0x16b93c(0x24b)]===ENEMY3_TYPE&&_0xc8988e[_0x16b93c(0x24b)]===ENEMY3_TYPE;!_0x409ddc&&_0x369e13[_0x16b93c(0x20a)](_0xc8988e);}}_0xfddb8e=!![];}if(_0x369e13['length']>0x0){_0x369e13=_0x369e13['filter'](_0x434904=>_0x434904);if(_0x369e13[_0x16b93c(0x1f5)]===0x0)return null;_0x369e13[_0x16b93c(0x1bc)](_0x5d53d0=>{const _0x370ab6=_0x16b93c;_0x5d53d0&&(_0x5d53d0[_0x370ab6(0x1db)]=!![],_0x5d53d0[_0x370ab6(0x185)]=_0x4ca7ab);});const _0x2af3d3=new Set(_0x369e13[_0x16b93c(0x199)](_0x27fa98=>_0x27fa98['id']));return resetJustReturnedFlags(_0x2af3d3),_0x369e13;}return null;}catch(_0x397cf9){return console['error'](_0x16b93c(0x1da),_0x397cf9),null;}}function triggerImmediateCaptureDive(){const _0x49896f=_0x3e36;try{if(playerLives<=0x1||isChallengingStage||isShipCaptured||isDualShipActive||captureAttemptMadeThisLevel)return;const _0x54cf21=enemies['filter'](_0x180c8a=>_0x180c8a&&_0x180c8a[_0x49896f(0x27f)]===_0x49896f(0x1a3)&&_0x180c8a['type']===ENEMY3_TYPE&&!_0x180c8a['hasCapturedShip']);if(_0x54cf21[_0x49896f(0x1f5)]>0x0){const _0x568cba=_0x54cf21[Math[_0x49896f(0x1a7)](Math[_0x49896f(0x244)]()*_0x54cf21[_0x49896f(0x1f5)])],_0x5e9ea2=Date[_0x49896f(0x1f9)]();captureAttemptMadeThisLevel=!![],_0x568cba[_0x49896f(0x1db)]=!![];const _0x59113e=new Set([_0x568cba['id']]);resetJustReturnedFlags(_0x59113e);const _0x574da6=Math[_0x49896f(0x244)]()<0.5?'left':_0x49896f(0x26e),_0x3c86ec=_0x574da6===_0x49896f(0x1d8)?gameCanvas[_0x49896f(0x227)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas[_0x49896f(0x227)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x4a242a=gameCanvas['height']*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0x568cba[_0x49896f(0x27f)]=_0x49896f(0x1eb),_0x568cba['targetX']=_0x3c86ec,_0x568cba[_0x49896f(0x236)]=_0x4a242a,_0x568cba[_0x49896f(0x1a1)]=_0x5e9ea2,playSound(bossGalagaDiveSound);const _0x443ace=_0x568cba['id'];_0x568cba[_0x49896f(0x262)]=setTimeout(()=>{const _0x519a0d=_0x49896f,_0x44e13d=enemies['find'](_0x25f65a=>_0x25f65a?.['id']===_0x443ace);_0x44e13d&&_0x44e13d[_0x519a0d(0x27f)]==='preparing_capture'&&(_0x44e13d[_0x519a0d(0x27f)]=_0x519a0d(0x228));if(_0x44e13d)_0x44e13d['capturePrepareTimeout']=null;const _0x1079c2=enemySpawnTimeouts[_0x519a0d(0x193)](_0x580f18=>_0x580f18===_0x568cba[_0x519a0d(0x262)]);if(_0x1079c2>-0x1)enemySpawnTimeouts[_0x519a0d(0x1e2)](_0x1079c2,0x1);},0x12c),enemySpawnTimeouts[_0x49896f(0x20a)](_0x568cba[_0x49896f(0x262)]);}}catch(_0x30c8ab){console[_0x49896f(0x216)](_0x49896f(0x200),_0x30c8ab);}}function resetJustReturnedFlags(_0x243e15){const _0x25044c=_0x3e36;enemies[_0x25044c(0x1bc)](_0x52ca88=>{const _0x2627ac=_0x25044c;let _0x1697c4=![];if(_0x243e15 instanceof Set)_0x1697c4=_0x243e15[_0x2627ac(0x25c)](_0x52ca88['id']);else typeof _0x243e15===_0x2627ac(0x243)&&(_0x1697c4=_0x52ca88['id']===_0x243e15);_0x52ca88&&_0x52ca88[_0x2627ac(0x27f)]===_0x2627ac(0x1a3)&&_0x52ca88[_0x2627ac(0x1db)]&&!_0x1697c4&&(_0x52ca88['justReturned']=![]);});}function updateFloatingScores(){const _0x18f49f=_0x3e36;if(isPaused)return;try{const _0x156e52=Date['now']();floatingScores=floatingScores[_0x18f49f(0x1f3)](_0xdef8=>_0x156e52-_0xdef8['creationTime']<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x1961ca){console['error'](_0x18f49f(0x18f),_0x1961ca),floatingScores=[];}}function updateExplosions(){const _0x3dffd0=_0x3e36;if(isPaused)return;try{const _0x34c12e=Date[_0x3dffd0(0x1f9)]();for(let _0x52dec3=explosions[_0x3dffd0(0x1f5)]-0x1;_0x52dec3>=0x0;_0x52dec3--){const _0x1530c5=explosions[_0x52dec3],_0x106842=_0x34c12e-_0x1530c5[_0x3dffd0(0x254)];if(_0x106842>_0x1530c5[_0x3dffd0(0x21f)]){explosions[_0x3dffd0(0x1e2)](_0x52dec3,0x1);continue;}_0x1530c5[_0x3dffd0(0x283)][_0x3dffd0(0x1bc)](_0x237823=>{const _0x54f285=_0x3dffd0;_0x237823['x']+=_0x237823['vx'],_0x237823['y']+=_0x237823['vy'],_0x237823[_0x54f285(0x23b)]=Math[_0x54f285(0x206)](0x0,0x1-_0x106842/_0x1530c5['duration']*EXPLOSION_FADE_SPEED);});}}catch(_0x3221e5){console[_0x3dffd0(0x216)]('Error\x20updating\x20explosions:',_0x3221e5),explosions=[];}}function moveEntities(){const _0x596cb0=_0x3e36;if(isPaused)return;try{if(ship&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isWaitingForRespawn){let _0x1b69ce=ship[_0x596cb0(0x227)];isDualShipActive&&(_0x1b69ce+=DUAL_SHIP_OFFSET_X);let _0x13ec66=ship['x'];if(isManualControl){let _0x5e1524=![],_0x49f1ea=![];currentPlayer===0x1||!isTwoPlayerMode?(_0x5e1524=leftPressed,_0x49f1ea=rightPressed):(_0x5e1524=p2LeftPressed,_0x49f1ea=p2RightPressed);if(_0x5e1524&&ship['x']>0x0)_0x13ec66=ship['x']-ship[_0x596cb0(0x223)];else _0x49f1ea&&ship['x']<gameCanvas[_0x596cb0(0x227)]-_0x1b69ce&&(_0x13ec66=ship['x']+ship[_0x596cb0(0x223)]);ship['x']=Math[_0x596cb0(0x206)](0x0,Math[_0x596cb0(0x26c)](gameCanvas[_0x596cb0(0x227)]-_0x1b69ce,_0x13ec66)),ship[_0x596cb0(0x23e)]=ship['x'];}else{if(typeof smoothedShipX!==_0x596cb0(0x24a)){const _0x597784=0.1,_0xfc9c6c=1.2;smoothedShipX+=(ship['targetX']-smoothedShipX)*AI_SMOOTHING_FACTOR_MOVE;const _0x564c99=smoothedShipX-ship['x'],_0x11aff3=ship[_0x596cb0(0x223)]*_0xfc9c6c;let _0x3f4351=0x0;if(Math[_0x596cb0(0x22c)](_0x564c99)>_0x597784){const _0x155a75=isChallengingStage?CS_AI_MOVE_FRACTION:NORMAL_MOVE_FRACTION;_0x3f4351=_0x564c99*_0x155a75,_0x3f4351=Math[_0x596cb0(0x206)](-_0x11aff3,Math['min'](_0x11aff3,_0x3f4351)),Math[_0x596cb0(0x22c)](_0x3f4351)>Math['abs'](_0x564c99)&&(_0x3f4351=_0x564c99),ship['x']+=_0x3f4351,ship['x']=Math[_0x596cb0(0x206)](0x0,Math[_0x596cb0(0x26c)](gameCanvas['width']-_0x1b69ce,ship['x']));}}else ship['x']=Math['max'](0x0,Math[_0x596cb0(0x26c)](gameCanvas[_0x596cb0(0x227)]-_0x1b69ce,ship[_0x596cb0(0x23e)]));}}const _0x12e10a=Date[_0x596cb0(0x1f9)]();for(let _0x3a2bdf=bullets['length']-0x1;_0x3a2bdf>=0x0;_0x3a2bdf--){const _0x3d8c35=bullets[_0x3a2bdf];_0x3d8c35?(_0x3d8c35['y']-=_0x3d8c35[_0x596cb0(0x223)],_0x3d8c35['y']+PLAYER_BULLET_HEIGHT<0x0&&bullets[_0x596cb0(0x1e2)](_0x3a2bdf,0x1)):bullets['splice'](_0x3a2bdf,0x1);}for(let _0x522b0b=enemyBullets[_0x596cb0(0x1f5)]-0x1;_0x522b0b>=0x0;_0x522b0b--){const _0x56def0=enemyBullets[_0x522b0b];if(!_0x56def0){enemyBullets[_0x596cb0(0x1e2)](_0x522b0b,0x1);continue;}_0x56def0['x']+=_0x56def0['vx'],_0x56def0['y']+=_0x56def0['vy'],(_0x56def0['y']>gameCanvas[_0x596cb0(0x23d)]||_0x56def0['y']<-ENEMY_BULLET_HEIGHT||_0x56def0['x']<-ENEMY_BULLET_WIDTH||_0x56def0['x']>gameCanvas[_0x596cb0(0x227)])&&enemyBullets[_0x596cb0(0x1e2)](_0x522b0b,0x1);}for(let _0x34acf4=fallingShips[_0x596cb0(0x1f5)]-0x1;_0x34acf4>=0x0;_0x34acf4--){const _0x233e6f=fallingShips[_0x34acf4];if(!_0x233e6f){fallingShips[_0x596cb0(0x1e2)](_0x34acf4,0x1);continue;}_0x233e6f['y']+=FALLING_SHIP_SPEED;const _0x17d159=_0x12e10a-_0x233e6f[_0x596cb0(0x254)];typeof _0x233e6f[_0x596cb0(0x1b9)]===_0x596cb0(0x21b)?_0x233e6f[_0x596cb0(0x1b9)]=Math['max'](0x0,0x1-_0x17d159/FALLING_SHIP_FADE_DURATION_MS):_0x233e6f[_0x596cb0(0x1b9)]=0x0;if(typeof _0x233e6f[_0x596cb0(0x1c8)]==='number'){const _0x51a885=Math[_0x596cb0(0x26c)](0x1,_0x17d159/FALLING_SHIP_ROTATION_DURATION_MS);_0x233e6f[_0x596cb0(0x1c8)]=_0x51a885*0x2*(0x2*Math['PI']);}else _0x233e6f[_0x596cb0(0x1c8)]=0x0;if(ship&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x233e6f['y']+_0x233e6f[_0x596cb0(0x23d)]>=gameCanvas[_0x596cb0(0x23d)]-AUTO_DOCK_THRESHOLD){fallingShips[_0x596cb0(0x1e2)](_0x34acf4,0x1),isDualShipActive=!![];currentPlayer===0x1?player1IsDualShipActive=!![]:player2IsDualShipActive=!![];playSound(dualShipSound);continue;}_0x233e6f['y']>gameCanvas[_0x596cb0(0x23d)]+_0x233e6f['height']&&fallingShips[_0x596cb0(0x1e2)](_0x34acf4,0x1);}let _0x55dd03=0x0;const _0x18c800=enemies[_0x596cb0(0x205)](_0x381705=>_0x381705?.[_0x596cb0(0x27f)]==='in_grid'),_0x167dfa=!isChallengingStage&&!isWaveTransitioning&&_0x18c800&&!isShowingPlayerGameOverMessage;if(_0x167dfa){!isGridSoundPlaying&&playSound(gridBackgroundSound,!![]);const _0x3a8f74=enemies[_0x596cb0(0x1f3)](_0x5a5265=>_0x5a5265?.[_0x596cb0(0x27f)]===_0x596cb0(0x1a3));if(_0x3a8f74[_0x596cb0(0x1f5)]>0x0){let _0x19a895=gameCanvas[_0x596cb0(0x227)],_0x2aed64=0x0;_0x3a8f74[_0x596cb0(0x1bc)](_0x2d1362=>{const _0x53a754=_0x596cb0;_0x2d1362&&(_0x19a895=Math[_0x53a754(0x26c)](_0x19a895,_0x2d1362['x']),_0x2aed64=Math[_0x53a754(0x206)](_0x2aed64,_0x2d1362['x']+_0x2d1362[_0x53a754(0x227)]));});const _0x17768d=gameCanvas[_0x596cb0(0x227)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x17bb9=gameCanvas[_0x596cb0(0x227)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x2aed64>=_0x17bb9)gridMoveDirection=-0x1;else gridMoveDirection===-0x1&&_0x19a895<=_0x17768d&&(gridMoveDirection=0x1);const _0x878ddb=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x55dd03=_0x878ddb*gridMoveDirection,currentGridOffsetX+=_0x55dd03,enemies['forEach'](_0x5bdbb0=>{const _0x209fb8=_0x596cb0;if(_0x5bdbb0&&(_0x5bdbb0[_0x209fb8(0x27f)]===_0x209fb8(0x1b0)||_0x5bdbb0['state']===_0x209fb8(0x1a3)||_0x5bdbb0['state']===_0x209fb8(0x1cb)))try{const _0x3c265d=_0x5bdbb0[_0x209fb8(0x24b)]===ENEMY3_TYPE?BOSS_WIDTH:_0x5bdbb0[_0x209fb8(0x24b)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x2c406f,y:_0x5670b8}=getCurrentGridSlotPosition(_0x5bdbb0[_0x209fb8(0x184)],_0x5bdbb0['gridCol'],_0x3c265d);_0x5bdbb0[_0x209fb8(0x1ed)]=_0x2c406f,_0x5bdbb0['targetGridY']=_0x5670b8;}catch(_0x39cb4a){console[_0x209fb8(0x216)](_0x209fb8(0x266)+_0x5bdbb0?.['id']+_0x209fb8(0x263)+_0x5bdbb0?.[_0x209fb8(0x27f)]+_0x209fb8(0x222),_0x39cb4a);}});}}else isGridSoundPlaying&&!isChallengingStage&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]),_0x55dd03=0x0;for(let _0x112585=enemies[_0x596cb0(0x1f5)]-0x1;_0x112585>=0x0;_0x112585--){let _0x490eab=enemies[_0x112585];if(!_0x490eab)continue;const _0x53dfcb=_0x490eab['id'];if(_0x490eab[_0x596cb0(0x262)]&&_0x490eab[_0x596cb0(0x27f)]!==_0x596cb0(0x1eb)){clearTimeout(_0x490eab[_0x596cb0(0x262)]);const _0x1f4498=enemySpawnTimeouts[_0x596cb0(0x241)](_0x490eab[_0x596cb0(0x262)]);if(_0x1f4498>-0x1)enemySpawnTimeouts[_0x596cb0(0x1e2)](_0x1f4498,0x1);_0x490eab[_0x596cb0(0x262)]=null;}const _0x4b738f=_0x490eab[_0x596cb0(0x24b)]===ENEMY3_TYPE?BOSS_WIDTH:_0x490eab[_0x596cb0(0x24b)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x508ce1=_0x490eab['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x490eab[_0x596cb0(0x24b)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x490eab[_0x596cb0(0x27f)]){case _0x596cb0(0x27a):{if(isEntrancePhaseActive&&!isChallengingStage)break;const _0x5b6ba3=challengingStagePaths[_0x490eab[_0x596cb0(0x24c)]];if(!_0x5b6ba3||_0x5b6ba3[_0x596cb0(0x1f5)]===0x0){console[_0x596cb0(0x216)](_0x596cb0(0x207)+_0x53dfcb+_0x596cb0(0x224)+_0x490eab['entrancePathId']+_0x596cb0(0x1d5)),enemies['splice'](_0x112585,0x1);continue;}if(_0x490eab[_0x596cb0(0x209)]>=_0x5b6ba3[_0x596cb0(0x1f5)]){console[_0x596cb0(0x249)](_0x596cb0(0x207)+_0x53dfcb+'\x20path\x20index\x20'+_0x490eab[_0x596cb0(0x209)]+'\x20out\x20of\x20bounds!\x20Removing.'),enemies[_0x596cb0(0x1e2)](_0x112585,0x1);continue;}const _0x5c786b=_0x5b6ba3[_0x490eab[_0x596cb0(0x209)]];if(!_0x5c786b?.['p0']){console[_0x596cb0(0x216)]('CS\x20Enemy\x20'+_0x53dfcb+_0x596cb0(0x1ea)+_0x490eab[_0x596cb0(0x209)]+_0x596cb0(0x1d5)),enemies[_0x596cb0(0x1e2)](_0x112585,0x1);continue;}const _0x429583=_0x490eab[_0x596cb0(0x1e6)]||0x1,_0x1e554c=CS_ENTRANCE_PATH_SPEED*_0x429583;_0x490eab[_0x596cb0(0x217)]+=_0x1e554c;let _0x30856f,_0x49a752;const _0x4b2557=_0x490eab['x'],_0x3bf6c9=_0x490eab['y'];if(_0x490eab[_0x596cb0(0x217)]>=0x1){_0x30856f=calculateBezierPoint(0x1,_0x5c786b['p0']['x'],_0x5c786b['p1']['x'],_0x5c786b['p2']['x'],_0x5c786b['p3']['x']),_0x49a752=calculateBezierPoint(0x1,_0x5c786b['p0']['y'],_0x5c786b['p1']['y'],_0x5c786b['p2']['y'],_0x5c786b['p3']['y']),_0x490eab['pathT']=0x0,_0x490eab[_0x596cb0(0x209)]++;if(_0x490eab['pathSegmentIndex']>=_0x5b6ba3[_0x596cb0(0x1f5)]){enemies[_0x596cb0(0x1e2)](_0x112585,0x1);continue;}}else _0x30856f=calculateBezierPoint(_0x490eab[_0x596cb0(0x217)],_0x5c786b['p0']['x'],_0x5c786b['p1']['x'],_0x5c786b['p2']['x'],_0x5c786b['p3']['x']),_0x49a752=calculateBezierPoint(_0x490eab['pathT'],_0x5c786b['p0']['y'],_0x5c786b['p1']['y'],_0x5c786b['p2']['y'],_0x5c786b['p3']['y']);_0x490eab[_0x596cb0(0x256)]=_0x30856f-_0x4b2557,_0x490eab[_0x596cb0(0x238)]=_0x49a752-_0x3bf6c9,_0x490eab['x']=_0x30856f,_0x490eab['y']=_0x49a752;const _0x590b69=Math[_0x596cb0(0x206)](_0x4b738f,_0x508ce1)*2.5;let _0x12adb5=_0x490eab['y']>gameCanvas['height']+_0x590b69||_0x490eab['y']<-_0x590b69||_0x490eab['x']<-_0x590b69||_0x490eab['x']>gameCanvas[_0x596cb0(0x227)]+_0x590b69;if(_0x12adb5&&_0x490eab[_0x596cb0(0x209)]>0x0){enemies[_0x596cb0(0x1e2)](_0x112585,0x1);continue;}break;}case _0x596cb0(0x1fc):{if(isChallengingStage)break;const _0x2eb3c1=normalWaveEntrancePaths[_0x490eab[_0x596cb0(0x24c)]];if(!_0x2eb3c1||_0x2eb3c1[_0x596cb0(0x1f5)]===0x0){console[_0x596cb0(0x216)](_0x596cb0(0x19a)+_0x53dfcb+_0x596cb0(0x224)+_0x490eab['entrancePathId']+_0x596cb0(0x26a)),_0x490eab[_0x596cb0(0x27f)]=_0x596cb0(0x1cb);break;}if(_0x490eab['pathSegmentIndex']>=_0x2eb3c1[_0x596cb0(0x1f5)]){_0x490eab[_0x596cb0(0x27f)]=_0x596cb0(0x1cb);break;}const _0x3fbaf1=_0x2eb3c1[_0x490eab[_0x596cb0(0x209)]];if(!_0x3fbaf1?.['p0']){console['error'](_0x596cb0(0x19a)+_0x53dfcb+_0x596cb0(0x1ea)+_0x490eab[_0x596cb0(0x209)]+_0x596cb0(0x26a)),_0x490eab[_0x596cb0(0x27f)]='moving_to_grid';break;}let _0x4db773=0x1;(_0x490eab['entrancePathId']===_0x596cb0(0x27c)||_0x490eab[_0x596cb0(0x24c)]===_0x596cb0(0x264))&&(_0x4db773=BOSS_LOOP_ENTRANCE_PATH_SPEED/NORMAL_ENTRANCE_PATH_SPEED);const _0x9a56ca=NORMAL_ENTRANCE_PATH_SPEED*_0x4db773;_0x490eab[_0x596cb0(0x217)]+=_0x9a56ca;let _0x515b01,_0x5a4ea7;const _0x2968b6=_0x490eab['x'],_0x125da6=_0x490eab['y'];_0x490eab[_0x596cb0(0x217)]>=0x1?(_0x515b01=calculateBezierPoint(0x1,_0x3fbaf1['p0']['x'],_0x3fbaf1['p1']['x'],_0x3fbaf1['p2']['x'],_0x3fbaf1['p3']['x']),_0x5a4ea7=calculateBezierPoint(0x1,_0x3fbaf1['p0']['y'],_0x3fbaf1['p1']['y'],_0x3fbaf1['p2']['y'],_0x3fbaf1['p3']['y']),_0x490eab['pathT']=0x0,_0x490eab['pathSegmentIndex']++,_0x490eab['pathSegmentIndex']>=_0x2eb3c1[_0x596cb0(0x1f5)]&&(_0x490eab['state']=_0x596cb0(0x1cb),_0x490eab['x']=_0x515b01,_0x490eab['y']=_0x5a4ea7)):(_0x515b01=calculateBezierPoint(_0x490eab[_0x596cb0(0x217)],_0x3fbaf1['p0']['x'],_0x3fbaf1['p1']['x'],_0x3fbaf1['p2']['x'],_0x3fbaf1['p3']['x']),_0x5a4ea7=calculateBezierPoint(_0x490eab[_0x596cb0(0x217)],_0x3fbaf1['p0']['y'],_0x3fbaf1['p1']['y'],_0x3fbaf1['p2']['y'],_0x3fbaf1['p3']['y']));_0x490eab[_0x596cb0(0x27f)]==='following_entrance_path'&&(_0x490eab[_0x596cb0(0x256)]=_0x515b01-_0x2968b6,_0x490eab[_0x596cb0(0x238)]=_0x5a4ea7-_0x125da6,_0x490eab['x']=_0x515b01,_0x490eab['y']=_0x5a4ea7);break;}case _0x596cb0(0x1cb):{if(_0x490eab[_0x596cb0(0x1ed)]==null||_0x490eab[_0x596cb0(0x1e0)]==null){console[_0x596cb0(0x249)](_0x596cb0(0x19a)+_0x53dfcb+_0x596cb0(0x225));try{const {x:_0x46b3a0,y:_0x535811}=getCurrentGridSlotPosition(_0x490eab[_0x596cb0(0x184)],_0x490eab[_0x596cb0(0x1f0)],_0x4b738f);_0x490eab[_0x596cb0(0x1ed)]=_0x46b3a0,_0x490eab[_0x596cb0(0x1e0)]=_0x535811;}catch(_0x58cca3){console[_0x596cb0(0x216)](_0x596cb0(0x192)+_0x53dfcb+_0x596cb0(0x235),_0x58cca3),_0x490eab[_0x596cb0(0x27f)]=_0x596cb0(0x1a3),_0x490eab['x']=gameCanvas['width']/0x2,_0x490eab['y']=ENEMY_TOP_MARGIN;break;}}const _0x24df54=_0x490eab[_0x596cb0(0x1ed)],_0x2d167b=_0x490eab[_0x596cb0(0x1e0)],_0x6bc104=_0x24df54-_0x490eab['x'],_0x193416=_0x2d167b-_0x490eab['y'],_0x34a267=Math[_0x596cb0(0x286)](_0x6bc104*_0x6bc104+_0x193416*_0x193416),_0x439a2a=ENTRANCE_SPEED*1.2,_0x6241db=_0x439a2a*0.5;if(_0x34a267>_0x6241db)_0x490eab['velocityX']=_0x6bc104/_0x34a267*_0x439a2a,_0x490eab[_0x596cb0(0x238)]=_0x193416/_0x34a267*_0x439a2a,_0x490eab['x']+=_0x490eab[_0x596cb0(0x256)],_0x490eab['y']+=_0x490eab[_0x596cb0(0x238)];else{_0x490eab['x']=_0x24df54,_0x490eab['y']=_0x2d167b,_0x490eab[_0x596cb0(0x256)]=0x0,_0x490eab[_0x596cb0(0x238)]=0x0;const _0x16a5d2=_0x490eab['state'];_0x490eab[_0x596cb0(0x27f)]=_0x596cb0(0x1a3),_0x490eab[_0x596cb0(0x1db)]=![];!isGridSoundPlaying&&!isChallengingStage&&playSound(gridBackgroundSound,!![]);GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x12e10a,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date[_0x596cb0(0x1f9)](),firstEnemyLanded=!![]);if(_0x16a5d2===_0x596cb0(0x1cb)&&!isChallengingStage&&!isFullGridWave&&_0x490eab[_0x596cb0(0x215)]!==undefined){const _0x3fb06e=_0x490eab[_0x596cb0(0x215)],_0x5361bf=squadronCompletionStatus[_0x3fb06e];if(_0x5361bf&&!_0x5361bf['hasFiredPostLanding']){const _0x19d6ae=enemies[_0x596cb0(0x1ca)](_0xc8afc6=>{const _0x131084=_0x596cb0;if(_0xc8afc6&&_0xc8afc6[_0x131084(0x215)]===_0x3fb06e)return _0xc8afc6[_0x131084(0x27f)]==='in_grid'||!enemies[_0x131084(0x205)](_0x591763=>_0x591763['id']===_0xc8afc6['id']);return!![];});if(_0x19d6ae){_0x5361bf[_0x596cb0(0x19e)]=!![];const _0x333b31=enemies[_0x596cb0(0x1f3)](_0x395771=>_0x395771&&_0x395771[_0x596cb0(0x215)]===_0x3fb06e&&_0x395771[_0x596cb0(0x27f)]==='in_grid'&&(_0x395771[_0x596cb0(0x24b)]===ENEMY2_TYPE||_0x395771[_0x596cb0(0x24b)]===ENEMY3_TYPE)&&!(_0x395771[_0x596cb0(0x24b)]===ENEMY3_TYPE&&_0x395771[_0x596cb0(0x1ff)]));if(_0x333b31['length']>0x0){const _0x10b6e4=_0x333b31[Math[_0x596cb0(0x1a7)](Math[_0x596cb0(0x244)]()*_0x333b31[_0x596cb0(0x1f5)])],_0x38cf6=_0x10b6e4['id'],_0x27fee4=0xc8+Math[_0x596cb0(0x244)]()*0x190,_0x3bbad6=setTimeout(()=>{const _0x3bc3e2=_0x596cb0;try{const _0x3a4066=enemySpawnTimeouts[_0x3bc3e2(0x241)](_0x3bbad6);if(_0x3a4066>-0x1)enemySpawnTimeouts[_0x3bc3e2(0x1e2)](_0x3a4066,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0xa101ab=enemies[_0x3bc3e2(0x22f)](_0x15e8e9=>_0x15e8e9&&_0x15e8e9['id']===_0x38cf6);_0xa101ab&&_0xa101ab[_0x3bc3e2(0x27f)]===_0x3bc3e2(0x1a3)&&(createBulletSimple(_0xa101ab)&&(playSound(enemyShootSound),_0xa101ab[_0x3bc3e2(0x1e1)]=Date[_0x3bc3e2(0x1f9)]()));}catch(_0x5eb3e4){console[_0x3bc3e2(0x216)](_0x3bc3e2(0x20f)+_0x38cf6+':',_0x5eb3e4);}},_0x27fee4);enemySpawnTimeouts['push'](_0x3bbad6);}}}}}break;}case'in_grid':{try{const _0xfbac2b=_0x490eab['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x490eab[_0x596cb0(0x24b)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x3ee9b3,y:_0xeb59fe}=getCurrentGridSlotPosition(_0x490eab[_0x596cb0(0x184)],_0x490eab[_0x596cb0(0x1f0)],_0xfbac2b);typeof _0x3ee9b3===_0x596cb0(0x21b)&&!isNaN(_0x3ee9b3)&&(_0x490eab['x']=_0x3ee9b3),typeof _0xeb59fe==='number'&&!isNaN(_0xeb59fe)&&(_0x490eab['y']=_0xeb59fe),_0x490eab['targetGridX']=_0x3ee9b3,_0x490eab[_0x596cb0(0x1e0)]=_0xeb59fe;}catch(_0x3ce503){console[_0x596cb0(0x216)]('Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20'+_0x490eab['id']+':',_0x3ce503);}_0x490eab[_0x596cb0(0x256)]=_0x167dfa?_0x55dd03:0x0,_0x490eab[_0x596cb0(0x238)]=0x0;_0x490eab[_0x596cb0(0x24b)]===ENEMY3_TYPE&&_0x490eab[_0x596cb0(0x1ff)]&&_0x490eab['capturedShipDimensions']&&(_0x490eab[_0x596cb0(0x281)]=_0x490eab['x']+CAPTURED_SHIP_OFFSET_X,_0x490eab[_0x596cb0(0x1c0)]=_0x490eab['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x596cb0(0x20b):{_0x490eab[_0x596cb0(0x256)]=0x0,_0x490eab[_0x596cb0(0x238)]=0x0;break;}case _0x596cb0(0x1eb):{_0x490eab[_0x596cb0(0x256)]=0x0,_0x490eab['velocityY']=0x0;break;}case'diving_to_capture_position':{if(isShipCaptured){_0x490eab['state']='returning';try{const {x:_0x555d2a,y:_0x5181a0}=getCurrentGridSlotPosition(_0x490eab[_0x596cb0(0x184)],_0x490eab['gridCol'],_0x4b738f);_0x490eab[_0x596cb0(0x1ed)]=_0x555d2a,_0x490eab[_0x596cb0(0x1e0)]=_0x5181a0;}catch(_0x23954b){console[_0x596cb0(0x216)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x490eab['id']+':',_0x23954b),_0x490eab['targetGridX']=gameCanvas['width']/0x2,_0x490eab[_0x596cb0(0x1e0)]=ENEMY_TOP_MARGIN;}break;}const _0x67e342=_0x490eab['targetX'],_0x5ba385=_0x490eab[_0x596cb0(0x236)];if(_0x67e342==null||_0x5ba385==null){console[_0x596cb0(0x216)](_0x596cb0(0x242)+_0x490eab['id']+_0x596cb0(0x1e4)),_0x490eab['state']=_0x596cb0(0x1b0);try{const {x:_0x4ddb54,y:_0x4bc65e}=getCurrentGridSlotPosition(_0x490eab[_0x596cb0(0x184)],_0x490eab[_0x596cb0(0x1f0)],_0x4b738f);_0x490eab[_0x596cb0(0x1ed)]=_0x4ddb54,_0x490eab[_0x596cb0(0x1e0)]=_0x4bc65e;}catch(_0x8cc1d4){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x490eab['id']+':',_0x8cc1d4),_0x490eab['targetGridX']=gameCanvas[_0x596cb0(0x227)]/0x2,_0x490eab[_0x596cb0(0x1e0)]=ENEMY_TOP_MARGIN;}break;}const _0x52b48c=_0x67e342-_0x490eab['x'],_0x2a392c=_0x5ba385-_0x490eab['y'],_0xdeb278=Math[_0x596cb0(0x286)](_0x52b48c*_0x52b48c+_0x2a392c*_0x2a392c),_0x1e35a1=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x49110a=_0x1e35a1*0.6;_0xdeb278>_0x49110a?(_0x490eab[_0x596cb0(0x256)]=_0x52b48c/_0xdeb278*_0x1e35a1,_0x490eab[_0x596cb0(0x238)]=_0x2a392c/_0xdeb278*_0x1e35a1,_0x490eab['x']+=_0x490eab[_0x596cb0(0x256)],_0x490eab['y']+=_0x490eab[_0x596cb0(0x238)]):(_0x490eab['x']=_0x67e342,_0x490eab['y']=_0x5ba385,_0x490eab[_0x596cb0(0x256)]=0x0,_0x490eab['velocityY']=0x0,_0x490eab[_0x596cb0(0x27f)]='capturing',_0x490eab[_0x596cb0(0x23a)]=_0x12e10a,capturingBossId=_0x490eab['id'],captureBeamActive=!![],captureBeamSource={'x':_0x490eab['x']+_0x4b738f/0x2,'y':_0x490eab['y']+_0x508ce1},captureBeamTargetY=_0x490eab['y'],captureBeamProgress=0x0,playSound(captureSound));break;}case _0x596cb0(0x22d):{_0x490eab[_0x596cb0(0x256)]=0x0,_0x490eab[_0x596cb0(0x238)]=0x0;if(isShipCaptured&&_0x490eab['id']!==capturedBossIdWithMessage){captureBeamActive=![];if(capturingBossId===_0x490eab['id'])capturingBossId=null;_0x490eab[_0x596cb0(0x27f)]='returning',stopSound(captureSound);try{const {x:_0x2c91d0,y:_0x545bab}=getCurrentGridSlotPosition(_0x490eab[_0x596cb0(0x184)],_0x490eab[_0x596cb0(0x1f0)],_0x4b738f);_0x490eab[_0x596cb0(0x1ed)]=_0x2c91d0,_0x490eab[_0x596cb0(0x1e0)]=_0x545bab;}catch(_0x9271c4){console['error'](_0x596cb0(0x279)+_0x490eab['id']+':',_0x9271c4),_0x490eab[_0x596cb0(0x1ed)]=gameCanvas[_0x596cb0(0x227)]/0x2,_0x490eab[_0x596cb0(0x1e0)]=ENEMY_TOP_MARGIN;}break;}const _0x37a0a0=_0x12e10a-_0x490eab[_0x596cb0(0x23a)],_0x45fde5=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x727c3e=CAPTURE_BEAM_DURATION_MS;if(_0x37a0a0<_0x45fde5)captureBeamProgress=_0x37a0a0/_0x45fde5;else{if(_0x37a0a0<_0x727c3e-_0x45fde5)captureBeamProgress=0x1;else{if(_0x37a0a0<_0x727c3e)captureBeamProgress=0x1-(_0x37a0a0-(_0x727c3e-_0x45fde5))/_0x45fde5;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(captureSound),_0x490eab['state']='attacking',_0x490eab[_0x596cb0(0x188)]=generateAttackPath(_0x490eab),_0x490eab['attackPathSegmentIndex']=0x0,_0x490eab['attackPathT']=0x0,_0x490eab[_0x596cb0(0x223)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x490eab['lastFiredTime']=0x0,_0x490eab[_0x596cb0(0x1c4)]=!![],_0x490eab[_0x596cb0(0x19f)]=0x0,_0x490eab['attackGroupId']=null;break;}}}captureBeamProgress=Math[_0x596cb0(0x206)](0x0,Math[_0x596cb0(0x26c)](0x1,captureBeamProgress));if(ship&&captureBeamActive&&captureBeamProgress>=0.95&&!isShipCaptured&&!isInvincible){const _0x1a7c2d=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x4e1e58=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x4add97=_0x490eab['x']+_0x4b738f/0x2,_0x54d4bf=_0x490eab['y']+_0x508ce1,_0x3517cf=gameCanvas[_0x596cb0(0x23d)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x1ca6d0=Math[_0x596cb0(0x206)](_0x1a7c2d,_0x4e1e58),_0x16906c=_0x4add97-_0x1ca6d0/0x2,_0x2c16a5=_0x54d4bf,_0xda66c9=_0x3517cf-_0x54d4bf;if(_0xda66c9>0x0){const _0x2cc8bb={'x':_0x16906c,'y':_0x2c16a5,'width':_0x1ca6d0,'height':_0xda66c9},_0x522947={'x':ship['x'],'y':ship['y'],'width':ship[_0x596cb0(0x227)],'height':ship[_0x596cb0(0x23d)]};if(checkCollision(_0x522947,_0x2cc8bb)){isShipCaptured=!![],_0x490eab[_0x596cb0(0x1a0)]={'width':ship['width'],'height':ship[_0x596cb0(0x23d)]},_0x490eab[_0x596cb0(0x1ff)]=!![],stopSound(captureSound),_0x490eab[_0x596cb0(0x27f)]=_0x596cb0(0x25b),_0x490eab[_0x596cb0(0x1ed)]=null,_0x490eab['targetGridY']=null,_0x490eab[_0x596cb0(0x1b1)]=ship['y'],_0x490eab['captureAnimationRotation']=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x12e10a,capturedBossIdWithMessage=_0x490eab['id'],playSound(shipCapturedSound);const _0x54a7f6=currentPlayer;playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];if(playerLives<=0x0){if(_0x54a7f6===0x1)player1Lives=0x0;if(_0x54a7f6===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x12e10a,playerWhoIsGameOver=_0x54a7f6;const _0x5805c5=_0x54a7f6===0x1?0x2:0x1,_0x329daa=_0x5805c5===0x1?player1Lives:player2Lives;_0x329daa>0x0?nextActionAfterPlayerGameOver='switch_player':nextActionAfterPlayerGameOver=_0x596cb0(0x239);bullets=[],enemyBullets=[],explosions=[],fallingShips=[],isDualShipActive=![];if(_0x54a7f6===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(_0x54a7f6===0x1)player1Lives=playerLives;else player2Lives=playerLives;}ship&&gameCanvas&&(ship['y']=gameCanvas[_0x596cb0(0x23d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])),(!isManualControl||isTwoPlayerMode)&&(forceCenterShipNextReset=!![]),isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x12e10a+INVINCIBILITY_DURATION_MS;}}}else console[_0x596cb0(0x249)]('Beam\x20collision\x20box\x20has\x20invalid\x20height:',_0xda66c9);}break;}case _0x596cb0(0x25b):{_0x490eab[_0x596cb0(0x256)]=0x0,_0x490eab[_0x596cb0(0x238)]=0x0;if(_0x490eab[_0x596cb0(0x1ff)]&&_0x490eab[_0x596cb0(0x1a0)]&&typeof _0x490eab['initialCaptureAnimationY']===_0x596cb0(0x21b)){const _0x1cc4d1=_0x12e10a-captureMessageStartTime,_0x28336d=Math['min'](0x1,_0x1cc4d1/CAPTURE_MESSAGE_DURATION),_0x5114f8=_0x490eab['y']+CAPTURED_SHIP_OFFSET_Y,_0x4a5ee4=_0x490eab[_0x596cb0(0x1b1)];_0x490eab[_0x596cb0(0x1c0)]=_0x4a5ee4+(_0x5114f8-_0x4a5ee4)*_0x28336d,_0x490eab[_0x596cb0(0x281)]=_0x490eab['x']+CAPTURED_SHIP_OFFSET_X;}else _0x490eab[_0x596cb0(0x281)]=_0x490eab['x']+CAPTURED_SHIP_OFFSET_X,_0x490eab[_0x596cb0(0x1c0)]=_0x490eab['y']+CAPTURED_SHIP_OFFSET_Y;break;}case _0x596cb0(0x208):{if(isEntrancePhaseActive)break;const _0x16a820=_0x490eab[_0x596cb0(0x188)],_0x5c9655=3.8;if(!_0x16a820||_0x16a820[_0x596cb0(0x1f5)]===0x0){console[_0x596cb0(0x216)](_0x596cb0(0x19a)+_0x53dfcb+'\x20attacking\x20without\x20path!\x20Returning.'),_0x490eab[_0x596cb0(0x27f)]=_0x596cb0(0x1b0);try{const {x:_0x3f7c56,y:_0x932329}=getCurrentGridSlotPosition(_0x490eab[_0x596cb0(0x184)],_0x490eab[_0x596cb0(0x1f0)],_0x4b738f);_0x490eab['targetGridX']=_0x3f7c56,_0x490eab['targetGridY']=_0x932329;}catch(_0x38ceee){console[_0x596cb0(0x216)](_0x596cb0(0x25d)+_0x53dfcb+_0x596cb0(0x1c1),_0x38ceee),_0x490eab[_0x596cb0(0x1ed)]=gameCanvas[_0x596cb0(0x227)]/0x2,_0x490eab[_0x596cb0(0x1e0)]=ENEMY_TOP_MARGIN;}break;}if(_0x490eab[_0x596cb0(0x1bd)]>=_0x16a820[_0x596cb0(0x1f5)]){console[_0x596cb0(0x249)]('Enemy\x20'+_0x53dfcb+_0x596cb0(0x190)+_0x490eab[_0x596cb0(0x1bd)]+'\x20out\x20of\x20bounds\x20('+_0x16a820[_0x596cb0(0x1f5)]+_0x596cb0(0x1b6)),_0x490eab[_0x596cb0(0x27f)]=_0x596cb0(0x1b0);try{const {x:_0x3b64a0,y:_0x2e96a0}=getCurrentGridSlotPosition(_0x490eab[_0x596cb0(0x184)],_0x490eab['gridCol'],_0x4b738f);_0x490eab[_0x596cb0(0x1ed)]=_0x3b64a0,_0x490eab[_0x596cb0(0x1e0)]=_0x2e96a0;}catch(_0x3597b9){console[_0x596cb0(0x216)](_0x596cb0(0x25d)+_0x53dfcb+_0x596cb0(0x218),_0x3597b9),_0x490eab[_0x596cb0(0x1ed)]=gameCanvas[_0x596cb0(0x227)]/0x2,_0x490eab['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x1477d9=_0x16a820[_0x490eab[_0x596cb0(0x1bd)]];if(!_0x1477d9||!_0x1477d9['p0']||!_0x1477d9['p1']||!_0x1477d9['p2']||!_0x1477d9['p3']){console[_0x596cb0(0x216)](_0x596cb0(0x19a)+_0x53dfcb+_0x596cb0(0x273)+_0x490eab[_0x596cb0(0x1bd)]+_0x596cb0(0x1a4)),_0x490eab[_0x596cb0(0x27f)]='returning';try{const {x:_0x35db45,y:_0x4e202b}=getCurrentGridSlotPosition(_0x490eab['gridRow'],_0x490eab[_0x596cb0(0x1f0)],_0x4b738f);_0x490eab['targetGridX']=_0x35db45,_0x490eab[_0x596cb0(0x1e0)]=_0x4e202b;}catch(_0xd663a5){console[_0x596cb0(0x216)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x53dfcb+_0x596cb0(0x257),_0xd663a5),_0x490eab['targetGridX']=gameCanvas[_0x596cb0(0x227)]/0x2,_0x490eab['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x188ef9=_0x490eab[_0x596cb0(0x223)]/0x3e8*_0x5c9655;_0x490eab[_0x596cb0(0x233)]+=_0x188ef9;let _0x568ada,_0x1c9853;const _0x1c7582=_0x490eab['x'],_0x57ac5e=_0x490eab['y'];if(_0x490eab[_0x596cb0(0x233)]>=0x1){try{_0x568ada=calculateBezierPoint(0x1,_0x1477d9['p0']['x'],_0x1477d9['p1']['x'],_0x1477d9['p2']['x'],_0x1477d9['p3']['x']),_0x1c9853=calculateBezierPoint(0x1,_0x1477d9['p0']['y'],_0x1477d9['p1']['y'],_0x1477d9['p2']['y'],_0x1477d9['p3']['y']);}catch(_0x556b88){console[_0x596cb0(0x216)](_0x596cb0(0x1e3)+_0x490eab['id']+':',_0x556b88),_0x568ada=_0x490eab['x'],_0x1c9853=_0x490eab['y'],_0x490eab[_0x596cb0(0x27f)]='returning';try{const {x:_0x4754c5,y:_0x282cac}=getCurrentGridSlotPosition(_0x490eab[_0x596cb0(0x184)],_0x490eab[_0x596cb0(0x1f0)],_0x4b738f);_0x490eab[_0x596cb0(0x1ed)]=_0x4754c5,_0x490eab[_0x596cb0(0x1e0)]=_0x282cac;}catch(_0x2294d1){console[_0x596cb0(0x216)](_0x596cb0(0x1f2)+_0x490eab['id']+':',_0x2294d1),_0x490eab[_0x596cb0(0x1ed)]=gameCanvas[_0x596cb0(0x227)]/0x2,_0x490eab['targetGridY']=ENEMY_TOP_MARGIN;}break;}_0x490eab['attackPathT']=0x0,_0x490eab[_0x596cb0(0x1bd)]++;if(_0x490eab[_0x596cb0(0x1bd)]>=_0x16a820[_0x596cb0(0x1f5)]){_0x490eab[_0x596cb0(0x27f)]='returning',_0x490eab[_0x596cb0(0x1e1)]=0x0,_0x490eab[_0x596cb0(0x19f)]=0x0,_0x490eab[_0x596cb0(0x1fb)]=null;try{const {x:_0x46a168,y:_0x50ae49}=getCurrentGridSlotPosition(_0x490eab[_0x596cb0(0x184)],_0x490eab[_0x596cb0(0x1f0)],_0x4b738f);_0x490eab['targetGridX']=_0x46a168,_0x490eab['targetGridY']=_0x50ae49;}catch(_0xa1321b){console[_0x596cb0(0x216)](_0x596cb0(0x25d)+_0x53dfcb+_0x596cb0(0x1d0),_0xa1321b),_0x490eab['targetGridX']=gameCanvas[_0x596cb0(0x227)]/0x2,_0x490eab['targetGridY']=ENEMY_TOP_MARGIN;}}else{const _0x2bb296=_0x16a820[_0x490eab['attackPathSegmentIndex']];if(!_0x2bb296?.['p0']){console[_0x596cb0(0x216)]('Enemy\x20'+_0x53dfcb+_0x596cb0(0x1c6)+_0x490eab['attackPathSegmentIndex']+_0x596cb0(0x1a4)),_0x568ada=_0x490eab['x'],_0x1c9853=_0x490eab['y'],_0x490eab[_0x596cb0(0x27f)]=_0x596cb0(0x1b0);try{const {x:_0x5654a2,y:_0x182fdd}=getCurrentGridSlotPosition(_0x490eab[_0x596cb0(0x184)],_0x490eab[_0x596cb0(0x1f0)],_0x4b738f);_0x490eab[_0x596cb0(0x1ed)]=_0x5654a2,_0x490eab['targetGridY']=_0x182fdd;}catch(_0x5b1b21){console['error'](_0x596cb0(0x1ad)+_0x490eab['id']+':',_0x5b1b21),_0x490eab[_0x596cb0(0x1ed)]=gameCanvas['width']/0x2,_0x490eab[_0x596cb0(0x1e0)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x568ada=calculateBezierPoint(_0x490eab[_0x596cb0(0x233)],_0x1477d9['p0']['x'],_0x1477d9['p1']['x'],_0x1477d9['p2']['x'],_0x1477d9['p3']['x']),_0x1c9853=calculateBezierPoint(_0x490eab[_0x596cb0(0x233)],_0x1477d9['p0']['y'],_0x1477d9['p1']['y'],_0x1477d9['p2']['y'],_0x1477d9['p3']['y']);}catch(_0x5ed150){console[_0x596cb0(0x216)](_0x596cb0(0x1f8)+_0x490eab['id']+':',_0x5ed150),_0x568ada=_0x490eab['x'],_0x1c9853=_0x490eab['y'],_0x490eab[_0x596cb0(0x27f)]=_0x596cb0(0x1b0);try{const {x:_0x490e4f,y:_0x4a0d97}=getCurrentGridSlotPosition(_0x490eab[_0x596cb0(0x184)],_0x490eab[_0x596cb0(0x1f0)],_0x4b738f);_0x490eab[_0x596cb0(0x1ed)]=_0x490e4f,_0x490eab[_0x596cb0(0x1e0)]=_0x4a0d97;}catch(_0x9d99e8){console[_0x596cb0(0x216)](_0x596cb0(0x1cc)+_0x490eab['id']+':',_0x9d99e8),_0x490eab[_0x596cb0(0x1ed)]=gameCanvas[_0x596cb0(0x227)]/0x2,_0x490eab['targetGridY']=ENEMY_TOP_MARGIN;}break;}if(_0x490eab&&_0x490eab['state']===_0x596cb0(0x208)){const _0xa9db=_0x490eab[_0x596cb0(0x19f)]||0x0,_0x46eba3=_0x568ada+_0xa9db,_0x5eb554=_0x1c9853;_0x490eab[_0x596cb0(0x256)]=_0x46eba3-_0x1c7582,_0x490eab[_0x596cb0(0x238)]=_0x5eb554-_0x57ac5e,_0x490eab['x']=_0x46eba3,_0x490eab['y']=_0x5eb554;if(_0x490eab['y']>gameCanvas['height']+_0x508ce1*1.5){_0x490eab['state']=_0x596cb0(0x1b0),_0x490eab[_0x596cb0(0x1bd)]=0x0,_0x490eab[_0x596cb0(0x233)]=0x0,_0x490eab[_0x596cb0(0x1e1)]=0x0,_0x490eab['attackFormationOffsetX']=0x0,_0x490eab[_0x596cb0(0x1fb)]=null,_0x490eab['y']=-_0x508ce1*(1.1+Math['random']()*0.4),_0x490eab['x']=Math['random']()*(gameCanvas[_0x596cb0(0x227)]-_0x4b738f),_0x490eab[_0x596cb0(0x256)]=0x0,_0x490eab[_0x596cb0(0x238)]=0x0;try{const {x:_0x19a307,y:_0xf637eb}=getCurrentGridSlotPosition(_0x490eab[_0x596cb0(0x184)],_0x490eab['gridCol'],_0x4b738f);_0x490eab['targetGridX']=_0x19a307,_0x490eab[_0x596cb0(0x1e0)]=_0xf637eb;}catch(_0x1d5e50){console['error'](_0x596cb0(0x25d)+_0x53dfcb+_0x596cb0(0x1b3),_0x1d5e50),_0x490eab[_0x596cb0(0x1ed)]=gameCanvas[_0x596cb0(0x227)]/0x2,_0x490eab['targetGridY']=ENEMY_TOP_MARGIN;}}}break;}case _0x596cb0(0x1b0):{if(isEntrancePhaseActive)break;if(_0x490eab[_0x596cb0(0x1ed)]==null||_0x490eab['targetGridY']==null){console[_0x596cb0(0x249)]('Enemy\x20'+_0x53dfcb+_0x596cb0(0x1d7));try{const {x:_0x2cb549,y:_0x43d289}=getCurrentGridSlotPosition(_0x490eab[_0x596cb0(0x184)],_0x490eab[_0x596cb0(0x1f0)],_0x4b738f);_0x490eab['targetGridX']=_0x2cb549,_0x490eab['targetGridY']=_0x43d289;}catch(_0x1b9da5){console[_0x596cb0(0x216)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x53dfcb+'\x20in\x20returning',_0x1b9da5),_0x490eab[_0x596cb0(0x27f)]='in_grid',_0x490eab['x']=gameCanvas[_0x596cb0(0x227)]/0x2,_0x490eab['y']=ENEMY_TOP_MARGIN;break;}}const _0x1ac6f4=_0x490eab[_0x596cb0(0x1ed)],_0x3ed956=_0x490eab[_0x596cb0(0x1e0)],_0x5cafb8=_0x1ac6f4-_0x490eab['x'],_0x24d578=_0x3ed956-_0x490eab['y'],_0x2a444c=Math[_0x596cb0(0x286)](_0x5cafb8*_0x5cafb8+_0x24d578*_0x24d578),_0x8a0d36=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x6c7443=BASE_RETURN_SPEED*_0x8a0d36,_0x206d8a=_0x6c7443*0.5;_0x2a444c>_0x206d8a?(_0x490eab[_0x596cb0(0x256)]=_0x5cafb8/_0x2a444c*_0x6c7443,_0x490eab[_0x596cb0(0x238)]=_0x24d578/_0x2a444c*_0x6c7443,_0x490eab['x']+=_0x490eab['velocityX'],_0x490eab['y']+=_0x490eab['velocityY']):(_0x490eab['x']=_0x1ac6f4,_0x490eab['y']=_0x3ed956,_0x490eab[_0x596cb0(0x256)]=0x0,_0x490eab[_0x596cb0(0x238)]=0x0,_0x490eab[_0x596cb0(0x27f)]=_0x596cb0(0x1a3),_0x490eab[_0x596cb0(0x1db)]=!![],_0x490eab['attackFormationOffsetX']=0x0,_0x490eab[_0x596cb0(0x1fb)]=null,_0x490eab[_0x596cb0(0x258)](_0x596cb0(0x1a5))&&delete _0x490eab[_0x596cb0(0x1a5)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)));break;}}if(_0x490eab&&!isShowingPlayerGameOverMessage&&!(isShipCaptured&&_0x490eab['state']===_0x596cb0(0x22d))){const _0x37be41={'x':0x0,'y':0x0,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT},_0x8f1802={'x':_0x490eab['x'],'y':_0x490eab['y'],'width':_0x4b738f,'height':_0x508ce1};for(let _0x117b23=bullets['length']-0x1;_0x117b23>=0x0;_0x117b23--){const _0x1a1d3d=bullets[_0x117b23];if(!_0x1a1d3d)continue;_0x37be41['x']=_0x1a1d3d['x'],_0x37be41['y']=_0x1a1d3d['y'];if(checkCollision(_0x37be41,_0x8f1802)){const _0x47c9fd=handleEnemyHit(_0x490eab);bullets[_0x596cb0(0x1e2)](_0x117b23,0x1);if(_0x47c9fd['destroyed']){enemies[_0x596cb0(0x1e2)](_0x112585,0x1),_0x490eab=null;break;}}}}if(_0x490eab&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!isShowingPlayerGameOverMessage&&!isInvincible){const _0x4c2b85=[_0x596cb0(0x208),'following_entrance_path',_0x596cb0(0x27a),_0x596cb0(0x228)];if(_0x4c2b85[_0x596cb0(0x1ac)](_0x490eab[_0x596cb0(0x27f)])){const _0x4dcf27={'x':_0x490eab['x'],'y':_0x490eab['y'],'width':_0x4b738f,'height':_0x508ce1},_0x3a5f3d={'x':ship['x'],'y':ship['y'],'width':ship['width'],'height':ship[_0x596cb0(0x23d)]},_0x59099f=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship['width'],'height':ship[_0x596cb0(0x23d)]}:null;let _0x523428=![],_0x5f2c98=![];if(checkCollision(_0x4dcf27,_0x3a5f3d))_0x523428=!![],_0x5f2c98=![];else _0x59099f&&checkCollision(_0x4dcf27,_0x59099f)&&(_0x523428=!![],_0x5f2c98=!![]);if(_0x523428){createExplosion(_0x490eab['x']+_0x4b738f/0x2,_0x490eab['y']+_0x508ce1/0x2),playSound(lostLifeSound),enemies[_0x596cb0(0x1e2)](_0x112585,0x1),_0x490eab=null;if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x5f2c98?createExplosion(_0x59099f['x']+ship['width']/0x2,_0x59099f['y']+ship['height']/0x2):createExplosion(_0x3a5f3d['x']+ship[_0x596cb0(0x227)]/0x2,_0x3a5f3d['y']+ship['height']/0x2),isInvincible=!![],invincibilityEndTime=_0x12e10a+INVINCIBILITY_DURATION_MS;}else{playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x12e10a+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x596cb0(0x23d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console['error'](_0x596cb0(0x221));if(playerLives<=0x0){const _0x5df065=currentPlayer;if(_0x5df065===0x1)player1Lives=0x0;if(_0x5df065===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x12e10a,playerWhoIsGameOver=_0x5df065;const _0xcdab9d=_0x5df065===0x1?0x2:0x1,_0x39c5d4=_0xcdab9d===0x1?player1Lives:player2Lives;_0x39c5d4>0x0?nextActionAfterPlayerGameOver=_0x596cb0(0x1f7):nextActionAfterPlayerGameOver='show_results',bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}continue;}}}}if(ship&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isWaitingForRespawn&&!isInvincible){const _0x297e70={'x':ship['x'],'y':ship['y'],'width':ship[_0x596cb0(0x227)],'height':ship['height']},_0x11bde3=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x596cb0(0x227)],'height':ship[_0x596cb0(0x23d)]}:null;for(let _0xf2fd34=enemyBullets['length']-0x1;_0xf2fd34>=0x0;_0xf2fd34--){const _0x2ef29e=enemyBullets[_0xf2fd34];if(!_0x2ef29e){enemyBullets[_0x596cb0(0x1e2)](_0xf2fd34,0x1);continue;}const _0x596aac={'x':_0x2ef29e['x'],'y':_0x2ef29e['y'],'width':_0x2ef29e[_0x596cb0(0x227)],'height':_0x2ef29e[_0x596cb0(0x23d)]};let _0x5d4155=checkCollision(_0x297e70,_0x596aac),_0xfb7a06=0x0;!_0x5d4155&&_0x11bde3&&checkCollision(_0x11bde3,_0x596aac)&&(_0x5d4155=!![],_0xfb7a06=0x1);if(_0x5d4155){enemyBullets['splice'](_0xf2fd34,0x1);if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0xfb7a06===0x1?createExplosion(_0x11bde3['x']+ship[_0x596cb0(0x227)]/0x2,_0x11bde3['y']+ship[_0x596cb0(0x23d)]/0x2):createExplosion(_0x297e70['x']+ship[_0x596cb0(0x227)]/0x2,_0x297e70['y']+ship['height']/0x2),playSound(lostLifeSound),isInvincible=!![],invincibilityEndTime=_0x12e10a+INVINCIBILITY_DURATION_MS;}else{playerLives--,playSound(lostLifeSound),createExplosion(ship['x']+ship[_0x596cb0(0x227)]/0x2,ship['y']+ship['height']/0x2),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x12e10a+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x596cb0(0x23d)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x596cb0(0x216)](_0x596cb0(0x221));if(playerLives<=0x0){const _0x5d77ec=currentPlayer;if(_0x5d77ec===0x1)player1Lives=0x0;if(_0x5d77ec===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x12e10a,playerWhoIsGameOver=_0x5d77ec;const _0x8f6828=_0x5d77ec===0x1?0x2:0x1,_0x226120=_0x8f6828===0x1?player1Lives:player2Lives;_0x226120>0x0?nextActionAfterPlayerGameOver=_0x596cb0(0x1f7):nextActionAfterPlayerGameOver=_0x596cb0(0x239),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}if(ship&&!isShipCaptured&&!isWaitingForRespawn&&!isDualShipActive&&fallingShips[_0x596cb0(0x1f5)]>0x0&&!isInvincible){const _0x3223f5={'x':ship['x'],'y':ship['y'],'width':ship[_0x596cb0(0x227)],'height':ship[_0x596cb0(0x23d)]};for(let _0x74580a=fallingShips[_0x596cb0(0x1f5)]-0x1;_0x74580a>=0x0;_0x74580a--){const _0x56cb71=fallingShips[_0x74580a];if(!_0x56cb71)continue;const _0x463188={'x':_0x56cb71['x'],'y':_0x56cb71['y'],'width':_0x56cb71['width'],'height':_0x56cb71['height']};if(checkCollision(_0x3223f5,_0x463188)){fallingShips['splice'](_0x74580a,0x1),isDualShipActive=!![];if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];playSound(dualShipSound);break;}}}updateHitSparks();}catch(_0x4e781f){console['error'](_0x596cb0(0x19b),_0x4e781f,_0x4e781f[_0x596cb0(0x1e8)]),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x596cb0(0x213))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x596cb0(0x270));}}function switchPlayerTurn(){const _0xcacee9=_0x3e36;if(!isTwoPlayerMode)return![];stopSound(hiScoreSound),highScore=Math[_0xcacee9(0x206)](highScore,score);currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive):(player2Score=score,player2IsDualShipActive=isDualShipActive);const _0x598f6a=currentPlayer===0x1?0x2:0x1,_0x571d5c=_0x598f6a===0x1?player1Lives:player2Lives;if(_0x571d5c<=0x0){const _0x51551d=currentPlayer===0x1?player1Lives:player2Lives;return _0x51551d<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x598f6a,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],captureBeamActive=![],capturingBossId=null,isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x2e642f=_0x3e36;if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x367d7a=enemies[_0x2e642f(0x1f3)](_0x3ffc51=>_0x3ffc51&&_0x3ffc51[_0x2e642f(0x27f)]===_0x2e642f(0x1a3));if(_0x367d7a[_0x2e642f(0x1f5)]===0x0)return;const _0x590f40=Date['now'](),_0x1f1498=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x590f40-lastGridFireCheckTime<_0x1f1498)return;lastGridFireCheckTime=_0x590f40;const _0x4c8152=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x16e78f=Math[_0x2e642f(0x197)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x55b1d3=0x0;_0x367d7a[_0x2e642f(0x261)](()=>Math[_0x2e642f(0x244)]()-0.5);for(const _0x28f61e of _0x367d7a){if(_0x55b1d3>=_0x16e78f)break;if(_0x28f61e[_0x2e642f(0x24b)]===ENEMY2_TYPE||_0x28f61e[_0x2e642f(0x24b)]===ENEMY3_TYPE){if(_0x28f61e['type']===ENEMY3_TYPE&&_0x28f61e[_0x2e642f(0x1ff)])continue;Math['random']()<_0x4c8152&&(createBulletSimple(_0x28f61e)&&(playSound(enemyShootSound),_0x28f61e['lastFiredTime']=_0x590f40,_0x55b1d3++));}}}function runSingleGameUpdate(_0x55685d){const _0x309e9b=_0x3e36;try{const _0x4dc932=Date[_0x309e9b(0x1f9)]();if(isManualControl&&connectedGamepadIndex!==null&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isPaused&&!isShipCaptured){const _0x4e9974=navigator[_0x309e9b(0x267)]();if(_0x4e9974?.[connectedGamepadIndex]){const _0x2b996e=_0x4e9974[connectedGamepadIndex],_0x48cb50=processSingleController(_0x2b996e,previousButtonStates);previousButtonStates=_0x48cb50[_0x309e9b(0x1e9)];if(_0x48cb50[_0x309e9b(0x18c)]){stopGameAndShowMenu();return;}}else{if(previousButtonStates[_0x309e9b(0x1f5)]>0x0)previousButtonStates=[];}}else{if(connectedGamepadIndex===null){if(previousButtonStates[_0x309e9b(0x1f5)]>0x0)previousButtonStates=[];}}if(connectedGamepadIndexP2===null){if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}if(isPaused){renderGame();return;}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode){if(_0x4dc932-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![];if(nextActionAfterPlayerGameOver===_0x309e9b(0x1f7)){if(switchPlayerTurn()){let _0x114fff=level;playerWhoIsGameOver===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,_0x114fff=level),currentPlayer===0x1?player1MaxLevelReached=Math['max'](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x309e9b(0x206)](player2MaxLevelReached,level),resetWave();}else triggerFinalGameOverSequence();}else nextActionAfterPlayerGameOver==='show_results'?triggerFinalGameOverSequence():(console['error'](_0x309e9b(0x1c5),nextActionAfterPlayerGameOver),triggerFinalGameOverSequence());renderGame();return;}else{renderGame();return;}}if(isShowingCaptureMessage){const _0x4f8596=enemies[_0x309e9b(0x22f)](_0x29ce0e=>_0x29ce0e['id']===capturedBossIdWithMessage);if(_0x4f8596&&_0x4f8596[_0x309e9b(0x27f)]===_0x309e9b(0x25b)){const _0x429200=_0x4dc932-captureMessageStartTime,_0x14ae3c=Math['min'](0x1,_0x429200/CAPTURE_MESSAGE_DURATION);_0x4f8596[_0x309e9b(0x1fe)]=_0x14ae3c*0x2*(0x2*Math['PI']);}else _0x4f8596&&(_0x4f8596['captureAnimationRotation']=0x0);if(_0x4dc932-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],stopSound(shipCapturedSound),captureBeamActive=![],capturingBossId=null;if(_0x4f8596&&_0x4f8596[_0x309e9b(0x27f)]===_0x309e9b(0x25b)){_0x4f8596['state']=_0x309e9b(0x1b0),_0x4f8596[_0x309e9b(0x1fe)]=0x0;try{const _0x4ca601=_0x4f8596[_0x309e9b(0x24b)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x5c5472,y:_0xbb6092}=getCurrentGridSlotPosition(_0x4f8596[_0x309e9b(0x184)],_0x4f8596[_0x309e9b(0x1f0)],_0x4ca601);_0x4f8596[_0x309e9b(0x1ed)]=_0x5c5472,_0x4f8596[_0x309e9b(0x1e0)]=_0xbb6092;}catch(_0x1d4129){console[_0x309e9b(0x216)]('[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x4f8596['id']+':',_0x1d4129),_0x4f8596[_0x309e9b(0x1ed)]=gameCanvas[_0x309e9b(0x227)]/0x2,_0x4f8596[_0x309e9b(0x1e0)]=ENEMY_TOP_MARGIN;}}else _0x4f8596?(console[_0x309e9b(0x249)](_0x309e9b(0x1b8)+capturedBossIdWithMessage+_0x309e9b(0x1df)),_0x4f8596[_0x309e9b(0x1fe)]=0x0):console[_0x309e9b(0x249)](_0x309e9b(0x229)+capturedBossIdWithMessage+_0x309e9b(0x272));capturedBossIdWithMessage=null;}isInGameState&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(moveEntities(),updateExplosions(),updateFloatingScores());renderGame();return;}!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(!isManualControl&&isInGameState&&playerLives>0x0&&aiControl(),isInGameState&&isManualControl&&playerLives>0x0&&handlePlayerInput());isInGameState&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&!isShowingCaptureMessage&&(moveEntities(),updateExplosions(),updateFloatingScores());isInvincible&&_0x4dc932>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0);if(isCsCompletionDelayActive&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(_0x4dc932-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY){isCsCompletionDelayActive=![];csCompletionResultIsPerfect?(playSound(csPerfectSound),showCsHitsMessage=!![],csHitsMessageStartTime=_0x4dc932):(playSound(csClearSound),showCSClearMessage=!![],csClearMessageStartTime=_0x4dc932);renderGame();return;}else{renderGame();return;}}let _0x25e5a6=![],_0x16d4ef=![];if(!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(showCsHitsMessage)Date['now']()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION&&(showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x4dc932),_0x16d4ef=!![];else{if(showPerfectMessage)Date[_0x309e9b(0x1f9)]()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION&&(showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x4dc932),_0x16d4ef=!![];else{if(showCsBonusScoreMessage)Date[_0x309e9b(0x1f9)]()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION&&(showCsBonusScoreMessage=![],_0x25e5a6=!![]),_0x16d4ef=!![];else{if(showCSClearMessage)Date[_0x309e9b(0x1f9)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]),Date['now']()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]),Date[_0x309e9b(0x1f9)]()-csClearMessageStartTime>=CS_CLEAR_DELAY&&(showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x25e5a6=!![]),_0x16d4ef=!![];else showExtraLifeMessage&&(Date[_0x309e9b(0x1f9)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![],_0x25e5a6=!![]),_0x16d4ef=!![]);}}}}if(_0x16d4ef){renderGame();return;}if(isShowingIntro&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){let _0x45ec0c=![];const _0x12cc3c=_0x4dc932-introDisplayStartTime,_0x5f3d75=0xbb8,_0x471b3d=INTRO_DURATION_PER_STEP;if(introStep===0x1)isTwoPlayerMode&&!playerIntroSoundPlayed&&(playSound(levelUpSound),playerIntroSoundPlayed=!![]),level===0x1&&currentPlayer===0x1&&!playerIntroSoundPlayed&&(playSound(startSound),playerIntroSoundPlayed=!![]);else{if(introStep===0x2)!isTwoPlayerMode&&level>0x1&&!isChallengingStage&&!stageIntroSoundPlayed&&(playSound(levelUpSound),stageIntroSoundPlayed=!![]);else introStep===0x3&&(!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]));}if(introStep===0x1){let _0x38f6c0=isTwoPlayerMode?_0x5f3d75:_0x471b3d;if(level===0x1&&!isTwoPlayerMode)_0x38f6c0=_0x471b3d;_0x12cc3c>=_0x38f6c0&&(isChallengingStage?introStep=0x3:introStep=0x2,introDisplayStartTime=_0x4dc932);}else{if(introStep===0x2){const _0xf6179a=_0x471b3d;_0x12cc3c>=_0xf6179a&&(_0x45ec0c=!![]);}else introStep===0x3&&(_0x12cc3c>=_0x471b3d&&(_0x45ec0c=!![]));}if(_0x45ec0c){isShowingIntro=![],introStep=0x0;!isChallengingStage?aiCanShootTime=Date[_0x309e9b(0x1f9)]()+0xbb8:aiCanShootTime=0x0;if(isChallengingStage)startChallengingStageSequence();else{currentWaveDefinition=generateWaveDefinition(level);if(currentWaveDefinition&&currentWaveDefinition['length']>0x0)isFullGridWave?startFullGridWave():scheduleEntranceFlightWave();else{console['warn'](_0x309e9b(0x1b2)+level+_0x309e9b(0x201)),isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![];const _0xc9081a=0x64;setTimeout(()=>{(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave==='function'&&(playerLives>0x0?resetWave():triggerFinalGameOverSequence());},_0xc9081a);}}}renderGame();return;}gameJustStarted&&(gameJustStarted=![]);if(!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&playerLives>0x0){const _0x94a8f2=enemies[_0x309e9b(0x205)](_0x2dc23a=>_0x2dc23a?.[_0x309e9b(0x27f)]==='in_grid');if(_0x94a8f2&&isGridBreathingActive){const _0x5b3531=_0x4dc932-gridBreathStartTime,_0x450cd9=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0xf04b99=_0x5b3531%_0x450cd9;currentGridBreathFactor=(Math[_0x309e9b(0x1d1)](_0xf04b99/_0x450cd9*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x94a8f2&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x94a8f2&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x4dc932,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x3cb885=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x1e102a=enemies[_0x309e9b(0x205)](_0x43a719=>_0x43a719?.[_0x309e9b(0x27f)]===_0x309e9b(0x1fc)||_0x43a719?.[_0x309e9b(0x27f)]===_0x309e9b(0x1cb)||_0x43a719?.['state']===_0x309e9b(0x27a));if(totalEnemiesScheduledForWave>0x0&&_0x3cb885&&!_0x1e102a){const _0x574f11=isEntrancePhaseActive;isEntrancePhaseActive=![],_0x574f11&&(stopSound(entranceSound),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0x309e9b(0x1bc)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![],!isChallengingStage&&typeof triggerImmediateCaptureDive===_0x309e9b(0x213)&&triggerImmediateCaptureDive());}}!isChallengingStage&&!isShowingIntro&&!isPaused&&!isWaveTransitioning&&triggerGridFiring();if(!isWaveTransitioning&&playerLives>0x0&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x138731=enemies[_0x309e9b(0x1f5)]===0x0,_0x310b2e=fallingShips[_0x309e9b(0x1f5)]===0x0,_0x4270d5=![];isChallengingStage?_0x138731&&!isEntrancePhaseActive&&(_0x4270d5=!![]):_0x138731&&!isEntrancePhaseActive&&_0x310b2e&&(_0x4270d5=!![]);if(_0x4270d5){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);!isManualControl&&ship&&gameCanvas?.[_0x309e9b(0x227)]>0x0&&(ship['x']=Math[_0x309e9b(0x197)](gameCanvas['width']/0x2-ship['width']/0x2),ship[_0x309e9b(0x23e)]=ship['x']);isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);bullets=[],enemyBullets=[],explosions=[],enemySpawnTimeouts[_0x309e9b(0x1bc)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,floatingScores=[];const _0x5c2ab1=currentPlayer;isTwoPlayerMode&&_0x5c2ab1===0x1&&(player1CompletedLevel=level);let _0x1e59eb;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,isCsCompletionDelayActive=!![],csCompletionDelayStartTime=_0x4dc932;if(csCompletionResultIsPerfect){const _0x21bd72=score;score+=0x2710,highScore=Math['max'](highScore,score);let _0x45bb10=![],_0x56afce=null;if(!isManualControl)_0x45bb10=player1TriggeredHighScoreSound,_0x56afce=()=>{player1TriggeredHighScoreSound=!![];};else isTwoPlayerMode?currentPlayer===0x1?(_0x45bb10=player1TriggeredHighScoreSound,_0x56afce=()=>{player1TriggeredHighScoreSound=!![];}):(_0x45bb10=player2TriggeredHighScoreSound,_0x56afce=()=>{player2TriggeredHighScoreSound=!![];}):(_0x45bb10=player1TriggeredHighScoreSound,_0x56afce=()=>{player1TriggeredHighScoreSound=!![];});if(!_0x45bb10&&score>highScore-0x2710){if(_0x56afce)_0x56afce();playSound(hiScoreSound);}if(currentPlayer===0x1)player1Score=score;else player2Score=score;checkAndAwardExtraLife(),_0x1e59eb=CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else checkAndAwardExtraLife(),_0x1e59eb=CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x1e59eb+=0x64;}else playSound(waveUpSound),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,_0x1e59eb=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x56cf7b=_0x309e9b;let _0x52fd4d=![],_0x5a09f9=currentPlayer;if(isTwoPlayerMode){if(currentPlayer===0x1)player1Score=score;else player2Score=score;const _0x16e311=switchPlayerTurn();_0x16e311?(_0x5a09f9=currentPlayer,_0x5c2ab1===0x2&&player1CompletedLevel===level?(_0x52fd4d=!![],player1CompletedLevel=-0x1):_0x52fd4d=![]):(_0x5a09f9=_0x5c2ab1,_0x52fd4d=!![],player1CompletedLevel=-0x1);}else _0x5a09f9=0x1,_0x52fd4d=!![];_0x52fd4d&&level++;const _0x6118ac=_0x5a09f9===0x1?player1Lives:player2Lives;_0x6118ac>0x0?(_0x5a09f9===0x1?player1MaxLevelReached=Math[_0x56cf7b(0x206)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x56cf7b(0x206)](player2MaxLevelReached,level),resetWave()):(console[_0x56cf7b(0x216)](_0x56cf7b(0x284)),triggerFinalGameOverSequence());},_0x1e59eb),renderGame();return;}if(!isChallengingStage){if(enemies[_0x309e9b(0x1f5)]>0x0){let _0x3bd5ab=null;const _0x30449e=enemies[_0x309e9b(0x1f3)](_0x61e158=>_0x61e158?.['state']===_0x309e9b(0x1a3)),_0xdae6b9=_0x30449e['length']<=0x3,_0x4bb87a=Math[_0x309e9b(0x206)](0x1,Math['min'](level,LEVEL_CAP_FOR_SCALING)),_0x5012a3=0x1068,_0x43ece6=0x320,_0x2c48c4=(_0x4bb87a-0x1)*((_0x5012a3-_0x43ece6)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x2612c0=Math[_0x309e9b(0x206)](_0x43ece6,_0x5012a3-_0x2c48c4),_0x120e32=Math[_0x309e9b(0x197)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x3a09ed=enemies[_0x309e9b(0x1f3)](_0x502c93=>_0x502c93?.[_0x309e9b(0x27f)]===_0x309e9b(0x208)||_0x502c93?.[_0x309e9b(0x27f)]===_0x309e9b(0x20b))[_0x309e9b(0x1f5)];if(_0xdae6b9||_0x4dc932-lastEnemyDetachTime>_0x2612c0&&_0x30449e[_0x309e9b(0x1f5)]>0x0&&_0x3a09ed<_0x120e32){_0x3bd5ab=findAndDetachEnemy();if(_0x3bd5ab&&_0x3bd5ab[_0x309e9b(0x1f5)]>0x0){const _0x3b5dfc=_0x3bd5ab[_0x309e9b(0x199)](_0x51c9d1=>enemies[_0x309e9b(0x22f)](_0x5dccc5=>_0x5dccc5?.['id']===_0x51c9d1['id']))[_0x309e9b(0x1f3)](_0x15c579=>_0x15c579&&_0x15c579[_0x309e9b(0x27f)]===_0x309e9b(0x1a3));if(_0x3b5dfc[_0x309e9b(0x1f5)]>0x0){const _0x14fe4a=_0x3b5dfc[0x0],_0x34b320=_0x14fe4a[_0x309e9b(0x185)];!_0xdae6b9&&(lastEnemyDetachTime=_0x4dc932);if(_0x34b320===_0x309e9b(0x27b)){const _0xbc3308=generateAttackPath(_0x14fe4a);if(_0xbc3308&&_0xbc3308[_0x309e9b(0x1f5)]>0x0){_0x3b5dfc[_0x309e9b(0x1f5)]===0x3&&_0x14fe4a[_0x309e9b(0x24b)]===ENEMY3_TYPE&&level!==0x1&&playSound(tripleAttackSound);let _0x2cff56=[..._0x3b5dfc];const _0x38d821=_0x2cff56['length'];if(_0x38d821>0x1){let _0x1654d1=null,_0x555d4d=[];_0x2cff56[_0x309e9b(0x1bc)](_0x548700=>{const _0x138624=_0x309e9b;if(_0x548700['type']===ENEMY3_TYPE)_0x1654d1=_0x548700;else _0x555d4d[_0x138624(0x20a)](_0x548700);});_0x1654d1&&level!==0x1&&_0x38d821===0x3&&_0x555d4d[_0x309e9b(0x1f5)]===0x2?_0x2cff56=[_0x555d4d[0x0],_0x1654d1,_0x555d4d[0x1]]:_0x2cff56[_0x309e9b(0x261)]((_0x217cf5,_0x5d7179)=>(_0x217cf5?.[_0x309e9b(0x1f0)]??0x0)-(_0x5d7179?.['gridCol']??0x0));const _0x385387=0x5;let _0x3f09e2=0x0;_0x2cff56=_0x2cff56[_0x309e9b(0x1f3)](_0x36041f=>_0x36041f&&typeof _0x36041f[_0x309e9b(0x227)]===_0x309e9b(0x21b));const _0x53e462=_0x2cff56[_0x309e9b(0x1f5)];for(let _0x41cfd0=0x0;_0x41cfd0<_0x53e462;_0x41cfd0++){_0x3f09e2+=_0x2cff56[_0x41cfd0][_0x309e9b(0x227)];if(_0x41cfd0<_0x53e462-0x1)_0x3f09e2+=_0x385387;}const _0x281bc9=-_0x3f09e2/0x2;let _0x450d1e=_0x281bc9;for(let _0x1368e6=0x0;_0x1368e6<_0x53e462;_0x1368e6++){const _0x2e339a=_0x2cff56[_0x1368e6];_0x2e339a[_0x309e9b(0x19f)]=_0x450d1e+_0x2e339a['width']/0x2,_0x450d1e+=_0x2e339a[_0x309e9b(0x227)]+_0x385387;}}else _0x2cff56[_0x309e9b(0x1bc)](_0x1c9cd1=>_0x1c9cd1[_0x309e9b(0x19f)]=0x0);const _0x191a62=_0x309e9b(0x1cf)+_0x14fe4a['id']+'-'+_0x4dc932;_0x2cff56['forEach'](_0x3fdd63=>{if(_0x3fdd63)_0x3fdd63['attackGroupId']=_0x191a62;});let _0x204851=![],_0x3b5afa=GROUP_FIRE_BURST_DELAY;if(_0x14fe4a[_0x309e9b(0x24b)]===ENEMY2_TYPE||_0x14fe4a[_0x309e9b(0x24b)]===ENEMY3_TYPE)_0x204851=!![],_0x14fe4a[_0x309e9b(0x24b)]===ENEMY2_TYPE&&_0x38d821===0x1&&(_0x3b5afa=SOLO_BUTTERFLY_FIRE_DELAY);else _0x14fe4a[_0x309e9b(0x24b)]===ENEMY1_TYPE&&(_0x204851=!![]);_0xdae6b9&&level>0x1&&(_0x204851=![]),_0x204851&&_0x2cff56[_0x309e9b(0x1bc)](_0x2a4a6c=>{const _0x4f1bf4=_0x309e9b,_0x2d5284=_0x2a4a6c&&!(_0x2a4a6c[_0x4f1bf4(0x24b)]===ENEMY3_TYPE&&_0x2a4a6c['hasCapturedShip']);_0x2d5284&&fireEnemyBurst(_0x2a4a6c['id'],_0x4f1bf4(0x208),_0x3b5afa);}),_0x2cff56[_0x309e9b(0x1bc)]((_0x1b06c4,_0x517d09)=>{const _0x3e72ee=_0x309e9b;_0x1b06c4&&_0x1b06c4[_0x3e72ee(0x27f)]===_0x3e72ee(0x1a3)&&(_0x1b06c4[_0x3e72ee(0x27f)]=_0x3e72ee(0x20b),_0x1b06c4[_0x3e72ee(0x1db)]=![],_0x1b06c4[_0x3e72ee(0x256)]=0x0,_0x1b06c4['velocityY']=0x0,_0x1b06c4[_0x3e72ee(0x1c4)]=![],setTimeout(()=>{const _0x20b38d=_0x3e72ee;if(isPaused)return;const _0x187a04=enemies['find'](_0xd198f7=>_0xd198f7?.['id']===_0x1b06c4['id']);if(_0x187a04&&_0x187a04[_0x20b38d(0x27f)]===_0x20b38d(0x20b))try{const _0x354184=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x1a611f=0x1;if(_0x187a04['type']===ENEMY1_TYPE)_0x1a611f=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x187a04[_0x20b38d(0x24b)]===ENEMY2_TYPE)_0x1a611f=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x187a04[_0x20b38d(0x24b)]===ENEMY3_TYPE)_0x1a611f=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x1b06c4['type']===ENEMY3_TYPE)playSound(bossGalagaDiveSound);else playSound(butterflyDiveSound);_0x187a04['state']=_0x20b38d(0x208),_0x187a04[_0x20b38d(0x188)]=_0xbc3308,_0x187a04[_0x20b38d(0x1bd)]=0x0,_0x187a04['attackPathT']=0x0,_0x187a04[_0x20b38d(0x223)]=_0x354184*_0x1a611f,_0x187a04[_0x20b38d(0x1e1)]=0x0,_0x187a04['canFireThisDive']=!![];}catch(_0x5c2dde){console[_0x20b38d(0x216)](_0x20b38d(0x259)+_0x1b06c4['id']+':',_0x5c2dde);}},_0x517d09*GROUP_DETACH_DELAY_MS));});}else console[_0x309e9b(0x249)]('[DEBUG\x20Attack\x20Path\x20Failed]\x20Could\x20not\x20generate\x20path\x20for\x20leader\x20'+_0x14fe4a?.['id']+_0x309e9b(0x247)),_0x3bd5ab[_0x309e9b(0x1bc)](_0x48ab1a=>{const _0x34c63b=_0x309e9b;if(_0x48ab1a)_0x48ab1a[_0x34c63b(0x1db)]=![];});}}}}}}enemies[_0x309e9b(0x1bc)](_0x1e9caa=>{const _0x5caf21=_0x309e9b;if(_0x1e9caa&&_0x1e9caa[_0x5caf21(0x24b)]===ENEMY3_TYPE&&_0x1e9caa[_0x5caf21(0x1ff)]&&_0x1e9caa[_0x5caf21(0x27f)]===_0x5caf21(0x208)&&_0x1e9caa[_0x5caf21(0x1a0)]&&typeof _0x1e9caa[_0x5caf21(0x20e)]===_0x5caf21(0x21b)){if(_0x4dc932-_0x1e9caa[_0x5caf21(0x20e)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x128e8c=_0x1e9caa['x']+_0x1e9caa[_0x5caf21(0x227)]/0x2,_0x1fc28e=_0x1e9caa['y']+_0x1e9caa['height']+_0x1e9caa[_0x5caf21(0x1a0)][_0x5caf21(0x23d)]*0.5,_0x43342a={'x':_0x128e8c,'y':_0x1fc28e};createBulletSimple(_0x1e9caa,_0x43342a)&&(_0x1e9caa['capturedShipLastFiredTime']=_0x4dc932,playSound(playerShootSound));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x30baa0=_0x4dc932-gameOverSequenceStartTime,_0x1a5241=_0x30baa0>=GAME_OVER_DURATION;_0x1a5241&&!isShowingResultsScreen&&(isShowingResultsScreen=!![],stopSound(gameOverSound),playSound(resultsMusicSound,!![]));}}renderGame();}catch(_0x4556a7){console[_0x309e9b(0x216)](_0x309e9b(0x1af),_0x4556a7,_0x4556a7[_0x309e9b(0x1e8)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x309e9b(0x1a8)),stopAllGameSounds(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x309e9b(0x213)&&showMenuState();}catch(_0x404dcd){console[_0x309e9b(0x216)](_0x309e9b(0x21a),_0x404dcd);}}}function checkAndAwardExtraLife(){const _0x282d21=_0x3e36;try{let _0x3b99b8;!isManualControl||!isTwoPlayerMode?_0x3b99b8=player1LifeThresholdsMet:_0x3b99b8=currentPlayer===0x1?player1LifeThresholdsMet:player2LifeThresholdsMet;let _0x52594c=![];while(!![]){let _0x5aca94=![],_0x4ff59f=-0x1;const _0x546564=_0x3b99b8['size'];_0x546564===0x0?_0x4ff59f=EXTRA_LIFE_THRESHOLD_1:_0x4ff59f=EXTRA_LIFE_THRESHOLD_2+(_0x546564-0x1)*RECURRING_EXTRA_LIFE_INTERVAL;if(_0x4ff59f!==-0x1&&score>=_0x4ff59f&&!_0x3b99b8['has'](_0x4ff59f)){playerLives++,_0x3b99b8[_0x282d21(0x21e)](_0x4ff59f),_0x52594c=!![],_0x5aca94=!![];if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}}if(!_0x5aca94)break;}_0x52594c&&!showExtraLifeMessage&&(showExtraLifeMessage=!![],extraLifeMessageStartTime=Date[_0x282d21(0x1f9)](),playSound(extraLifeSound));}catch(_0x480e45){console[_0x282d21(0x216)]('Error\x20checking/awarding\x20extra\x20life:',_0x480e45);}}function triggerFinalGameOverSequence(){const _0x181c5e=_0x3e36;if(isInGameState&&gameOverSequenceStartTime===0x0){isPaused=![],isShowingDemoText=![],isShowingIntro=![],isWaveTransitioning=![],showCsHitsMessage=![],showExtraLifeMessage=![],showPerfectMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showReadyMessage=![],showCsBonusScoreMessage=![],isShowingPlayerGameOverMessage=![],isEntrancePhaseActive=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![];isManualControl&&saveHighScore();stopSound(gridBackgroundSound),stopSound(menuMusicSound),stopSound(resultsMusicSound),stopSound(captureSound),stopSound(entranceSound),isGridSoundPlaying=![];const _0x11b2ab=Date[_0x181c5e(0x1f9)]();!isTwoPlayerMode?(playSound(gameOverSound),gameOverSequenceStartTime=_0x11b2ab):(gameOverSequenceStartTime=_0x11b2ab-GAME_OVER_DURATION,playSound(resultsMusicSound,!![]),isShowingResultsScreen=!![]),bullets=[],enemyBullets=[],explosions=[],fallingShips=[],isDualShipActive=![],previousButtonStates=[],previousGameButtonStates=[],previousGameButtonStatesP2=[];}}function _0x3606(){const _0x2b9b4d=['pathId','CS_LoopAttack_TL','back','\x20(Entrance\x201):\x20Basis\x20patroon\x200\x20is\x20ongeldig\x20of\x20leeg!','CRITICAL:\x20Required\x20CS\x20path\x20\x22','Error\x20updating\x20floating\x20scores:','\x20attacking,\x20index\x20','Error\x20deep\x20copying\x20selected\x20pattern\x200\x20for\x20Full\x20Grid:','Error\x20getting\x20grid\x20pos\x20for\x20','findIndex','\x20(Sq\x20','\x22\x20not\x20found!\x20Aborting\x20CS.','Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20','round','25YLdOuN','map','Enemy\x20','FATAL\x20Error\x20in\x20moveEntities:','scheduledStartTime','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','hasFiredPostLanding','attackFormationOffsetX','capturedShipDimensions','diveStartTime','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','in_grid','!\x20Returning.','returnLogDone','408474QOGXCK','floor','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','3906GSUpyt','substring','includes','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!','returning','initialCaptureAnimationY','Wave\x20','\x20off\x20screen:','hasFired','Invalid\x20start\x20segment\x20for\x20path\x20',')!\x20Returning.','atan2','[Capture\x20Message\x20End]\x20Boss\x20','tintProgress','Error\x20handling\x20player\x20input:',')\x20for\x20','forEach','attackPathSegmentIndex','unknown','firstEnemyId','capturedShipY','\x20(no\x20attack\x20path):','CS_LoopAttack_BR','CRITICAL:\x20normalWaveEntrancePaths\x20is\x20not\x20defined\x20or\x20empty\x20in\x20generateWaveDefinition\x20(Level\x20','canFireThisDive','[Player\x20GO\x20Delay\x20End]\x20Invalid\x20next\x20action:','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','40884RQIHhc','rotation','Error\x20creating\x20player\x20bullet(s):','every','moving_to_grid','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20',':\x20Squadron\x20\x22','1656giDGjh','attack-','\x20after\x20attack:','sin','object','health','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!','!\x20Removing.',').\x20Skipping.','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','left','cos','Error\x20in\x20findAndDetachEnemy:','justReturned','enemies','entrance_flight_2','isArray','\x20state\x20changed\x20unexpectedly.\x20Resetting\x20rotation.','targetGridY','lastFiredTime','splice','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','Error\x20deep\x20copying\x20selected\x20pattern\x201\x20for\x20Entrance\x202:','pathSpeedMultiplier','15534QfjRWc','stack','newButtonStates','\x20has\x20invalid\x20segment\x20','preparing_capture','CS:\x20Path\x20','targetGridX','Error\x20deep\x20copying\x20selected\x20pattern\x200\x20for\x20Entrance\x201:','keys','gridCol','\x20invalid\x20or\x20not\x20found\x20in\x20normalWaveEntrancePaths!\x20Skipping\x20squadron.','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','filter','CS_HorizontalFlyByL','length','\x20invalid!\x20Skipping.','switch_player','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','now','enemy-grid-','attackGroupId','following_entrance_path','CS_LoopAttack_TR','captureAnimationRotation','hasCapturedShip','Error\x20in\x20triggerImmediateCaptureDive:','\x20definition\x20failed.\x20Transitioning\x20immediately.','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.',')!\x20Cannot\x20validate\x20paths.','):\x20Path\x20','some','max','CS\x20Enemy\x20','attacking','pathSegmentIndex','push','preparing_attack','744IOJzLQ',',\x20Squadron\x20','capturedShipLastFiredTime','Error\x20during\x20post-landing\x20fire\x20for\x20','185352wwGmRd','CRITICAL:\x20waveEntrancePatterns\x20is\x20not\x20defined\x20or\x20invalid\x20in\x20generateWaveDefinition\x20(Level\x20','54reEWpO','function','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','squadronId','error','pathT','\x20(invalid\x20attack\x20index):','.\x20Skipping.','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','number','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','\x20has\x20invalid\x20enemy\x20data.','add','duration','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20','Cannot\x20reposition\x20ship\x20Y\x20-\x20ship\x20or\x20canvas\x20not\x20ready.',')\x20during\x20shift:','speed','\x20following\x20invalid\x20path\x20','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','width','diving_to_capture_position','[Capture\x20Message\x20End]\x20Could\x20not\x20find\x20Boss\x20','\x20for\x20squadron\x20',').\x20Throwing\x20error.','abs','capturing','Attempted\x20to\x20schedule\x20entrance\x20flight\x20wave\x20without\x20valid\x20definition.','find','log',',\x20isFullGrid:\x20','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','attackPathT','),\x20index\x20','\x20in\x20moving_to_grid','targetY','Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.','velocityY','show_results','captureStartTime','alpha','Invalid\x20start\x20segment\x20for\x20active\x20path\x20','height','targetX','completed','CS3_DiveLoopR_Sharp','indexOf','Boss\x20','string','random','stringify','\x20(Entrance\x202):\x20Basis\x20patroon\x201\x20is\x20ongeldig\x20of\x20leeg!','.\x20Skipping\x20attack.',',\x20Path\x20','warn','undefined','type','entrancePathId',',\x20isCS:\x20','230451peeKKg','challenging_stage','CS_HorizontalFlyByR','\x20at\x20[','\x22\x20does\x20not\x20exist\x20in\x20normalWaveEntrancePaths!\x20Removing\x20squadron.',',\x20Pattern\x20','creationTime','shoot','velocityX','\x20(invalid\x20attack\x20segment):','hasOwnProperty','Error\x20starting\x20attack\x20for\x20','[findAndDetachEnemy\x20-\x20PRIORITY]\x20Ship\x20captured.\x20Selecting\x20Boss\x20','showing_capture_message','has','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','toString',',\x20Idx\x20','slice','sort','capturePrepareTimeout','\x20(state:\x20','boss_loop_right','\x20for\x20MUST\x20DIVE\x20(Normal\x20attack).','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','getGamepads','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','Full\x20Grid:\x20Squadron\x20','!\x20Moving\x20to\x20grid.','\x22\x20invalid\x20or\x20missing\x20in\x20normalWaveEntrancePaths!\x20Removing\x20enemy.','min','FATAL\x20Error\x20in\x20resetWave:','right','enemy-entr-','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','CS_LoopAttack_BL','\x20to\x20reset\x20state/rotation.','\x20attacking,\x20invalid\x20segment\x20','enemy-cs-','total','\x20voor\x20level\x20','single','entrance_flight_1','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','following_bezier_path','normal','boss_loop_left',':\x20Enemy\x20entrancePathId\x20\x22',':\x20Squadron\x20pathId\x20\x22','state','Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20','capturedShipX','FATAL\x20Error\x20in\x20resetGame:','particles','Error:\x20Tried\x20to\x20start\x20wave\x20for\x20player\x20with\x200\x20lives.\x20Triggering\x20Game\x20Over.','full_grid','sqrt',',\x20index\x20','parse','6590EXGyuH','gridRow','attackType','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','2519RKJatQ','attackPathSegments','isDamaged'];_0x3606=function(){return _0x2b9b4d;};return _0x3606();}function triggerGameOver(){triggerFinalGameOverSequence();}